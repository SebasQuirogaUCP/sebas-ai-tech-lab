var gX=Object.defineProperty;var vX=(t,e,n)=>e in t?gX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var zS=(t,e,n)=>vX(t,typeof e!="symbol"?e+"":e,n);function s4(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();function Ui(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function yX(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var FS={exports:{}},mh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a_;function xX(){if(a_)return mh;a_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,a,i){var s=null;if(i!==void 0&&(s=""+i),a.key!==void 0&&(s=""+a.key),"key"in a){i={};for(var o in a)o!=="key"&&(i[o]=a[o])}else i=a;return a=i.ref,{$$typeof:t,type:r,key:s,ref:a!==void 0?a:null,props:i}}return mh.Fragment=e,mh.jsx=n,mh.jsxs=n,mh}var i_;function bX(){return i_||(i_=1,FS.exports=xX()),FS.exports}var O=bX(),jS={exports:{}},Je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s_;function wX(){if(s_)return Je;s_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),p=Symbol.iterator;function g(j){return j===null||typeof j!="object"?null:(j=p&&j[p]||j["@@iterator"],typeof j=="function"?j:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,b={};function w(j,q,Z){this.props=j,this.context=q,this.refs=b,this.updater=Z||v}w.prototype.isReactComponent={},w.prototype.setState=function(j,q){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,q,"setState")},w.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function S(){}S.prototype=w.prototype;function k(j,q,Z){this.props=j,this.context=q,this.refs=b,this.updater=Z||v}var N=k.prototype=new S;N.constructor=k,x(N,w.prototype),N.isPureReactComponent=!0;var I=Array.isArray;function T(){}var R={H:null,A:null,T:null,S:null},_=Object.prototype.hasOwnProperty;function M(j,q,Z){var se=Z.ref;return{$$typeof:t,type:j,key:q,ref:se!==void 0?se:null,props:Z}}function P(j,q){return M(j.type,q,j.props)}function $(j){return typeof j=="object"&&j!==null&&j.$$typeof===t}function z(j){var q={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(Z){return q[Z]})}var W=/\/+/g;function H(j,q){return typeof j=="object"&&j!==null&&j.key!=null?z(""+j.key):q.toString(36)}function G(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(T,T):(j.status="pending",j.then(function(q){j.status==="pending"&&(j.status="fulfilled",j.value=q)},function(q){j.status==="pending"&&(j.status="rejected",j.reason=q)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function F(j,q,Z,se,pe){var Se=typeof j;(Se==="undefined"||Se==="boolean")&&(j=null);var be=!1;if(j===null)be=!0;else switch(Se){case"bigint":case"string":case"number":be=!0;break;case"object":switch(j.$$typeof){case t:case e:be=!0;break;case f:return be=j._init,F(be(j._payload),q,Z,se,pe)}}if(be)return pe=pe(j),be=se===""?"."+H(j,0):se,I(pe)?(Z="",be!=null&&(Z=be.replace(W,"$&/")+"/"),F(pe,q,Z,"",function(Ne){return Ne})):pe!=null&&($(pe)&&(pe=P(pe,Z+(pe.key==null||j&&j.key===pe.key?"":(""+pe.key).replace(W,"$&/")+"/")+be)),q.push(pe)),1;be=0;var Te=se===""?".":se+":";if(I(j))for(var ae=0;ae<j.length;ae++)se=j[ae],Se=Te+H(se,ae),be+=F(se,q,Z,Se,pe);else if(ae=g(j),typeof ae=="function")for(j=ae.call(j),ae=0;!(se=j.next()).done;)se=se.value,Se=Te+H(se,ae++),be+=F(se,q,Z,Se,pe);else if(Se==="object"){if(typeof j.then=="function")return F(G(j),q,Z,se,pe);throw q=String(j),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return be}function V(j,q,Z){if(j==null)return j;var se=[],pe=0;return F(j,se,"","",function(Se){return q.call(Z,Se,pe++)}),se}function U(j){if(j._status===-1){var q=j._result;q=q(),q.then(function(Z){(j._status===0||j._status===-1)&&(j._status=1,j._result=Z)},function(Z){(j._status===0||j._status===-1)&&(j._status=2,j._result=Z)}),j._status===-1&&(j._status=0,j._result=q)}if(j._status===1)return j._result.default;throw j._result}var Y=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},oe={map:V,forEach:function(j,q,Z){V(j,function(){q.apply(this,arguments)},Z)},count:function(j){var q=0;return V(j,function(){q++}),q},toArray:function(j){return V(j,function(q){return q})||[]},only:function(j){if(!$(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return Je.Activity=h,Je.Children=oe,Je.Component=w,Je.Fragment=n,Je.Profiler=a,Je.PureComponent=k,Je.StrictMode=r,Je.Suspense=l,Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Je.__COMPILER_RUNTIME={__proto__:null,c:function(j){return R.H.useMemoCache(j)}},Je.cache=function(j){return function(){return j.apply(null,arguments)}},Je.cacheSignal=function(){return null},Je.cloneElement=function(j,q,Z){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var se=x({},j.props),pe=j.key;if(q!=null)for(Se in q.key!==void 0&&(pe=""+q.key),q)!_.call(q,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&q.ref===void 0||(se[Se]=q[Se]);var Se=arguments.length-2;if(Se===1)se.children=Z;else if(1<Se){for(var be=Array(Se),Te=0;Te<Se;Te++)be[Te]=arguments[Te+2];se.children=be}return M(j.type,pe,se)},Je.createContext=function(j){return j={$$typeof:s,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:i,_context:j},j},Je.createElement=function(j,q,Z){var se,pe={},Se=null;if(q!=null)for(se in q.key!==void 0&&(Se=""+q.key),q)_.call(q,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(pe[se]=q[se]);var be=arguments.length-2;if(be===1)pe.children=Z;else if(1<be){for(var Te=Array(be),ae=0;ae<be;ae++)Te[ae]=arguments[ae+2];pe.children=Te}if(j&&j.defaultProps)for(se in be=j.defaultProps,be)pe[se]===void 0&&(pe[se]=be[se]);return M(j,Se,pe)},Je.createRef=function(){return{current:null}},Je.forwardRef=function(j){return{$$typeof:o,render:j}},Je.isValidElement=$,Je.lazy=function(j){return{$$typeof:f,_payload:{_status:-1,_result:j},_init:U}},Je.memo=function(j,q){return{$$typeof:c,type:j,compare:q===void 0?null:q}},Je.startTransition=function(j){var q=R.T,Z={};R.T=Z;try{var se=j(),pe=R.S;pe!==null&&pe(Z,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(T,Y)}catch(Se){Y(Se)}finally{q!==null&&Z.types!==null&&(q.types=Z.types),R.T=q}},Je.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Je.use=function(j){return R.H.use(j)},Je.useActionState=function(j,q,Z){return R.H.useActionState(j,q,Z)},Je.useCallback=function(j,q){return R.H.useCallback(j,q)},Je.useContext=function(j){return R.H.useContext(j)},Je.useDebugValue=function(){},Je.useDeferredValue=function(j,q){return R.H.useDeferredValue(j,q)},Je.useEffect=function(j,q){return R.H.useEffect(j,q)},Je.useEffectEvent=function(j){return R.H.useEffectEvent(j)},Je.useId=function(){return R.H.useId()},Je.useImperativeHandle=function(j,q,Z){return R.H.useImperativeHandle(j,q,Z)},Je.useInsertionEffect=function(j,q){return R.H.useInsertionEffect(j,q)},Je.useLayoutEffect=function(j,q){return R.H.useLayoutEffect(j,q)},Je.useMemo=function(j,q){return R.H.useMemo(j,q)},Je.useOptimistic=function(j,q){return R.H.useOptimistic(j,q)},Je.useReducer=function(j,q,Z){return R.H.useReducer(j,q,Z)},Je.useRef=function(j){return R.H.useRef(j)},Je.useState=function(j){return R.H.useState(j)},Je.useSyncExternalStore=function(j,q,Z){return R.H.useSyncExternalStore(j,q,Z)},Je.useTransition=function(){return R.H.useTransition()},Je.version="19.2.3",Je}var o_;function Ld(){return o_||(o_=1,jS.exports=wX()),jS.exports}var A=Ld();const o4=Ui(A),SX=s4({__proto__:null,default:o4},[A]);var BS={exports:{}},gh={},US={exports:{}},VS={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l_;function CX(){return l_||(l_=1,(function(t){function e(F,V){var U=F.length;F.push(V);e:for(;0<U;){var Y=U-1>>>1,oe=F[Y];if(0<a(oe,V))F[Y]=V,F[U]=oe,U=Y;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var V=F[0],U=F.pop();if(U!==V){F[0]=U;e:for(var Y=0,oe=F.length,j=oe>>>1;Y<j;){var q=2*(Y+1)-1,Z=F[q],se=q+1,pe=F[se];if(0>a(Z,U))se<oe&&0>a(pe,Z)?(F[Y]=pe,F[se]=U,Y=se):(F[Y]=Z,F[q]=U,Y=q);else if(se<oe&&0>a(pe,U))F[Y]=pe,F[se]=U,Y=se;else break e}}return V}function a(F,V){var U=F.sortIndex-V.sortIndex;return U!==0?U:F.id-V.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],c=[],f=1,h=null,p=3,g=!1,v=!1,x=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function N(F){for(var V=n(c);V!==null;){if(V.callback===null)r(c);else if(V.startTime<=F)r(c),V.sortIndex=V.expirationTime,e(l,V);else break;V=n(c)}}function I(F){if(x=!1,N(F),!v)if(n(l)!==null)v=!0,T||(T=!0,z());else{var V=n(c);V!==null&&G(I,V.startTime-F)}}var T=!1,R=-1,_=5,M=-1;function P(){return b?!0:!(t.unstable_now()-M<_)}function $(){if(b=!1,T){var F=t.unstable_now();M=F;var V=!0;try{e:{v=!1,x&&(x=!1,S(R),R=-1),g=!0;var U=p;try{t:{for(N(F),h=n(l);h!==null&&!(h.expirationTime>F&&P());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,p=h.priorityLevel;var oe=Y(h.expirationTime<=F);if(F=t.unstable_now(),typeof oe=="function"){h.callback=oe,N(F),V=!0;break t}h===n(l)&&r(l),N(F)}else r(l);h=n(l)}if(h!==null)V=!0;else{var j=n(c);j!==null&&G(I,j.startTime-F),V=!1}}break e}finally{h=null,p=U,g=!1}V=void 0}}finally{V?z():T=!1}}}var z;if(typeof k=="function")z=function(){k($)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,H=W.port2;W.port1.onmessage=$,z=function(){H.postMessage(null)}}else z=function(){w($,0)};function G(F,V){R=w(function(){F(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(F){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var U=p;p=V;try{return F()}finally{p=U}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(F,V){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var U=p;p=F;try{return V()}finally{p=U}},t.unstable_scheduleCallback=function(F,V,U){var Y=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?Y+U:Y):U=Y,F){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=U+oe,F={id:f++,callback:V,priorityLevel:F,startTime:U,expirationTime:oe,sortIndex:-1},U>Y?(F.sortIndex=U,e(c,F),n(l)===null&&F===n(c)&&(x?(S(R),R=-1):x=!0,G(I,U-Y))):(F.sortIndex=oe,e(l,F),v||g||(v=!0,T||(T=!0,z()))),F},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(F){var V=p;return function(){var U=p;p=V;try{return F.apply(this,arguments)}finally{p=U}}}})(VS)),VS}var u_;function kX(){return u_||(u_=1,US.exports=CX()),US.exports}var WS={exports:{}},Ar={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_;function EX(){if(c_)return Ar;c_=1;var t=Ld();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(l,c,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:h==null?null:""+h,children:l,containerInfo:c,implementation:f}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Ar.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ar.createPortal=function(l,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return i(l,c,null,f)},Ar.flushSync=function(l){var c=s.T,f=r.p;try{if(s.T=null,r.p=2,l)return l()}finally{s.T=c,r.p=f,r.d.f()}},Ar.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},Ar.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Ar.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var f=c.as,h=o(f,c.crossOrigin),p=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;f==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:g}):f==="script"&&r.d.X(l,{crossOrigin:h,integrity:p,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Ar.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var f=o(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},Ar.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var f=c.as,h=o(f,c.crossOrigin);r.d.L(l,f,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Ar.preloadModule=function(l,c){if(typeof l=="string")if(c){var f=o(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},Ar.requestFormReset=function(l){r.d.r(l)},Ar.unstable_batchedUpdates=function(l,c){return l(c)},Ar.useFormState=function(l,c,f){return s.H.useFormState(l,c,f)},Ar.useFormStatus=function(){return s.H.useHostTransitionStatus()},Ar.version="19.2.3",Ar}var d_;function l4(){if(d_)return WS.exports;d_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),WS.exports=EX(),WS.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f_;function NX(){if(f_)return gh;f_=1;var t=kX(),e=Ld(),n=l4();function r(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function i(u){var d=u,m=u;if(u.alternate)for(;d.return;)d=d.return;else{u=d;do d=u,(d.flags&4098)!==0&&(m=d.return),u=d.return;while(u)}return d.tag===3?m:null}function s(u){if(u.tag===13){var d=u.memoizedState;if(d===null&&(u=u.alternate,u!==null&&(d=u.memoizedState)),d!==null)return d.dehydrated}return null}function o(u){if(u.tag===31){var d=u.memoizedState;if(d===null&&(u=u.alternate,u!==null&&(d=u.memoizedState)),d!==null)return d.dehydrated}return null}function l(u){if(i(u)!==u)throw Error(r(188))}function c(u){var d=u.alternate;if(!d){if(d=i(u),d===null)throw Error(r(188));return d!==u?null:u}for(var m=u,y=d;;){var C=m.return;if(C===null)break;var E=C.alternate;if(E===null){if(y=C.return,y!==null){m=y;continue}break}if(C.child===E.child){for(E=C.child;E;){if(E===m)return l(C),u;if(E===y)return l(C),d;E=E.sibling}throw Error(r(188))}if(m.return!==y.return)m=C,y=E;else{for(var D=!1,L=C.child;L;){if(L===m){D=!0,m=C,y=E;break}if(L===y){D=!0,y=C,m=E;break}L=L.sibling}if(!D){for(L=E.child;L;){if(L===m){D=!0,m=E,y=C;break}if(L===y){D=!0,y=E,m=C;break}L=L.sibling}if(!D)throw Error(r(189))}}if(m.alternate!==y)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?u:d}function f(u){var d=u.tag;if(d===5||d===26||d===27||d===6)return u;for(u=u.child;u!==null;){if(d=f(u),d!==null)return d;u=u.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),k=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function z(u){return u===null||typeof u!="object"?null:(u=$&&u[$]||u["@@iterator"],typeof u=="function"?u:null)}var W=Symbol.for("react.client.reference");function H(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===W?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case x:return"Fragment";case w:return"Profiler";case b:return"StrictMode";case I:return"Suspense";case T:return"SuspenseList";case M:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case v:return"Portal";case k:return u.displayName||"Context";case S:return(u._context.displayName||"Context")+".Consumer";case N:var d=u.render;return u=u.displayName,u||(u=d.displayName||d.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case R:return d=u.displayName||null,d!==null?d:H(u.type)||"Memo";case _:d=u._payload,u=u._init;try{return H(u(d))}catch{}}return null}var G=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U={pending:!1,data:null,method:null,action:null},Y=[],oe=-1;function j(u){return{current:u}}function q(u){0>oe||(u.current=Y[oe],Y[oe]=null,oe--)}function Z(u,d){oe++,Y[oe]=u.current,u.current=d}var se=j(null),pe=j(null),Se=j(null),be=j(null);function Te(u,d){switch(Z(Se,d),Z(pe,u),Z(se,null),d.nodeType){case 9:case 11:u=(u=d.documentElement)&&(u=u.namespaceURI)?IR(u):0;break;default:if(u=d.tagName,d=d.namespaceURI)d=IR(d),u=AR(d,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}q(se),Z(se,u)}function ae(){q(se),q(pe),q(Se)}function Ne(u){u.memoizedState!==null&&Z(be,u);var d=se.current,m=AR(d,u.type);d!==m&&(Z(pe,u),Z(se,m))}function Ie(u){pe.current===u&&(q(se),q(pe)),be.current===u&&(q(be),dh._currentValue=U)}var ye,Ze;function Be(u){if(ye===void 0)try{throw Error()}catch(m){var d=m.stack.trim().match(/\n( *(at )?)/);ye=d&&d[1]||"",Ze=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ye+u+Ze}var Qe=!1;function Ye(u,d){if(!u||Qe)return"";Qe=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(d){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(me){var de=me}Reflect.construct(u,[],Ce)}else{try{Ce.call()}catch(me){de=me}u.call(Ce.prototype)}}else{try{throw Error()}catch(me){de=me}(Ce=u())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(me){if(me&&de&&typeof me.stack=="string")return[me.stack,de.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=y.DetermineComponentFrameRoot(),D=E[0],L=E[1];if(D&&L){var X=D.split(`
`),ce=L.split(`
`);for(C=y=0;y<X.length&&!X[y].includes("DetermineComponentFrameRoot");)y++;for(;C<ce.length&&!ce[C].includes("DetermineComponentFrameRoot");)C++;if(y===X.length||C===ce.length)for(y=X.length-1,C=ce.length-1;1<=y&&0<=C&&X[y]!==ce[C];)C--;for(;1<=y&&0<=C;y--,C--)if(X[y]!==ce[C]){if(y!==1||C!==1)do if(y--,C--,0>C||X[y]!==ce[C]){var xe=`
`+X[y].replace(" at new "," at ");return u.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",u.displayName)),xe}while(1<=y&&0<=C);break}}}finally{Qe=!1,Error.prepareStackTrace=m}return(m=u?u.displayName||u.name:"")?Be(m):""}function vt(u,d){switch(u.tag){case 26:case 27:case 5:return Be(u.type);case 16:return Be("Lazy");case 13:return u.child!==d&&d!==null?Be("Suspense Fallback"):Be("Suspense");case 19:return Be("SuspenseList");case 0:case 15:return Ye(u.type,!1);case 11:return Ye(u.type.render,!1);case 1:return Ye(u.type,!0);case 31:return Be("Activity");default:return""}}function At(u){try{var d="",m=null;do d+=vt(u,m),m=u,u=u.return;while(u);return d}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}var ya=Object.prototype.hasOwnProperty,dn=t.unstable_scheduleCallback,Ba=t.unstable_cancelCallback,Fr=t.unstable_shouldYield,Is=t.unstable_requestPaint,Zt=t.unstable_now,xi=t.unstable_getCurrentPriorityLevel,bi=t.unstable_ImmediatePriority,wi=t.unstable_UserBlockingPriority,xa=t.unstable_NormalPriority,Ll=t.unstable_LowPriority,cc=t.unstable_IdlePriority,Cf=t.log,E1=t.unstable_setDisableYieldValue,Gi=null,jr=null;function Hi(u){if(typeof Cf=="function"&&E1(u),jr&&typeof jr.setStrictMode=="function")try{jr.setStrictMode(Gi,u)}catch{}}var ba=Math.clz32?Math.clz32:n9,e9=Math.log,t9=Math.LN2;function n9(u){return u>>>=0,u===0?32:31-(e9(u)/t9|0)|0}var cg=256,dg=262144,fg=4194304;function zl(u){var d=u&42;if(d!==0)return d;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return u&261888;case 262144:case 524288:case 1048576:case 2097152:return u&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function hg(u,d,m){var y=u.pendingLanes;if(y===0)return 0;var C=0,E=u.suspendedLanes,D=u.pingedLanes;u=u.warmLanes;var L=y&134217727;return L!==0?(y=L&~E,y!==0?C=zl(y):(D&=L,D!==0?C=zl(D):m||(m=L&~u,m!==0&&(C=zl(m))))):(L=y&~E,L!==0?C=zl(L):D!==0?C=zl(D):m||(m=y&~u,m!==0&&(C=zl(m)))),C===0?0:d!==0&&d!==C&&(d&E)===0&&(E=C&-C,m=d&-d,E>=m||E===32&&(m&4194048)!==0)?d:C}function kf(u,d){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&d)===0}function r9(u,d){switch(u){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function l$(){var u=fg;return fg<<=1,(fg&62914560)===0&&(fg=4194304),u}function N1(u){for(var d=[],m=0;31>m;m++)d.push(u);return d}function Ef(u,d){u.pendingLanes|=d,d!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function a9(u,d,m,y,C,E){var D=u.pendingLanes;u.pendingLanes=m,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=m,u.entangledLanes&=m,u.errorRecoveryDisabledLanes&=m,u.shellSuspendCounter=0;var L=u.entanglements,X=u.expirationTimes,ce=u.hiddenUpdates;for(m=D&~m;0<m;){var xe=31-ba(m),Ce=1<<xe;L[xe]=0,X[xe]=-1;var de=ce[xe];if(de!==null)for(ce[xe]=null,xe=0;xe<de.length;xe++){var me=de[xe];me!==null&&(me.lane&=-536870913)}m&=~Ce}y!==0&&u$(u,y,0),E!==0&&C===0&&u.tag!==0&&(u.suspendedLanes|=E&~(D&~d))}function u$(u,d,m){u.pendingLanes|=d,u.suspendedLanes&=~d;var y=31-ba(d);u.entangledLanes|=d,u.entanglements[y]=u.entanglements[y]|1073741824|m&261930}function c$(u,d){var m=u.entangledLanes|=d;for(u=u.entanglements;m;){var y=31-ba(m),C=1<<y;C&d|u[y]&d&&(u[y]|=d),m&=~C}}function d$(u,d){var m=d&-d;return m=(m&42)!==0?1:I1(m),(m&(u.suspendedLanes|d))!==0?0:m}function I1(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function A1(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function f$(){var u=V.p;return u!==0?u:(u=window.event,u===void 0?32:ZR(u.type))}function h$(u,d){var m=V.p;try{return V.p=u,d()}finally{V.p=m}}var Ao=Math.random().toString(36).slice(2),hr="__reactFiber$"+Ao,ea="__reactProps$"+Ao,dc="__reactContainer$"+Ao,T1="__reactEvents$"+Ao,i9="__reactListeners$"+Ao,s9="__reactHandles$"+Ao,p$="__reactResources$"+Ao,Nf="__reactMarker$"+Ao;function $1(u){delete u[hr],delete u[ea],delete u[T1],delete u[i9],delete u[s9]}function fc(u){var d=u[hr];if(d)return d;for(var m=u.parentNode;m;){if(d=m[dc]||m[hr]){if(m=d.alternate,d.child!==null||m!==null&&m.child!==null)for(u=MR(u);u!==null;){if(m=u[hr])return m;u=MR(u)}return d}u=m,m=u.parentNode}return null}function hc(u){if(u=u[hr]||u[dc]){var d=u.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return u}return null}function If(u){var d=u.tag;if(d===5||d===26||d===27||d===6)return u.stateNode;throw Error(r(33))}function pc(u){var d=u[p$];return d||(d=u[p$]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function tr(u){u[Nf]=!0}var m$=new Set,g$={};function Fl(u,d){mc(u,d),mc(u+"Capture",d)}function mc(u,d){for(g$[u]=d,u=0;u<d.length;u++)m$.add(d[u])}var o9=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),v$={},y$={};function l9(u){return ya.call(y$,u)?!0:ya.call(v$,u)?!1:o9.test(u)?y$[u]=!0:(v$[u]=!0,!1)}function pg(u,d,m){if(l9(d))if(m===null)u.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":u.removeAttribute(d);return;case"boolean":var y=d.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){u.removeAttribute(d);return}}u.setAttribute(d,""+m)}}function mg(u,d,m){if(m===null)u.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(d);return}u.setAttribute(d,""+m)}}function As(u,d,m,y){if(y===null)u.removeAttribute(m);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(m);return}u.setAttributeNS(d,m,""+y)}}function Ua(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function x$(u){var d=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function u9(u,d,m){var y=Object.getOwnPropertyDescriptor(u.constructor.prototype,d);if(!u.hasOwnProperty(d)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var C=y.get,E=y.set;return Object.defineProperty(u,d,{configurable:!0,get:function(){return C.call(this)},set:function(D){m=""+D,E.call(this,D)}}),Object.defineProperty(u,d,{enumerable:y.enumerable}),{getValue:function(){return m},setValue:function(D){m=""+D},stopTracking:function(){u._valueTracker=null,delete u[d]}}}}function O1(u){if(!u._valueTracker){var d=x$(u)?"checked":"value";u._valueTracker=u9(u,d,""+u[d])}}function b$(u){if(!u)return!1;var d=u._valueTracker;if(!d)return!0;var m=d.getValue(),y="";return u&&(y=x$(u)?u.checked?"true":"false":u.value),u=y,u!==m?(d.setValue(u),!0):!1}function gg(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var c9=/[\n"\\]/g;function Va(u){return u.replace(c9,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function D1(u,d,m,y,C,E,D,L){u.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?u.type=D:u.removeAttribute("type"),d!=null?D==="number"?(d===0&&u.value===""||u.value!=d)&&(u.value=""+Ua(d)):u.value!==""+Ua(d)&&(u.value=""+Ua(d)):D!=="submit"&&D!=="reset"||u.removeAttribute("value"),d!=null?R1(u,D,Ua(d)):m!=null?R1(u,D,Ua(m)):y!=null&&u.removeAttribute("value"),C==null&&E!=null&&(u.defaultChecked=!!E),C!=null&&(u.checked=C&&typeof C!="function"&&typeof C!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?u.name=""+Ua(L):u.removeAttribute("name")}function w$(u,d,m,y,C,E,D,L){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(u.type=E),d!=null||m!=null){if(!(E!=="submit"&&E!=="reset"||d!=null)){O1(u);return}m=m!=null?""+Ua(m):"",d=d!=null?""+Ua(d):m,L||d===u.value||(u.value=d),u.defaultValue=d}y=y??C,y=typeof y!="function"&&typeof y!="symbol"&&!!y,u.checked=L?u.checked:!!y,u.defaultChecked=!!y,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(u.name=D),O1(u)}function R1(u,d,m){d==="number"&&gg(u.ownerDocument)===u||u.defaultValue===""+m||(u.defaultValue=""+m)}function gc(u,d,m,y){if(u=u.options,d){d={};for(var C=0;C<m.length;C++)d["$"+m[C]]=!0;for(m=0;m<u.length;m++)C=d.hasOwnProperty("$"+u[m].value),u[m].selected!==C&&(u[m].selected=C),C&&y&&(u[m].defaultSelected=!0)}else{for(m=""+Ua(m),d=null,C=0;C<u.length;C++){if(u[C].value===m){u[C].selected=!0,y&&(u[C].defaultSelected=!0);return}d!==null||u[C].disabled||(d=u[C])}d!==null&&(d.selected=!0)}}function S$(u,d,m){if(d!=null&&(d=""+Ua(d),d!==u.value&&(u.value=d),m==null)){u.defaultValue!==d&&(u.defaultValue=d);return}u.defaultValue=m!=null?""+Ua(m):""}function C$(u,d,m,y){if(d==null){if(y!=null){if(m!=null)throw Error(r(92));if(G(y)){if(1<y.length)throw Error(r(93));y=y[0]}m=y}m==null&&(m=""),d=m}m=Ua(d),u.defaultValue=m,y=u.textContent,y===m&&y!==""&&y!==null&&(u.value=y),O1(u)}function vc(u,d){if(d){var m=u.firstChild;if(m&&m===u.lastChild&&m.nodeType===3){m.nodeValue=d;return}}u.textContent=d}var d9=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function k$(u,d,m){var y=d.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?y?u.setProperty(d,""):d==="float"?u.cssFloat="":u[d]="":y?u.setProperty(d,m):typeof m!="number"||m===0||d9.has(d)?d==="float"?u.cssFloat=m:u[d]=(""+m).trim():u[d]=m+"px"}function E$(u,d,m){if(d!=null&&typeof d!="object")throw Error(r(62));if(u=u.style,m!=null){for(var y in m)!m.hasOwnProperty(y)||d!=null&&d.hasOwnProperty(y)||(y.indexOf("--")===0?u.setProperty(y,""):y==="float"?u.cssFloat="":u[y]="");for(var C in d)y=d[C],d.hasOwnProperty(C)&&m[C]!==y&&k$(u,C,y)}else for(var E in d)d.hasOwnProperty(E)&&k$(u,E,d[E])}function _1(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var f9=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),h9=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vg(u){return h9.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}function Ts(){}var M1=null;function P1(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var yc=null,xc=null;function N$(u){var d=hc(u);if(d&&(u=d.stateNode)){var m=u[ea]||null;e:switch(u=d.stateNode,d.type){case"input":if(D1(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),d=m.name,m.type==="radio"&&d!=null){for(m=u;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+Va(""+d)+'"][type="radio"]'),d=0;d<m.length;d++){var y=m[d];if(y!==u&&y.form===u.form){var C=y[ea]||null;if(!C)throw Error(r(90));D1(y,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(d=0;d<m.length;d++)y=m[d],y.form===u.form&&b$(y)}break e;case"textarea":S$(u,m.value,m.defaultValue);break e;case"select":d=m.value,d!=null&&gc(u,!!m.multiple,d,!1)}}}var L1=!1;function I$(u,d,m){if(L1)return u(d,m);L1=!0;try{var y=u(d);return y}finally{if(L1=!1,(yc!==null||xc!==null)&&(av(),yc&&(d=yc,u=xc,xc=yc=null,N$(d),u)))for(d=0;d<u.length;d++)N$(u[d])}}function Af(u,d){var m=u.stateNode;if(m===null)return null;var y=m[ea]||null;if(y===null)return null;m=y[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(u=u.type,y=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!y;break e;default:u=!1}if(u)return null;if(m&&typeof m!="function")throw Error(r(231,d,typeof m));return m}var $s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),z1=!1;if($s)try{var Tf={};Object.defineProperty(Tf,"passive",{get:function(){z1=!0}}),window.addEventListener("test",Tf,Tf),window.removeEventListener("test",Tf,Tf)}catch{z1=!1}var To=null,F1=null,yg=null;function A$(){if(yg)return yg;var u,d=F1,m=d.length,y,C="value"in To?To.value:To.textContent,E=C.length;for(u=0;u<m&&d[u]===C[u];u++);var D=m-u;for(y=1;y<=D&&d[m-y]===C[E-y];y++);return yg=C.slice(u,1<y?1-y:void 0)}function xg(u){var d=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&d===13&&(u=13)):u=d,u===10&&(u=13),32<=u||u===13?u:0}function bg(){return!0}function T$(){return!1}function ta(u){function d(m,y,C,E,D){this._reactName=m,this._targetInst=C,this.type=y,this.nativeEvent=E,this.target=D,this.currentTarget=null;for(var L in u)u.hasOwnProperty(L)&&(m=u[L],this[L]=m?m(E):E[L]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?bg:T$,this.isPropagationStopped=T$,this}return h(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=bg)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=bg)},persist:function(){},isPersistent:bg}),d}var jl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wg=ta(jl),$f=h({},jl,{view:0,detail:0}),p9=ta($f),j1,B1,Of,Sg=h({},$f,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:V1,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Of&&(Of&&u.type==="mousemove"?(j1=u.screenX-Of.screenX,B1=u.screenY-Of.screenY):B1=j1=0,Of=u),j1)},movementY:function(u){return"movementY"in u?u.movementY:B1}}),$$=ta(Sg),m9=h({},Sg,{dataTransfer:0}),g9=ta(m9),v9=h({},$f,{relatedTarget:0}),U1=ta(v9),y9=h({},jl,{animationName:0,elapsedTime:0,pseudoElement:0}),x9=ta(y9),b9=h({},jl,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),w9=ta(b9),S9=h({},jl,{data:0}),O$=ta(S9),C9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},k9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},E9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function N9(u){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(u):(u=E9[u])?!!d[u]:!1}function V1(){return N9}var I9=h({},$f,{key:function(u){if(u.key){var d=C9[u.key]||u.key;if(d!=="Unidentified")return d}return u.type==="keypress"?(u=xg(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?k9[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:V1,charCode:function(u){return u.type==="keypress"?xg(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?xg(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),A9=ta(I9),T9=h({},Sg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),D$=ta(T9),$9=h({},$f,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:V1}),O9=ta($9),D9=h({},jl,{propertyName:0,elapsedTime:0,pseudoElement:0}),R9=ta(D9),_9=h({},Sg,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),M9=ta(_9),P9=h({},jl,{newState:0,oldState:0}),L9=ta(P9),z9=[9,13,27,32],W1=$s&&"CompositionEvent"in window,Df=null;$s&&"documentMode"in document&&(Df=document.documentMode);var F9=$s&&"TextEvent"in window&&!Df,R$=$s&&(!W1||Df&&8<Df&&11>=Df),_$=" ",M$=!1;function P$(u,d){switch(u){case"keyup":return z9.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function L$(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var bc=!1;function j9(u,d){switch(u){case"compositionend":return L$(d);case"keypress":return d.which!==32?null:(M$=!0,_$);case"textInput":return u=d.data,u===_$&&M$?null:u;default:return null}}function B9(u,d){if(bc)return u==="compositionend"||!W1&&P$(u,d)?(u=A$(),yg=F1=To=null,bc=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return R$&&d.locale!=="ko"?null:d.data;default:return null}}var U9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function z$(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d==="input"?!!U9[u.type]:d==="textarea"}function F$(u,d,m,y){yc?xc?xc.push(y):xc=[y]:yc=y,d=dv(d,"onChange"),0<d.length&&(m=new wg("onChange","change",null,m,y),u.push({event:m,listeners:d}))}var Rf=null,_f=null;function V9(u){wR(u,0)}function Cg(u){var d=If(u);if(b$(d))return u}function j$(u,d){if(u==="change")return d}var B$=!1;if($s){var G1;if($s){var H1="oninput"in document;if(!H1){var U$=document.createElement("div");U$.setAttribute("oninput","return;"),H1=typeof U$.oninput=="function"}G1=H1}else G1=!1;B$=G1&&(!document.documentMode||9<document.documentMode)}function V$(){Rf&&(Rf.detachEvent("onpropertychange",W$),_f=Rf=null)}function W$(u){if(u.propertyName==="value"&&Cg(_f)){var d=[];F$(d,_f,u,P1(u)),I$(V9,d)}}function W9(u,d,m){u==="focusin"?(V$(),Rf=d,_f=m,Rf.attachEvent("onpropertychange",W$)):u==="focusout"&&V$()}function G9(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return Cg(_f)}function H9(u,d){if(u==="click")return Cg(d)}function q9(u,d){if(u==="input"||u==="change")return Cg(d)}function K9(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var wa=typeof Object.is=="function"?Object.is:K9;function Mf(u,d){if(wa(u,d))return!0;if(typeof u!="object"||u===null||typeof d!="object"||d===null)return!1;var m=Object.keys(u),y=Object.keys(d);if(m.length!==y.length)return!1;for(y=0;y<m.length;y++){var C=m[y];if(!ya.call(d,C)||!wa(u[C],d[C]))return!1}return!0}function G$(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function H$(u,d){var m=G$(u);u=0;for(var y;m;){if(m.nodeType===3){if(y=u+m.textContent.length,u<=d&&y>=d)return{node:m,offset:d-u};u=y}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=G$(m)}}function q$(u,d){return u&&d?u===d?!0:u&&u.nodeType===3?!1:d&&d.nodeType===3?q$(u,d.parentNode):"contains"in u?u.contains(d):u.compareDocumentPosition?!!(u.compareDocumentPosition(d)&16):!1:!1}function K$(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var d=gg(u.document);d instanceof u.HTMLIFrameElement;){try{var m=typeof d.contentWindow.location.href=="string"}catch{m=!1}if(m)u=d.contentWindow;else break;d=gg(u.document)}return d}function q1(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d&&(d==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||d==="textarea"||u.contentEditable==="true")}var X9=$s&&"documentMode"in document&&11>=document.documentMode,wc=null,K1=null,Pf=null,X1=!1;function X$(u,d,m){var y=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;X1||wc==null||wc!==gg(y)||(y=wc,"selectionStart"in y&&q1(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Pf&&Mf(Pf,y)||(Pf=y,y=dv(K1,"onSelect"),0<y.length&&(d=new wg("onSelect","select",null,d,m),u.push({event:d,listeners:y}),d.target=wc)))}function Bl(u,d){var m={};return m[u.toLowerCase()]=d.toLowerCase(),m["Webkit"+u]="webkit"+d,m["Moz"+u]="moz"+d,m}var Sc={animationend:Bl("Animation","AnimationEnd"),animationiteration:Bl("Animation","AnimationIteration"),animationstart:Bl("Animation","AnimationStart"),transitionrun:Bl("Transition","TransitionRun"),transitionstart:Bl("Transition","TransitionStart"),transitioncancel:Bl("Transition","TransitionCancel"),transitionend:Bl("Transition","TransitionEnd")},Y1={},Y$={};$s&&(Y$=document.createElement("div").style,"AnimationEvent"in window||(delete Sc.animationend.animation,delete Sc.animationiteration.animation,delete Sc.animationstart.animation),"TransitionEvent"in window||delete Sc.transitionend.transition);function Ul(u){if(Y1[u])return Y1[u];if(!Sc[u])return u;var d=Sc[u],m;for(m in d)if(d.hasOwnProperty(m)&&m in Y$)return Y1[u]=d[m];return u}var Z$=Ul("animationend"),Q$=Ul("animationiteration"),J$=Ul("animationstart"),Y9=Ul("transitionrun"),Z9=Ul("transitionstart"),Q9=Ul("transitioncancel"),eO=Ul("transitionend"),tO=new Map,Z1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Z1.push("scrollEnd");function Si(u,d){tO.set(u,d),Fl(d,[u])}var kg=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},Wa=[],Cc=0,Q1=0;function Eg(){for(var u=Cc,d=Q1=Cc=0;d<u;){var m=Wa[d];Wa[d++]=null;var y=Wa[d];Wa[d++]=null;var C=Wa[d];Wa[d++]=null;var E=Wa[d];if(Wa[d++]=null,y!==null&&C!==null){var D=y.pending;D===null?C.next=C:(C.next=D.next,D.next=C),y.pending=C}E!==0&&nO(m,C,E)}}function Ng(u,d,m,y){Wa[Cc++]=u,Wa[Cc++]=d,Wa[Cc++]=m,Wa[Cc++]=y,Q1|=y,u.lanes|=y,u=u.alternate,u!==null&&(u.lanes|=y)}function J1(u,d,m,y){return Ng(u,d,m,y),Ig(u)}function Vl(u,d){return Ng(u,null,null,d),Ig(u)}function nO(u,d,m){u.lanes|=m;var y=u.alternate;y!==null&&(y.lanes|=m);for(var C=!1,E=u.return;E!==null;)E.childLanes|=m,y=E.alternate,y!==null&&(y.childLanes|=m),E.tag===22&&(u=E.stateNode,u===null||u._visibility&1||(C=!0)),u=E,E=E.return;return u.tag===3?(E=u.stateNode,C&&d!==null&&(C=31-ba(m),u=E.hiddenUpdates,y=u[C],y===null?u[C]=[d]:y.push(d),d.lane=m|536870912),E):null}function Ig(u){if(50<ah)throw ah=0,lS=null,Error(r(185));for(var d=u.return;d!==null;)u=d,d=u.return;return u.tag===3?u.stateNode:null}var kc={};function J9(u,d,m,y){this.tag=u,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sa(u,d,m,y){return new J9(u,d,m,y)}function ew(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Os(u,d){var m=u.alternate;return m===null?(m=Sa(u.tag,d,u.key,u.mode),m.elementType=u.elementType,m.type=u.type,m.stateNode=u.stateNode,m.alternate=u,u.alternate=m):(m.pendingProps=d,m.type=u.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=u.flags&65011712,m.childLanes=u.childLanes,m.lanes=u.lanes,m.child=u.child,m.memoizedProps=u.memoizedProps,m.memoizedState=u.memoizedState,m.updateQueue=u.updateQueue,d=u.dependencies,m.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},m.sibling=u.sibling,m.index=u.index,m.ref=u.ref,m.refCleanup=u.refCleanup,m}function rO(u,d){u.flags&=65011714;var m=u.alternate;return m===null?(u.childLanes=0,u.lanes=d,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=m.childLanes,u.lanes=m.lanes,u.child=m.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=m.memoizedProps,u.memoizedState=m.memoizedState,u.updateQueue=m.updateQueue,u.type=m.type,d=m.dependencies,u.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),u}function Ag(u,d,m,y,C,E){var D=0;if(y=u,typeof u=="function")ew(u)&&(D=1);else if(typeof u=="string")D=aX(u,m,se.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case M:return u=Sa(31,m,d,C),u.elementType=M,u.lanes=E,u;case x:return Wl(m.children,C,E,d);case b:D=8,C|=24;break;case w:return u=Sa(12,m,d,C|2),u.elementType=w,u.lanes=E,u;case I:return u=Sa(13,m,d,C),u.elementType=I,u.lanes=E,u;case T:return u=Sa(19,m,d,C),u.elementType=T,u.lanes=E,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case k:D=10;break e;case S:D=9;break e;case N:D=11;break e;case R:D=14;break e;case _:D=16,y=null;break e}D=29,m=Error(r(130,u===null?"null":typeof u,"")),y=null}return d=Sa(D,m,d,C),d.elementType=u,d.type=y,d.lanes=E,d}function Wl(u,d,m,y){return u=Sa(7,u,y,d),u.lanes=m,u}function tw(u,d,m){return u=Sa(6,u,null,d),u.lanes=m,u}function aO(u){var d=Sa(18,null,null,0);return d.stateNode=u,d}function nw(u,d,m){return d=Sa(4,u.children!==null?u.children:[],u.key,d),d.lanes=m,d.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},d}var iO=new WeakMap;function Ga(u,d){if(typeof u=="object"&&u!==null){var m=iO.get(u);return m!==void 0?m:(d={value:u,source:d,stack:At(d)},iO.set(u,d),d)}return{value:u,source:d,stack:At(d)}}var Ec=[],Nc=0,Tg=null,Lf=0,Ha=[],qa=0,$o=null,qi=1,Ki="";function Ds(u,d){Ec[Nc++]=Lf,Ec[Nc++]=Tg,Tg=u,Lf=d}function sO(u,d,m){Ha[qa++]=qi,Ha[qa++]=Ki,Ha[qa++]=$o,$o=u;var y=qi;u=Ki;var C=32-ba(y)-1;y&=~(1<<C),m+=1;var E=32-ba(d)+C;if(30<E){var D=C-C%5;E=(y&(1<<D)-1).toString(32),y>>=D,C-=D,qi=1<<32-ba(d)+C|m<<C|y,Ki=E+u}else qi=1<<E|m<<C|y,Ki=u}function rw(u){u.return!==null&&(Ds(u,1),sO(u,1,0))}function aw(u){for(;u===Tg;)Tg=Ec[--Nc],Ec[Nc]=null,Lf=Ec[--Nc],Ec[Nc]=null;for(;u===$o;)$o=Ha[--qa],Ha[qa]=null,Ki=Ha[--qa],Ha[qa]=null,qi=Ha[--qa],Ha[qa]=null}function oO(u,d){Ha[qa++]=qi,Ha[qa++]=Ki,Ha[qa++]=$o,qi=d.id,Ki=d.overflow,$o=u}var pr=null,Qt=null,ht=!1,Oo=null,Ka=!1,iw=Error(r(519));function Do(u){var d=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw zf(Ga(d,u)),iw}function lO(u){var d=u.stateNode,m=u.type,y=u.memoizedProps;switch(d[hr]=u,d[ea]=y,m){case"dialog":ct("cancel",d),ct("close",d);break;case"iframe":case"object":case"embed":ct("load",d);break;case"video":case"audio":for(m=0;m<sh.length;m++)ct(sh[m],d);break;case"source":ct("error",d);break;case"img":case"image":case"link":ct("error",d),ct("load",d);break;case"details":ct("toggle",d);break;case"input":ct("invalid",d),w$(d,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0);break;case"select":ct("invalid",d);break;case"textarea":ct("invalid",d),C$(d,y.value,y.defaultValue,y.children)}m=y.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||d.textContent===""+m||y.suppressHydrationWarning===!0||ER(d.textContent,m)?(y.popover!=null&&(ct("beforetoggle",d),ct("toggle",d)),y.onScroll!=null&&ct("scroll",d),y.onScrollEnd!=null&&ct("scrollend",d),y.onClick!=null&&(d.onclick=Ts),d=!0):d=!1,d||Do(u,!0)}function uO(u){for(pr=u.return;pr;)switch(pr.tag){case 5:case 31:case 13:Ka=!1;return;case 27:case 3:Ka=!0;return;default:pr=pr.return}}function Ic(u){if(u!==pr)return!1;if(!ht)return uO(u),ht=!0,!1;var d=u.tag,m;if((m=d!==3&&d!==27)&&((m=d===5)&&(m=u.type,m=!(m!=="form"&&m!=="button")||CS(u.type,u.memoizedProps)),m=!m),m&&Qt&&Do(u),uO(u),d===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));Qt=_R(u)}else if(d===31){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));Qt=_R(u)}else d===27?(d=Qt,Ho(u.type)?(u=AS,AS=null,Qt=u):Qt=d):Qt=pr?Ya(u.stateNode.nextSibling):null;return!0}function Gl(){Qt=pr=null,ht=!1}function sw(){var u=Oo;return u!==null&&(ia===null?ia=u:ia.push.apply(ia,u),Oo=null),u}function zf(u){Oo===null?Oo=[u]:Oo.push(u)}var ow=j(null),Hl=null,Rs=null;function Ro(u,d,m){Z(ow,d._currentValue),d._currentValue=m}function _s(u){u._currentValue=ow.current,q(ow)}function lw(u,d,m){for(;u!==null;){var y=u.alternate;if((u.childLanes&d)!==d?(u.childLanes|=d,y!==null&&(y.childLanes|=d)):y!==null&&(y.childLanes&d)!==d&&(y.childLanes|=d),u===m)break;u=u.return}}function uw(u,d,m,y){var C=u.child;for(C!==null&&(C.return=u);C!==null;){var E=C.dependencies;if(E!==null){var D=C.child;E=E.firstContext;e:for(;E!==null;){var L=E;E=C;for(var X=0;X<d.length;X++)if(L.context===d[X]){E.lanes|=m,L=E.alternate,L!==null&&(L.lanes|=m),lw(E.return,m,u),y||(D=null);break e}E=L.next}}else if(C.tag===18){if(D=C.return,D===null)throw Error(r(341));D.lanes|=m,E=D.alternate,E!==null&&(E.lanes|=m),lw(D,m,u),D=null}else D=C.child;if(D!==null)D.return=C;else for(D=C;D!==null;){if(D===u){D=null;break}if(C=D.sibling,C!==null){C.return=D.return,D=C;break}D=D.return}C=D}}function Ac(u,d,m,y){u=null;for(var C=d,E=!1;C!==null;){if(!E){if((C.flags&524288)!==0)E=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var D=C.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var L=C.type;wa(C.pendingProps.value,D.value)||(u!==null?u.push(L):u=[L])}}else if(C===be.current){if(D=C.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(u!==null?u.push(dh):u=[dh])}C=C.return}u!==null&&uw(d,u,m,y),d.flags|=262144}function $g(u){for(u=u.firstContext;u!==null;){if(!wa(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function ql(u){Hl=u,Rs=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function mr(u){return cO(Hl,u)}function Og(u,d){return Hl===null&&ql(u),cO(u,d)}function cO(u,d){var m=d._currentValue;if(d={context:d,memoizedValue:m,next:null},Rs===null){if(u===null)throw Error(r(308));Rs=d,u.dependencies={lanes:0,firstContext:d},u.flags|=524288}else Rs=Rs.next=d;return m}var e7=typeof AbortController<"u"?AbortController:function(){var u=[],d=this.signal={aborted:!1,addEventListener:function(m,y){u.push(y)}};this.abort=function(){d.aborted=!0,u.forEach(function(m){return m()})}},t7=t.unstable_scheduleCallback,n7=t.unstable_NormalPriority,$n={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cw(){return{controller:new e7,data:new Map,refCount:0}}function Ff(u){u.refCount--,u.refCount===0&&t7(n7,function(){u.controller.abort()})}var jf=null,dw=0,Tc=0,$c=null;function r7(u,d){if(jf===null){var m=jf=[];dw=0,Tc=pS(),$c={status:"pending",value:void 0,then:function(y){m.push(y)}}}return dw++,d.then(dO,dO),d}function dO(){if(--dw===0&&jf!==null){$c!==null&&($c.status="fulfilled");var u=jf;jf=null,Tc=0,$c=null;for(var d=0;d<u.length;d++)(0,u[d])()}}function a7(u,d){var m=[],y={status:"pending",value:null,reason:null,then:function(C){m.push(C)}};return u.then(function(){y.status="fulfilled",y.value=d;for(var C=0;C<m.length;C++)(0,m[C])(d)},function(C){for(y.status="rejected",y.reason=C,C=0;C<m.length;C++)(0,m[C])(void 0)}),y}var fO=F.S;F.S=function(u,d){XD=Zt(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&r7(u,d),fO!==null&&fO(u,d)};var Kl=j(null);function fw(){var u=Kl.current;return u!==null?u:Vt.pooledCache}function Dg(u,d){d===null?Z(Kl,Kl.current):Z(Kl,d.pool)}function hO(){var u=fw();return u===null?null:{parent:$n._currentValue,pool:u}}var Oc=Error(r(460)),hw=Error(r(474)),Rg=Error(r(542)),_g={then:function(){}};function pO(u){return u=u.status,u==="fulfilled"||u==="rejected"}function mO(u,d,m){switch(m=u[m],m===void 0?u.push(d):m!==d&&(d.then(Ts,Ts),d=m),d.status){case"fulfilled":return d.value;case"rejected":throw u=d.reason,vO(u),u;default:if(typeof d.status=="string")d.then(Ts,Ts);else{if(u=Vt,u!==null&&100<u.shellSuspendCounter)throw Error(r(482));u=d,u.status="pending",u.then(function(y){if(d.status==="pending"){var C=d;C.status="fulfilled",C.value=y}},function(y){if(d.status==="pending"){var C=d;C.status="rejected",C.reason=y}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw u=d.reason,vO(u),u}throw Yl=d,Oc}}function Xl(u){try{var d=u._init;return d(u._payload)}catch(m){throw m!==null&&typeof m=="object"&&typeof m.then=="function"?(Yl=m,Oc):m}}var Yl=null;function gO(){if(Yl===null)throw Error(r(459));var u=Yl;return Yl=null,u}function vO(u){if(u===Oc||u===Rg)throw Error(r(483))}var Dc=null,Bf=0;function Mg(u){var d=Bf;return Bf+=1,Dc===null&&(Dc=[]),mO(Dc,u,d)}function Uf(u,d){d=d.props.ref,u.ref=d!==void 0?d:null}function Pg(u,d){throw d.$$typeof===p?Error(r(525)):(u=Object.prototype.toString.call(d),Error(r(31,u==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":u)))}function yO(u){function d(ie,J){if(u){var ue=ie.deletions;ue===null?(ie.deletions=[J],ie.flags|=16):ue.push(J)}}function m(ie,J){if(!u)return null;for(;J!==null;)d(ie,J),J=J.sibling;return null}function y(ie){for(var J=new Map;ie!==null;)ie.key!==null?J.set(ie.key,ie):J.set(ie.index,ie),ie=ie.sibling;return J}function C(ie,J){return ie=Os(ie,J),ie.index=0,ie.sibling=null,ie}function E(ie,J,ue){return ie.index=ue,u?(ue=ie.alternate,ue!==null?(ue=ue.index,ue<J?(ie.flags|=67108866,J):ue):(ie.flags|=67108866,J)):(ie.flags|=1048576,J)}function D(ie){return u&&ie.alternate===null&&(ie.flags|=67108866),ie}function L(ie,J,ue,we){return J===null||J.tag!==6?(J=tw(ue,ie.mode,we),J.return=ie,J):(J=C(J,ue),J.return=ie,J)}function X(ie,J,ue,we){var We=ue.type;return We===x?xe(ie,J,ue.props.children,we,ue.key):J!==null&&(J.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===_&&Xl(We)===J.type)?(J=C(J,ue.props),Uf(J,ue),J.return=ie,J):(J=Ag(ue.type,ue.key,ue.props,null,ie.mode,we),Uf(J,ue),J.return=ie,J)}function ce(ie,J,ue,we){return J===null||J.tag!==4||J.stateNode.containerInfo!==ue.containerInfo||J.stateNode.implementation!==ue.implementation?(J=nw(ue,ie.mode,we),J.return=ie,J):(J=C(J,ue.children||[]),J.return=ie,J)}function xe(ie,J,ue,we,We){return J===null||J.tag!==7?(J=Wl(ue,ie.mode,we,We),J.return=ie,J):(J=C(J,ue),J.return=ie,J)}function Ce(ie,J,ue){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=tw(""+J,ie.mode,ue),J.return=ie,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case g:return ue=Ag(J.type,J.key,J.props,null,ie.mode,ue),Uf(ue,J),ue.return=ie,ue;case v:return J=nw(J,ie.mode,ue),J.return=ie,J;case _:return J=Xl(J),Ce(ie,J,ue)}if(G(J)||z(J))return J=Wl(J,ie.mode,ue,null),J.return=ie,J;if(typeof J.then=="function")return Ce(ie,Mg(J),ue);if(J.$$typeof===k)return Ce(ie,Og(ie,J),ue);Pg(ie,J)}return null}function de(ie,J,ue,we){var We=J!==null?J.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return We!==null?null:L(ie,J,""+ue,we);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case g:return ue.key===We?X(ie,J,ue,we):null;case v:return ue.key===We?ce(ie,J,ue,we):null;case _:return ue=Xl(ue),de(ie,J,ue,we)}if(G(ue)||z(ue))return We!==null?null:xe(ie,J,ue,we,null);if(typeof ue.then=="function")return de(ie,J,Mg(ue),we);if(ue.$$typeof===k)return de(ie,J,Og(ie,ue),we);Pg(ie,ue)}return null}function me(ie,J,ue,we,We){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return ie=ie.get(ue)||null,L(J,ie,""+we,We);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case g:return ie=ie.get(we.key===null?ue:we.key)||null,X(J,ie,we,We);case v:return ie=ie.get(we.key===null?ue:we.key)||null,ce(J,ie,we,We);case _:return we=Xl(we),me(ie,J,ue,we,We)}if(G(we)||z(we))return ie=ie.get(ue)||null,xe(J,ie,we,We,null);if(typeof we.then=="function")return me(ie,J,ue,Mg(we),We);if(we.$$typeof===k)return me(ie,J,ue,Og(J,we),We);Pg(J,we)}return null}function _e(ie,J,ue,we){for(var We=null,bt=null,je=J,rt=J=0,ft=null;je!==null&&rt<ue.length;rt++){je.index>rt?(ft=je,je=null):ft=je.sibling;var wt=de(ie,je,ue[rt],we);if(wt===null){je===null&&(je=ft);break}u&&je&&wt.alternate===null&&d(ie,je),J=E(wt,J,rt),bt===null?We=wt:bt.sibling=wt,bt=wt,je=ft}if(rt===ue.length)return m(ie,je),ht&&Ds(ie,rt),We;if(je===null){for(;rt<ue.length;rt++)je=Ce(ie,ue[rt],we),je!==null&&(J=E(je,J,rt),bt===null?We=je:bt.sibling=je,bt=je);return ht&&Ds(ie,rt),We}for(je=y(je);rt<ue.length;rt++)ft=me(je,ie,rt,ue[rt],we),ft!==null&&(u&&ft.alternate!==null&&je.delete(ft.key===null?rt:ft.key),J=E(ft,J,rt),bt===null?We=ft:bt.sibling=ft,bt=ft);return u&&je.forEach(function(Zo){return d(ie,Zo)}),ht&&Ds(ie,rt),We}function He(ie,J,ue,we){if(ue==null)throw Error(r(151));for(var We=null,bt=null,je=J,rt=J=0,ft=null,wt=ue.next();je!==null&&!wt.done;rt++,wt=ue.next()){je.index>rt?(ft=je,je=null):ft=je.sibling;var Zo=de(ie,je,wt.value,we);if(Zo===null){je===null&&(je=ft);break}u&&je&&Zo.alternate===null&&d(ie,je),J=E(Zo,J,rt),bt===null?We=Zo:bt.sibling=Zo,bt=Zo,je=ft}if(wt.done)return m(ie,je),ht&&Ds(ie,rt),We;if(je===null){for(;!wt.done;rt++,wt=ue.next())wt=Ce(ie,wt.value,we),wt!==null&&(J=E(wt,J,rt),bt===null?We=wt:bt.sibling=wt,bt=wt);return ht&&Ds(ie,rt),We}for(je=y(je);!wt.done;rt++,wt=ue.next())wt=me(je,ie,rt,wt.value,we),wt!==null&&(u&&wt.alternate!==null&&je.delete(wt.key===null?rt:wt.key),J=E(wt,J,rt),bt===null?We=wt:bt.sibling=wt,bt=wt);return u&&je.forEach(function(mX){return d(ie,mX)}),ht&&Ds(ie,rt),We}function jt(ie,J,ue,we){if(typeof ue=="object"&&ue!==null&&ue.type===x&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case g:e:{for(var We=ue.key;J!==null;){if(J.key===We){if(We=ue.type,We===x){if(J.tag===7){m(ie,J.sibling),we=C(J,ue.props.children),we.return=ie,ie=we;break e}}else if(J.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===_&&Xl(We)===J.type){m(ie,J.sibling),we=C(J,ue.props),Uf(we,ue),we.return=ie,ie=we;break e}m(ie,J);break}else d(ie,J);J=J.sibling}ue.type===x?(we=Wl(ue.props.children,ie.mode,we,ue.key),we.return=ie,ie=we):(we=Ag(ue.type,ue.key,ue.props,null,ie.mode,we),Uf(we,ue),we.return=ie,ie=we)}return D(ie);case v:e:{for(We=ue.key;J!==null;){if(J.key===We)if(J.tag===4&&J.stateNode.containerInfo===ue.containerInfo&&J.stateNode.implementation===ue.implementation){m(ie,J.sibling),we=C(J,ue.children||[]),we.return=ie,ie=we;break e}else{m(ie,J);break}else d(ie,J);J=J.sibling}we=nw(ue,ie.mode,we),we.return=ie,ie=we}return D(ie);case _:return ue=Xl(ue),jt(ie,J,ue,we)}if(G(ue))return _e(ie,J,ue,we);if(z(ue)){if(We=z(ue),typeof We!="function")throw Error(r(150));return ue=We.call(ue),He(ie,J,ue,we)}if(typeof ue.then=="function")return jt(ie,J,Mg(ue),we);if(ue.$$typeof===k)return jt(ie,J,Og(ie,ue),we);Pg(ie,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint"?(ue=""+ue,J!==null&&J.tag===6?(m(ie,J.sibling),we=C(J,ue),we.return=ie,ie=we):(m(ie,J),we=tw(ue,ie.mode,we),we.return=ie,ie=we),D(ie)):m(ie,J)}return function(ie,J,ue,we){try{Bf=0;var We=jt(ie,J,ue,we);return Dc=null,We}catch(je){if(je===Oc||je===Rg)throw je;var bt=Sa(29,je,null,ie.mode);return bt.lanes=we,bt.return=ie,bt}finally{}}}var Zl=yO(!0),xO=yO(!1),_o=!1;function pw(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mw(u,d){u=u.updateQueue,d.updateQueue===u&&(d.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function Mo(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function Po(u,d,m){var y=u.updateQueue;if(y===null)return null;if(y=y.shared,(Tt&2)!==0){var C=y.pending;return C===null?d.next=d:(d.next=C.next,C.next=d),y.pending=d,d=Ig(u),nO(u,null,m),d}return Ng(u,y,d,m),Ig(u)}function Vf(u,d,m){if(d=d.updateQueue,d!==null&&(d=d.shared,(m&4194048)!==0)){var y=d.lanes;y&=u.pendingLanes,m|=y,d.lanes=m,c$(u,m)}}function gw(u,d){var m=u.updateQueue,y=u.alternate;if(y!==null&&(y=y.updateQueue,m===y)){var C=null,E=null;if(m=m.firstBaseUpdate,m!==null){do{var D={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};E===null?C=E=D:E=E.next=D,m=m.next}while(m!==null);E===null?C=E=d:E=E.next=d}else C=E=d;m={baseState:y.baseState,firstBaseUpdate:C,lastBaseUpdate:E,shared:y.shared,callbacks:y.callbacks},u.updateQueue=m;return}u=m.lastBaseUpdate,u===null?m.firstBaseUpdate=d:u.next=d,m.lastBaseUpdate=d}var vw=!1;function Wf(){if(vw){var u=$c;if(u!==null)throw u}}function Gf(u,d,m,y){vw=!1;var C=u.updateQueue;_o=!1;var E=C.firstBaseUpdate,D=C.lastBaseUpdate,L=C.shared.pending;if(L!==null){C.shared.pending=null;var X=L,ce=X.next;X.next=null,D===null?E=ce:D.next=ce,D=X;var xe=u.alternate;xe!==null&&(xe=xe.updateQueue,L=xe.lastBaseUpdate,L!==D&&(L===null?xe.firstBaseUpdate=ce:L.next=ce,xe.lastBaseUpdate=X))}if(E!==null){var Ce=C.baseState;D=0,xe=ce=X=null,L=E;do{var de=L.lane&-536870913,me=de!==L.lane;if(me?(dt&de)===de:(y&de)===de){de!==0&&de===Tc&&(vw=!0),xe!==null&&(xe=xe.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var _e=u,He=L;de=d;var jt=m;switch(He.tag){case 1:if(_e=He.payload,typeof _e=="function"){Ce=_e.call(jt,Ce,de);break e}Ce=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=He.payload,de=typeof _e=="function"?_e.call(jt,Ce,de):_e,de==null)break e;Ce=h({},Ce,de);break e;case 2:_o=!0}}de=L.callback,de!==null&&(u.flags|=64,me&&(u.flags|=8192),me=C.callbacks,me===null?C.callbacks=[de]:me.push(de))}else me={lane:de,tag:L.tag,payload:L.payload,callback:L.callback,next:null},xe===null?(ce=xe=me,X=Ce):xe=xe.next=me,D|=de;if(L=L.next,L===null){if(L=C.shared.pending,L===null)break;me=L,L=me.next,me.next=null,C.lastBaseUpdate=me,C.shared.pending=null}}while(!0);xe===null&&(X=Ce),C.baseState=X,C.firstBaseUpdate=ce,C.lastBaseUpdate=xe,E===null&&(C.shared.lanes=0),Bo|=D,u.lanes=D,u.memoizedState=Ce}}function bO(u,d){if(typeof u!="function")throw Error(r(191,u));u.call(d)}function wO(u,d){var m=u.callbacks;if(m!==null)for(u.callbacks=null,u=0;u<m.length;u++)bO(m[u],d)}var Rc=j(null),Lg=j(0);function SO(u,d){u=Vs,Z(Lg,u),Z(Rc,d),Vs=u|d.baseLanes}function yw(){Z(Lg,Vs),Z(Rc,Rc.current)}function xw(){Vs=Lg.current,q(Rc),q(Lg)}var Ca=j(null),Xa=null;function Lo(u){var d=u.alternate;Z(kn,kn.current&1),Z(Ca,u),Xa===null&&(d===null||Rc.current!==null||d.memoizedState!==null)&&(Xa=u)}function bw(u){Z(kn,kn.current),Z(Ca,u),Xa===null&&(Xa=u)}function CO(u){u.tag===22?(Z(kn,kn.current),Z(Ca,u),Xa===null&&(Xa=u)):zo()}function zo(){Z(kn,kn.current),Z(Ca,Ca.current)}function ka(u){q(Ca),Xa===u&&(Xa=null),q(kn)}var kn=j(0);function zg(u){for(var d=u;d!==null;){if(d.tag===13){var m=d.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||NS(m)||IS(m)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Ms=0,tt=null,zt=null,On=null,Fg=!1,_c=!1,Ql=!1,jg=0,Hf=0,Mc=null,i7=0;function fn(){throw Error(r(321))}function ww(u,d){if(d===null)return!1;for(var m=0;m<d.length&&m<u.length;m++)if(!wa(u[m],d[m]))return!1;return!0}function Sw(u,d,m,y,C,E){return Ms=E,tt=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,F.H=u===null||u.memoizedState===null?sD:Lw,Ql=!1,E=m(y,C),Ql=!1,_c&&(E=EO(d,m,y,C)),kO(u),E}function kO(u){F.H=Xf;var d=zt!==null&&zt.next!==null;if(Ms=0,On=zt=tt=null,Fg=!1,Hf=0,Mc=null,d)throw Error(r(300));u===null||Dn||(u=u.dependencies,u!==null&&$g(u)&&(Dn=!0))}function EO(u,d,m,y){tt=u;var C=0;do{if(_c&&(Mc=null),Hf=0,_c=!1,25<=C)throw Error(r(301));if(C+=1,On=zt=null,u.updateQueue!=null){var E=u.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}F.H=oD,E=d(m,y)}while(_c);return E}function s7(){var u=F.H,d=u.useState()[0];return d=typeof d.then=="function"?qf(d):d,u=u.useState()[0],(zt!==null?zt.memoizedState:null)!==u&&(tt.flags|=1024),d}function Cw(){var u=jg!==0;return jg=0,u}function kw(u,d,m){d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~m}function Ew(u){if(Fg){for(u=u.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}Fg=!1}Ms=0,On=zt=tt=null,_c=!1,Hf=jg=0,Mc=null}function Br(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?tt.memoizedState=On=u:On=On.next=u,On}function En(){if(zt===null){var u=tt.alternate;u=u!==null?u.memoizedState:null}else u=zt.next;var d=On===null?tt.memoizedState:On.next;if(d!==null)On=d,zt=u;else{if(u===null)throw tt.alternate===null?Error(r(467)):Error(r(310));zt=u,u={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},On===null?tt.memoizedState=On=u:On=On.next=u}return On}function Bg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function qf(u){var d=Hf;return Hf+=1,Mc===null&&(Mc=[]),u=mO(Mc,u,d),d=tt,(On===null?d.memoizedState:On.next)===null&&(d=d.alternate,F.H=d===null||d.memoizedState===null?sD:Lw),u}function Ug(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return qf(u);if(u.$$typeof===k)return mr(u)}throw Error(r(438,String(u)))}function Nw(u){var d=null,m=tt.updateQueue;if(m!==null&&(d=m.memoCache),d==null){var y=tt.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(d={data:y.data.map(function(C){return C.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),m===null&&(m=Bg(),tt.updateQueue=m),m.memoCache=d,m=d.data[d.index],m===void 0)for(m=d.data[d.index]=Array(u),y=0;y<u;y++)m[y]=P;return d.index++,m}function Ps(u,d){return typeof d=="function"?d(u):d}function Vg(u){var d=En();return Iw(d,zt,u)}function Iw(u,d,m){var y=u.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=m;var C=u.baseQueue,E=y.pending;if(E!==null){if(C!==null){var D=C.next;C.next=E.next,E.next=D}d.baseQueue=C=E,y.pending=null}if(E=u.baseState,C===null)u.memoizedState=E;else{d=C.next;var L=D=null,X=null,ce=d,xe=!1;do{var Ce=ce.lane&-536870913;if(Ce!==ce.lane?(dt&Ce)===Ce:(Ms&Ce)===Ce){var de=ce.revertLane;if(de===0)X!==null&&(X=X.next={lane:0,revertLane:0,gesture:null,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),Ce===Tc&&(xe=!0);else if((Ms&de)===de){ce=ce.next,de===Tc&&(xe=!0);continue}else Ce={lane:0,revertLane:ce.revertLane,gesture:null,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},X===null?(L=X=Ce,D=E):X=X.next=Ce,tt.lanes|=de,Bo|=de;Ce=ce.action,Ql&&m(E,Ce),E=ce.hasEagerState?ce.eagerState:m(E,Ce)}else de={lane:Ce,revertLane:ce.revertLane,gesture:ce.gesture,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},X===null?(L=X=de,D=E):X=X.next=de,tt.lanes|=Ce,Bo|=Ce;ce=ce.next}while(ce!==null&&ce!==d);if(X===null?D=E:X.next=L,!wa(E,u.memoizedState)&&(Dn=!0,xe&&(m=$c,m!==null)))throw m;u.memoizedState=E,u.baseState=D,u.baseQueue=X,y.lastRenderedState=E}return C===null&&(y.lanes=0),[u.memoizedState,y.dispatch]}function Aw(u){var d=En(),m=d.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=u;var y=m.dispatch,C=m.pending,E=d.memoizedState;if(C!==null){m.pending=null;var D=C=C.next;do E=u(E,D.action),D=D.next;while(D!==C);wa(E,d.memoizedState)||(Dn=!0),d.memoizedState=E,d.baseQueue===null&&(d.baseState=E),m.lastRenderedState=E}return[E,y]}function NO(u,d,m){var y=tt,C=En(),E=ht;if(E){if(m===void 0)throw Error(r(407));m=m()}else m=d();var D=!wa((zt||C).memoizedState,m);if(D&&(C.memoizedState=m,Dn=!0),C=C.queue,Ow(TO.bind(null,y,C,u),[u]),C.getSnapshot!==d||D||On!==null&&On.memoizedState.tag&1){if(y.flags|=2048,Pc(9,{destroy:void 0},AO.bind(null,y,C,m,d),null),Vt===null)throw Error(r(349));E||(Ms&127)!==0||IO(y,d,m)}return m}function IO(u,d,m){u.flags|=16384,u={getSnapshot:d,value:m},d=tt.updateQueue,d===null?(d=Bg(),tt.updateQueue=d,d.stores=[u]):(m=d.stores,m===null?d.stores=[u]:m.push(u))}function AO(u,d,m,y){d.value=m,d.getSnapshot=y,$O(d)&&OO(u)}function TO(u,d,m){return m(function(){$O(d)&&OO(u)})}function $O(u){var d=u.getSnapshot;u=u.value;try{var m=d();return!wa(u,m)}catch{return!0}}function OO(u){var d=Vl(u,2);d!==null&&sa(d,u,2)}function Tw(u){var d=Br();if(typeof u=="function"){var m=u;if(u=m(),Ql){Hi(!0);try{m()}finally{Hi(!1)}}}return d.memoizedState=d.baseState=u,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:u},d}function DO(u,d,m,y){return u.baseState=m,Iw(u,zt,typeof y=="function"?y:Ps)}function o7(u,d,m,y,C){if(Hg(u))throw Error(r(485));if(u=d.action,u!==null){var E={payload:C,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){E.listeners.push(D)}};F.T!==null?m(!0):E.isTransition=!1,y(E),m=d.pending,m===null?(E.next=d.pending=E,RO(d,E)):(E.next=m.next,d.pending=m.next=E)}}function RO(u,d){var m=d.action,y=d.payload,C=u.state;if(d.isTransition){var E=F.T,D={};F.T=D;try{var L=m(C,y),X=F.S;X!==null&&X(D,L),_O(u,d,L)}catch(ce){$w(u,d,ce)}finally{E!==null&&D.types!==null&&(E.types=D.types),F.T=E}}else try{E=m(C,y),_O(u,d,E)}catch(ce){$w(u,d,ce)}}function _O(u,d,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(y){MO(u,d,y)},function(y){return $w(u,d,y)}):MO(u,d,m)}function MO(u,d,m){d.status="fulfilled",d.value=m,PO(d),u.state=m,d=u.pending,d!==null&&(m=d.next,m===d?u.pending=null:(m=m.next,d.next=m,RO(u,m)))}function $w(u,d,m){var y=u.pending;if(u.pending=null,y!==null){y=y.next;do d.status="rejected",d.reason=m,PO(d),d=d.next;while(d!==y)}u.action=null}function PO(u){u=u.listeners;for(var d=0;d<u.length;d++)(0,u[d])()}function LO(u,d){return d}function zO(u,d){if(ht){var m=Vt.formState;if(m!==null){e:{var y=tt;if(ht){if(Qt){t:{for(var C=Qt,E=Ka;C.nodeType!==8;){if(!E){C=null;break t}if(C=Ya(C.nextSibling),C===null){C=null;break t}}E=C.data,C=E==="F!"||E==="F"?C:null}if(C){Qt=Ya(C.nextSibling),y=C.data==="F!";break e}}Do(y)}y=!1}y&&(d=m[0])}}return m=Br(),m.memoizedState=m.baseState=d,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:LO,lastRenderedState:d},m.queue=y,m=rD.bind(null,tt,y),y.dispatch=m,y=Tw(!1),E=Pw.bind(null,tt,!1,y.queue),y=Br(),C={state:d,dispatch:null,action:u,pending:null},y.queue=C,m=o7.bind(null,tt,C,E,m),C.dispatch=m,y.memoizedState=u,[d,m,!1]}function FO(u){var d=En();return jO(d,zt,u)}function jO(u,d,m){if(d=Iw(u,d,LO)[0],u=Vg(Ps)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var y=qf(d)}catch(D){throw D===Oc?Rg:D}else y=d;d=En();var C=d.queue,E=C.dispatch;return m!==d.memoizedState&&(tt.flags|=2048,Pc(9,{destroy:void 0},l7.bind(null,C,m),null)),[y,E,u]}function l7(u,d){u.action=d}function BO(u){var d=En(),m=zt;if(m!==null)return jO(d,m,u);En(),d=d.memoizedState,m=En();var y=m.queue.dispatch;return m.memoizedState=u,[d,y,!1]}function Pc(u,d,m,y){return u={tag:u,create:m,deps:y,inst:d,next:null},d=tt.updateQueue,d===null&&(d=Bg(),tt.updateQueue=d),m=d.lastEffect,m===null?d.lastEffect=u.next=u:(y=m.next,m.next=u,u.next=y,d.lastEffect=u),u}function UO(){return En().memoizedState}function Wg(u,d,m,y){var C=Br();tt.flags|=u,C.memoizedState=Pc(1|d,{destroy:void 0},m,y===void 0?null:y)}function Gg(u,d,m,y){var C=En();y=y===void 0?null:y;var E=C.memoizedState.inst;zt!==null&&y!==null&&ww(y,zt.memoizedState.deps)?C.memoizedState=Pc(d,E,m,y):(tt.flags|=u,C.memoizedState=Pc(1|d,E,m,y))}function VO(u,d){Wg(8390656,8,u,d)}function Ow(u,d){Gg(2048,8,u,d)}function u7(u){tt.flags|=4;var d=tt.updateQueue;if(d===null)d=Bg(),tt.updateQueue=d,d.events=[u];else{var m=d.events;m===null?d.events=[u]:m.push(u)}}function WO(u){var d=En().memoizedState;return u7({ref:d,nextImpl:u}),function(){if((Tt&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}function GO(u,d){return Gg(4,2,u,d)}function HO(u,d){return Gg(4,4,u,d)}function qO(u,d){if(typeof d=="function"){u=u();var m=d(u);return function(){typeof m=="function"?m():d(null)}}if(d!=null)return u=u(),d.current=u,function(){d.current=null}}function KO(u,d,m){m=m!=null?m.concat([u]):null,Gg(4,4,qO.bind(null,d,u),m)}function Dw(){}function XO(u,d){var m=En();d=d===void 0?null:d;var y=m.memoizedState;return d!==null&&ww(d,y[1])?y[0]:(m.memoizedState=[u,d],u)}function YO(u,d){var m=En();d=d===void 0?null:d;var y=m.memoizedState;if(d!==null&&ww(d,y[1]))return y[0];if(y=u(),Ql){Hi(!0);try{u()}finally{Hi(!1)}}return m.memoizedState=[y,d],y}function Rw(u,d,m){return m===void 0||(Ms&1073741824)!==0&&(dt&261930)===0?u.memoizedState=d:(u.memoizedState=m,u=ZD(),tt.lanes|=u,Bo|=u,m)}function ZO(u,d,m,y){return wa(m,d)?m:Rc.current!==null?(u=Rw(u,m,y),wa(u,d)||(Dn=!0),u):(Ms&42)===0||(Ms&1073741824)!==0&&(dt&261930)===0?(Dn=!0,u.memoizedState=m):(u=ZD(),tt.lanes|=u,Bo|=u,d)}function QO(u,d,m,y,C){var E=V.p;V.p=E!==0&&8>E?E:8;var D=F.T,L={};F.T=L,Pw(u,!1,d,m);try{var X=C(),ce=F.S;if(ce!==null&&ce(L,X),X!==null&&typeof X=="object"&&typeof X.then=="function"){var xe=a7(X,y);Kf(u,d,xe,Ia(u))}else Kf(u,d,y,Ia(u))}catch(Ce){Kf(u,d,{then:function(){},status:"rejected",reason:Ce},Ia())}finally{V.p=E,D!==null&&L.types!==null&&(D.types=L.types),F.T=D}}function c7(){}function _w(u,d,m,y){if(u.tag!==5)throw Error(r(476));var C=JO(u).queue;QO(u,C,d,U,m===null?c7:function(){return eD(u),m(y)})}function JO(u){var d=u.memoizedState;if(d!==null)return d;d={memoizedState:U,baseState:U,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:U},next:null};var m={};return d.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:m},next:null},u.memoizedState=d,u=u.alternate,u!==null&&(u.memoizedState=d),d}function eD(u){var d=JO(u);d.next===null&&(d=u.alternate.memoizedState),Kf(u,d.next.queue,{},Ia())}function Mw(){return mr(dh)}function tD(){return En().memoizedState}function nD(){return En().memoizedState}function d7(u){for(var d=u.return;d!==null;){switch(d.tag){case 24:case 3:var m=Ia();u=Mo(m);var y=Po(d,u,m);y!==null&&(sa(y,d,m),Vf(y,d,m)),d={cache:cw()},u.payload=d;return}d=d.return}}function f7(u,d,m){var y=Ia();m={lane:y,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Hg(u)?aD(d,m):(m=J1(u,d,m,y),m!==null&&(sa(m,u,y),iD(m,d,y)))}function rD(u,d,m){var y=Ia();Kf(u,d,m,y)}function Kf(u,d,m,y){var C={lane:y,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null};if(Hg(u))aD(d,C);else{var E=u.alternate;if(u.lanes===0&&(E===null||E.lanes===0)&&(E=d.lastRenderedReducer,E!==null))try{var D=d.lastRenderedState,L=E(D,m);if(C.hasEagerState=!0,C.eagerState=L,wa(L,D))return Ng(u,d,C,0),Vt===null&&Eg(),!1}catch{}finally{}if(m=J1(u,d,C,y),m!==null)return sa(m,u,y),iD(m,d,y),!0}return!1}function Pw(u,d,m,y){if(y={lane:2,revertLane:pS(),gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},Hg(u)){if(d)throw Error(r(479))}else d=J1(u,m,y,2),d!==null&&sa(d,u,2)}function Hg(u){var d=u.alternate;return u===tt||d!==null&&d===tt}function aD(u,d){_c=Fg=!0;var m=u.pending;m===null?d.next=d:(d.next=m.next,m.next=d),u.pending=d}function iD(u,d,m){if((m&4194048)!==0){var y=d.lanes;y&=u.pendingLanes,m|=y,d.lanes=m,c$(u,m)}}var Xf={readContext:mr,use:Ug,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useLayoutEffect:fn,useInsertionEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useSyncExternalStore:fn,useId:fn,useHostTransitionStatus:fn,useFormState:fn,useActionState:fn,useOptimistic:fn,useMemoCache:fn,useCacheRefresh:fn};Xf.useEffectEvent=fn;var sD={readContext:mr,use:Ug,useCallback:function(u,d){return Br().memoizedState=[u,d===void 0?null:d],u},useContext:mr,useEffect:VO,useImperativeHandle:function(u,d,m){m=m!=null?m.concat([u]):null,Wg(4194308,4,qO.bind(null,d,u),m)},useLayoutEffect:function(u,d){return Wg(4194308,4,u,d)},useInsertionEffect:function(u,d){Wg(4,2,u,d)},useMemo:function(u,d){var m=Br();d=d===void 0?null:d;var y=u();if(Ql){Hi(!0);try{u()}finally{Hi(!1)}}return m.memoizedState=[y,d],y},useReducer:function(u,d,m){var y=Br();if(m!==void 0){var C=m(d);if(Ql){Hi(!0);try{m(d)}finally{Hi(!1)}}}else C=d;return y.memoizedState=y.baseState=C,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:C},y.queue=u,u=u.dispatch=f7.bind(null,tt,u),[y.memoizedState,u]},useRef:function(u){var d=Br();return u={current:u},d.memoizedState=u},useState:function(u){u=Tw(u);var d=u.queue,m=rD.bind(null,tt,d);return d.dispatch=m,[u.memoizedState,m]},useDebugValue:Dw,useDeferredValue:function(u,d){var m=Br();return Rw(m,u,d)},useTransition:function(){var u=Tw(!1);return u=QO.bind(null,tt,u.queue,!0,!1),Br().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,d,m){var y=tt,C=Br();if(ht){if(m===void 0)throw Error(r(407));m=m()}else{if(m=d(),Vt===null)throw Error(r(349));(dt&127)!==0||IO(y,d,m)}C.memoizedState=m;var E={value:m,getSnapshot:d};return C.queue=E,VO(TO.bind(null,y,E,u),[u]),y.flags|=2048,Pc(9,{destroy:void 0},AO.bind(null,y,E,m,d),null),m},useId:function(){var u=Br(),d=Vt.identifierPrefix;if(ht){var m=Ki,y=qi;m=(y&~(1<<32-ba(y)-1)).toString(32)+m,d="_"+d+"R_"+m,m=jg++,0<m&&(d+="H"+m.toString(32)),d+="_"}else m=i7++,d="_"+d+"r_"+m.toString(32)+"_";return u.memoizedState=d},useHostTransitionStatus:Mw,useFormState:zO,useActionState:zO,useOptimistic:function(u){var d=Br();d.memoizedState=d.baseState=u;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=m,d=Pw.bind(null,tt,!0,m),m.dispatch=d,[u,d]},useMemoCache:Nw,useCacheRefresh:function(){return Br().memoizedState=d7.bind(null,tt)},useEffectEvent:function(u){var d=Br(),m={impl:u};return d.memoizedState=m,function(){if((Tt&2)!==0)throw Error(r(440));return m.impl.apply(void 0,arguments)}}},Lw={readContext:mr,use:Ug,useCallback:XO,useContext:mr,useEffect:Ow,useImperativeHandle:KO,useInsertionEffect:GO,useLayoutEffect:HO,useMemo:YO,useReducer:Vg,useRef:UO,useState:function(){return Vg(Ps)},useDebugValue:Dw,useDeferredValue:function(u,d){var m=En();return ZO(m,zt.memoizedState,u,d)},useTransition:function(){var u=Vg(Ps)[0],d=En().memoizedState;return[typeof u=="boolean"?u:qf(u),d]},useSyncExternalStore:NO,useId:tD,useHostTransitionStatus:Mw,useFormState:FO,useActionState:FO,useOptimistic:function(u,d){var m=En();return DO(m,zt,u,d)},useMemoCache:Nw,useCacheRefresh:nD};Lw.useEffectEvent=WO;var oD={readContext:mr,use:Ug,useCallback:XO,useContext:mr,useEffect:Ow,useImperativeHandle:KO,useInsertionEffect:GO,useLayoutEffect:HO,useMemo:YO,useReducer:Aw,useRef:UO,useState:function(){return Aw(Ps)},useDebugValue:Dw,useDeferredValue:function(u,d){var m=En();return zt===null?Rw(m,u,d):ZO(m,zt.memoizedState,u,d)},useTransition:function(){var u=Aw(Ps)[0],d=En().memoizedState;return[typeof u=="boolean"?u:qf(u),d]},useSyncExternalStore:NO,useId:tD,useHostTransitionStatus:Mw,useFormState:BO,useActionState:BO,useOptimistic:function(u,d){var m=En();return zt!==null?DO(m,zt,u,d):(m.baseState=u,[u,m.queue.dispatch])},useMemoCache:Nw,useCacheRefresh:nD};oD.useEffectEvent=WO;function zw(u,d,m,y){d=u.memoizedState,m=m(y,d),m=m==null?d:h({},d,m),u.memoizedState=m,u.lanes===0&&(u.updateQueue.baseState=m)}var Fw={enqueueSetState:function(u,d,m){u=u._reactInternals;var y=Ia(),C=Mo(y);C.payload=d,m!=null&&(C.callback=m),d=Po(u,C,y),d!==null&&(sa(d,u,y),Vf(d,u,y))},enqueueReplaceState:function(u,d,m){u=u._reactInternals;var y=Ia(),C=Mo(y);C.tag=1,C.payload=d,m!=null&&(C.callback=m),d=Po(u,C,y),d!==null&&(sa(d,u,y),Vf(d,u,y))},enqueueForceUpdate:function(u,d){u=u._reactInternals;var m=Ia(),y=Mo(m);y.tag=2,d!=null&&(y.callback=d),d=Po(u,y,m),d!==null&&(sa(d,u,m),Vf(d,u,m))}};function lD(u,d,m,y,C,E,D){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(y,E,D):d.prototype&&d.prototype.isPureReactComponent?!Mf(m,y)||!Mf(C,E):!0}function uD(u,d,m,y){u=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(m,y),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(m,y),d.state!==u&&Fw.enqueueReplaceState(d,d.state,null)}function Jl(u,d){var m=d;if("ref"in d){m={};for(var y in d)y!=="ref"&&(m[y]=d[y])}if(u=u.defaultProps){m===d&&(m=h({},m));for(var C in u)m[C]===void 0&&(m[C]=u[C])}return m}function cD(u){kg(u)}function dD(u){console.error(u)}function fD(u){kg(u)}function qg(u,d){try{var m=u.onUncaughtError;m(d.value,{componentStack:d.stack})}catch(y){setTimeout(function(){throw y})}}function hD(u,d,m){try{var y=u.onCaughtError;y(m.value,{componentStack:m.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function jw(u,d,m){return m=Mo(m),m.tag=3,m.payload={element:null},m.callback=function(){qg(u,d)},m}function pD(u){return u=Mo(u),u.tag=3,u}function mD(u,d,m,y){var C=m.type.getDerivedStateFromError;if(typeof C=="function"){var E=y.value;u.payload=function(){return C(E)},u.callback=function(){hD(d,m,y)}}var D=m.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(u.callback=function(){hD(d,m,y),typeof C!="function"&&(Uo===null?Uo=new Set([this]):Uo.add(this));var L=y.stack;this.componentDidCatch(y.value,{componentStack:L!==null?L:""})})}function h7(u,d,m,y,C){if(m.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(d=m.alternate,d!==null&&Ac(d,m,C,!0),m=Ca.current,m!==null){switch(m.tag){case 31:case 13:return Xa===null?iv():m.alternate===null&&hn===0&&(hn=3),m.flags&=-257,m.flags|=65536,m.lanes=C,y===_g?m.flags|=16384:(d=m.updateQueue,d===null?m.updateQueue=new Set([y]):d.add(y),dS(u,y,C)),!1;case 22:return m.flags|=65536,y===_g?m.flags|=16384:(d=m.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([y])},m.updateQueue=d):(m=d.retryQueue,m===null?d.retryQueue=new Set([y]):m.add(y)),dS(u,y,C)),!1}throw Error(r(435,m.tag))}return dS(u,y,C),iv(),!1}if(ht)return d=Ca.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=C,y!==iw&&(u=Error(r(422),{cause:y}),zf(Ga(u,m)))):(y!==iw&&(d=Error(r(423),{cause:y}),zf(Ga(d,m))),u=u.current.alternate,u.flags|=65536,C&=-C,u.lanes|=C,y=Ga(y,m),C=jw(u.stateNode,y,C),gw(u,C),hn!==4&&(hn=2)),!1;var E=Error(r(520),{cause:y});if(E=Ga(E,m),rh===null?rh=[E]:rh.push(E),hn!==4&&(hn=2),d===null)return!0;y=Ga(y,m),m=d;do{switch(m.tag){case 3:return m.flags|=65536,u=C&-C,m.lanes|=u,u=jw(m.stateNode,y,u),gw(m,u),!1;case 1:if(d=m.type,E=m.stateNode,(m.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Uo===null||!Uo.has(E))))return m.flags|=65536,C&=-C,m.lanes|=C,C=pD(C),mD(C,u,m,y),gw(m,C),!1}m=m.return}while(m!==null);return!1}var Bw=Error(r(461)),Dn=!1;function gr(u,d,m,y){d.child=u===null?xO(d,null,m,y):Zl(d,u.child,m,y)}function gD(u,d,m,y,C){m=m.render;var E=d.ref;if("ref"in y){var D={};for(var L in y)L!=="ref"&&(D[L]=y[L])}else D=y;return ql(d),y=Sw(u,d,m,D,E,C),L=Cw(),u!==null&&!Dn?(kw(u,d,C),Ls(u,d,C)):(ht&&L&&rw(d),d.flags|=1,gr(u,d,y,C),d.child)}function vD(u,d,m,y,C){if(u===null){var E=m.type;return typeof E=="function"&&!ew(E)&&E.defaultProps===void 0&&m.compare===null?(d.tag=15,d.type=E,yD(u,d,E,y,C)):(u=Ag(m.type,null,y,d,d.mode,C),u.ref=d.ref,u.return=d,d.child=u)}if(E=u.child,!Xw(u,C)){var D=E.memoizedProps;if(m=m.compare,m=m!==null?m:Mf,m(D,y)&&u.ref===d.ref)return Ls(u,d,C)}return d.flags|=1,u=Os(E,y),u.ref=d.ref,u.return=d,d.child=u}function yD(u,d,m,y,C){if(u!==null){var E=u.memoizedProps;if(Mf(E,y)&&u.ref===d.ref)if(Dn=!1,d.pendingProps=y=E,Xw(u,C))(u.flags&131072)!==0&&(Dn=!0);else return d.lanes=u.lanes,Ls(u,d,C)}return Uw(u,d,m,y,C)}function xD(u,d,m,y){var C=y.children,E=u!==null?u.memoizedState:null;if(u===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.mode==="hidden"){if((d.flags&128)!==0){if(E=E!==null?E.baseLanes|m:m,u!==null){for(y=d.child=u.child,C=0;y!==null;)C=C|y.lanes|y.childLanes,y=y.sibling;y=C&~E}else y=0,d.child=null;return bD(u,d,E,m,y)}if((m&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},u!==null&&Dg(d,E!==null?E.cachePool:null),E!==null?SO(d,E):yw(),CO(d);else return y=d.lanes=536870912,bD(u,d,E!==null?E.baseLanes|m:m,m,y)}else E!==null?(Dg(d,E.cachePool),SO(d,E),zo(),d.memoizedState=null):(u!==null&&Dg(d,null),yw(),zo());return gr(u,d,C,m),d.child}function Yf(u,d){return u!==null&&u.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function bD(u,d,m,y,C){var E=fw();return E=E===null?null:{parent:$n._currentValue,pool:E},d.memoizedState={baseLanes:m,cachePool:E},u!==null&&Dg(d,null),yw(),CO(d),u!==null&&Ac(u,d,y,!0),d.childLanes=C,null}function Kg(u,d){return d=Yg({mode:d.mode,children:d.children},u.mode),d.ref=u.ref,u.child=d,d.return=u,d}function wD(u,d,m){return Zl(d,u.child,null,m),u=Kg(d,d.pendingProps),u.flags|=2,ka(d),d.memoizedState=null,u}function p7(u,d,m){var y=d.pendingProps,C=(d.flags&128)!==0;if(d.flags&=-129,u===null){if(ht){if(y.mode==="hidden")return u=Kg(d,y),d.lanes=536870912,Yf(null,u);if(bw(d),(u=Qt)?(u=RR(u,Ka),u=u!==null&&u.data==="&"?u:null,u!==null&&(d.memoizedState={dehydrated:u,treeContext:$o!==null?{id:qi,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},m=aO(u),m.return=d,d.child=m,pr=d,Qt=null)):u=null,u===null)throw Do(d);return d.lanes=536870912,null}return Kg(d,y)}var E=u.memoizedState;if(E!==null){var D=E.dehydrated;if(bw(d),C)if(d.flags&256)d.flags&=-257,d=wD(u,d,m);else if(d.memoizedState!==null)d.child=u.child,d.flags|=128,d=null;else throw Error(r(558));else if(Dn||Ac(u,d,m,!1),C=(m&u.childLanes)!==0,Dn||C){if(y=Vt,y!==null&&(D=d$(y,m),D!==0&&D!==E.retryLane))throw E.retryLane=D,Vl(u,D),sa(y,u,D),Bw;iv(),d=wD(u,d,m)}else u=E.treeContext,Qt=Ya(D.nextSibling),pr=d,ht=!0,Oo=null,Ka=!1,u!==null&&oO(d,u),d=Kg(d,y),d.flags|=4096;return d}return u=Os(u.child,{mode:y.mode,children:y.children}),u.ref=d.ref,d.child=u,u.return=d,u}function Xg(u,d){var m=d.ref;if(m===null)u!==null&&u.ref!==null&&(d.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(u===null||u.ref!==m)&&(d.flags|=4194816)}}function Uw(u,d,m,y,C){return ql(d),m=Sw(u,d,m,y,void 0,C),y=Cw(),u!==null&&!Dn?(kw(u,d,C),Ls(u,d,C)):(ht&&y&&rw(d),d.flags|=1,gr(u,d,m,C),d.child)}function SD(u,d,m,y,C,E){return ql(d),d.updateQueue=null,m=EO(d,y,m,C),kO(u),y=Cw(),u!==null&&!Dn?(kw(u,d,E),Ls(u,d,E)):(ht&&y&&rw(d),d.flags|=1,gr(u,d,m,E),d.child)}function CD(u,d,m,y,C){if(ql(d),d.stateNode===null){var E=kc,D=m.contextType;typeof D=="object"&&D!==null&&(E=mr(D)),E=new m(y,E),d.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=Fw,d.stateNode=E,E._reactInternals=d,E=d.stateNode,E.props=y,E.state=d.memoizedState,E.refs={},pw(d),D=m.contextType,E.context=typeof D=="object"&&D!==null?mr(D):kc,E.state=d.memoizedState,D=m.getDerivedStateFromProps,typeof D=="function"&&(zw(d,m,D,y),E.state=d.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(D=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),D!==E.state&&Fw.enqueueReplaceState(E,E.state,null),Gf(d,y,E,C),Wf(),E.state=d.memoizedState),typeof E.componentDidMount=="function"&&(d.flags|=4194308),y=!0}else if(u===null){E=d.stateNode;var L=d.memoizedProps,X=Jl(m,L);E.props=X;var ce=E.context,xe=m.contextType;D=kc,typeof xe=="object"&&xe!==null&&(D=mr(xe));var Ce=m.getDerivedStateFromProps;xe=typeof Ce=="function"||typeof E.getSnapshotBeforeUpdate=="function",L=d.pendingProps!==L,xe||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(L||ce!==D)&&uD(d,E,y,D),_o=!1;var de=d.memoizedState;E.state=de,Gf(d,y,E,C),Wf(),ce=d.memoizedState,L||de!==ce||_o?(typeof Ce=="function"&&(zw(d,m,Ce,y),ce=d.memoizedState),(X=_o||lD(d,m,X,y,de,ce,D))?(xe||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(d.flags|=4194308)):(typeof E.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=y,d.memoizedState=ce),E.props=y,E.state=ce,E.context=D,y=X):(typeof E.componentDidMount=="function"&&(d.flags|=4194308),y=!1)}else{E=d.stateNode,mw(u,d),D=d.memoizedProps,xe=Jl(m,D),E.props=xe,Ce=d.pendingProps,de=E.context,ce=m.contextType,X=kc,typeof ce=="object"&&ce!==null&&(X=mr(ce)),L=m.getDerivedStateFromProps,(ce=typeof L=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(D!==Ce||de!==X)&&uD(d,E,y,X),_o=!1,de=d.memoizedState,E.state=de,Gf(d,y,E,C),Wf();var me=d.memoizedState;D!==Ce||de!==me||_o||u!==null&&u.dependencies!==null&&$g(u.dependencies)?(typeof L=="function"&&(zw(d,m,L,y),me=d.memoizedState),(xe=_o||lD(d,m,xe,y,de,me,X)||u!==null&&u.dependencies!==null&&$g(u.dependencies))?(ce||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(y,me,X),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(y,me,X)),typeof E.componentDidUpdate=="function"&&(d.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof E.componentDidUpdate!="function"||D===u.memoizedProps&&de===u.memoizedState||(d.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||D===u.memoizedProps&&de===u.memoizedState||(d.flags|=1024),d.memoizedProps=y,d.memoizedState=me),E.props=y,E.state=me,E.context=X,y=xe):(typeof E.componentDidUpdate!="function"||D===u.memoizedProps&&de===u.memoizedState||(d.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||D===u.memoizedProps&&de===u.memoizedState||(d.flags|=1024),y=!1)}return E=y,Xg(u,d),y=(d.flags&128)!==0,E||y?(E=d.stateNode,m=y&&typeof m.getDerivedStateFromError!="function"?null:E.render(),d.flags|=1,u!==null&&y?(d.child=Zl(d,u.child,null,C),d.child=Zl(d,null,m,C)):gr(u,d,m,C),d.memoizedState=E.state,u=d.child):u=Ls(u,d,C),u}function kD(u,d,m,y){return Gl(),d.flags|=256,gr(u,d,m,y),d.child}var Vw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ww(u){return{baseLanes:u,cachePool:hO()}}function Gw(u,d,m){return u=u!==null?u.childLanes&~m:0,d&&(u|=Na),u}function ED(u,d,m){var y=d.pendingProps,C=!1,E=(d.flags&128)!==0,D;if((D=E)||(D=u!==null&&u.memoizedState===null?!1:(kn.current&2)!==0),D&&(C=!0,d.flags&=-129),D=(d.flags&32)!==0,d.flags&=-33,u===null){if(ht){if(C?Lo(d):zo(),(u=Qt)?(u=RR(u,Ka),u=u!==null&&u.data!=="&"?u:null,u!==null&&(d.memoizedState={dehydrated:u,treeContext:$o!==null?{id:qi,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},m=aO(u),m.return=d,d.child=m,pr=d,Qt=null)):u=null,u===null)throw Do(d);return IS(u)?d.lanes=32:d.lanes=536870912,null}var L=y.children;return y=y.fallback,C?(zo(),C=d.mode,L=Yg({mode:"hidden",children:L},C),y=Wl(y,C,m,null),L.return=d,y.return=d,L.sibling=y,d.child=L,y=d.child,y.memoizedState=Ww(m),y.childLanes=Gw(u,D,m),d.memoizedState=Vw,Yf(null,y)):(Lo(d),Hw(d,L))}var X=u.memoizedState;if(X!==null&&(L=X.dehydrated,L!==null)){if(E)d.flags&256?(Lo(d),d.flags&=-257,d=qw(u,d,m)):d.memoizedState!==null?(zo(),d.child=u.child,d.flags|=128,d=null):(zo(),L=y.fallback,C=d.mode,y=Yg({mode:"visible",children:y.children},C),L=Wl(L,C,m,null),L.flags|=2,y.return=d,L.return=d,y.sibling=L,d.child=y,Zl(d,u.child,null,m),y=d.child,y.memoizedState=Ww(m),y.childLanes=Gw(u,D,m),d.memoizedState=Vw,d=Yf(null,y));else if(Lo(d),IS(L)){if(D=L.nextSibling&&L.nextSibling.dataset,D)var ce=D.dgst;D=ce,y=Error(r(419)),y.stack="",y.digest=D,zf({value:y,source:null,stack:null}),d=qw(u,d,m)}else if(Dn||Ac(u,d,m,!1),D=(m&u.childLanes)!==0,Dn||D){if(D=Vt,D!==null&&(y=d$(D,m),y!==0&&y!==X.retryLane))throw X.retryLane=y,Vl(u,y),sa(D,u,y),Bw;NS(L)||iv(),d=qw(u,d,m)}else NS(L)?(d.flags|=192,d.child=u.child,d=null):(u=X.treeContext,Qt=Ya(L.nextSibling),pr=d,ht=!0,Oo=null,Ka=!1,u!==null&&oO(d,u),d=Hw(d,y.children),d.flags|=4096);return d}return C?(zo(),L=y.fallback,C=d.mode,X=u.child,ce=X.sibling,y=Os(X,{mode:"hidden",children:y.children}),y.subtreeFlags=X.subtreeFlags&65011712,ce!==null?L=Os(ce,L):(L=Wl(L,C,m,null),L.flags|=2),L.return=d,y.return=d,y.sibling=L,d.child=y,Yf(null,y),y=d.child,L=u.child.memoizedState,L===null?L=Ww(m):(C=L.cachePool,C!==null?(X=$n._currentValue,C=C.parent!==X?{parent:X,pool:X}:C):C=hO(),L={baseLanes:L.baseLanes|m,cachePool:C}),y.memoizedState=L,y.childLanes=Gw(u,D,m),d.memoizedState=Vw,Yf(u.child,y)):(Lo(d),m=u.child,u=m.sibling,m=Os(m,{mode:"visible",children:y.children}),m.return=d,m.sibling=null,u!==null&&(D=d.deletions,D===null?(d.deletions=[u],d.flags|=16):D.push(u)),d.child=m,d.memoizedState=null,m)}function Hw(u,d){return d=Yg({mode:"visible",children:d},u.mode),d.return=u,u.child=d}function Yg(u,d){return u=Sa(22,u,null,d),u.lanes=0,u}function qw(u,d,m){return Zl(d,u.child,null,m),u=Hw(d,d.pendingProps.children),u.flags|=2,d.memoizedState=null,u}function ND(u,d,m){u.lanes|=d;var y=u.alternate;y!==null&&(y.lanes|=d),lw(u.return,d,m)}function Kw(u,d,m,y,C,E){var D=u.memoizedState;D===null?u.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:y,tail:m,tailMode:C,treeForkCount:E}:(D.isBackwards=d,D.rendering=null,D.renderingStartTime=0,D.last=y,D.tail=m,D.tailMode=C,D.treeForkCount=E)}function ID(u,d,m){var y=d.pendingProps,C=y.revealOrder,E=y.tail;y=y.children;var D=kn.current,L=(D&2)!==0;if(L?(D=D&1|2,d.flags|=128):D&=1,Z(kn,D),gr(u,d,y,m),y=ht?Lf:0,!L&&u!==null&&(u.flags&128)!==0)e:for(u=d.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&ND(u,m,d);else if(u.tag===19)ND(u,m,d);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===d)break e;for(;u.sibling===null;){if(u.return===null||u.return===d)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}switch(C){case"forwards":for(m=d.child,C=null;m!==null;)u=m.alternate,u!==null&&zg(u)===null&&(C=m),m=m.sibling;m=C,m===null?(C=d.child,d.child=null):(C=m.sibling,m.sibling=null),Kw(d,!1,C,m,E,y);break;case"backwards":case"unstable_legacy-backwards":for(m=null,C=d.child,d.child=null;C!==null;){if(u=C.alternate,u!==null&&zg(u)===null){d.child=C;break}u=C.sibling,C.sibling=m,m=C,C=u}Kw(d,!0,m,null,E,y);break;case"together":Kw(d,!1,null,null,void 0,y);break;default:d.memoizedState=null}return d.child}function Ls(u,d,m){if(u!==null&&(d.dependencies=u.dependencies),Bo|=d.lanes,(m&d.childLanes)===0)if(u!==null){if(Ac(u,d,m,!1),(m&d.childLanes)===0)return null}else return null;if(u!==null&&d.child!==u.child)throw Error(r(153));if(d.child!==null){for(u=d.child,m=Os(u,u.pendingProps),d.child=m,m.return=d;u.sibling!==null;)u=u.sibling,m=m.sibling=Os(u,u.pendingProps),m.return=d;m.sibling=null}return d.child}function Xw(u,d){return(u.lanes&d)!==0?!0:(u=u.dependencies,!!(u!==null&&$g(u)))}function m7(u,d,m){switch(d.tag){case 3:Te(d,d.stateNode.containerInfo),Ro(d,$n,u.memoizedState.cache),Gl();break;case 27:case 5:Ne(d);break;case 4:Te(d,d.stateNode.containerInfo);break;case 10:Ro(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,bw(d),null;break;case 13:var y=d.memoizedState;if(y!==null)return y.dehydrated!==null?(Lo(d),d.flags|=128,null):(m&d.child.childLanes)!==0?ED(u,d,m):(Lo(d),u=Ls(u,d,m),u!==null?u.sibling:null);Lo(d);break;case 19:var C=(u.flags&128)!==0;if(y=(m&d.childLanes)!==0,y||(Ac(u,d,m,!1),y=(m&d.childLanes)!==0),C){if(y)return ID(u,d,m);d.flags|=128}if(C=d.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),Z(kn,kn.current),y)break;return null;case 22:return d.lanes=0,xD(u,d,m,d.pendingProps);case 24:Ro(d,$n,u.memoizedState.cache)}return Ls(u,d,m)}function AD(u,d,m){if(u!==null)if(u.memoizedProps!==d.pendingProps)Dn=!0;else{if(!Xw(u,m)&&(d.flags&128)===0)return Dn=!1,m7(u,d,m);Dn=(u.flags&131072)!==0}else Dn=!1,ht&&(d.flags&1048576)!==0&&sO(d,Lf,d.index);switch(d.lanes=0,d.tag){case 16:e:{var y=d.pendingProps;if(u=Xl(d.elementType),d.type=u,typeof u=="function")ew(u)?(y=Jl(u,y),d.tag=1,d=CD(null,d,u,y,m)):(d.tag=0,d=Uw(null,d,u,y,m));else{if(u!=null){var C=u.$$typeof;if(C===N){d.tag=11,d=gD(null,d,u,y,m);break e}else if(C===R){d.tag=14,d=vD(null,d,u,y,m);break e}}throw d=H(u)||u,Error(r(306,d,""))}}return d;case 0:return Uw(u,d,d.type,d.pendingProps,m);case 1:return y=d.type,C=Jl(y,d.pendingProps),CD(u,d,y,C,m);case 3:e:{if(Te(d,d.stateNode.containerInfo),u===null)throw Error(r(387));y=d.pendingProps;var E=d.memoizedState;C=E.element,mw(u,d),Gf(d,y,null,m);var D=d.memoizedState;if(y=D.cache,Ro(d,$n,y),y!==E.cache&&uw(d,[$n],m,!0),Wf(),y=D.element,E.isDehydrated)if(E={element:y,isDehydrated:!1,cache:D.cache},d.updateQueue.baseState=E,d.memoizedState=E,d.flags&256){d=kD(u,d,y,m);break e}else if(y!==C){C=Ga(Error(r(424)),d),zf(C),d=kD(u,d,y,m);break e}else{switch(u=d.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(Qt=Ya(u.firstChild),pr=d,ht=!0,Oo=null,Ka=!0,m=xO(d,null,y,m),d.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(Gl(),y===C){d=Ls(u,d,m);break e}gr(u,d,y,m)}d=d.child}return d;case 26:return Xg(u,d),u===null?(m=FR(d.type,null,d.pendingProps,null))?d.memoizedState=m:ht||(m=d.type,u=d.pendingProps,y=fv(Se.current).createElement(m),y[hr]=d,y[ea]=u,vr(y,m,u),tr(y),d.stateNode=y):d.memoizedState=FR(d.type,u.memoizedProps,d.pendingProps,u.memoizedState),null;case 27:return Ne(d),u===null&&ht&&(y=d.stateNode=PR(d.type,d.pendingProps,Se.current),pr=d,Ka=!0,C=Qt,Ho(d.type)?(AS=C,Qt=Ya(y.firstChild)):Qt=C),gr(u,d,d.pendingProps.children,m),Xg(u,d),u===null&&(d.flags|=4194304),d.child;case 5:return u===null&&ht&&((C=y=Qt)&&(y=G7(y,d.type,d.pendingProps,Ka),y!==null?(d.stateNode=y,pr=d,Qt=Ya(y.firstChild),Ka=!1,C=!0):C=!1),C||Do(d)),Ne(d),C=d.type,E=d.pendingProps,D=u!==null?u.memoizedProps:null,y=E.children,CS(C,E)?y=null:D!==null&&CS(C,D)&&(d.flags|=32),d.memoizedState!==null&&(C=Sw(u,d,s7,null,null,m),dh._currentValue=C),Xg(u,d),gr(u,d,y,m),d.child;case 6:return u===null&&ht&&((u=m=Qt)&&(m=H7(m,d.pendingProps,Ka),m!==null?(d.stateNode=m,pr=d,Qt=null,u=!0):u=!1),u||Do(d)),null;case 13:return ED(u,d,m);case 4:return Te(d,d.stateNode.containerInfo),y=d.pendingProps,u===null?d.child=Zl(d,null,y,m):gr(u,d,y,m),d.child;case 11:return gD(u,d,d.type,d.pendingProps,m);case 7:return gr(u,d,d.pendingProps,m),d.child;case 8:return gr(u,d,d.pendingProps.children,m),d.child;case 12:return gr(u,d,d.pendingProps.children,m),d.child;case 10:return y=d.pendingProps,Ro(d,d.type,y.value),gr(u,d,y.children,m),d.child;case 9:return C=d.type._context,y=d.pendingProps.children,ql(d),C=mr(C),y=y(C),d.flags|=1,gr(u,d,y,m),d.child;case 14:return vD(u,d,d.type,d.pendingProps,m);case 15:return yD(u,d,d.type,d.pendingProps,m);case 19:return ID(u,d,m);case 31:return p7(u,d,m);case 22:return xD(u,d,m,d.pendingProps);case 24:return ql(d),y=mr($n),u===null?(C=fw(),C===null&&(C=Vt,E=cw(),C.pooledCache=E,E.refCount++,E!==null&&(C.pooledCacheLanes|=m),C=E),d.memoizedState={parent:y,cache:C},pw(d),Ro(d,$n,C)):((u.lanes&m)!==0&&(mw(u,d),Gf(d,null,null,m),Wf()),C=u.memoizedState,E=d.memoizedState,C.parent!==y?(C={parent:y,cache:y},d.memoizedState=C,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=C),Ro(d,$n,y)):(y=E.cache,Ro(d,$n,y),y!==C.cache&&uw(d,[$n],m,!0))),gr(u,d,d.pendingProps.children,m),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function zs(u){u.flags|=4}function Yw(u,d,m,y,C){if((d=(u.mode&32)!==0)&&(d=!1),d){if(u.flags|=16777216,(C&335544128)===C)if(u.stateNode.complete)u.flags|=8192;else if(tR())u.flags|=8192;else throw Yl=_g,hw}else u.flags&=-16777217}function TD(u,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!WR(d))if(tR())u.flags|=8192;else throw Yl=_g,hw}function Zg(u,d){d!==null&&(u.flags|=4),u.flags&16384&&(d=u.tag!==22?l$():536870912,u.lanes|=d,jc|=d)}function Zf(u,d){if(!ht)switch(u.tailMode){case"hidden":d=u.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?u.tail=null:m.sibling=null;break;case"collapsed":m=u.tail;for(var y=null;m!==null;)m.alternate!==null&&(y=m),m=m.sibling;y===null?d||u.tail===null?u.tail=null:u.tail.sibling=null:y.sibling=null}}function Jt(u){var d=u.alternate!==null&&u.alternate.child===u.child,m=0,y=0;if(d)for(var C=u.child;C!==null;)m|=C.lanes|C.childLanes,y|=C.subtreeFlags&65011712,y|=C.flags&65011712,C.return=u,C=C.sibling;else for(C=u.child;C!==null;)m|=C.lanes|C.childLanes,y|=C.subtreeFlags,y|=C.flags,C.return=u,C=C.sibling;return u.subtreeFlags|=y,u.childLanes=m,d}function g7(u,d,m){var y=d.pendingProps;switch(aw(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(d),null;case 1:return Jt(d),null;case 3:return m=d.stateNode,y=null,u!==null&&(y=u.memoizedState.cache),d.memoizedState.cache!==y&&(d.flags|=2048),_s($n),ae(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(u===null||u.child===null)&&(Ic(d)?zs(d):u===null||u.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,sw())),Jt(d),null;case 26:var C=d.type,E=d.memoizedState;return u===null?(zs(d),E!==null?(Jt(d),TD(d,E)):(Jt(d),Yw(d,C,null,y,m))):E?E!==u.memoizedState?(zs(d),Jt(d),TD(d,E)):(Jt(d),d.flags&=-16777217):(u=u.memoizedProps,u!==y&&zs(d),Jt(d),Yw(d,C,u,y,m)),null;case 27:if(Ie(d),m=Se.current,C=d.type,u!==null&&d.stateNode!=null)u.memoizedProps!==y&&zs(d);else{if(!y){if(d.stateNode===null)throw Error(r(166));return Jt(d),null}u=se.current,Ic(d)?lO(d):(u=PR(C,y,m),d.stateNode=u,zs(d))}return Jt(d),null;case 5:if(Ie(d),C=d.type,u!==null&&d.stateNode!=null)u.memoizedProps!==y&&zs(d);else{if(!y){if(d.stateNode===null)throw Error(r(166));return Jt(d),null}if(E=se.current,Ic(d))lO(d);else{var D=fv(Se.current);switch(E){case 1:E=D.createElementNS("http://www.w3.org/2000/svg",C);break;case 2:E=D.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;default:switch(C){case"svg":E=D.createElementNS("http://www.w3.org/2000/svg",C);break;case"math":E=D.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;case"script":E=D.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof y.is=="string"?D.createElement("select",{is:y.is}):D.createElement("select"),y.multiple?E.multiple=!0:y.size&&(E.size=y.size);break;default:E=typeof y.is=="string"?D.createElement(C,{is:y.is}):D.createElement(C)}}E[hr]=d,E[ea]=y;e:for(D=d.child;D!==null;){if(D.tag===5||D.tag===6)E.appendChild(D.stateNode);else if(D.tag!==4&&D.tag!==27&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===d)break e;for(;D.sibling===null;){if(D.return===null||D.return===d)break e;D=D.return}D.sibling.return=D.return,D=D.sibling}d.stateNode=E;e:switch(vr(E,C,y),C){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}y&&zs(d)}}return Jt(d),Yw(d,d.type,u===null?null:u.memoizedProps,d.pendingProps,m),null;case 6:if(u&&d.stateNode!=null)u.memoizedProps!==y&&zs(d);else{if(typeof y!="string"&&d.stateNode===null)throw Error(r(166));if(u=Se.current,Ic(d)){if(u=d.stateNode,m=d.memoizedProps,y=null,C=pr,C!==null)switch(C.tag){case 27:case 5:y=C.memoizedProps}u[hr]=d,u=!!(u.nodeValue===m||y!==null&&y.suppressHydrationWarning===!0||ER(u.nodeValue,m)),u||Do(d,!0)}else u=fv(u).createTextNode(y),u[hr]=d,d.stateNode=u}return Jt(d),null;case 31:if(m=d.memoizedState,u===null||u.memoizedState!==null){if(y=Ic(d),m!==null){if(u===null){if(!y)throw Error(r(318));if(u=d.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(557));u[hr]=d}else Gl(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Jt(d),u=!1}else m=sw(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=m),u=!0;if(!u)return d.flags&256?(ka(d),d):(ka(d),null);if((d.flags&128)!==0)throw Error(r(558))}return Jt(d),null;case 13:if(y=d.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(C=Ic(d),y!==null&&y.dehydrated!==null){if(u===null){if(!C)throw Error(r(318));if(C=d.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(r(317));C[hr]=d}else Gl(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Jt(d),C=!1}else C=sw(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=C),C=!0;if(!C)return d.flags&256?(ka(d),d):(ka(d),null)}return ka(d),(d.flags&128)!==0?(d.lanes=m,d):(m=y!==null,u=u!==null&&u.memoizedState!==null,m&&(y=d.child,C=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(C=y.alternate.memoizedState.cachePool.pool),E=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(E=y.memoizedState.cachePool.pool),E!==C&&(y.flags|=2048)),m!==u&&m&&(d.child.flags|=8192),Zg(d,d.updateQueue),Jt(d),null);case 4:return ae(),u===null&&yS(d.stateNode.containerInfo),Jt(d),null;case 10:return _s(d.type),Jt(d),null;case 19:if(q(kn),y=d.memoizedState,y===null)return Jt(d),null;if(C=(d.flags&128)!==0,E=y.rendering,E===null)if(C)Zf(y,!1);else{if(hn!==0||u!==null&&(u.flags&128)!==0)for(u=d.child;u!==null;){if(E=zg(u),E!==null){for(d.flags|=128,Zf(y,!1),u=E.updateQueue,d.updateQueue=u,Zg(d,u),d.subtreeFlags=0,u=m,m=d.child;m!==null;)rO(m,u),m=m.sibling;return Z(kn,kn.current&1|2),ht&&Ds(d,y.treeForkCount),d.child}u=u.sibling}y.tail!==null&&Zt()>nv&&(d.flags|=128,C=!0,Zf(y,!1),d.lanes=4194304)}else{if(!C)if(u=zg(E),u!==null){if(d.flags|=128,C=!0,u=u.updateQueue,d.updateQueue=u,Zg(d,u),Zf(y,!0),y.tail===null&&y.tailMode==="hidden"&&!E.alternate&&!ht)return Jt(d),null}else 2*Zt()-y.renderingStartTime>nv&&m!==536870912&&(d.flags|=128,C=!0,Zf(y,!1),d.lanes=4194304);y.isBackwards?(E.sibling=d.child,d.child=E):(u=y.last,u!==null?u.sibling=E:d.child=E,y.last=E)}return y.tail!==null?(u=y.tail,y.rendering=u,y.tail=u.sibling,y.renderingStartTime=Zt(),u.sibling=null,m=kn.current,Z(kn,C?m&1|2:m&1),ht&&Ds(d,y.treeForkCount),u):(Jt(d),null);case 22:case 23:return ka(d),xw(),y=d.memoizedState!==null,u!==null?u.memoizedState!==null!==y&&(d.flags|=8192):y&&(d.flags|=8192),y?(m&536870912)!==0&&(d.flags&128)===0&&(Jt(d),d.subtreeFlags&6&&(d.flags|=8192)):Jt(d),m=d.updateQueue,m!==null&&Zg(d,m.retryQueue),m=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),y=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==m&&(d.flags|=2048),u!==null&&q(Kl),null;case 24:return m=null,u!==null&&(m=u.memoizedState.cache),d.memoizedState.cache!==m&&(d.flags|=2048),_s($n),Jt(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function v7(u,d){switch(aw(d),d.tag){case 1:return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 3:return _s($n),ae(),u=d.flags,(u&65536)!==0&&(u&128)===0?(d.flags=u&-65537|128,d):null;case 26:case 27:case 5:return Ie(d),null;case 31:if(d.memoizedState!==null){if(ka(d),d.alternate===null)throw Error(r(340));Gl()}return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 13:if(ka(d),u=d.memoizedState,u!==null&&u.dehydrated!==null){if(d.alternate===null)throw Error(r(340));Gl()}return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 19:return q(kn),null;case 4:return ae(),null;case 10:return _s(d.type),null;case 22:case 23:return ka(d),xw(),u!==null&&q(Kl),u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 24:return _s($n),null;case 25:return null;default:return null}}function $D(u,d){switch(aw(d),d.tag){case 3:_s($n),ae();break;case 26:case 27:case 5:Ie(d);break;case 4:ae();break;case 31:d.memoizedState!==null&&ka(d);break;case 13:ka(d);break;case 19:q(kn);break;case 10:_s(d.type);break;case 22:case 23:ka(d),xw(),u!==null&&q(Kl);break;case 24:_s($n)}}function Qf(u,d){try{var m=d.updateQueue,y=m!==null?m.lastEffect:null;if(y!==null){var C=y.next;m=C;do{if((m.tag&u)===u){y=void 0;var E=m.create,D=m.inst;y=E(),D.destroy=y}m=m.next}while(m!==C)}}catch(L){Mt(d,d.return,L)}}function Fo(u,d,m){try{var y=d.updateQueue,C=y!==null?y.lastEffect:null;if(C!==null){var E=C.next;y=E;do{if((y.tag&u)===u){var D=y.inst,L=D.destroy;if(L!==void 0){D.destroy=void 0,C=d;var X=m,ce=L;try{ce()}catch(xe){Mt(C,X,xe)}}}y=y.next}while(y!==E)}}catch(xe){Mt(d,d.return,xe)}}function OD(u){var d=u.updateQueue;if(d!==null){var m=u.stateNode;try{wO(d,m)}catch(y){Mt(u,u.return,y)}}}function DD(u,d,m){m.props=Jl(u.type,u.memoizedProps),m.state=u.memoizedState;try{m.componentWillUnmount()}catch(y){Mt(u,d,y)}}function Jf(u,d){try{var m=u.ref;if(m!==null){switch(u.tag){case 26:case 27:case 5:var y=u.stateNode;break;case 30:y=u.stateNode;break;default:y=u.stateNode}typeof m=="function"?u.refCleanup=m(y):m.current=y}}catch(C){Mt(u,d,C)}}function Xi(u,d){var m=u.ref,y=u.refCleanup;if(m!==null)if(typeof y=="function")try{y()}catch(C){Mt(u,d,C)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(C){Mt(u,d,C)}else m.current=null}function RD(u){var d=u.type,m=u.memoizedProps,y=u.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":m.autoFocus&&y.focus();break e;case"img":m.src?y.src=m.src:m.srcSet&&(y.srcset=m.srcSet)}}catch(C){Mt(u,u.return,C)}}function Zw(u,d,m){try{var y=u.stateNode;F7(y,u.type,m,d),y[ea]=d}catch(C){Mt(u,u.return,C)}}function _D(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&Ho(u.type)||u.tag===4}function Qw(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||_D(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&Ho(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Jw(u,d,m){var y=u.tag;if(y===5||y===6)u=u.stateNode,d?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(u,d):(d=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,d.appendChild(u),m=m._reactRootContainer,m!=null||d.onclick!==null||(d.onclick=Ts));else if(y!==4&&(y===27&&Ho(u.type)&&(m=u.stateNode,d=null),u=u.child,u!==null))for(Jw(u,d,m),u=u.sibling;u!==null;)Jw(u,d,m),u=u.sibling}function Qg(u,d,m){var y=u.tag;if(y===5||y===6)u=u.stateNode,d?m.insertBefore(u,d):m.appendChild(u);else if(y!==4&&(y===27&&Ho(u.type)&&(m=u.stateNode),u=u.child,u!==null))for(Qg(u,d,m),u=u.sibling;u!==null;)Qg(u,d,m),u=u.sibling}function MD(u){var d=u.stateNode,m=u.memoizedProps;try{for(var y=u.type,C=d.attributes;C.length;)d.removeAttributeNode(C[0]);vr(d,y,m),d[hr]=u,d[ea]=m}catch(E){Mt(u,u.return,E)}}var Fs=!1,Rn=!1,eS=!1,PD=typeof WeakSet=="function"?WeakSet:Set,nr=null;function y7(u,d){if(u=u.containerInfo,wS=xv,u=K$(u),q1(u)){if("selectionStart"in u)var m={start:u.selectionStart,end:u.selectionEnd};else e:{m=(m=u.ownerDocument)&&m.defaultView||window;var y=m.getSelection&&m.getSelection();if(y&&y.rangeCount!==0){m=y.anchorNode;var C=y.anchorOffset,E=y.focusNode;y=y.focusOffset;try{m.nodeType,E.nodeType}catch{m=null;break e}var D=0,L=-1,X=-1,ce=0,xe=0,Ce=u,de=null;t:for(;;){for(var me;Ce!==m||C!==0&&Ce.nodeType!==3||(L=D+C),Ce!==E||y!==0&&Ce.nodeType!==3||(X=D+y),Ce.nodeType===3&&(D+=Ce.nodeValue.length),(me=Ce.firstChild)!==null;)de=Ce,Ce=me;for(;;){if(Ce===u)break t;if(de===m&&++ce===C&&(L=D),de===E&&++xe===y&&(X=D),(me=Ce.nextSibling)!==null)break;Ce=de,de=Ce.parentNode}Ce=me}m=L===-1||X===-1?null:{start:L,end:X}}else m=null}m=m||{start:0,end:0}}else m=null;for(SS={focusedElem:u,selectionRange:m},xv=!1,nr=d;nr!==null;)if(d=nr,u=d.child,(d.subtreeFlags&1028)!==0&&u!==null)u.return=d,nr=u;else for(;nr!==null;){switch(d=nr,E=d.alternate,u=d.flags,d.tag){case 0:if((u&4)!==0&&(u=d.updateQueue,u=u!==null?u.events:null,u!==null))for(m=0;m<u.length;m++)C=u[m],C.ref.impl=C.nextImpl;break;case 11:case 15:break;case 1:if((u&1024)!==0&&E!==null){u=void 0,m=d,C=E.memoizedProps,E=E.memoizedState,y=m.stateNode;try{var _e=Jl(m.type,C);u=y.getSnapshotBeforeUpdate(_e,E),y.__reactInternalSnapshotBeforeUpdate=u}catch(He){Mt(m,m.return,He)}}break;case 3:if((u&1024)!==0){if(u=d.stateNode.containerInfo,m=u.nodeType,m===9)ES(u);else if(m===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":ES(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(r(163))}if(u=d.sibling,u!==null){u.return=d.return,nr=u;break}nr=d.return}}function LD(u,d,m){var y=m.flags;switch(m.tag){case 0:case 11:case 15:Bs(u,m),y&4&&Qf(5,m);break;case 1:if(Bs(u,m),y&4)if(u=m.stateNode,d===null)try{u.componentDidMount()}catch(D){Mt(m,m.return,D)}else{var C=Jl(m.type,d.memoizedProps);d=d.memoizedState;try{u.componentDidUpdate(C,d,u.__reactInternalSnapshotBeforeUpdate)}catch(D){Mt(m,m.return,D)}}y&64&&OD(m),y&512&&Jf(m,m.return);break;case 3:if(Bs(u,m),y&64&&(u=m.updateQueue,u!==null)){if(d=null,m.child!==null)switch(m.child.tag){case 27:case 5:d=m.child.stateNode;break;case 1:d=m.child.stateNode}try{wO(u,d)}catch(D){Mt(m,m.return,D)}}break;case 27:d===null&&y&4&&MD(m);case 26:case 5:Bs(u,m),d===null&&y&4&&RD(m),y&512&&Jf(m,m.return);break;case 12:Bs(u,m);break;case 31:Bs(u,m),y&4&&jD(u,m);break;case 13:Bs(u,m),y&4&&BD(u,m),y&64&&(u=m.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(m=I7.bind(null,m),q7(u,m))));break;case 22:if(y=m.memoizedState!==null||Fs,!y){d=d!==null&&d.memoizedState!==null||Rn,C=Fs;var E=Rn;Fs=y,(Rn=d)&&!E?Us(u,m,(m.subtreeFlags&8772)!==0):Bs(u,m),Fs=C,Rn=E}break;case 30:break;default:Bs(u,m)}}function zD(u){var d=u.alternate;d!==null&&(u.alternate=null,zD(d)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(d=u.stateNode,d!==null&&$1(d)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var an=null,na=!1;function js(u,d,m){for(m=m.child;m!==null;)FD(u,d,m),m=m.sibling}function FD(u,d,m){if(jr&&typeof jr.onCommitFiberUnmount=="function")try{jr.onCommitFiberUnmount(Gi,m)}catch{}switch(m.tag){case 26:Rn||Xi(m,d),js(u,d,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Rn||Xi(m,d);var y=an,C=na;Ho(m.type)&&(an=m.stateNode,na=!1),js(u,d,m),lh(m.stateNode),an=y,na=C;break;case 5:Rn||Xi(m,d);case 6:if(y=an,C=na,an=null,js(u,d,m),an=y,na=C,an!==null)if(na)try{(an.nodeType===9?an.body:an.nodeName==="HTML"?an.ownerDocument.body:an).removeChild(m.stateNode)}catch(E){Mt(m,d,E)}else try{an.removeChild(m.stateNode)}catch(E){Mt(m,d,E)}break;case 18:an!==null&&(na?(u=an,OR(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,m.stateNode),Kc(u)):OR(an,m.stateNode));break;case 4:y=an,C=na,an=m.stateNode.containerInfo,na=!0,js(u,d,m),an=y,na=C;break;case 0:case 11:case 14:case 15:Fo(2,m,d),Rn||Fo(4,m,d),js(u,d,m);break;case 1:Rn||(Xi(m,d),y=m.stateNode,typeof y.componentWillUnmount=="function"&&DD(m,d,y)),js(u,d,m);break;case 21:js(u,d,m);break;case 22:Rn=(y=Rn)||m.memoizedState!==null,js(u,d,m),Rn=y;break;default:js(u,d,m)}}function jD(u,d){if(d.memoizedState===null&&(u=d.alternate,u!==null&&(u=u.memoizedState,u!==null))){u=u.dehydrated;try{Kc(u)}catch(m){Mt(d,d.return,m)}}}function BD(u,d){if(d.memoizedState===null&&(u=d.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Kc(u)}catch(m){Mt(d,d.return,m)}}function x7(u){switch(u.tag){case 31:case 13:case 19:var d=u.stateNode;return d===null&&(d=u.stateNode=new PD),d;case 22:return u=u.stateNode,d=u._retryCache,d===null&&(d=u._retryCache=new PD),d;default:throw Error(r(435,u.tag))}}function Jg(u,d){var m=x7(u);d.forEach(function(y){if(!m.has(y)){m.add(y);var C=A7.bind(null,u,y);y.then(C,C)}})}function ra(u,d){var m=d.deletions;if(m!==null)for(var y=0;y<m.length;y++){var C=m[y],E=u,D=d,L=D;e:for(;L!==null;){switch(L.tag){case 27:if(Ho(L.type)){an=L.stateNode,na=!1;break e}break;case 5:an=L.stateNode,na=!1;break e;case 3:case 4:an=L.stateNode.containerInfo,na=!0;break e}L=L.return}if(an===null)throw Error(r(160));FD(E,D,C),an=null,na=!1,E=C.alternate,E!==null&&(E.return=null),C.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)UD(d,u),d=d.sibling}var Ci=null;function UD(u,d){var m=u.alternate,y=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:ra(d,u),aa(u),y&4&&(Fo(3,u,u.return),Qf(3,u),Fo(5,u,u.return));break;case 1:ra(d,u),aa(u),y&512&&(Rn||m===null||Xi(m,m.return)),y&64&&Fs&&(u=u.updateQueue,u!==null&&(y=u.callbacks,y!==null&&(m=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=m===null?y:m.concat(y))));break;case 26:var C=Ci;if(ra(d,u),aa(u),y&512&&(Rn||m===null||Xi(m,m.return)),y&4){var E=m!==null?m.memoizedState:null;if(y=u.memoizedState,m===null)if(y===null)if(u.stateNode===null){e:{y=u.type,m=u.memoizedProps,C=C.ownerDocument||C;t:switch(y){case"title":E=C.getElementsByTagName("title")[0],(!E||E[Nf]||E[hr]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=C.createElement(y),C.head.insertBefore(E,C.querySelector("head > title"))),vr(E,y,m),E[hr]=u,tr(E),y=E;break e;case"link":var D=UR("link","href",C).get(y+(m.href||""));if(D){for(var L=0;L<D.length;L++)if(E=D[L],E.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&E.getAttribute("rel")===(m.rel==null?null:m.rel)&&E.getAttribute("title")===(m.title==null?null:m.title)&&E.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){D.splice(L,1);break t}}E=C.createElement(y),vr(E,y,m),C.head.appendChild(E);break;case"meta":if(D=UR("meta","content",C).get(y+(m.content||""))){for(L=0;L<D.length;L++)if(E=D[L],E.getAttribute("content")===(m.content==null?null:""+m.content)&&E.getAttribute("name")===(m.name==null?null:m.name)&&E.getAttribute("property")===(m.property==null?null:m.property)&&E.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&E.getAttribute("charset")===(m.charSet==null?null:m.charSet)){D.splice(L,1);break t}}E=C.createElement(y),vr(E,y,m),C.head.appendChild(E);break;default:throw Error(r(468,y))}E[hr]=u,tr(E),y=E}u.stateNode=y}else VR(C,u.type,u.stateNode);else u.stateNode=BR(C,y,u.memoizedProps);else E!==y?(E===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):E.count--,y===null?VR(C,u.type,u.stateNode):BR(C,y,u.memoizedProps)):y===null&&u.stateNode!==null&&Zw(u,u.memoizedProps,m.memoizedProps)}break;case 27:ra(d,u),aa(u),y&512&&(Rn||m===null||Xi(m,m.return)),m!==null&&y&4&&Zw(u,u.memoizedProps,m.memoizedProps);break;case 5:if(ra(d,u),aa(u),y&512&&(Rn||m===null||Xi(m,m.return)),u.flags&32){C=u.stateNode;try{vc(C,"")}catch(_e){Mt(u,u.return,_e)}}y&4&&u.stateNode!=null&&(C=u.memoizedProps,Zw(u,C,m!==null?m.memoizedProps:C)),y&1024&&(eS=!0);break;case 6:if(ra(d,u),aa(u),y&4){if(u.stateNode===null)throw Error(r(162));y=u.memoizedProps,m=u.stateNode;try{m.nodeValue=y}catch(_e){Mt(u,u.return,_e)}}break;case 3:if(mv=null,C=Ci,Ci=hv(d.containerInfo),ra(d,u),Ci=C,aa(u),y&4&&m!==null&&m.memoizedState.isDehydrated)try{Kc(d.containerInfo)}catch(_e){Mt(u,u.return,_e)}eS&&(eS=!1,VD(u));break;case 4:y=Ci,Ci=hv(u.stateNode.containerInfo),ra(d,u),aa(u),Ci=y;break;case 12:ra(d,u),aa(u);break;case 31:ra(d,u),aa(u),y&4&&(y=u.updateQueue,y!==null&&(u.updateQueue=null,Jg(u,y)));break;case 13:ra(d,u),aa(u),u.child.flags&8192&&u.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(tv=Zt()),y&4&&(y=u.updateQueue,y!==null&&(u.updateQueue=null,Jg(u,y)));break;case 22:C=u.memoizedState!==null;var X=m!==null&&m.memoizedState!==null,ce=Fs,xe=Rn;if(Fs=ce||C,Rn=xe||X,ra(d,u),Rn=xe,Fs=ce,aa(u),y&8192)e:for(d=u.stateNode,d._visibility=C?d._visibility&-2:d._visibility|1,C&&(m===null||X||Fs||Rn||eu(u)),m=null,d=u;;){if(d.tag===5||d.tag===26){if(m===null){X=m=d;try{if(E=X.stateNode,C)D=E.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{L=X.stateNode;var Ce=X.memoizedProps.style,de=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;L.style.display=de==null||typeof de=="boolean"?"":(""+de).trim()}}catch(_e){Mt(X,X.return,_e)}}}else if(d.tag===6){if(m===null){X=d;try{X.stateNode.nodeValue=C?"":X.memoizedProps}catch(_e){Mt(X,X.return,_e)}}}else if(d.tag===18){if(m===null){X=d;try{var me=X.stateNode;C?DR(me,!0):DR(X.stateNode,!1)}catch(_e){Mt(X,X.return,_e)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===u)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break e;for(;d.sibling===null;){if(d.return===null||d.return===u)break e;m===d&&(m=null),d=d.return}m===d&&(m=null),d.sibling.return=d.return,d=d.sibling}y&4&&(y=u.updateQueue,y!==null&&(m=y.retryQueue,m!==null&&(y.retryQueue=null,Jg(u,m))));break;case 19:ra(d,u),aa(u),y&4&&(y=u.updateQueue,y!==null&&(u.updateQueue=null,Jg(u,y)));break;case 30:break;case 21:break;default:ra(d,u),aa(u)}}function aa(u){var d=u.flags;if(d&2){try{for(var m,y=u.return;y!==null;){if(_D(y)){m=y;break}y=y.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var C=m.stateNode,E=Qw(u);Qg(u,E,C);break;case 5:var D=m.stateNode;m.flags&32&&(vc(D,""),m.flags&=-33);var L=Qw(u);Qg(u,L,D);break;case 3:case 4:var X=m.stateNode.containerInfo,ce=Qw(u);Jw(u,ce,X);break;default:throw Error(r(161))}}catch(xe){Mt(u,u.return,xe)}u.flags&=-3}d&4096&&(u.flags&=-4097)}function VD(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var d=u;VD(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),u=u.sibling}}function Bs(u,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)LD(u,d.alternate,d),d=d.sibling}function eu(u){for(u=u.child;u!==null;){var d=u;switch(d.tag){case 0:case 11:case 14:case 15:Fo(4,d,d.return),eu(d);break;case 1:Xi(d,d.return);var m=d.stateNode;typeof m.componentWillUnmount=="function"&&DD(d,d.return,m),eu(d);break;case 27:lh(d.stateNode);case 26:case 5:Xi(d,d.return),eu(d);break;case 22:d.memoizedState===null&&eu(d);break;case 30:eu(d);break;default:eu(d)}u=u.sibling}}function Us(u,d,m){for(m=m&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var y=d.alternate,C=u,E=d,D=E.flags;switch(E.tag){case 0:case 11:case 15:Us(C,E,m),Qf(4,E);break;case 1:if(Us(C,E,m),y=E,C=y.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(ce){Mt(y,y.return,ce)}if(y=E,C=y.updateQueue,C!==null){var L=y.stateNode;try{var X=C.shared.hiddenCallbacks;if(X!==null)for(C.shared.hiddenCallbacks=null,C=0;C<X.length;C++)bO(X[C],L)}catch(ce){Mt(y,y.return,ce)}}m&&D&64&&OD(E),Jf(E,E.return);break;case 27:MD(E);case 26:case 5:Us(C,E,m),m&&y===null&&D&4&&RD(E),Jf(E,E.return);break;case 12:Us(C,E,m);break;case 31:Us(C,E,m),m&&D&4&&jD(C,E);break;case 13:Us(C,E,m),m&&D&4&&BD(C,E);break;case 22:E.memoizedState===null&&Us(C,E,m),Jf(E,E.return);break;case 30:break;default:Us(C,E,m)}d=d.sibling}}function tS(u,d){var m=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),u=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(u=d.memoizedState.cachePool.pool),u!==m&&(u!=null&&u.refCount++,m!=null&&Ff(m))}function nS(u,d){u=null,d.alternate!==null&&(u=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==u&&(d.refCount++,u!=null&&Ff(u))}function ki(u,d,m,y){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)WD(u,d,m,y),d=d.sibling}function WD(u,d,m,y){var C=d.flags;switch(d.tag){case 0:case 11:case 15:ki(u,d,m,y),C&2048&&Qf(9,d);break;case 1:ki(u,d,m,y);break;case 3:ki(u,d,m,y),C&2048&&(u=null,d.alternate!==null&&(u=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==u&&(d.refCount++,u!=null&&Ff(u)));break;case 12:if(C&2048){ki(u,d,m,y),u=d.stateNode;try{var E=d.memoizedProps,D=E.id,L=E.onPostCommit;typeof L=="function"&&L(D,d.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(X){Mt(d,d.return,X)}}else ki(u,d,m,y);break;case 31:ki(u,d,m,y);break;case 13:ki(u,d,m,y);break;case 23:break;case 22:E=d.stateNode,D=d.alternate,d.memoizedState!==null?E._visibility&2?ki(u,d,m,y):eh(u,d):E._visibility&2?ki(u,d,m,y):(E._visibility|=2,Lc(u,d,m,y,(d.subtreeFlags&10256)!==0||!1)),C&2048&&tS(D,d);break;case 24:ki(u,d,m,y),C&2048&&nS(d.alternate,d);break;default:ki(u,d,m,y)}}function Lc(u,d,m,y,C){for(C=C&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var E=u,D=d,L=m,X=y,ce=D.flags;switch(D.tag){case 0:case 11:case 15:Lc(E,D,L,X,C),Qf(8,D);break;case 23:break;case 22:var xe=D.stateNode;D.memoizedState!==null?xe._visibility&2?Lc(E,D,L,X,C):eh(E,D):(xe._visibility|=2,Lc(E,D,L,X,C)),C&&ce&2048&&tS(D.alternate,D);break;case 24:Lc(E,D,L,X,C),C&&ce&2048&&nS(D.alternate,D);break;default:Lc(E,D,L,X,C)}d=d.sibling}}function eh(u,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var m=u,y=d,C=y.flags;switch(y.tag){case 22:eh(m,y),C&2048&&tS(y.alternate,y);break;case 24:eh(m,y),C&2048&&nS(y.alternate,y);break;default:eh(m,y)}d=d.sibling}}var th=8192;function zc(u,d,m){if(u.subtreeFlags&th)for(u=u.child;u!==null;)GD(u,d,m),u=u.sibling}function GD(u,d,m){switch(u.tag){case 26:zc(u,d,m),u.flags&th&&u.memoizedState!==null&&iX(m,Ci,u.memoizedState,u.memoizedProps);break;case 5:zc(u,d,m);break;case 3:case 4:var y=Ci;Ci=hv(u.stateNode.containerInfo),zc(u,d,m),Ci=y;break;case 22:u.memoizedState===null&&(y=u.alternate,y!==null&&y.memoizedState!==null?(y=th,th=16777216,zc(u,d,m),th=y):zc(u,d,m));break;default:zc(u,d,m)}}function HD(u){var d=u.alternate;if(d!==null&&(u=d.child,u!==null)){d.child=null;do d=u.sibling,u.sibling=null,u=d;while(u!==null)}}function nh(u){var d=u.deletions;if((u.flags&16)!==0){if(d!==null)for(var m=0;m<d.length;m++){var y=d[m];nr=y,KD(y,u)}HD(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)qD(u),u=u.sibling}function qD(u){switch(u.tag){case 0:case 11:case 15:nh(u),u.flags&2048&&Fo(9,u,u.return);break;case 3:nh(u);break;case 12:nh(u);break;case 22:var d=u.stateNode;u.memoizedState!==null&&d._visibility&2&&(u.return===null||u.return.tag!==13)?(d._visibility&=-3,ev(u)):nh(u);break;default:nh(u)}}function ev(u){var d=u.deletions;if((u.flags&16)!==0){if(d!==null)for(var m=0;m<d.length;m++){var y=d[m];nr=y,KD(y,u)}HD(u)}for(u=u.child;u!==null;){switch(d=u,d.tag){case 0:case 11:case 15:Fo(8,d,d.return),ev(d);break;case 22:m=d.stateNode,m._visibility&2&&(m._visibility&=-3,ev(d));break;default:ev(d)}u=u.sibling}}function KD(u,d){for(;nr!==null;){var m=nr;switch(m.tag){case 0:case 11:case 15:Fo(8,m,d);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var y=m.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Ff(m.memoizedState.cache)}if(y=m.child,y!==null)y.return=m,nr=y;else e:for(m=u;nr!==null;){y=nr;var C=y.sibling,E=y.return;if(zD(y),y===m){nr=null;break e}if(C!==null){C.return=E,nr=C;break e}nr=E}}}var b7={getCacheForType:function(u){var d=mr($n),m=d.data.get(u);return m===void 0&&(m=u(),d.data.set(u,m)),m},cacheSignal:function(){return mr($n).controller.signal}},w7=typeof WeakMap=="function"?WeakMap:Map,Tt=0,Vt=null,ut=null,dt=0,_t=0,Ea=null,jo=!1,Fc=!1,rS=!1,Vs=0,hn=0,Bo=0,tu=0,aS=0,Na=0,jc=0,rh=null,ia=null,iS=!1,tv=0,XD=0,nv=1/0,rv=null,Uo=null,Wn=0,Vo=null,Bc=null,Ws=0,sS=0,oS=null,YD=null,ah=0,lS=null;function Ia(){return(Tt&2)!==0&&dt!==0?dt&-dt:F.T!==null?pS():f$()}function ZD(){if(Na===0)if((dt&536870912)===0||ht){var u=dg;dg<<=1,(dg&3932160)===0&&(dg=262144),Na=u}else Na=536870912;return u=Ca.current,u!==null&&(u.flags|=32),Na}function sa(u,d,m){(u===Vt&&(_t===2||_t===9)||u.cancelPendingCommit!==null)&&(Uc(u,0),Wo(u,dt,Na,!1)),Ef(u,m),((Tt&2)===0||u!==Vt)&&(u===Vt&&((Tt&2)===0&&(tu|=m),hn===4&&Wo(u,dt,Na,!1)),Yi(u))}function QD(u,d,m){if((Tt&6)!==0)throw Error(r(327));var y=!m&&(d&127)===0&&(d&u.expiredLanes)===0||kf(u,d),C=y?k7(u,d):cS(u,d,!0),E=y;do{if(C===0){Fc&&!y&&Wo(u,d,0,!1);break}else{if(m=u.current.alternate,E&&!S7(m)){C=cS(u,d,!1),E=!1;continue}if(C===2){if(E=d,u.errorRecoveryDisabledLanes&E)var D=0;else D=u.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){d=D;e:{var L=u;C=rh;var X=L.current.memoizedState.isDehydrated;if(X&&(Uc(L,D).flags|=256),D=cS(L,D,!1),D!==2){if(rS&&!X){L.errorRecoveryDisabledLanes|=E,tu|=E,C=4;break e}E=ia,ia=C,E!==null&&(ia===null?ia=E:ia.push.apply(ia,E))}C=D}if(E=!1,C!==2)continue}}if(C===1){Uc(u,0),Wo(u,d,0,!0);break}e:{switch(y=u,E=C,E){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:Wo(y,d,Na,!jo);break e;case 2:ia=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(C=tv+300-Zt(),10<C)){if(Wo(y,d,Na,!jo),hg(y,0,!0)!==0)break e;Ws=d,y.timeoutHandle=TR(JD.bind(null,y,m,ia,rv,iS,d,Na,tu,jc,jo,E,"Throttled",-0,0),C);break e}JD(y,m,ia,rv,iS,d,Na,tu,jc,jo,E,null,-0,0)}}break}while(!0);Yi(u)}function JD(u,d,m,y,C,E,D,L,X,ce,xe,Ce,de,me){if(u.timeoutHandle=-1,Ce=d.subtreeFlags,Ce&8192||(Ce&16785408)===16785408){Ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ts},GD(d,E,Ce);var _e=(E&62914560)===E?tv-Zt():(E&4194048)===E?XD-Zt():0;if(_e=sX(Ce,_e),_e!==null){Ws=E,u.cancelPendingCommit=_e(oR.bind(null,u,d,E,m,y,C,D,L,X,xe,Ce,null,de,me)),Wo(u,E,D,!ce);return}}oR(u,d,E,m,y,C,D,L,X)}function S7(u){for(var d=u;;){var m=d.tag;if((m===0||m===11||m===15)&&d.flags&16384&&(m=d.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var y=0;y<m.length;y++){var C=m[y],E=C.getSnapshot;C=C.value;try{if(!wa(E(),C))return!1}catch{return!1}}if(m=d.child,d.subtreeFlags&16384&&m!==null)m.return=d,d=m;else{if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Wo(u,d,m,y){d&=~aS,d&=~tu,u.suspendedLanes|=d,u.pingedLanes&=~d,y&&(u.warmLanes|=d),y=u.expirationTimes;for(var C=d;0<C;){var E=31-ba(C),D=1<<E;y[E]=-1,C&=~D}m!==0&&u$(u,m,d)}function av(){return(Tt&6)===0?(ih(0),!1):!0}function uS(){if(ut!==null){if(_t===0)var u=ut.return;else u=ut,Rs=Hl=null,Ew(u),Dc=null,Bf=0,u=ut;for(;u!==null;)$D(u.alternate,u),u=u.return;ut=null}}function Uc(u,d){var m=u.timeoutHandle;m!==-1&&(u.timeoutHandle=-1,U7(m)),m=u.cancelPendingCommit,m!==null&&(u.cancelPendingCommit=null,m()),Ws=0,uS(),Vt=u,ut=m=Os(u.current,null),dt=d,_t=0,Ea=null,jo=!1,Fc=kf(u,d),rS=!1,jc=Na=aS=tu=Bo=hn=0,ia=rh=null,iS=!1,(d&8)!==0&&(d|=d&32);var y=u.entangledLanes;if(y!==0)for(u=u.entanglements,y&=d;0<y;){var C=31-ba(y),E=1<<C;d|=u[C],y&=~E}return Vs=d,Eg(),m}function eR(u,d){tt=null,F.H=Xf,d===Oc||d===Rg?(d=gO(),_t=3):d===hw?(d=gO(),_t=4):_t=d===Bw?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Ea=d,ut===null&&(hn=1,qg(u,Ga(d,u.current)))}function tR(){var u=Ca.current;return u===null?!0:(dt&4194048)===dt?Xa===null:(dt&62914560)===dt||(dt&536870912)!==0?u===Xa:!1}function nR(){var u=F.H;return F.H=Xf,u===null?Xf:u}function rR(){var u=F.A;return F.A=b7,u}function iv(){hn=4,jo||(dt&4194048)!==dt&&Ca.current!==null||(Fc=!0),(Bo&134217727)===0&&(tu&134217727)===0||Vt===null||Wo(Vt,dt,Na,!1)}function cS(u,d,m){var y=Tt;Tt|=2;var C=nR(),E=rR();(Vt!==u||dt!==d)&&(rv=null,Uc(u,d)),d=!1;var D=hn;e:do try{if(_t!==0&&ut!==null){var L=ut,X=Ea;switch(_t){case 8:uS(),D=6;break e;case 3:case 2:case 9:case 6:Ca.current===null&&(d=!0);var ce=_t;if(_t=0,Ea=null,Vc(u,L,X,ce),m&&Fc){D=0;break e}break;default:ce=_t,_t=0,Ea=null,Vc(u,L,X,ce)}}C7(),D=hn;break}catch(xe){eR(u,xe)}while(!0);return d&&u.shellSuspendCounter++,Rs=Hl=null,Tt=y,F.H=C,F.A=E,ut===null&&(Vt=null,dt=0,Eg()),D}function C7(){for(;ut!==null;)aR(ut)}function k7(u,d){var m=Tt;Tt|=2;var y=nR(),C=rR();Vt!==u||dt!==d?(rv=null,nv=Zt()+500,Uc(u,d)):Fc=kf(u,d);e:do try{if(_t!==0&&ut!==null){d=ut;var E=Ea;t:switch(_t){case 1:_t=0,Ea=null,Vc(u,d,E,1);break;case 2:case 9:if(pO(E)){_t=0,Ea=null,iR(d);break}d=function(){_t!==2&&_t!==9||Vt!==u||(_t=7),Yi(u)},E.then(d,d);break e;case 3:_t=7;break e;case 4:_t=5;break e;case 7:pO(E)?(_t=0,Ea=null,iR(d)):(_t=0,Ea=null,Vc(u,d,E,7));break;case 5:var D=null;switch(ut.tag){case 26:D=ut.memoizedState;case 5:case 27:var L=ut;if(D?WR(D):L.stateNode.complete){_t=0,Ea=null;var X=L.sibling;if(X!==null)ut=X;else{var ce=L.return;ce!==null?(ut=ce,sv(ce)):ut=null}break t}}_t=0,Ea=null,Vc(u,d,E,5);break;case 6:_t=0,Ea=null,Vc(u,d,E,6);break;case 8:uS(),hn=6;break e;default:throw Error(r(462))}}E7();break}catch(xe){eR(u,xe)}while(!0);return Rs=Hl=null,F.H=y,F.A=C,Tt=m,ut!==null?0:(Vt=null,dt=0,Eg(),hn)}function E7(){for(;ut!==null&&!Fr();)aR(ut)}function aR(u){var d=AD(u.alternate,u,Vs);u.memoizedProps=u.pendingProps,d===null?sv(u):ut=d}function iR(u){var d=u,m=d.alternate;switch(d.tag){case 15:case 0:d=SD(m,d,d.pendingProps,d.type,void 0,dt);break;case 11:d=SD(m,d,d.pendingProps,d.type.render,d.ref,dt);break;case 5:Ew(d);default:$D(m,d),d=ut=rO(d,Vs),d=AD(m,d,Vs)}u.memoizedProps=u.pendingProps,d===null?sv(u):ut=d}function Vc(u,d,m,y){Rs=Hl=null,Ew(d),Dc=null,Bf=0;var C=d.return;try{if(h7(u,C,d,m,dt)){hn=1,qg(u,Ga(m,u.current)),ut=null;return}}catch(E){if(C!==null)throw ut=C,E;hn=1,qg(u,Ga(m,u.current)),ut=null;return}d.flags&32768?(ht||y===1?u=!0:Fc||(dt&536870912)!==0?u=!1:(jo=u=!0,(y===2||y===9||y===3||y===6)&&(y=Ca.current,y!==null&&y.tag===13&&(y.flags|=16384))),sR(d,u)):sv(d)}function sv(u){var d=u;do{if((d.flags&32768)!==0){sR(d,jo);return}u=d.return;var m=g7(d.alternate,d,Vs);if(m!==null){ut=m;return}if(d=d.sibling,d!==null){ut=d;return}ut=d=u}while(d!==null);hn===0&&(hn=5)}function sR(u,d){do{var m=v7(u.alternate,u);if(m!==null){m.flags&=32767,ut=m;return}if(m=u.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!d&&(u=u.sibling,u!==null)){ut=u;return}ut=u=m}while(u!==null);hn=6,ut=null}function oR(u,d,m,y,C,E,D,L,X){u.cancelPendingCommit=null;do ov();while(Wn!==0);if((Tt&6)!==0)throw Error(r(327));if(d!==null){if(d===u.current)throw Error(r(177));if(E=d.lanes|d.childLanes,E|=Q1,a9(u,m,E,D,L,X),u===Vt&&(ut=Vt=null,dt=0),Bc=d,Vo=u,Ws=m,sS=E,oS=C,YD=y,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,T7(xa,function(){return fR(),null})):(u.callbackNode=null,u.callbackPriority=0),y=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||y){y=F.T,F.T=null,C=V.p,V.p=2,D=Tt,Tt|=4;try{y7(u,d,m)}finally{Tt=D,V.p=C,F.T=y}}Wn=1,lR(),uR(),cR()}}function lR(){if(Wn===1){Wn=0;var u=Vo,d=Bc,m=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||m){m=F.T,F.T=null;var y=V.p;V.p=2;var C=Tt;Tt|=4;try{UD(d,u);var E=SS,D=K$(u.containerInfo),L=E.focusedElem,X=E.selectionRange;if(D!==L&&L&&L.ownerDocument&&q$(L.ownerDocument.documentElement,L)){if(X!==null&&q1(L)){var ce=X.start,xe=X.end;if(xe===void 0&&(xe=ce),"selectionStart"in L)L.selectionStart=ce,L.selectionEnd=Math.min(xe,L.value.length);else{var Ce=L.ownerDocument||document,de=Ce&&Ce.defaultView||window;if(de.getSelection){var me=de.getSelection(),_e=L.textContent.length,He=Math.min(X.start,_e),jt=X.end===void 0?He:Math.min(X.end,_e);!me.extend&&He>jt&&(D=jt,jt=He,He=D);var ie=H$(L,He),J=H$(L,jt);if(ie&&J&&(me.rangeCount!==1||me.anchorNode!==ie.node||me.anchorOffset!==ie.offset||me.focusNode!==J.node||me.focusOffset!==J.offset)){var ue=Ce.createRange();ue.setStart(ie.node,ie.offset),me.removeAllRanges(),He>jt?(me.addRange(ue),me.extend(J.node,J.offset)):(ue.setEnd(J.node,J.offset),me.addRange(ue))}}}}for(Ce=[],me=L;me=me.parentNode;)me.nodeType===1&&Ce.push({element:me,left:me.scrollLeft,top:me.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<Ce.length;L++){var we=Ce[L];we.element.scrollLeft=we.left,we.element.scrollTop=we.top}}xv=!!wS,SS=wS=null}finally{Tt=C,V.p=y,F.T=m}}u.current=d,Wn=2}}function uR(){if(Wn===2){Wn=0;var u=Vo,d=Bc,m=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||m){m=F.T,F.T=null;var y=V.p;V.p=2;var C=Tt;Tt|=4;try{LD(u,d.alternate,d)}finally{Tt=C,V.p=y,F.T=m}}Wn=3}}function cR(){if(Wn===4||Wn===3){Wn=0,Is();var u=Vo,d=Bc,m=Ws,y=YD;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?Wn=5:(Wn=0,Bc=Vo=null,dR(u,u.pendingLanes));var C=u.pendingLanes;if(C===0&&(Uo=null),A1(m),d=d.stateNode,jr&&typeof jr.onCommitFiberRoot=="function")try{jr.onCommitFiberRoot(Gi,d,void 0,(d.current.flags&128)===128)}catch{}if(y!==null){d=F.T,C=V.p,V.p=2,F.T=null;try{for(var E=u.onRecoverableError,D=0;D<y.length;D++){var L=y[D];E(L.value,{componentStack:L.stack})}}finally{F.T=d,V.p=C}}(Ws&3)!==0&&ov(),Yi(u),C=u.pendingLanes,(m&261930)!==0&&(C&42)!==0?u===lS?ah++:(ah=0,lS=u):ah=0,ih(0)}}function dR(u,d){(u.pooledCacheLanes&=d)===0&&(d=u.pooledCache,d!=null&&(u.pooledCache=null,Ff(d)))}function ov(){return lR(),uR(),cR(),fR()}function fR(){if(Wn!==5)return!1;var u=Vo,d=sS;sS=0;var m=A1(Ws),y=F.T,C=V.p;try{V.p=32>m?32:m,F.T=null,m=oS,oS=null;var E=Vo,D=Ws;if(Wn=0,Bc=Vo=null,Ws=0,(Tt&6)!==0)throw Error(r(331));var L=Tt;if(Tt|=4,qD(E.current),WD(E,E.current,D,m),Tt=L,ih(0,!1),jr&&typeof jr.onPostCommitFiberRoot=="function")try{jr.onPostCommitFiberRoot(Gi,E)}catch{}return!0}finally{V.p=C,F.T=y,dR(u,d)}}function hR(u,d,m){d=Ga(m,d),d=jw(u.stateNode,d,2),u=Po(u,d,2),u!==null&&(Ef(u,2),Yi(u))}function Mt(u,d,m){if(u.tag===3)hR(u,u,m);else for(;d!==null;){if(d.tag===3){hR(d,u,m);break}else if(d.tag===1){var y=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Uo===null||!Uo.has(y))){u=Ga(m,u),m=pD(2),y=Po(d,m,2),y!==null&&(mD(m,y,d,u),Ef(y,2),Yi(y));break}}d=d.return}}function dS(u,d,m){var y=u.pingCache;if(y===null){y=u.pingCache=new w7;var C=new Set;y.set(d,C)}else C=y.get(d),C===void 0&&(C=new Set,y.set(d,C));C.has(m)||(rS=!0,C.add(m),u=N7.bind(null,u,d,m),d.then(u,u))}function N7(u,d,m){var y=u.pingCache;y!==null&&y.delete(d),u.pingedLanes|=u.suspendedLanes&m,u.warmLanes&=~m,Vt===u&&(dt&m)===m&&(hn===4||hn===3&&(dt&62914560)===dt&&300>Zt()-tv?(Tt&2)===0&&Uc(u,0):aS|=m,jc===dt&&(jc=0)),Yi(u)}function pR(u,d){d===0&&(d=l$()),u=Vl(u,d),u!==null&&(Ef(u,d),Yi(u))}function I7(u){var d=u.memoizedState,m=0;d!==null&&(m=d.retryLane),pR(u,m)}function A7(u,d){var m=0;switch(u.tag){case 31:case 13:var y=u.stateNode,C=u.memoizedState;C!==null&&(m=C.retryLane);break;case 19:y=u.stateNode;break;case 22:y=u.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(d),pR(u,m)}function T7(u,d){return dn(u,d)}var lv=null,Wc=null,fS=!1,uv=!1,hS=!1,Go=0;function Yi(u){u!==Wc&&u.next===null&&(Wc===null?lv=Wc=u:Wc=Wc.next=u),uv=!0,fS||(fS=!0,O7())}function ih(u,d){if(!hS&&uv){hS=!0;do for(var m=!1,y=lv;y!==null;){if(u!==0){var C=y.pendingLanes;if(C===0)var E=0;else{var D=y.suspendedLanes,L=y.pingedLanes;E=(1<<31-ba(42|u)+1)-1,E&=C&~(D&~L),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(m=!0,yR(y,E))}else E=dt,E=hg(y,y===Vt?E:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(E&3)===0||kf(y,E)||(m=!0,yR(y,E));y=y.next}while(m);hS=!1}}function $7(){mR()}function mR(){uv=fS=!1;var u=0;Go!==0&&B7()&&(u=Go);for(var d=Zt(),m=null,y=lv;y!==null;){var C=y.next,E=gR(y,d);E===0?(y.next=null,m===null?lv=C:m.next=C,C===null&&(Wc=m)):(m=y,(u!==0||(E&3)!==0)&&(uv=!0)),y=C}Wn!==0&&Wn!==5||ih(u),Go!==0&&(Go=0)}function gR(u,d){for(var m=u.suspendedLanes,y=u.pingedLanes,C=u.expirationTimes,E=u.pendingLanes&-62914561;0<E;){var D=31-ba(E),L=1<<D,X=C[D];X===-1?((L&m)===0||(L&y)!==0)&&(C[D]=r9(L,d)):X<=d&&(u.expiredLanes|=L),E&=~L}if(d=Vt,m=dt,m=hg(u,u===d?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),y=u.callbackNode,m===0||u===d&&(_t===2||_t===9)||u.cancelPendingCommit!==null)return y!==null&&y!==null&&Ba(y),u.callbackNode=null,u.callbackPriority=0;if((m&3)===0||kf(u,m)){if(d=m&-m,d===u.callbackPriority)return d;switch(y!==null&&Ba(y),A1(m)){case 2:case 8:m=wi;break;case 32:m=xa;break;case 268435456:m=cc;break;default:m=xa}return y=vR.bind(null,u),m=dn(m,y),u.callbackPriority=d,u.callbackNode=m,d}return y!==null&&y!==null&&Ba(y),u.callbackPriority=2,u.callbackNode=null,2}function vR(u,d){if(Wn!==0&&Wn!==5)return u.callbackNode=null,u.callbackPriority=0,null;var m=u.callbackNode;if(ov()&&u.callbackNode!==m)return null;var y=dt;return y=hg(u,u===Vt?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),y===0?null:(QD(u,y,d),gR(u,Zt()),u.callbackNode!=null&&u.callbackNode===m?vR.bind(null,u):null)}function yR(u,d){if(ov())return null;QD(u,d,!0)}function O7(){V7(function(){(Tt&6)!==0?dn(bi,$7):mR()})}function pS(){if(Go===0){var u=Tc;u===0&&(u=cg,cg<<=1,(cg&261888)===0&&(cg=256)),Go=u}return Go}function xR(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:vg(""+u)}function bR(u,d){var m=d.ownerDocument.createElement("input");return m.name=d.name,m.value=d.value,u.id&&m.setAttribute("form",u.id),d.parentNode.insertBefore(m,d),u=new FormData(u),m.parentNode.removeChild(m),u}function D7(u,d,m,y,C){if(d==="submit"&&m&&m.stateNode===C){var E=xR((C[ea]||null).action),D=y.submitter;D&&(d=(d=D[ea]||null)?xR(d.formAction):D.getAttribute("formAction"),d!==null&&(E=d,D=null));var L=new wg("action","action",null,y,C);u.push({event:L,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Go!==0){var X=D?bR(C,D):new FormData(C);_w(m,{pending:!0,data:X,method:C.method,action:E},null,X)}}else typeof E=="function"&&(L.preventDefault(),X=D?bR(C,D):new FormData(C),_w(m,{pending:!0,data:X,method:C.method,action:E},E,X))},currentTarget:C}]})}}for(var mS=0;mS<Z1.length;mS++){var gS=Z1[mS],R7=gS.toLowerCase(),_7=gS[0].toUpperCase()+gS.slice(1);Si(R7,"on"+_7)}Si(Z$,"onAnimationEnd"),Si(Q$,"onAnimationIteration"),Si(J$,"onAnimationStart"),Si("dblclick","onDoubleClick"),Si("focusin","onFocus"),Si("focusout","onBlur"),Si(Y9,"onTransitionRun"),Si(Z9,"onTransitionStart"),Si(Q9,"onTransitionCancel"),Si(eO,"onTransitionEnd"),mc("onMouseEnter",["mouseout","mouseover"]),mc("onMouseLeave",["mouseout","mouseover"]),mc("onPointerEnter",["pointerout","pointerover"]),mc("onPointerLeave",["pointerout","pointerover"]),Fl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fl("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),M7=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sh));function wR(u,d){d=(d&4)!==0;for(var m=0;m<u.length;m++){var y=u[m],C=y.event;y=y.listeners;e:{var E=void 0;if(d)for(var D=y.length-1;0<=D;D--){var L=y[D],X=L.instance,ce=L.currentTarget;if(L=L.listener,X!==E&&C.isPropagationStopped())break e;E=L,C.currentTarget=ce;try{E(C)}catch(xe){kg(xe)}C.currentTarget=null,E=X}else for(D=0;D<y.length;D++){if(L=y[D],X=L.instance,ce=L.currentTarget,L=L.listener,X!==E&&C.isPropagationStopped())break e;E=L,C.currentTarget=ce;try{E(C)}catch(xe){kg(xe)}C.currentTarget=null,E=X}}}}function ct(u,d){var m=d[T1];m===void 0&&(m=d[T1]=new Set);var y=u+"__bubble";m.has(y)||(SR(d,u,2,!1),m.add(y))}function vS(u,d,m){var y=0;d&&(y|=4),SR(m,u,y,d)}var cv="_reactListening"+Math.random().toString(36).slice(2);function yS(u){if(!u[cv]){u[cv]=!0,m$.forEach(function(m){m!=="selectionchange"&&(M7.has(m)||vS(m,!1,u),vS(m,!0,u))});var d=u.nodeType===9?u:u.ownerDocument;d===null||d[cv]||(d[cv]=!0,vS("selectionchange",!1,d))}}function SR(u,d,m,y){switch(ZR(d)){case 2:var C=uX;break;case 8:C=cX;break;default:C=RS}m=C.bind(null,d,m,u),C=void 0,!z1||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(C=!0),y?C!==void 0?u.addEventListener(d,m,{capture:!0,passive:C}):u.addEventListener(d,m,!0):C!==void 0?u.addEventListener(d,m,{passive:C}):u.addEventListener(d,m,!1)}function xS(u,d,m,y,C){var E=y;if((d&1)===0&&(d&2)===0&&y!==null)e:for(;;){if(y===null)return;var D=y.tag;if(D===3||D===4){var L=y.stateNode.containerInfo;if(L===C)break;if(D===4)for(D=y.return;D!==null;){var X=D.tag;if((X===3||X===4)&&D.stateNode.containerInfo===C)return;D=D.return}for(;L!==null;){if(D=fc(L),D===null)return;if(X=D.tag,X===5||X===6||X===26||X===27){y=E=D;continue e}L=L.parentNode}}y=y.return}I$(function(){var ce=E,xe=P1(m),Ce=[];e:{var de=tO.get(u);if(de!==void 0){var me=wg,_e=u;switch(u){case"keypress":if(xg(m)===0)break e;case"keydown":case"keyup":me=A9;break;case"focusin":_e="focus",me=U1;break;case"focusout":_e="blur",me=U1;break;case"beforeblur":case"afterblur":me=U1;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=$$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=g9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=O9;break;case Z$:case Q$:case J$:me=x9;break;case eO:me=R9;break;case"scroll":case"scrollend":me=p9;break;case"wheel":me=M9;break;case"copy":case"cut":case"paste":me=w9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=D$;break;case"toggle":case"beforetoggle":me=L9}var He=(d&4)!==0,jt=!He&&(u==="scroll"||u==="scrollend"),ie=He?de!==null?de+"Capture":null:de;He=[];for(var J=ce,ue;J!==null;){var we=J;if(ue=we.stateNode,we=we.tag,we!==5&&we!==26&&we!==27||ue===null||ie===null||(we=Af(J,ie),we!=null&&He.push(oh(J,we,ue))),jt)break;J=J.return}0<He.length&&(de=new me(de,_e,null,m,xe),Ce.push({event:de,listeners:He}))}}if((d&7)===0){e:{if(de=u==="mouseover"||u==="pointerover",me=u==="mouseout"||u==="pointerout",de&&m!==M1&&(_e=m.relatedTarget||m.fromElement)&&(fc(_e)||_e[dc]))break e;if((me||de)&&(de=xe.window===xe?xe:(de=xe.ownerDocument)?de.defaultView||de.parentWindow:window,me?(_e=m.relatedTarget||m.toElement,me=ce,_e=_e?fc(_e):null,_e!==null&&(jt=i(_e),He=_e.tag,_e!==jt||He!==5&&He!==27&&He!==6)&&(_e=null)):(me=null,_e=ce),me!==_e)){if(He=$$,we="onMouseLeave",ie="onMouseEnter",J="mouse",(u==="pointerout"||u==="pointerover")&&(He=D$,we="onPointerLeave",ie="onPointerEnter",J="pointer"),jt=me==null?de:If(me),ue=_e==null?de:If(_e),de=new He(we,J+"leave",me,m,xe),de.target=jt,de.relatedTarget=ue,we=null,fc(xe)===ce&&(He=new He(ie,J+"enter",_e,m,xe),He.target=ue,He.relatedTarget=jt,we=He),jt=we,me&&_e)t:{for(He=P7,ie=me,J=_e,ue=0,we=ie;we;we=He(we))ue++;we=0;for(var We=J;We;We=He(We))we++;for(;0<ue-we;)ie=He(ie),ue--;for(;0<we-ue;)J=He(J),we--;for(;ue--;){if(ie===J||J!==null&&ie===J.alternate){He=ie;break t}ie=He(ie),J=He(J)}He=null}else He=null;me!==null&&CR(Ce,de,me,He,!1),_e!==null&&jt!==null&&CR(Ce,jt,_e,He,!0)}}e:{if(de=ce?If(ce):window,me=de.nodeName&&de.nodeName.toLowerCase(),me==="select"||me==="input"&&de.type==="file")var bt=j$;else if(z$(de))if(B$)bt=q9;else{bt=G9;var je=W9}else me=de.nodeName,!me||me.toLowerCase()!=="input"||de.type!=="checkbox"&&de.type!=="radio"?ce&&_1(ce.elementType)&&(bt=j$):bt=H9;if(bt&&(bt=bt(u,ce))){F$(Ce,bt,m,xe);break e}je&&je(u,de,ce),u==="focusout"&&ce&&de.type==="number"&&ce.memoizedProps.value!=null&&R1(de,"number",de.value)}switch(je=ce?If(ce):window,u){case"focusin":(z$(je)||je.contentEditable==="true")&&(wc=je,K1=ce,Pf=null);break;case"focusout":Pf=K1=wc=null;break;case"mousedown":X1=!0;break;case"contextmenu":case"mouseup":case"dragend":X1=!1,X$(Ce,m,xe);break;case"selectionchange":if(X9)break;case"keydown":case"keyup":X$(Ce,m,xe)}var rt;if(W1)e:{switch(u){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else bc?P$(u,m)&&(ft="onCompositionEnd"):u==="keydown"&&m.keyCode===229&&(ft="onCompositionStart");ft&&(R$&&m.locale!=="ko"&&(bc||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&bc&&(rt=A$()):(To=xe,F1="value"in To?To.value:To.textContent,bc=!0)),je=dv(ce,ft),0<je.length&&(ft=new O$(ft,u,null,m,xe),Ce.push({event:ft,listeners:je}),rt?ft.data=rt:(rt=L$(m),rt!==null&&(ft.data=rt)))),(rt=F9?j9(u,m):B9(u,m))&&(ft=dv(ce,"onBeforeInput"),0<ft.length&&(je=new O$("onBeforeInput","beforeinput",null,m,xe),Ce.push({event:je,listeners:ft}),je.data=rt)),D7(Ce,u,ce,m,xe)}wR(Ce,d)})}function oh(u,d,m){return{instance:u,listener:d,currentTarget:m}}function dv(u,d){for(var m=d+"Capture",y=[];u!==null;){var C=u,E=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||E===null||(C=Af(u,m),C!=null&&y.unshift(oh(u,C,E)),C=Af(u,d),C!=null&&y.push(oh(u,C,E))),u.tag===3)return y;u=u.return}return[]}function P7(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function CR(u,d,m,y,C){for(var E=d._reactName,D=[];m!==null&&m!==y;){var L=m,X=L.alternate,ce=L.stateNode;if(L=L.tag,X!==null&&X===y)break;L!==5&&L!==26&&L!==27||ce===null||(X=ce,C?(ce=Af(m,E),ce!=null&&D.unshift(oh(m,ce,X))):C||(ce=Af(m,E),ce!=null&&D.push(oh(m,ce,X)))),m=m.return}D.length!==0&&u.push({event:d,listeners:D})}var L7=/\r\n?/g,z7=/\u0000|\uFFFD/g;function kR(u){return(typeof u=="string"?u:""+u).replace(L7,`
`).replace(z7,"")}function ER(u,d){return d=kR(d),kR(u)===d}function Ft(u,d,m,y,C,E){switch(m){case"children":typeof y=="string"?d==="body"||d==="textarea"&&y===""||vc(u,y):(typeof y=="number"||typeof y=="bigint")&&d!=="body"&&vc(u,""+y);break;case"className":mg(u,"class",y);break;case"tabIndex":mg(u,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":mg(u,m,y);break;case"style":E$(u,y,E);break;case"data":if(d!=="object"){mg(u,"data",y);break}case"src":case"href":if(y===""&&(d!=="a"||m!=="href")){u.removeAttribute(m);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){u.removeAttribute(m);break}y=vg(""+y),u.setAttribute(m,y);break;case"action":case"formAction":if(typeof y=="function"){u.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(m==="formAction"?(d!=="input"&&Ft(u,d,"name",C.name,C,null),Ft(u,d,"formEncType",C.formEncType,C,null),Ft(u,d,"formMethod",C.formMethod,C,null),Ft(u,d,"formTarget",C.formTarget,C,null)):(Ft(u,d,"encType",C.encType,C,null),Ft(u,d,"method",C.method,C,null),Ft(u,d,"target",C.target,C,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){u.removeAttribute(m);break}y=vg(""+y),u.setAttribute(m,y);break;case"onClick":y!=null&&(u.onclick=Ts);break;case"onScroll":y!=null&&ct("scroll",u);break;case"onScrollEnd":y!=null&&ct("scrollend",u);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(m=y.__html,m!=null){if(C.children!=null)throw Error(r(60));u.innerHTML=m}}break;case"multiple":u.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":u.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){u.removeAttribute("xlink:href");break}m=vg(""+y),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?u.setAttribute(m,""+y):u.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?u.setAttribute(m,""):u.removeAttribute(m);break;case"capture":case"download":y===!0?u.setAttribute(m,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?u.setAttribute(m,y):u.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?u.setAttribute(m,y):u.removeAttribute(m);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?u.removeAttribute(m):u.setAttribute(m,y);break;case"popover":ct("beforetoggle",u),ct("toggle",u),pg(u,"popover",y);break;case"xlinkActuate":As(u,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":As(u,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":As(u,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":As(u,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":As(u,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":As(u,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":As(u,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":As(u,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":As(u,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":pg(u,"is",y);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=f9.get(m)||m,pg(u,m,y))}}function bS(u,d,m,y,C,E){switch(m){case"style":E$(u,y,E);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(m=y.__html,m!=null){if(C.children!=null)throw Error(r(60));u.innerHTML=m}}break;case"children":typeof y=="string"?vc(u,y):(typeof y=="number"||typeof y=="bigint")&&vc(u,""+y);break;case"onScroll":y!=null&&ct("scroll",u);break;case"onScrollEnd":y!=null&&ct("scrollend",u);break;case"onClick":y!=null&&(u.onclick=Ts);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!g$.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(C=m.endsWith("Capture"),d=m.slice(2,C?m.length-7:void 0),E=u[ea]||null,E=E!=null?E[m]:null,typeof E=="function"&&u.removeEventListener(d,E,C),typeof y=="function")){typeof E!="function"&&E!==null&&(m in u?u[m]=null:u.hasAttribute(m)&&u.removeAttribute(m)),u.addEventListener(d,y,C);break e}m in u?u[m]=y:y===!0?u.setAttribute(m,""):pg(u,m,y)}}}function vr(u,d,m){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ct("error",u),ct("load",u);var y=!1,C=!1,E;for(E in m)if(m.hasOwnProperty(E)){var D=m[E];if(D!=null)switch(E){case"src":y=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Ft(u,d,E,D,m,null)}}C&&Ft(u,d,"srcSet",m.srcSet,m,null),y&&Ft(u,d,"src",m.src,m,null);return;case"input":ct("invalid",u);var L=E=D=C=null,X=null,ce=null;for(y in m)if(m.hasOwnProperty(y)){var xe=m[y];if(xe!=null)switch(y){case"name":C=xe;break;case"type":D=xe;break;case"checked":X=xe;break;case"defaultChecked":ce=xe;break;case"value":E=xe;break;case"defaultValue":L=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(r(137,d));break;default:Ft(u,d,y,xe,m,null)}}w$(u,E,L,X,ce,D,C,!1);return;case"select":ct("invalid",u),y=D=E=null;for(C in m)if(m.hasOwnProperty(C)&&(L=m[C],L!=null))switch(C){case"value":E=L;break;case"defaultValue":D=L;break;case"multiple":y=L;default:Ft(u,d,C,L,m,null)}d=E,m=D,u.multiple=!!y,d!=null?gc(u,!!y,d,!1):m!=null&&gc(u,!!y,m,!0);return;case"textarea":ct("invalid",u),E=C=y=null;for(D in m)if(m.hasOwnProperty(D)&&(L=m[D],L!=null))switch(D){case"value":y=L;break;case"defaultValue":C=L;break;case"children":E=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(r(91));break;default:Ft(u,d,D,L,m,null)}C$(u,y,C,E);return;case"option":for(X in m)if(m.hasOwnProperty(X)&&(y=m[X],y!=null))switch(X){case"selected":u.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Ft(u,d,X,y,m,null)}return;case"dialog":ct("beforetoggle",u),ct("toggle",u),ct("cancel",u),ct("close",u);break;case"iframe":case"object":ct("load",u);break;case"video":case"audio":for(y=0;y<sh.length;y++)ct(sh[y],u);break;case"image":ct("error",u),ct("load",u);break;case"details":ct("toggle",u);break;case"embed":case"source":case"link":ct("error",u),ct("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ce in m)if(m.hasOwnProperty(ce)&&(y=m[ce],y!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Ft(u,d,ce,y,m,null)}return;default:if(_1(d)){for(xe in m)m.hasOwnProperty(xe)&&(y=m[xe],y!==void 0&&bS(u,d,xe,y,m,void 0));return}}for(L in m)m.hasOwnProperty(L)&&(y=m[L],y!=null&&Ft(u,d,L,y,m,null))}function F7(u,d,m,y){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,E=null,D=null,L=null,X=null,ce=null,xe=null;for(me in m){var Ce=m[me];if(m.hasOwnProperty(me)&&Ce!=null)switch(me){case"checked":break;case"value":break;case"defaultValue":X=Ce;default:y.hasOwnProperty(me)||Ft(u,d,me,null,y,Ce)}}for(var de in y){var me=y[de];if(Ce=m[de],y.hasOwnProperty(de)&&(me!=null||Ce!=null))switch(de){case"type":E=me;break;case"name":C=me;break;case"checked":ce=me;break;case"defaultChecked":xe=me;break;case"value":D=me;break;case"defaultValue":L=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(r(137,d));break;default:me!==Ce&&Ft(u,d,de,me,y,Ce)}}D1(u,D,L,X,ce,xe,E,C);return;case"select":me=D=L=de=null;for(E in m)if(X=m[E],m.hasOwnProperty(E)&&X!=null)switch(E){case"value":break;case"multiple":me=X;default:y.hasOwnProperty(E)||Ft(u,d,E,null,y,X)}for(C in y)if(E=y[C],X=m[C],y.hasOwnProperty(C)&&(E!=null||X!=null))switch(C){case"value":de=E;break;case"defaultValue":L=E;break;case"multiple":D=E;default:E!==X&&Ft(u,d,C,E,y,X)}d=L,m=D,y=me,de!=null?gc(u,!!m,de,!1):!!y!=!!m&&(d!=null?gc(u,!!m,d,!0):gc(u,!!m,m?[]:"",!1));return;case"textarea":me=de=null;for(L in m)if(C=m[L],m.hasOwnProperty(L)&&C!=null&&!y.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:Ft(u,d,L,null,y,C)}for(D in y)if(C=y[D],E=m[D],y.hasOwnProperty(D)&&(C!=null||E!=null))switch(D){case"value":de=C;break;case"defaultValue":me=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:C!==E&&Ft(u,d,D,C,y,E)}S$(u,de,me);return;case"option":for(var _e in m)if(de=m[_e],m.hasOwnProperty(_e)&&de!=null&&!y.hasOwnProperty(_e))switch(_e){case"selected":u.selected=!1;break;default:Ft(u,d,_e,null,y,de)}for(X in y)if(de=y[X],me=m[X],y.hasOwnProperty(X)&&de!==me&&(de!=null||me!=null))switch(X){case"selected":u.selected=de&&typeof de!="function"&&typeof de!="symbol";break;default:Ft(u,d,X,de,y,me)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in m)de=m[He],m.hasOwnProperty(He)&&de!=null&&!y.hasOwnProperty(He)&&Ft(u,d,He,null,y,de);for(ce in y)if(de=y[ce],me=m[ce],y.hasOwnProperty(ce)&&de!==me&&(de!=null||me!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,d));break;default:Ft(u,d,ce,de,y,me)}return;default:if(_1(d)){for(var jt in m)de=m[jt],m.hasOwnProperty(jt)&&de!==void 0&&!y.hasOwnProperty(jt)&&bS(u,d,jt,void 0,y,de);for(xe in y)de=y[xe],me=m[xe],!y.hasOwnProperty(xe)||de===me||de===void 0&&me===void 0||bS(u,d,xe,de,y,me);return}}for(var ie in m)de=m[ie],m.hasOwnProperty(ie)&&de!=null&&!y.hasOwnProperty(ie)&&Ft(u,d,ie,null,y,de);for(Ce in y)de=y[Ce],me=m[Ce],!y.hasOwnProperty(Ce)||de===me||de==null&&me==null||Ft(u,d,Ce,de,y,me)}function NR(u){switch(u){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function j7(){if(typeof performance.getEntriesByType=="function"){for(var u=0,d=0,m=performance.getEntriesByType("resource"),y=0;y<m.length;y++){var C=m[y],E=C.transferSize,D=C.initiatorType,L=C.duration;if(E&&L&&NR(D)){for(D=0,L=C.responseEnd,y+=1;y<m.length;y++){var X=m[y],ce=X.startTime;if(ce>L)break;var xe=X.transferSize,Ce=X.initiatorType;xe&&NR(Ce)&&(X=X.responseEnd,D+=xe*(X<L?1:(L-ce)/(X-ce)))}if(--y,d+=8*(E+D)/(C.duration/1e3),u++,10<u)break}}if(0<u)return d/u/1e6}return navigator.connection&&(u=navigator.connection.downlink,typeof u=="number")?u:5}var wS=null,SS=null;function fv(u){return u.nodeType===9?u:u.ownerDocument}function IR(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function AR(u,d){if(u===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&d==="foreignObject"?0:u}function CS(u,d){return u==="textarea"||u==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var kS=null;function B7(){var u=window.event;return u&&u.type==="popstate"?u===kS?!1:(kS=u,!0):(kS=null,!1)}var TR=typeof setTimeout=="function"?setTimeout:void 0,U7=typeof clearTimeout=="function"?clearTimeout:void 0,$R=typeof Promise=="function"?Promise:void 0,V7=typeof queueMicrotask=="function"?queueMicrotask:typeof $R<"u"?function(u){return $R.resolve(null).then(u).catch(W7)}:TR;function W7(u){setTimeout(function(){throw u})}function Ho(u){return u==="head"}function OR(u,d){var m=d,y=0;do{var C=m.nextSibling;if(u.removeChild(m),C&&C.nodeType===8)if(m=C.data,m==="/$"||m==="/&"){if(y===0){u.removeChild(C),Kc(d);return}y--}else if(m==="$"||m==="$?"||m==="$~"||m==="$!"||m==="&")y++;else if(m==="html")lh(u.ownerDocument.documentElement);else if(m==="head"){m=u.ownerDocument.head,lh(m);for(var E=m.firstChild;E;){var D=E.nextSibling,L=E.nodeName;E[Nf]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&E.rel.toLowerCase()==="stylesheet"||m.removeChild(E),E=D}}else m==="body"&&lh(u.ownerDocument.body);m=C}while(m);Kc(d)}function DR(u,d){var m=u;u=0;do{var y=m.nextSibling;if(m.nodeType===1?d?(m._stashedDisplay=m.style.display,m.style.display="none"):(m.style.display=m._stashedDisplay||"",m.getAttribute("style")===""&&m.removeAttribute("style")):m.nodeType===3&&(d?(m._stashedText=m.nodeValue,m.nodeValue=""):m.nodeValue=m._stashedText||""),y&&y.nodeType===8)if(m=y.data,m==="/$"){if(u===0)break;u--}else m!=="$"&&m!=="$?"&&m!=="$~"&&m!=="$!"||u++;m=y}while(m)}function ES(u){var d=u.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var m=d;switch(d=d.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":ES(m),$1(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}u.removeChild(m)}}function G7(u,d,m,y){for(;u.nodeType===1;){var C=m;if(u.nodeName.toLowerCase()!==d.toLowerCase()){if(!y&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(y){if(!u[Nf])switch(d){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(E=u.getAttribute("rel"),E==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(E!==C.rel||u.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||u.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||u.getAttribute("title")!==(C.title==null?null:C.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(E=u.getAttribute("src"),(E!==(C.src==null?null:C.src)||u.getAttribute("type")!==(C.type==null?null:C.type)||u.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&E&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(d==="input"&&u.type==="hidden"){var E=C.name==null?null:""+C.name;if(C.type==="hidden"&&u.getAttribute("name")===E)return u}else return u;if(u=Ya(u.nextSibling),u===null)break}return null}function H7(u,d,m){if(d==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!m||(u=Ya(u.nextSibling),u===null))return null;return u}function RR(u,d){for(;u.nodeType!==8;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!d||(u=Ya(u.nextSibling),u===null))return null;return u}function NS(u){return u.data==="$?"||u.data==="$~"}function IS(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState!=="loading"}function q7(u,d){var m=u.ownerDocument;if(u.data==="$~")u._reactRetry=d;else if(u.data!=="$?"||m.readyState!=="loading")d();else{var y=function(){d(),m.removeEventListener("DOMContentLoaded",y)};m.addEventListener("DOMContentLoaded",y),u._reactRetry=y}}function Ya(u){for(;u!=null;u=u.nextSibling){var d=u.nodeType;if(d===1||d===3)break;if(d===8){if(d=u.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return u}var AS=null;function _R(u){u=u.nextSibling;for(var d=0;u;){if(u.nodeType===8){var m=u.data;if(m==="/$"||m==="/&"){if(d===0)return Ya(u.nextSibling);d--}else m!=="$"&&m!=="$!"&&m!=="$?"&&m!=="$~"&&m!=="&"||d++}u=u.nextSibling}return null}function MR(u){u=u.previousSibling;for(var d=0;u;){if(u.nodeType===8){var m=u.data;if(m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"){if(d===0)return u;d--}else m!=="/$"&&m!=="/&"||d++}u=u.previousSibling}return null}function PR(u,d,m){switch(d=fv(m),u){case"html":if(u=d.documentElement,!u)throw Error(r(452));return u;case"head":if(u=d.head,!u)throw Error(r(453));return u;case"body":if(u=d.body,!u)throw Error(r(454));return u;default:throw Error(r(451))}}function lh(u){for(var d=u.attributes;d.length;)u.removeAttributeNode(d[0]);$1(u)}var Za=new Map,LR=new Set;function hv(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var Gs=V.d;V.d={f:K7,r:X7,D:Y7,C:Z7,L:Q7,m:J7,X:tX,S:eX,M:nX};function K7(){var u=Gs.f(),d=av();return u||d}function X7(u){var d=hc(u);d!==null&&d.tag===5&&d.type==="form"?eD(d):Gs.r(u)}var Gc=typeof document>"u"?null:document;function zR(u,d,m){var y=Gc;if(y&&typeof d=="string"&&d){var C=Va(d);C='link[rel="'+u+'"][href="'+C+'"]',typeof m=="string"&&(C+='[crossorigin="'+m+'"]'),LR.has(C)||(LR.add(C),u={rel:u,crossOrigin:m,href:d},y.querySelector(C)===null&&(d=y.createElement("link"),vr(d,"link",u),tr(d),y.head.appendChild(d)))}}function Y7(u){Gs.D(u),zR("dns-prefetch",u,null)}function Z7(u,d){Gs.C(u,d),zR("preconnect",u,d)}function Q7(u,d,m){Gs.L(u,d,m);var y=Gc;if(y&&u&&d){var C='link[rel="preload"][as="'+Va(d)+'"]';d==="image"&&m&&m.imageSrcSet?(C+='[imagesrcset="'+Va(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(C+='[imagesizes="'+Va(m.imageSizes)+'"]')):C+='[href="'+Va(u)+'"]';var E=C;switch(d){case"style":E=Hc(u);break;case"script":E=qc(u)}Za.has(E)||(u=h({rel:"preload",href:d==="image"&&m&&m.imageSrcSet?void 0:u,as:d},m),Za.set(E,u),y.querySelector(C)!==null||d==="style"&&y.querySelector(uh(E))||d==="script"&&y.querySelector(ch(E))||(d=y.createElement("link"),vr(d,"link",u),tr(d),y.head.appendChild(d)))}}function J7(u,d){Gs.m(u,d);var m=Gc;if(m&&u){var y=d&&typeof d.as=="string"?d.as:"script",C='link[rel="modulepreload"][as="'+Va(y)+'"][href="'+Va(u)+'"]',E=C;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=qc(u)}if(!Za.has(E)&&(u=h({rel:"modulepreload",href:u},d),Za.set(E,u),m.querySelector(C)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(ch(E)))return}y=m.createElement("link"),vr(y,"link",u),tr(y),m.head.appendChild(y)}}}function eX(u,d,m){Gs.S(u,d,m);var y=Gc;if(y&&u){var C=pc(y).hoistableStyles,E=Hc(u);d=d||"default";var D=C.get(E);if(!D){var L={loading:0,preload:null};if(D=y.querySelector(uh(E)))L.loading=5;else{u=h({rel:"stylesheet",href:u,"data-precedence":d},m),(m=Za.get(E))&&TS(u,m);var X=D=y.createElement("link");tr(X),vr(X,"link",u),X._p=new Promise(function(ce,xe){X.onload=ce,X.onerror=xe}),X.addEventListener("load",function(){L.loading|=1}),X.addEventListener("error",function(){L.loading|=2}),L.loading|=4,pv(D,d,y)}D={type:"stylesheet",instance:D,count:1,state:L},C.set(E,D)}}}function tX(u,d){Gs.X(u,d);var m=Gc;if(m&&u){var y=pc(m).hoistableScripts,C=qc(u),E=y.get(C);E||(E=m.querySelector(ch(C)),E||(u=h({src:u,async:!0},d),(d=Za.get(C))&&$S(u,d),E=m.createElement("script"),tr(E),vr(E,"link",u),m.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},y.set(C,E))}}function nX(u,d){Gs.M(u,d);var m=Gc;if(m&&u){var y=pc(m).hoistableScripts,C=qc(u),E=y.get(C);E||(E=m.querySelector(ch(C)),E||(u=h({src:u,async:!0,type:"module"},d),(d=Za.get(C))&&$S(u,d),E=m.createElement("script"),tr(E),vr(E,"link",u),m.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},y.set(C,E))}}function FR(u,d,m,y){var C=(C=Se.current)?hv(C):null;if(!C)throw Error(r(446));switch(u){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(d=Hc(m.href),m=pc(C).hoistableStyles,y=m.get(d),y||(y={type:"style",instance:null,count:0,state:null},m.set(d,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){u=Hc(m.href);var E=pc(C).hoistableStyles,D=E.get(u);if(D||(C=C.ownerDocument||C,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(u,D),(E=C.querySelector(uh(u)))&&!E._p&&(D.instance=E,D.state.loading=5),Za.has(u)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Za.set(u,m),E||rX(C,u,m,D.state))),d&&y===null)throw Error(r(528,""));return D}if(d&&y!==null)throw Error(r(529,""));return null;case"script":return d=m.async,m=m.src,typeof m=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=qc(m),m=pc(C).hoistableScripts,y=m.get(d),y||(y={type:"script",instance:null,count:0,state:null},m.set(d,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,u))}}function Hc(u){return'href="'+Va(u)+'"'}function uh(u){return'link[rel="stylesheet"]['+u+"]"}function jR(u){return h({},u,{"data-precedence":u.precedence,precedence:null})}function rX(u,d,m,y){u.querySelector('link[rel="preload"][as="style"]['+d+"]")?y.loading=1:(d=u.createElement("link"),y.preload=d,d.addEventListener("load",function(){return y.loading|=1}),d.addEventListener("error",function(){return y.loading|=2}),vr(d,"link",m),tr(d),u.head.appendChild(d))}function qc(u){return'[src="'+Va(u)+'"]'}function ch(u){return"script[async]"+u}function BR(u,d,m){if(d.count++,d.instance===null)switch(d.type){case"style":var y=u.querySelector('style[data-href~="'+Va(m.href)+'"]');if(y)return d.instance=y,tr(y),y;var C=h({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return y=(u.ownerDocument||u).createElement("style"),tr(y),vr(y,"style",C),pv(y,m.precedence,u),d.instance=y;case"stylesheet":C=Hc(m.href);var E=u.querySelector(uh(C));if(E)return d.state.loading|=4,d.instance=E,tr(E),E;y=jR(m),(C=Za.get(C))&&TS(y,C),E=(u.ownerDocument||u).createElement("link"),tr(E);var D=E;return D._p=new Promise(function(L,X){D.onload=L,D.onerror=X}),vr(E,"link",y),d.state.loading|=4,pv(E,m.precedence,u),d.instance=E;case"script":return E=qc(m.src),(C=u.querySelector(ch(E)))?(d.instance=C,tr(C),C):(y=m,(C=Za.get(E))&&(y=h({},m),$S(y,C)),u=u.ownerDocument||u,C=u.createElement("script"),tr(C),vr(C,"link",y),u.head.appendChild(C),d.instance=C);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(y=d.instance,d.state.loading|=4,pv(y,m.precedence,u));return d.instance}function pv(u,d,m){for(var y=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=y.length?y[y.length-1]:null,E=C,D=0;D<y.length;D++){var L=y[D];if(L.dataset.precedence===d)E=L;else if(E!==C)break}E?E.parentNode.insertBefore(u,E.nextSibling):(d=m.nodeType===9?m.head:m,d.insertBefore(u,d.firstChild))}function TS(u,d){u.crossOrigin==null&&(u.crossOrigin=d.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=d.referrerPolicy),u.title==null&&(u.title=d.title)}function $S(u,d){u.crossOrigin==null&&(u.crossOrigin=d.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=d.referrerPolicy),u.integrity==null&&(u.integrity=d.integrity)}var mv=null;function UR(u,d,m){if(mv===null){var y=new Map,C=mv=new Map;C.set(m,y)}else C=mv,y=C.get(m),y||(y=new Map,C.set(m,y));if(y.has(u))return y;for(y.set(u,null),m=m.getElementsByTagName(u),C=0;C<m.length;C++){var E=m[C];if(!(E[Nf]||E[hr]||u==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var D=E.getAttribute(d)||"";D=u+D;var L=y.get(D);L?L.push(E):y.set(D,[E])}}return y}function VR(u,d,m){u=u.ownerDocument||u,u.head.insertBefore(m,d==="title"?u.querySelector("head > title"):null)}function aX(u,d,m){if(m===1||d.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return u=d.disabled,typeof d.precedence=="string"&&u==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function WR(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}function iX(u,d,m,y){if(m.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var C=Hc(y.href),E=d.querySelector(uh(C));if(E){d=E._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(u.count++,u=gv.bind(u),d.then(u,u)),m.state.loading|=4,m.instance=E,tr(E);return}E=d.ownerDocument||d,y=jR(y),(C=Za.get(C))&&TS(y,C),E=E.createElement("link"),tr(E);var D=E;D._p=new Promise(function(L,X){D.onload=L,D.onerror=X}),vr(E,"link",y),m.instance=E}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(m,d),(d=m.state.preload)&&(m.state.loading&3)===0&&(u.count++,m=gv.bind(u),d.addEventListener("load",m),d.addEventListener("error",m))}}var OS=0;function sX(u,d){return u.stylesheets&&u.count===0&&yv(u,u.stylesheets),0<u.count||0<u.imgCount?function(m){var y=setTimeout(function(){if(u.stylesheets&&yv(u,u.stylesheets),u.unsuspend){var E=u.unsuspend;u.unsuspend=null,E()}},6e4+d);0<u.imgBytes&&OS===0&&(OS=62500*j7());var C=setTimeout(function(){if(u.waitingForImages=!1,u.count===0&&(u.stylesheets&&yv(u,u.stylesheets),u.unsuspend)){var E=u.unsuspend;u.unsuspend=null,E()}},(u.imgBytes>OS?50:800)+d);return u.unsuspend=m,function(){u.unsuspend=null,clearTimeout(y),clearTimeout(C)}}:null}function gv(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)yv(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var vv=null;function yv(u,d){u.stylesheets=null,u.unsuspend!==null&&(u.count++,vv=new Map,d.forEach(oX,u),vv=null,gv.call(u))}function oX(u,d){if(!(d.state.loading&4)){var m=vv.get(u);if(m)var y=m.get(null);else{m=new Map,vv.set(u,m);for(var C=u.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<C.length;E++){var D=C[E];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(m.set(D.dataset.precedence,D),y=D)}y&&m.set(null,y)}C=d.instance,D=C.getAttribute("data-precedence"),E=m.get(D)||y,E===y&&m.set(null,C),m.set(D,C),this.count++,y=gv.bind(this),C.addEventListener("load",y),C.addEventListener("error",y),E?E.parentNode.insertBefore(C,E.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(C,u.firstChild)),d.state.loading|=4}}var dh={$$typeof:k,Provider:null,Consumer:null,_currentValue:U,_currentValue2:U,_threadCount:0};function lX(u,d,m,y,C,E,D,L,X){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=N1(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=N1(0),this.hiddenUpdates=N1(null),this.identifierPrefix=y,this.onUncaughtError=C,this.onCaughtError=E,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=X,this.incompleteTransitions=new Map}function GR(u,d,m,y,C,E,D,L,X,ce,xe,Ce){return u=new lX(u,d,m,D,X,ce,xe,Ce,L),d=1,E===!0&&(d|=24),E=Sa(3,null,null,d),u.current=E,E.stateNode=u,d=cw(),d.refCount++,u.pooledCache=d,d.refCount++,E.memoizedState={element:y,isDehydrated:m,cache:d},pw(E),u}function HR(u){return u?(u=kc,u):kc}function qR(u,d,m,y,C,E){C=HR(C),y.context===null?y.context=C:y.pendingContext=C,y=Mo(d),y.payload={element:m},E=E===void 0?null:E,E!==null&&(y.callback=E),m=Po(u,y,d),m!==null&&(sa(m,u,d),Vf(m,u,d))}function KR(u,d){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var m=u.retryLane;u.retryLane=m!==0&&m<d?m:d}}function DS(u,d){KR(u,d),(u=u.alternate)&&KR(u,d)}function XR(u){if(u.tag===13||u.tag===31){var d=Vl(u,67108864);d!==null&&sa(d,u,67108864),DS(u,67108864)}}function YR(u){if(u.tag===13||u.tag===31){var d=Ia();d=I1(d);var m=Vl(u,d);m!==null&&sa(m,u,d),DS(u,d)}}var xv=!0;function uX(u,d,m,y){var C=F.T;F.T=null;var E=V.p;try{V.p=2,RS(u,d,m,y)}finally{V.p=E,F.T=C}}function cX(u,d,m,y){var C=F.T;F.T=null;var E=V.p;try{V.p=8,RS(u,d,m,y)}finally{V.p=E,F.T=C}}function RS(u,d,m,y){if(xv){var C=_S(y);if(C===null)xS(u,d,y,bv,m),QR(u,y);else if(fX(C,u,d,m,y))y.stopPropagation();else if(QR(u,y),d&4&&-1<dX.indexOf(u)){for(;C!==null;){var E=hc(C);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var D=zl(E.pendingLanes);if(D!==0){var L=E;for(L.pendingLanes|=2,L.entangledLanes|=2;D;){var X=1<<31-ba(D);L.entanglements[1]|=X,D&=~X}Yi(E),(Tt&6)===0&&(nv=Zt()+500,ih(0))}}break;case 31:case 13:L=Vl(E,2),L!==null&&sa(L,E,2),av(),DS(E,2)}if(E=_S(y),E===null&&xS(u,d,y,bv,m),E===C)break;C=E}C!==null&&y.stopPropagation()}else xS(u,d,y,null,m)}}function _S(u){return u=P1(u),MS(u)}var bv=null;function MS(u){if(bv=null,u=fc(u),u!==null){var d=i(u);if(d===null)u=null;else{var m=d.tag;if(m===13){if(u=s(d),u!==null)return u;u=null}else if(m===31){if(u=o(d),u!==null)return u;u=null}else if(m===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;u=null}else d!==u&&(u=null)}}return bv=u,null}function ZR(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xi()){case bi:return 2;case wi:return 8;case xa:case Ll:return 32;case cc:return 268435456;default:return 32}default:return 32}}var PS=!1,qo=null,Ko=null,Xo=null,fh=new Map,hh=new Map,Yo=[],dX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function QR(u,d){switch(u){case"focusin":case"focusout":qo=null;break;case"dragenter":case"dragleave":Ko=null;break;case"mouseover":case"mouseout":Xo=null;break;case"pointerover":case"pointerout":fh.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":hh.delete(d.pointerId)}}function ph(u,d,m,y,C,E){return u===null||u.nativeEvent!==E?(u={blockedOn:d,domEventName:m,eventSystemFlags:y,nativeEvent:E,targetContainers:[C]},d!==null&&(d=hc(d),d!==null&&XR(d)),u):(u.eventSystemFlags|=y,d=u.targetContainers,C!==null&&d.indexOf(C)===-1&&d.push(C),u)}function fX(u,d,m,y,C){switch(d){case"focusin":return qo=ph(qo,u,d,m,y,C),!0;case"dragenter":return Ko=ph(Ko,u,d,m,y,C),!0;case"mouseover":return Xo=ph(Xo,u,d,m,y,C),!0;case"pointerover":var E=C.pointerId;return fh.set(E,ph(fh.get(E)||null,u,d,m,y,C)),!0;case"gotpointercapture":return E=C.pointerId,hh.set(E,ph(hh.get(E)||null,u,d,m,y,C)),!0}return!1}function JR(u){var d=fc(u.target);if(d!==null){var m=i(d);if(m!==null){if(d=m.tag,d===13){if(d=s(m),d!==null){u.blockedOn=d,h$(u.priority,function(){YR(m)});return}}else if(d===31){if(d=o(m),d!==null){u.blockedOn=d,h$(u.priority,function(){YR(m)});return}}else if(d===3&&m.stateNode.current.memoizedState.isDehydrated){u.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}u.blockedOn=null}function wv(u){if(u.blockedOn!==null)return!1;for(var d=u.targetContainers;0<d.length;){var m=_S(u.nativeEvent);if(m===null){m=u.nativeEvent;var y=new m.constructor(m.type,m);M1=y,m.target.dispatchEvent(y),M1=null}else return d=hc(m),d!==null&&XR(d),u.blockedOn=m,!1;d.shift()}return!0}function e_(u,d,m){wv(u)&&m.delete(d)}function hX(){PS=!1,qo!==null&&wv(qo)&&(qo=null),Ko!==null&&wv(Ko)&&(Ko=null),Xo!==null&&wv(Xo)&&(Xo=null),fh.forEach(e_),hh.forEach(e_)}function Sv(u,d){u.blockedOn===d&&(u.blockedOn=null,PS||(PS=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,hX)))}var Cv=null;function t_(u){Cv!==u&&(Cv=u,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Cv===u&&(Cv=null);for(var d=0;d<u.length;d+=3){var m=u[d],y=u[d+1],C=u[d+2];if(typeof y!="function"){if(MS(y||m)===null)continue;break}var E=hc(m);E!==null&&(u.splice(d,3),d-=3,_w(E,{pending:!0,data:C,method:m.method,action:y},y,C))}}))}function Kc(u){function d(X){return Sv(X,u)}qo!==null&&Sv(qo,u),Ko!==null&&Sv(Ko,u),Xo!==null&&Sv(Xo,u),fh.forEach(d),hh.forEach(d);for(var m=0;m<Yo.length;m++){var y=Yo[m];y.blockedOn===u&&(y.blockedOn=null)}for(;0<Yo.length&&(m=Yo[0],m.blockedOn===null);)JR(m),m.blockedOn===null&&Yo.shift();if(m=(u.ownerDocument||u).$$reactFormReplay,m!=null)for(y=0;y<m.length;y+=3){var C=m[y],E=m[y+1],D=C[ea]||null;if(typeof E=="function")D||t_(m);else if(D){var L=null;if(E&&E.hasAttribute("formAction")){if(C=E,D=E[ea]||null)L=D.formAction;else if(MS(C)!==null)continue}else L=D.action;typeof L=="function"?m[y+1]=L:(m.splice(y,3),y-=3),t_(m)}}}function n_(){function u(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(D){return C=D})},focusReset:"manual",scroll:"manual"})}function d(){C!==null&&(C(),C=null),y||setTimeout(m,20)}function m(){if(!y&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var y=!1,C=null;return navigation.addEventListener("navigate",u),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(m,100),function(){y=!0,navigation.removeEventListener("navigate",u),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),C!==null&&(C(),C=null)}}}function LS(u){this._internalRoot=u}kv.prototype.render=LS.prototype.render=function(u){var d=this._internalRoot;if(d===null)throw Error(r(409));var m=d.current,y=Ia();qR(m,y,u,d,null,null)},kv.prototype.unmount=LS.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var d=u.containerInfo;qR(u.current,2,null,u,null,null),av(),d[dc]=null}};function kv(u){this._internalRoot=u}kv.prototype.unstable_scheduleHydration=function(u){if(u){var d=f$();u={blockedOn:null,target:u,priority:d};for(var m=0;m<Yo.length&&d!==0&&d<Yo[m].priority;m++);Yo.splice(m,0,u),m===0&&JR(u)}};var r_=e.version;if(r_!=="19.2.3")throw Error(r(527,r_,"19.2.3"));V.findDOMNode=function(u){var d=u._reactInternals;if(d===void 0)throw typeof u.render=="function"?Error(r(188)):(u=Object.keys(u).join(","),Error(r(268,u)));return u=c(d),u=u!==null?f(u):null,u=u===null?null:u.stateNode,u};var pX={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ev=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ev.isDisabled&&Ev.supportsFiber)try{Gi=Ev.inject(pX),jr=Ev}catch{}}return gh.createRoot=function(u,d){if(!a(u))throw Error(r(299));var m=!1,y="",C=cD,E=dD,D=fD;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(y=d.identifierPrefix),d.onUncaughtError!==void 0&&(C=d.onUncaughtError),d.onCaughtError!==void 0&&(E=d.onCaughtError),d.onRecoverableError!==void 0&&(D=d.onRecoverableError)),d=GR(u,1,!1,null,null,m,y,null,C,E,D,n_),u[dc]=d.current,yS(u),new LS(d)},gh.hydrateRoot=function(u,d,m){if(!a(u))throw Error(r(299));var y=!1,C="",E=cD,D=dD,L=fD,X=null;return m!=null&&(m.unstable_strictMode===!0&&(y=!0),m.identifierPrefix!==void 0&&(C=m.identifierPrefix),m.onUncaughtError!==void 0&&(E=m.onUncaughtError),m.onCaughtError!==void 0&&(D=m.onCaughtError),m.onRecoverableError!==void 0&&(L=m.onRecoverableError),m.formState!==void 0&&(X=m.formState)),d=GR(u,1,!0,d,m??null,y,C,X,E,D,L,n_),d.context=HR(null),m=d.current,y=Ia(),y=I1(y),C=Mo(y),C.callback=null,Po(m,C,y),m=y,d.current.lanes=m,Ef(d,m),Yi(d),u[dc]=d.current,yS(u),new kv(d)},gh.version="19.2.3",gh}var h_;function IX(){if(h_)return BS.exports;h_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),BS.exports=NX(),BS.exports}var AX=IX();const TX=Ui(AX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $X=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),OX=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),p_=t=>{const e=OX(t);return e.charAt(0).toUpperCase()+e.slice(1)},u4=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),DX=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var RX={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _X=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:s,...o},l)=>A.createElement("svg",{ref:l,...RX,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:u4("lucide",a),...!i&&!DX(o)&&{"aria-hidden":"true"},...o},[...s.map(([c,f])=>A.createElement(c,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=(t,e)=>{const n=A.forwardRef(({className:r,...a},i)=>A.createElement(_X,{ref:i,iconNode:e,className:u4(`lucide-${$X(p_(t))}`,`lucide-${t}`,r),...a}));return n.displayName=p_(t),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MX=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Z2=Xe("activity",MX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PX=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],m_=Xe("arrow-right",PX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LX=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],zX=Xe("bell",LX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FX=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],c4=Xe("book-open",FX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jX=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],FE=Xe("brain-circuit",jX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BX=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],d4=Xe("chart-column",BX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UX=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],VX=Xe("chart-no-axes-column",UX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],GX=Xe("circle-alert",WX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],qX=Xe("circle-check",HX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KX=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],XX=Xe("circle-play",KX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],g_=Xe("circle-plus",YX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],QX=Xe("circle-stop",ZX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JX=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],eY=Xe("code-xml",JX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tY=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],nY=Xe("coins",tY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rY=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],aY=Xe("cpu",rY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],f4=Xe("crosshair",iY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sY=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],oY=Xe("database",sY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lY=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Xy=Xe("eye",lY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uY=[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]],v_=Xe("fingerprint-pattern",uY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cY=[["path",{d:"m14 13-8.381 8.38a1 1 0 0 1-3.001-3l8.384-8.381",key:"pgg06f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m21.5 10.5-8-8",key:"a17d9x"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m8.5 7.5 8 8",key:"1oyaui"}]],dY=Xe("gavel",cY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],h4=Xe("info",fY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hY=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],pY=Xe("layers",hY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mY=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],gY=Xe("layout-dashboard",mY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vY=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],yY=Xe("loader-circle",vY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xY=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],bY=Xe("menu",xY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wY=[["path",{d:"M14 14a2 2 0 0 0 2-2V8h-2",key:"1r06pg"}],["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M8 14a2 2 0 0 0 2-2V8H8",key:"1jzu5j"}]],SY=Xe("message-square-quote",wY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CY=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],kY=Xe("message-square",CY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EY=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],p4=Xe("play",EY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NY=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],IY=Xe("plus",NY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AY=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],TY=Xe("refresh-ccw",AY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Y=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],m4=Xe("refresh-cw",$Y);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OY=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],DY=Xe("rotate-ccw",OY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RY=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],_Y=Xe("scale",RY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MY=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],g4=Xe("shield-alert",MY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PY=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],v4=Xe("shield-check",PY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LY=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],zY=Xe("shopping-cart",LY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FY=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Yy=Xe("sparkles",FY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],jE=Xe("target",jY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BY=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],UY=Xe("terminal",BY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VY=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],WY=Xe("thumbs-up",VY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GY=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],HY=Xe("ticket",GY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qY=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],KY=Xe("timer",qY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XY=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],YY=Xe("trending-down",XY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZY=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],y4=Xe("trending-up",ZY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QY=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],JY=Xe("triangle-alert",QY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eZ=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],tZ=Xe("workflow",eZ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nZ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],x4=Xe("x",nZ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rZ=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],aZ=Xe("youtube",rZ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iZ=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],xp=Xe("zap",iZ);/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var y_="popstate";function sZ(t={}){function e(a,i){let{pathname:s="/",search:o="",hash:l=""}=Xu(a.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),Q2("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(a,i){let s=a.document.querySelector("base"),o="";if(s&&s.getAttribute("href")){let l=a.location.href,c=l.indexOf("#");o=c===-1?l:l.slice(0,c)}return o+"#"+(typeof i=="string"?i:Vh(i))}function r(a,i){Ma(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return lZ(e,n,r,t)}function un(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ma(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function oZ(){return Math.random().toString(36).substring(2,10)}function x_(t,e){return{usr:t.state,key:t.key,idx:e}}function Q2(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Xu(e):e,state:n,key:e&&e.key||r||oZ()}}function Vh({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Xu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function lZ(t,e,n,r={}){let{window:a=document.defaultView,v5Compat:i=!1}=r,s=a.history,o="POP",l=null,c=f();c==null&&(c=0,s.replaceState({...s.state,idx:c},""));function f(){return(s.state||{idx:null}).idx}function h(){o="POP";let b=f(),w=b==null?null:b-c;c=b,l&&l({action:o,location:x.location,delta:w})}function p(b,w){o="PUSH";let S=Q2(x.location,b,w);n&&n(S,b),c=f()+1;let k=x_(S,c),N=x.createHref(S);try{s.pushState(k,"",N)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;a.location.assign(N)}i&&l&&l({action:o,location:x.location,delta:1})}function g(b,w){o="REPLACE";let S=Q2(x.location,b,w);n&&n(S,b),c=f();let k=x_(S,c),N=x.createHref(S);s.replaceState(k,"",N),i&&l&&l({action:o,location:x.location,delta:0})}function v(b){return uZ(b)}let x={get action(){return o},get location(){return t(a,s)},listen(b){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(y_,h),l=b,()=>{a.removeEventListener(y_,h),l=null}},createHref(b){return e(a,b)},createURL:v,encodeLocation(b){let w=v(b);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:g,go(b){return s.go(b)}};return x}function uZ(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),un(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Vh(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function b4(t,e,n="/"){return cZ(t,e,n,!1)}function cZ(t,e,n,r){let a=typeof e=="string"?Xu(e):e,i=so(a.pathname||"/",n);if(i==null)return null;let s=w4(t);dZ(s);let o=null;for(let l=0;o==null&&l<s.length;++l){let c=SZ(i);o=bZ(s[l],c,r)}return o}function w4(t,e=[],n=[],r="",a=!1){let i=(s,o,l=a,c)=>{let f={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&l)return;un(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let h=no([r,f.relativePath]),p=n.concat(f);s.children&&s.children.length>0&&(un(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),w4(s.children,e,p,h,l)),!(s.path==null&&!s.index)&&e.push({path:h,score:yZ(h,s.index),routesMeta:p})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let c of S4(s.path))i(s,o,!0,c)}),e}function S4(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let s=S4(r.join("/")),o=[];return o.push(...s.map(l=>l===""?i:[i,l].join("/"))),a&&o.push(...s),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function dZ(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:xZ(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var fZ=/^:[\w-]+$/,hZ=3,pZ=2,mZ=1,gZ=10,vZ=-2,b_=t=>t==="*";function yZ(t,e){let n=t.split("/"),r=n.length;return n.some(b_)&&(r+=vZ),e&&(r+=pZ),n.filter(a=>!b_(a)).reduce((a,i)=>a+(fZ.test(i)?hZ:i===""?mZ:gZ),r)}function xZ(t,e){return t.length===e.length&&t.slice(0,-1).every((r,a)=>r===e[a])?t[t.length-1]-e[e.length-1]:0}function bZ(t,e,n=!1){let{routesMeta:r}=t,a={},i="/",s=[];for(let o=0;o<r.length;++o){let l=r[o],c=o===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",h=C0({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},f),p=l.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=C0({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},f)),!h)return null;Object.assign(a,h.params),s.push({params:a,pathname:no([i,h.pathname]),pathnameBase:NZ(no([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=no([i,h.pathnameBase]))}return s}function C0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=wZ(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:r.reduce((c,{paramName:f,isOptional:h},p)=>{if(f==="*"){let v=o[p]||"";s=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const g=o[p];return h&&!g?c[f]=void 0:c[f]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:s,pattern:t}}function wZ(t,e=!1,n=!0){Ma(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function SZ(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ma(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function so(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var C4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,CZ=t=>C4.test(t);function kZ(t,e="/"){let{pathname:n,search:r="",hash:a=""}=typeof t=="string"?Xu(t):t,i;if(n)if(CZ(n))i=n;else{if(n.includes("//")){let s=n;n=n.replace(/\/\/+/g,"/"),Ma(!1,`Pathnames cannot have embedded double slashes - normalizing ${s} -> ${n}`)}n.startsWith("/")?i=w_(n.substring(1),"/"):i=w_(n,e)}else i=e;return{pathname:i,search:IZ(r),hash:AZ(a)}}function w_(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function GS(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function EZ(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function BE(t){let e=EZ(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function UE(t,e,n,r=!1){let a;typeof t=="string"?a=Xu(t):(a={...t},un(!a.pathname||!a.pathname.includes("?"),GS("?","pathname","search",a)),un(!a.pathname||!a.pathname.includes("#"),GS("#","pathname","hash",a)),un(!a.search||!a.search.includes("#"),GS("#","search","hash",a)));let i=t===""||a.pathname==="",s=i?"/":a.pathname,o;if(s==null)o=n;else{let h=e.length-1;if(!r&&s.startsWith("..")){let p=s.split("/");for(;p[0]==="..";)p.shift(),h-=1;a.pathname=p.join("/")}o=h>=0?e[h]:"/"}let l=kZ(a,o),c=s&&s!=="/"&&s.endsWith("/"),f=(i||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||f)&&(l.pathname+="/"),l}var no=t=>t.join("/").replace(/\/\/+/g,"/"),NZ=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),IZ=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,AZ=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,TZ=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function $Z(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function OZ(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var k4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function E4(t,e){let n=t;if(typeof n!="string"||!C4.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,a=!1;if(k4)try{let i=new URL(window.location.href),s=n.startsWith("//")?new URL(i.protocol+n):new URL(n),o=so(s.pathname,e);s.origin===i.origin&&o!=null?n=o+s.search+s.hash:a=!0}catch{Ma(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:a,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var N4=["POST","PUT","PATCH","DELETE"];new Set(N4);var DZ=["GET",...N4];new Set(DZ);var zd=A.createContext(null);zd.displayName="DataRouter";var Zy=A.createContext(null);Zy.displayName="DataRouterState";var RZ=A.createContext(!1),I4=A.createContext({isTransitioning:!1});I4.displayName="ViewTransition";var _Z=A.createContext(new Map);_Z.displayName="Fetchers";var MZ=A.createContext(null);MZ.displayName="Await";var za=A.createContext(null);za.displayName="Navigation";var bp=A.createContext(null);bp.displayName="Location";var bs=A.createContext({outlet:null,matches:[],isDataRoute:!1});bs.displayName="Route";var VE=A.createContext(null);VE.displayName="RouteError";var A4="REACT_ROUTER_ERROR",PZ="REDIRECT",LZ="ROUTE_ERROR_RESPONSE";function zZ(t){if(t.startsWith(`${A4}:${PZ}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function FZ(t){if(t.startsWith(`${A4}:${LZ}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new TZ(e.status,e.statusText,e.data)}catch{}}function jZ(t,{relative:e}={}){un(Fd(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(za),{hash:a,pathname:i,search:s}=wp(t,{relative:e}),o=i;return n!=="/"&&(o=i==="/"?n:no([n,i])),r.createHref({pathname:o,search:s,hash:a})}function Fd(){return A.useContext(bp)!=null}function Sl(){return un(Fd(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(bp).location}var T4="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function $4(t){A.useContext(za).static||A.useLayoutEffect(t)}function O4(){let{isDataRoute:t}=A.useContext(bs);return t?JZ():BZ()}function BZ(){un(Fd(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(zd),{basename:e,navigator:n}=A.useContext(za),{matches:r}=A.useContext(bs),{pathname:a}=Sl(),i=JSON.stringify(BE(r)),s=A.useRef(!1);return $4(()=>{s.current=!0}),A.useCallback((l,c={})=>{if(Ma(s.current,T4),!s.current)return;if(typeof l=="number"){n.go(l);return}let f=UE(l,JSON.parse(i),a,c.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:no([e,f.pathname])),(c.replace?n.replace:n.push)(f,c.state,c)},[e,n,i,a,t])}A.createContext(null);function wp(t,{relative:e}={}){let{matches:n}=A.useContext(bs),{pathname:r}=Sl(),a=JSON.stringify(BE(n));return A.useMemo(()=>UE(t,JSON.parse(a),r,e==="path"),[t,a,r,e])}function UZ(t,e){return D4(t,e)}function D4(t,e,n,r,a){var S;un(Fd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=A.useContext(za),{matches:s}=A.useContext(bs),o=s[s.length-1],l=o?o.params:{},c=o?o.pathname:"/",f=o?o.pathnameBase:"/",h=o&&o.route;{let k=h&&h.path||"";_4(c,!h||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let p=Sl(),g;if(e){let k=typeof e=="string"?Xu(e):e;un(f==="/"||((S=k.pathname)==null?void 0:S.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${k.pathname}" was given in the \`location\` prop.`),g=k}else g=p;let v=g.pathname||"/",x=v;if(f!=="/"){let k=f.replace(/^\//,"").split("/");x="/"+v.replace(/^\//,"").split("/").slice(k.length).join("/")}let b=b4(t,{pathname:x});Ma(h||b!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),Ma(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=qZ(b&&b.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:no([f,i.encodeLocation?i.encodeLocation(k.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?f:no([f,i.encodeLocation?i.encodeLocation(k.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathnameBase])})),s,n,r,a);return e&&w?A.createElement(bp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},w):w}function VZ(){let t=QZ(),e=$Z(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:i},"ErrorBoundary")," or"," ",A.createElement("code",{style:i},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:a},n):null,s)}var WZ=A.createElement(VZ,null),R4=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=FZ(t.digest);n&&(t=n)}let e=t!==void 0?A.createElement(bs.Provider,{value:this.props.routeContext},A.createElement(VE.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?A.createElement(GZ,{error:t},e):e}};R4.contextType=RZ;var HS=new WeakMap;function GZ({children:t,error:e}){let{basename:n}=A.useContext(za);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=zZ(e.digest);if(r){let a=HS.get(e);if(a)throw a;let i=E4(r.location,n);if(k4&&!HS.get(e))if(i.isExternal||r.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const s=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:r.replace}));throw HS.set(e,s),s}return A.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return t}function HZ({routeContext:t,match:e,children:n}){let r=A.useContext(zd);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(bs.Provider,{value:t},n)}function qZ(t,e=[],n=null,r=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,s=n==null?void 0:n.errors;if(s!=null){let f=i.findIndex(h=>h.route.id&&(s==null?void 0:s[h.route.id])!==void 0);un(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,f+1))}let o=!1,l=-1;if(n)for(let f=0;f<i.length;f++){let h=i[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(l=f),h.route.id){let{loaderData:p,errors:g}=n,v=h.route.loader&&!p.hasOwnProperty(h.route.id)&&(!g||g[h.route.id]===void 0);if(h.route.lazy||v){o=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}let c=n&&r?(f,h)=>{var p,g;r(f,{location:n.location,params:((g=(p=n.matches)==null?void 0:p[0])==null?void 0:g.params)??{},unstable_pattern:OZ(n.matches),errorInfo:h})}:void 0;return i.reduceRight((f,h,p)=>{let g,v=!1,x=null,b=null;n&&(g=s&&h.route.id?s[h.route.id]:void 0,x=h.route.errorElement||WZ,o&&(l<0&&p===0?(_4("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,b=null):l===p&&(v=!0,b=h.route.hydrateFallbackElement||null)));let w=e.concat(i.slice(0,p+1)),S=()=>{let k;return g?k=x:v?k=b:h.route.Component?k=A.createElement(h.route.Component,null):h.route.element?k=h.route.element:k=f,A.createElement(HZ,{match:h,routeContext:{outlet:f,matches:w,isDataRoute:n!=null},children:k})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?A.createElement(R4,{location:n.location,revalidation:n.revalidation,component:x,error:g,children:S(),routeContext:{outlet:null,matches:w,isDataRoute:!0},onError:c}):S()},null)}function WE(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KZ(t){let e=A.useContext(zd);return un(e,WE(t)),e}function XZ(t){let e=A.useContext(Zy);return un(e,WE(t)),e}function YZ(t){let e=A.useContext(bs);return un(e,WE(t)),e}function GE(t){let e=YZ(t),n=e.matches[e.matches.length-1];return un(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function ZZ(){return GE("useRouteId")}function QZ(){var r;let t=A.useContext(VE),e=XZ("useRouteError"),n=GE("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function JZ(){let{router:t}=KZ("useNavigate"),e=GE("useNavigate"),n=A.useRef(!1);return $4(()=>{n.current=!0}),A.useCallback(async(a,i={})=>{Ma(n.current,T4),n.current&&(typeof a=="number"?await t.navigate(a):await t.navigate(a,{fromRouteId:e,...i}))},[t,e])}var S_={};function _4(t,e,n){!e&&!S_[t]&&(S_[t]=!0,Ma(!1,n))}A.memo(eQ);function eQ({routes:t,future:e,state:n,onError:r}){return D4(t,void 0,n,r,e)}function tQ({to:t,replace:e,state:n,relative:r}){un(Fd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=A.useContext(za);Ma(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=A.useContext(bs),{pathname:s}=Sl(),o=O4(),l=UE(t,BE(i),s,r==="path"),c=JSON.stringify(l);return A.useEffect(()=>{o(JSON.parse(c),{replace:e,state:n,relative:r})},[o,c,r,e,n]),null}function qs(t){un(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function nQ({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:a,static:i=!1,unstable_useTransitions:s}){un(!Fd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=A.useMemo(()=>({basename:o,navigator:a,static:i,unstable_useTransitions:s,future:{}}),[o,a,i,s]);typeof n=="string"&&(n=Xu(n));let{pathname:c="/",search:f="",hash:h="",state:p=null,key:g="default"}=n,v=A.useMemo(()=>{let x=so(c,o);return x==null?null:{location:{pathname:x,search:f,hash:h,state:p,key:g},navigationType:r}},[o,c,f,h,p,g,r]);return Ma(v!=null,`<Router basename="${o}"> is not able to match the URL "${c}${f}${h}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:A.createElement(za.Provider,{value:l},A.createElement(bp.Provider,{children:e,value:v}))}function rQ({children:t,location:e}){return UZ(J2(t),e)}function J2(t,e=[]){let n=[];return A.Children.forEach(t,(r,a)=>{if(!A.isValidElement(r))return;let i=[...e,a];if(r.type===A.Fragment){n.push.apply(n,J2(r.props.children,i));return}un(r.type===qs,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),un(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=J2(r.props.children,i)),n.push(s)}),n}var o0="get",l0="application/x-www-form-urlencoded";function Qy(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function aQ(t){return Qy(t)&&t.tagName.toLowerCase()==="button"}function iQ(t){return Qy(t)&&t.tagName.toLowerCase()==="form"}function sQ(t){return Qy(t)&&t.tagName.toLowerCase()==="input"}function oQ(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function lQ(t,e){return t.button===0&&(!e||e==="_self")&&!oQ(t)}var Nv=null;function uQ(){if(Nv===null)try{new FormData(document.createElement("form"),0),Nv=!1}catch{Nv=!0}return Nv}var cQ=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qS(t){return t!=null&&!cQ.has(t)?(Ma(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${l0}"`),null):t}function dQ(t,e){let n,r,a,i,s;if(iQ(t)){let o=t.getAttribute("action");r=o?so(o,e):null,n=t.getAttribute("method")||o0,a=qS(t.getAttribute("enctype"))||l0,i=new FormData(t)}else if(aQ(t)||sQ(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||o.getAttribute("action");if(r=l?so(l,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||o0,a=qS(t.getAttribute("formenctype"))||qS(o.getAttribute("enctype"))||l0,i=new FormData(o,t),!uQ()){let{name:c,type:f,value:h}=t;if(f==="image"){let p=c?`${c}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else c&&i.append(c,h)}}else{if(Qy(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=o0,r=null,a=l0,s=t}return i&&a==="text/plain"&&(s=i,i=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:i,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function HE(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function fQ(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&so(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function hQ(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function pQ(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function mQ(t,e,n){let r=await Promise.all(t.map(async a=>{let i=e.routes[a.route.id];if(i){let s=await hQ(i,n);return s.links?s.links():[]}return[]}));return xQ(r.flat(1).filter(pQ).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function C_(t,e,n,r,a,i){let s=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,o=(l,c)=>{var f;return n[c].pathname!==l.pathname||((f=n[c].route.path)==null?void 0:f.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return i==="assets"?e.filter((l,c)=>s(l,c)||o(l,c)):i==="data"?e.filter((l,c)=>{var h;let f=r.routes[l.route.id];if(!f||!f.hasLoader)return!1;if(s(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((h=n[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function gQ(t,e,{includeHydrateFallback:n}={}){return vQ(t.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function vQ(t){return[...new Set(t)]}function yQ(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function xQ(t,e){let n=new Set;return new Set(e),t.reduce((r,a)=>{let i=JSON.stringify(yQ(a));return n.has(i)||(n.add(i),r.push({key:i,link:a})),r},[])}function M4(){let t=A.useContext(zd);return HE(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function bQ(){let t=A.useContext(Zy);return HE(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var qE=A.createContext(void 0);qE.displayName="FrameworkContext";function P4(){let t=A.useContext(qE);return HE(t,"You must render this element inside a <HydratedRouter> element"),t}function wQ(t,e){let n=A.useContext(qE),[r,a]=A.useState(!1),[i,s]=A.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:f,onTouchStart:h}=e,p=A.useRef(null);A.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let x=w=>{w.forEach(S=>{s(S.isIntersecting)})},b=new IntersectionObserver(x,{threshold:.5});return p.current&&b.observe(p.current),()=>{b.disconnect()}}},[t]),A.useEffect(()=>{if(r){let x=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(x)}}},[r]);let g=()=>{a(!0)},v=()=>{a(!1),s(!1)};return n?t!=="intent"?[i,p,{}]:[i,p,{onFocus:vh(o,g),onBlur:vh(l,v),onMouseEnter:vh(c,g),onMouseLeave:vh(f,v),onTouchStart:vh(h,g)}]:[!1,p,{}]}function vh(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function SQ({page:t,...e}){let{router:n}=M4(),r=A.useMemo(()=>b4(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?A.createElement(kQ,{page:t,matches:r,...e}):null}function CQ(t){let{manifest:e,routeModules:n}=P4(),[r,a]=A.useState([]);return A.useEffect(()=>{let i=!1;return mQ(t,e,n).then(s=>{i||a(s)}),()=>{i=!0}},[t,e,n]),r}function kQ({page:t,matches:e,...n}){let r=Sl(),{manifest:a,routeModules:i}=P4(),{basename:s}=M4(),{loaderData:o,matches:l}=bQ(),c=A.useMemo(()=>C_(t,e,l,a,r,"data"),[t,e,l,a,r]),f=A.useMemo(()=>C_(t,e,l,a,r,"assets"),[t,e,l,a,r]),h=A.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let v=new Set,x=!1;if(e.forEach(w=>{var k;let S=a.routes[w.route.id];!S||!S.hasLoader||(!c.some(N=>N.route.id===w.route.id)&&w.route.id in o&&((k=i[w.route.id])!=null&&k.shouldRevalidate)||S.hasClientLoader?x=!0:v.add(w.route.id))}),v.size===0)return[];let b=fQ(t,s,"data");return x&&v.size>0&&b.searchParams.set("_routes",e.filter(w=>v.has(w.route.id)).map(w=>w.route.id).join(",")),[b.pathname+b.search]},[s,o,r,a,c,e,t,i]),p=A.useMemo(()=>gQ(f,a),[f,a]),g=CQ(f);return A.createElement(A.Fragment,null,h.map(v=>A.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),p.map(v=>A.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),g.map(({key:v,link:x})=>A.createElement("link",{key:v,nonce:n.nonce,...x})))}function EQ(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var NQ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{NQ&&(window.__reactRouterVersion="7.11.0")}catch{}function IQ({basename:t,children:e,unstable_useTransitions:n,window:r}){let a=A.useRef();a.current==null&&(a.current=sZ({window:r,v5Compat:!0}));let i=a.current,[s,o]=A.useState({action:i.action,location:i.location}),l=A.useCallback(c=>{n===!1?o(c):A.startTransition(()=>o(c))},[n]);return A.useLayoutEffect(()=>i.listen(l),[i,l]),A.createElement(nQ,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i,unstable_useTransitions:n})}var L4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,z4=A.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:a,reloadDocument:i,replace:s,state:o,target:l,to:c,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:p,...g},v){let{basename:x,unstable_useTransitions:b}=A.useContext(za),w=typeof c=="string"&&L4.test(c),S=E4(c,x);c=S.to;let k=jZ(c,{relative:a}),[N,I,T]=wQ(r,g),R=$Q(c,{replace:s,state:o,target:l,preventScrollReset:f,relative:a,viewTransition:h,unstable_defaultShouldRevalidate:p,unstable_useTransitions:b});function _(P){e&&e(P),P.defaultPrevented||R(P)}let M=A.createElement("a",{...g,...T,href:S.absoluteURL||k,onClick:S.isExternal||i?e:_,ref:EQ(v,I),target:l,"data-discover":!w&&n==="render"?"true":void 0});return N&&!w?A.createElement(A.Fragment,null,M,A.createElement(SQ,{page:k})):M});z4.displayName="Link";var F4=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:a=!1,style:i,to:s,viewTransition:o,children:l,...c},f){let h=wp(s,{relative:c.relative}),p=Sl(),g=A.useContext(Zy),{navigator:v,basename:x}=A.useContext(za),b=g!=null&&MQ(h)&&o===!0,w=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,S=p.pathname,k=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(S=S.toLowerCase(),k=k?k.toLowerCase():null,w=w.toLowerCase()),k&&x&&(k=so(k,x)||k);const N=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let I=S===w||!a&&S.startsWith(w)&&S.charAt(N)==="/",T=k!=null&&(k===w||!a&&k.startsWith(w)&&k.charAt(w.length)==="/"),R={isActive:I,isPending:T,isTransitioning:b},_=I?e:void 0,M;typeof r=="function"?M=r(R):M=[r,I?"active":null,T?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let P=typeof i=="function"?i(R):i;return A.createElement(z4,{...c,"aria-current":_,className:M,ref:f,style:P,to:s,viewTransition:o},typeof l=="function"?l(R):l)});F4.displayName="NavLink";var AQ=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:a,state:i,method:s=o0,action:o,onSubmit:l,relative:c,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:p,...g},v)=>{let{unstable_useTransitions:x}=A.useContext(za),b=RQ(),w=_Q(o,{relative:c}),S=s.toLowerCase()==="get"?"get":"post",k=typeof o=="string"&&L4.test(o),N=I=>{if(l&&l(I),I.defaultPrevented)return;I.preventDefault();let T=I.nativeEvent.submitter,R=(T==null?void 0:T.getAttribute("formmethod"))||s,_=()=>b(T||I.currentTarget,{fetcherKey:e,method:R,navigate:n,replace:a,state:i,relative:c,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:p});x&&n!==!1?A.startTransition(()=>_()):_()};return A.createElement("form",{ref:v,method:S,action:w,onSubmit:r?l:N,...g,"data-discover":!k&&t==="render"?"true":void 0})});AQ.displayName="Form";function TQ(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function j4(t){let e=A.useContext(zd);return un(e,TQ(t)),e}function $Q(t,{target:e,replace:n,state:r,preventScrollReset:a,relative:i,viewTransition:s,unstable_defaultShouldRevalidate:o,unstable_useTransitions:l}={}){let c=O4(),f=Sl(),h=wp(t,{relative:i});return A.useCallback(p=>{if(lQ(p,e)){p.preventDefault();let g=n!==void 0?n:Vh(f)===Vh(h),v=()=>c(t,{replace:g,state:r,preventScrollReset:a,relative:i,viewTransition:s,unstable_defaultShouldRevalidate:o});l?A.startTransition(()=>v()):v()}},[f,c,h,n,r,e,t,a,i,s,o,l])}var OQ=0,DQ=()=>`__${String(++OQ)}__`;function RQ(){let{router:t}=j4("useSubmit"),{basename:e}=A.useContext(za),n=ZZ(),r=t.fetch,a=t.navigate;return A.useCallback(async(i,s={})=>{let{action:o,method:l,encType:c,formData:f,body:h}=dQ(i,e);if(s.navigate===!1){let p=s.fetcherKey||DQ();await r(p,n,s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||l,formEncType:s.encType||c,flushSync:s.flushSync})}else await a(s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||l,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,a,e,n])}function _Q(t,{relative:e}={}){let{basename:n}=A.useContext(za),r=A.useContext(bs);un(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),i={...wp(t||".",{relative:e})},s=Sl();if(t==null){i.search=s.search;let o=new URLSearchParams(i.search),l=o.getAll("index");if(l.some(f=>f==="")){o.delete("index"),l.filter(h=>h).forEach(h=>o.append("index",h));let f=o.toString();i.search=f?`?${f}`:""}}return(!t||t===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:no([n,i.pathname])),Vh(i)}function MQ(t,{relative:e}={}){let n=A.useContext(I4);un(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=j4("useViewTransitionState"),a=wp(t,{relative:e});if(!n.isTransitioning)return!1;let i=so(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=so(n.nextLocation.pathname,r)||n.nextLocation.pathname;return C0(a.pathname,s)!=null||C0(a.pathname,i)!=null}var B4=l4();function U4(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=U4(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Et(){for(var t,e,n=0,r="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=U4(t))&&(r&&(r+=" "),r+=e);return r}const PQ=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},LQ=(t,e)=>({classGroupId:t,validator:e}),V4=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),k0="-",k_=[],zQ="arbitrary..",FQ=t=>{const e=BQ(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:s=>{if(s.startsWith("[")&&s.endsWith("]"))return jQ(s);const o=s.split(k0),l=o[0]===""&&o.length>1?1:0;return W4(o,l,e)},getConflictingClassGroupIds:(s,o)=>{if(o){const l=r[s],c=n[s];return l?c?PQ(c,l):l:c||k_}return n[s]||k_}}},W4=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const a=t[e],i=n.nextPart.get(a);if(i){const c=W4(t,e+1,i);if(c)return c}const s=n.validators;if(s===null)return;const o=e===0?t.join(k0):t.slice(e).join(k0),l=s.length;for(let c=0;c<l;c++){const f=s[c];if(f.validator(o))return f.classGroupId}},jQ=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?zQ+r:void 0})(),BQ=t=>{const{theme:e,classGroups:n}=t;return UQ(n,e)},UQ=(t,e)=>{const n=V4();for(const r in t){const a=t[r];KE(a,n,r,e)}return n},KE=(t,e,n,r)=>{const a=t.length;for(let i=0;i<a;i++){const s=t[i];VQ(s,e,n,r)}},VQ=(t,e,n,r)=>{if(typeof t=="string"){WQ(t,e,n);return}if(typeof t=="function"){GQ(t,e,n,r);return}HQ(t,e,n,r)},WQ=(t,e,n)=>{const r=t===""?e:G4(e,t);r.classGroupId=n},GQ=(t,e,n,r)=>{if(qQ(t)){KE(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(LQ(n,t))},HQ=(t,e,n,r)=>{const a=Object.entries(t),i=a.length;for(let s=0;s<i;s++){const[o,l]=a[s];KE(l,G4(e,o),n,r)}},G4=(t,e)=>{let n=t;const r=e.split(k0),a=r.length;for(let i=0;i<a;i++){const s=r[i];let o=n.nextPart.get(s);o||(o=V4(),n.nextPart.set(s,o)),n=o}return n},qQ=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,KQ=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const a=(i,s)=>{n[i]=s,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(i){let s=n[i];if(s!==void 0)return s;if((s=r[i])!==void 0)return a(i,s),s},set(i,s){i in n?n[i]=s:a(i,s)}}},ek="!",E_=":",XQ=[],N_=(t,e,n,r,a)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:a}),YQ=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=a=>{const i=[];let s=0,o=0,l=0,c;const f=a.length;for(let x=0;x<f;x++){const b=a[x];if(s===0&&o===0){if(b===E_){i.push(a.slice(l,x)),l=x+1;continue}if(b==="/"){c=x;continue}}b==="["?s++:b==="]"?s--:b==="("?o++:b===")"&&o--}const h=i.length===0?a:a.slice(l);let p=h,g=!1;h.endsWith(ek)?(p=h.slice(0,-1),g=!0):h.startsWith(ek)&&(p=h.slice(1),g=!0);const v=c&&c>l?c-l:void 0;return N_(i,g,p,v)};if(e){const a=e+E_,i=r;r=s=>s.startsWith(a)?i(s.slice(a.length)):N_(XQ,!1,s,void 0,!0)}if(n){const a=r;r=i=>n({className:i,parseClassName:a})}return r},ZQ=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let a=[];for(let i=0;i<n.length;i++){const s=n[i],o=s[0]==="[",l=e.has(s);o||l?(a.length>0&&(a.sort(),r.push(...a),a=[]),r.push(s)):a.push(s)}return a.length>0&&(a.sort(),r.push(...a)),r}},QQ=t=>({cache:KQ(t.cacheSize),parseClassName:YQ(t),sortModifiers:ZQ(t),...FQ(t)}),JQ=/\s+/,eJ=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:i}=e,s=[],o=t.trim().split(JQ);let l="";for(let c=o.length-1;c>=0;c-=1){const f=o[c],{isExternal:h,modifiers:p,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:x}=n(f);if(h){l=f+(l.length>0?" "+l:l);continue}let b=!!x,w=r(b?v.substring(0,x):v);if(!w){if(!b){l=f+(l.length>0?" "+l:l);continue}if(w=r(v),!w){l=f+(l.length>0?" "+l:l);continue}b=!1}const S=p.length===0?"":p.length===1?p[0]:i(p).join(":"),k=g?S+ek:S,N=k+w;if(s.indexOf(N)>-1)continue;s.push(N);const I=a(w,b);for(let T=0;T<I.length;++T){const R=I[T];s.push(k+R)}l=f+(l.length>0?" "+l:l)}return l},tJ=(...t)=>{let e=0,n,r,a="";for(;e<t.length;)(n=t[e++])&&(r=H4(n))&&(a&&(a+=" "),a+=r);return a},H4=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=H4(t[r]))&&(n&&(n+=" "),n+=e);return n},nJ=(t,...e)=>{let n,r,a,i;const s=l=>{const c=e.reduce((f,h)=>h(f),t());return n=QQ(c),r=n.cache.get,a=n.cache.set,i=o,o(l)},o=l=>{const c=r(l);if(c)return c;const f=eJ(l,n);return a(l,f),f};return i=s,(...l)=>i(tJ(...l))},rJ=[],Gn=t=>{const e=n=>n[t]||rJ;return e.isThemeGetter=!0,e},q4=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,K4=/^\((?:(\w[\w-]*):)?(.+)\)$/i,aJ=/^\d+\/\d+$/,iJ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,sJ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,oJ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,lJ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,uJ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Xc=t=>aJ.test(t),ot=t=>!!t&&!Number.isNaN(Number(t)),Qo=t=>!!t&&Number.isInteger(Number(t)),KS=t=>t.endsWith("%")&&ot(t.slice(0,-1)),Hs=t=>iJ.test(t),cJ=()=>!0,dJ=t=>sJ.test(t)&&!oJ.test(t),X4=()=>!1,fJ=t=>lJ.test(t),hJ=t=>uJ.test(t),pJ=t=>!Pe(t)&&!Le(t),mJ=t=>jd(t,Q4,X4),Pe=t=>q4.test(t),nu=t=>jd(t,J4,dJ),XS=t=>jd(t,bJ,ot),I_=t=>jd(t,Y4,X4),gJ=t=>jd(t,Z4,hJ),Iv=t=>jd(t,ej,fJ),Le=t=>K4.test(t),yh=t=>Bd(t,J4),vJ=t=>Bd(t,wJ),A_=t=>Bd(t,Y4),yJ=t=>Bd(t,Q4),xJ=t=>Bd(t,Z4),Av=t=>Bd(t,ej,!0),jd=(t,e,n)=>{const r=q4.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Bd=(t,e,n=!1)=>{const r=K4.exec(t);return r?r[1]?e(r[1]):n:!1},Y4=t=>t==="position"||t==="percentage",Z4=t=>t==="image"||t==="url",Q4=t=>t==="length"||t==="size"||t==="bg-size",J4=t=>t==="length",bJ=t=>t==="number",wJ=t=>t==="family-name",ej=t=>t==="shadow",SJ=()=>{const t=Gn("color"),e=Gn("font"),n=Gn("text"),r=Gn("font-weight"),a=Gn("tracking"),i=Gn("leading"),s=Gn("breakpoint"),o=Gn("container"),l=Gn("spacing"),c=Gn("radius"),f=Gn("shadow"),h=Gn("inset-shadow"),p=Gn("text-shadow"),g=Gn("drop-shadow"),v=Gn("blur"),x=Gn("perspective"),b=Gn("aspect"),w=Gn("ease"),S=Gn("animate"),k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],N=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],I=()=>[...N(),Le,Pe],T=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],_=()=>[Le,Pe,l],M=()=>[Xc,"full","auto",..._()],P=()=>[Qo,"none","subgrid",Le,Pe],$=()=>["auto",{span:["full",Qo,Le,Pe]},Qo,Le,Pe],z=()=>[Qo,"auto",Le,Pe],W=()=>["auto","min","max","fr",Le,Pe],H=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],G=()=>["start","end","center","stretch","center-safe","end-safe"],F=()=>["auto",..._()],V=()=>[Xc,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",..._()],U=()=>[t,Le,Pe],Y=()=>[...N(),A_,I_,{position:[Le,Pe]}],oe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],j=()=>["auto","cover","contain",yJ,mJ,{size:[Le,Pe]}],q=()=>[KS,yh,nu],Z=()=>["","none","full",c,Le,Pe],se=()=>["",ot,yh,nu],pe=()=>["solid","dashed","dotted","double"],Se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],be=()=>[ot,KS,A_,I_],Te=()=>["","none",v,Le,Pe],ae=()=>["none",ot,Le,Pe],Ne=()=>["none",ot,Le,Pe],Ie=()=>[ot,Le,Pe],ye=()=>[Xc,"full",..._()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Hs],breakpoint:[Hs],color:[cJ],container:[Hs],"drop-shadow":[Hs],ease:["in","out","in-out"],font:[pJ],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Hs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Hs],shadow:[Hs],spacing:["px",ot],text:[Hs],"text-shadow":[Hs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Xc,Pe,Le,b]}],container:["container"],columns:[{columns:[ot,Pe,Le,o]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:I()}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:M()}],"inset-x":[{"inset-x":M()}],"inset-y":[{"inset-y":M()}],start:[{start:M()}],end:[{end:M()}],top:[{top:M()}],right:[{right:M()}],bottom:[{bottom:M()}],left:[{left:M()}],visibility:["visible","invisible","collapse"],z:[{z:[Qo,"auto",Le,Pe]}],basis:[{basis:[Xc,"full","auto",o,..._()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ot,Xc,"auto","initial","none",Pe]}],grow:[{grow:["",ot,Le,Pe]}],shrink:[{shrink:["",ot,Le,Pe]}],order:[{order:[Qo,"first","last","none",Le,Pe]}],"grid-cols":[{"grid-cols":P()}],"col-start-end":[{col:$()}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":P()}],"row-start-end":[{row:$()}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":W()}],"auto-rows":[{"auto-rows":W()}],gap:[{gap:_()}],"gap-x":[{"gap-x":_()}],"gap-y":[{"gap-y":_()}],"justify-content":[{justify:[...H(),"normal"]}],"justify-items":[{"justify-items":[...G(),"normal"]}],"justify-self":[{"justify-self":["auto",...G()]}],"align-content":[{content:["normal",...H()]}],"align-items":[{items:[...G(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...G(),{baseline:["","last"]}]}],"place-content":[{"place-content":H()}],"place-items":[{"place-items":[...G(),"baseline"]}],"place-self":[{"place-self":["auto",...G()]}],p:[{p:_()}],px:[{px:_()}],py:[{py:_()}],ps:[{ps:_()}],pe:[{pe:_()}],pt:[{pt:_()}],pr:[{pr:_()}],pb:[{pb:_()}],pl:[{pl:_()}],m:[{m:F()}],mx:[{mx:F()}],my:[{my:F()}],ms:[{ms:F()}],me:[{me:F()}],mt:[{mt:F()}],mr:[{mr:F()}],mb:[{mb:F()}],ml:[{ml:F()}],"space-x":[{"space-x":_()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":_()}],"space-y-reverse":["space-y-reverse"],size:[{size:V()}],w:[{w:[o,"screen",...V()]}],"min-w":[{"min-w":[o,"screen","none",...V()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[s]},...V()]}],h:[{h:["screen","lh",...V()]}],"min-h":[{"min-h":["screen","lh","none",...V()]}],"max-h":[{"max-h":["screen","lh",...V()]}],"font-size":[{text:["base",n,yh,nu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Le,XS]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",KS,Pe]}],"font-family":[{font:[vJ,Pe,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,Le,Pe]}],"line-clamp":[{"line-clamp":[ot,"none",Le,XS]}],leading:[{leading:[i,..._()]}],"list-image":[{"list-image":["none",Le,Pe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Le,Pe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:U()}],"text-color":[{text:U()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...pe(),"wavy"]}],"text-decoration-thickness":[{decoration:[ot,"from-font","auto",Le,nu]}],"text-decoration-color":[{decoration:U()}],"underline-offset":[{"underline-offset":[ot,"auto",Le,Pe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Le,Pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Le,Pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Y()}],"bg-repeat":[{bg:oe()}],"bg-size":[{bg:j()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Qo,Le,Pe],radial:["",Le,Pe],conic:[Qo,Le,Pe]},xJ,gJ]}],"bg-color":[{bg:U()}],"gradient-from-pos":[{from:q()}],"gradient-via-pos":[{via:q()}],"gradient-to-pos":[{to:q()}],"gradient-from":[{from:U()}],"gradient-via":[{via:U()}],"gradient-to":[{to:U()}],rounded:[{rounded:Z()}],"rounded-s":[{"rounded-s":Z()}],"rounded-e":[{"rounded-e":Z()}],"rounded-t":[{"rounded-t":Z()}],"rounded-r":[{"rounded-r":Z()}],"rounded-b":[{"rounded-b":Z()}],"rounded-l":[{"rounded-l":Z()}],"rounded-ss":[{"rounded-ss":Z()}],"rounded-se":[{"rounded-se":Z()}],"rounded-ee":[{"rounded-ee":Z()}],"rounded-es":[{"rounded-es":Z()}],"rounded-tl":[{"rounded-tl":Z()}],"rounded-tr":[{"rounded-tr":Z()}],"rounded-br":[{"rounded-br":Z()}],"rounded-bl":[{"rounded-bl":Z()}],"border-w":[{border:se()}],"border-w-x":[{"border-x":se()}],"border-w-y":[{"border-y":se()}],"border-w-s":[{"border-s":se()}],"border-w-e":[{"border-e":se()}],"border-w-t":[{"border-t":se()}],"border-w-r":[{"border-r":se()}],"border-w-b":[{"border-b":se()}],"border-w-l":[{"border-l":se()}],"divide-x":[{"divide-x":se()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":se()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...pe(),"hidden","none"]}],"divide-style":[{divide:[...pe(),"hidden","none"]}],"border-color":[{border:U()}],"border-color-x":[{"border-x":U()}],"border-color-y":[{"border-y":U()}],"border-color-s":[{"border-s":U()}],"border-color-e":[{"border-e":U()}],"border-color-t":[{"border-t":U()}],"border-color-r":[{"border-r":U()}],"border-color-b":[{"border-b":U()}],"border-color-l":[{"border-l":U()}],"divide-color":[{divide:U()}],"outline-style":[{outline:[...pe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ot,Le,Pe]}],"outline-w":[{outline:["",ot,yh,nu]}],"outline-color":[{outline:U()}],shadow:[{shadow:["","none",f,Av,Iv]}],"shadow-color":[{shadow:U()}],"inset-shadow":[{"inset-shadow":["none",h,Av,Iv]}],"inset-shadow-color":[{"inset-shadow":U()}],"ring-w":[{ring:se()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:U()}],"ring-offset-w":[{"ring-offset":[ot,nu]}],"ring-offset-color":[{"ring-offset":U()}],"inset-ring-w":[{"inset-ring":se()}],"inset-ring-color":[{"inset-ring":U()}],"text-shadow":[{"text-shadow":["none",p,Av,Iv]}],"text-shadow-color":[{"text-shadow":U()}],opacity:[{opacity:[ot,Le,Pe]}],"mix-blend":[{"mix-blend":[...Se(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Se()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ot]}],"mask-image-linear-from-pos":[{"mask-linear-from":be()}],"mask-image-linear-to-pos":[{"mask-linear-to":be()}],"mask-image-linear-from-color":[{"mask-linear-from":U()}],"mask-image-linear-to-color":[{"mask-linear-to":U()}],"mask-image-t-from-pos":[{"mask-t-from":be()}],"mask-image-t-to-pos":[{"mask-t-to":be()}],"mask-image-t-from-color":[{"mask-t-from":U()}],"mask-image-t-to-color":[{"mask-t-to":U()}],"mask-image-r-from-pos":[{"mask-r-from":be()}],"mask-image-r-to-pos":[{"mask-r-to":be()}],"mask-image-r-from-color":[{"mask-r-from":U()}],"mask-image-r-to-color":[{"mask-r-to":U()}],"mask-image-b-from-pos":[{"mask-b-from":be()}],"mask-image-b-to-pos":[{"mask-b-to":be()}],"mask-image-b-from-color":[{"mask-b-from":U()}],"mask-image-b-to-color":[{"mask-b-to":U()}],"mask-image-l-from-pos":[{"mask-l-from":be()}],"mask-image-l-to-pos":[{"mask-l-to":be()}],"mask-image-l-from-color":[{"mask-l-from":U()}],"mask-image-l-to-color":[{"mask-l-to":U()}],"mask-image-x-from-pos":[{"mask-x-from":be()}],"mask-image-x-to-pos":[{"mask-x-to":be()}],"mask-image-x-from-color":[{"mask-x-from":U()}],"mask-image-x-to-color":[{"mask-x-to":U()}],"mask-image-y-from-pos":[{"mask-y-from":be()}],"mask-image-y-to-pos":[{"mask-y-to":be()}],"mask-image-y-from-color":[{"mask-y-from":U()}],"mask-image-y-to-color":[{"mask-y-to":U()}],"mask-image-radial":[{"mask-radial":[Le,Pe]}],"mask-image-radial-from-pos":[{"mask-radial-from":be()}],"mask-image-radial-to-pos":[{"mask-radial-to":be()}],"mask-image-radial-from-color":[{"mask-radial-from":U()}],"mask-image-radial-to-color":[{"mask-radial-to":U()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":N()}],"mask-image-conic-pos":[{"mask-conic":[ot]}],"mask-image-conic-from-pos":[{"mask-conic-from":be()}],"mask-image-conic-to-pos":[{"mask-conic-to":be()}],"mask-image-conic-from-color":[{"mask-conic-from":U()}],"mask-image-conic-to-color":[{"mask-conic-to":U()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Y()}],"mask-repeat":[{mask:oe()}],"mask-size":[{mask:j()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Le,Pe]}],filter:[{filter:["","none",Le,Pe]}],blur:[{blur:Te()}],brightness:[{brightness:[ot,Le,Pe]}],contrast:[{contrast:[ot,Le,Pe]}],"drop-shadow":[{"drop-shadow":["","none",g,Av,Iv]}],"drop-shadow-color":[{"drop-shadow":U()}],grayscale:[{grayscale:["",ot,Le,Pe]}],"hue-rotate":[{"hue-rotate":[ot,Le,Pe]}],invert:[{invert:["",ot,Le,Pe]}],saturate:[{saturate:[ot,Le,Pe]}],sepia:[{sepia:["",ot,Le,Pe]}],"backdrop-filter":[{"backdrop-filter":["","none",Le,Pe]}],"backdrop-blur":[{"backdrop-blur":Te()}],"backdrop-brightness":[{"backdrop-brightness":[ot,Le,Pe]}],"backdrop-contrast":[{"backdrop-contrast":[ot,Le,Pe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ot,Le,Pe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ot,Le,Pe]}],"backdrop-invert":[{"backdrop-invert":["",ot,Le,Pe]}],"backdrop-opacity":[{"backdrop-opacity":[ot,Le,Pe]}],"backdrop-saturate":[{"backdrop-saturate":[ot,Le,Pe]}],"backdrop-sepia":[{"backdrop-sepia":["",ot,Le,Pe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":_()}],"border-spacing-x":[{"border-spacing-x":_()}],"border-spacing-y":[{"border-spacing-y":_()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Le,Pe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ot,"initial",Le,Pe]}],ease:[{ease:["linear","initial",w,Le,Pe]}],delay:[{delay:[ot,Le,Pe]}],animate:[{animate:["none",S,Le,Pe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,Le,Pe]}],"perspective-origin":[{"perspective-origin":I()}],rotate:[{rotate:ae()}],"rotate-x":[{"rotate-x":ae()}],"rotate-y":[{"rotate-y":ae()}],"rotate-z":[{"rotate-z":ae()}],scale:[{scale:Ne()}],"scale-x":[{"scale-x":Ne()}],"scale-y":[{"scale-y":Ne()}],"scale-z":[{"scale-z":Ne()}],"scale-3d":["scale-3d"],skew:[{skew:Ie()}],"skew-x":[{"skew-x":Ie()}],"skew-y":[{"skew-y":Ie()}],transform:[{transform:[Le,Pe,"","none","gpu","cpu"]}],"transform-origin":[{origin:I()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ye()}],"translate-x":[{"translate-x":ye()}],"translate-y":[{"translate-y":ye()}],"translate-z":[{"translate-z":ye()}],"translate-none":["translate-none"],accent:[{accent:U()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:U()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Le,Pe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_()}],"scroll-mx":[{"scroll-mx":_()}],"scroll-my":[{"scroll-my":_()}],"scroll-ms":[{"scroll-ms":_()}],"scroll-me":[{"scroll-me":_()}],"scroll-mt":[{"scroll-mt":_()}],"scroll-mr":[{"scroll-mr":_()}],"scroll-mb":[{"scroll-mb":_()}],"scroll-ml":[{"scroll-ml":_()}],"scroll-p":[{"scroll-p":_()}],"scroll-px":[{"scroll-px":_()}],"scroll-py":[{"scroll-py":_()}],"scroll-ps":[{"scroll-ps":_()}],"scroll-pe":[{"scroll-pe":_()}],"scroll-pt":[{"scroll-pt":_()}],"scroll-pr":[{"scroll-pr":_()}],"scroll-pb":[{"scroll-pb":_()}],"scroll-pl":[{"scroll-pl":_()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Le,Pe]}],fill:[{fill:["none",...U()]}],"stroke-w":[{stroke:[ot,yh,nu,XS]}],stroke:[{stroke:["none",...U()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},CJ=nJ(SJ);function tn(...t){return CJ(Et(t))}const kJ=[{name:"Panel Principal",path:"/",icon:gY},{name:"Ep 1: Perceptrn",path:"/ep1",icon:dY,subtitle:"El Juez"},{name:"Ep 2: Regresin",path:"/ep2",icon:Yy,subtitle:"El Adivino"},{name:"Ep 3: Clasificacin",path:"/ep3",icon:g4,subtitle:"El Detective"},{name:"Ep 4: NLP",path:"/ep4",icon:c4,subtitle:"El Lector"},{name:"Ep 5: Series Temporales",path:"/ep5",icon:Xy,subtitle:"El Orculo"},{name:"Ep 6: Refuerzo",path:"/ep6",icon:jE,subtitle:"El Estratega"}],EJ=({isOpen:t,onClose:e})=>O.jsxs(O.Fragment,{children:[O.jsx("div",{className:tn("fixed inset-0 bg-slate-950/80 backdrop-blur-sm z-40 lg:hidden transition-opacity duration-300",t?"opacity-100":"opacity-0 pointer-events-none"),onClick:e}),O.jsxs("aside",{className:tn("fixed left-0 top-0 h-screen w-72 bg-slate-900 border-r border-slate-800 z-50 flex flex-col transition-transform duration-300 lg:translate-x-0",t?"translate-x-0":"-translate-x-full"),children:[O.jsxs("div",{className:"p-8 border-b border-slate-800 flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("div",{className:"w-10 h-10 bg-emerald-500 rounded-xl flex items-center justify-center shadow-lg shadow-emerald-500/20",children:O.jsx(xp,{className:"text-slate-950 fill-slate-950",size:24})}),O.jsxs("div",{children:[O.jsxs("h1",{className:"text-xl font-bold tracking-tight text-white leading-tight",children:["Sebas ",O.jsx("span",{className:"text-emerald-500",children:"Tech Lab"})]}),O.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-widest font-black",children:"Serie de Labs AI"})]})]}),O.jsx("button",{onClick:e,className:"lg:hidden p-2 text-slate-400",children:O.jsx(x4,{size:20})})]}),O.jsx("nav",{className:"flex-1 overflow-y-auto py-6 px-4 space-y-1.5",children:kJ.map(n=>O.jsx(F4,{to:n.path,onClick:()=>{window.innerWidth<1024&&e()},className:({isActive:r})=>tn("flex items-center gap-4 px-4 py-3 rounded-xl transition-all duration-200 group",r?"bg-emerald-500/10 text-emerald-500 border border-emerald-500/20 shadow-sm":"text-slate-400 hover:bg-slate-800/50 hover:text-white"),children:({isActive:r})=>O.jsxs(O.Fragment,{children:[O.jsx(n.icon,{size:20,className:tn("shrink-0",r?"text-emerald-500":"group-hover:text-emerald-400")}),O.jsxs("div",{className:"flex flex-col",children:[O.jsx("span",{className:"font-bold text-sm tracking-tight",children:n.name}),n.subtitle&&O.jsx("span",{className:"text-[9px] opacity-60 font-mono tracking-wider",children:n.subtitle})]})]})},n.path))}),O.jsx("div",{className:"p-6 border-t border-slate-800",children:O.jsxs("div",{className:"bg-slate-950 rounded-2xl p-4 border border-slate-800",children:[O.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[O.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),O.jsx("span",{className:"text-[10px] font-black text-slate-300 tracking-widest uppercase",children:"SISTEMA LISTO"})]}),O.jsx("p",{className:"text-[10px] text-slate-500 leading-relaxed font-medium",children:"Modelos optimizados para ejecucin local en navegador."})]})})]})]});var NJ=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function XE(t){if(typeof t!="string")return!1;var e=NJ;return e.includes(t)}var IJ=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],AJ=new Set(IJ);function tj(t){return typeof t!="string"?!1:AJ.has(t)}function nj(t){return typeof t=="string"&&t.startsWith("data-")}function Kr(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(tj(n)||nj(n))&&(e[n]=t[n]);return e}function Ud(t){if(t==null)return null;if(A.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Kr(e)}return typeof t=="object"&&!Array.isArray(t)?Kr(t):null}function wr(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(tj(n)||nj(n)||XE(n))&&(e[n]=t[n]);return e}function TJ(t){return t==null?null:A.isValidElement(t)?wr(t.props):typeof t=="object"&&!Array.isArray(t)?wr(t):null}var $J=["children","width","height","viewBox","className","style","title","desc"];function tk(){return tk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tk.apply(null,arguments)}function OJ(t,e){if(t==null)return{};var n,r,a=DJ(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function DJ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var rj=A.forwardRef((t,e)=>{var{children:n,width:r,height:a,viewBox:i,className:s,style:o,title:l,desc:c}=t,f=OJ(t,$J),h=i||{width:r,height:a,x:0,y:0},p=Et("recharts-surface",s);return A.createElement("svg",tk({},wr(f),{className:p,width:r,height:a,style:o,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:e}),A.createElement("title",null,l),A.createElement("desc",null,c),n)}),RJ=["children","className"];function nk(){return nk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nk.apply(null,arguments)}function _J(t,e){if(t==null)return{};var n,r,a=MJ(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function MJ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var yn=A.forwardRef((t,e)=>{var{children:n,className:r}=t,a=_J(t,RJ),i=Et("recharts-layer",r);return A.createElement("g",nk({className:i},wr(a),{ref:e}),n)}),PJ=A.createContext(null);function Kt(t){return function(){return t}}const aj=Math.cos,E0=Math.sin,Vi=Math.sqrt,N0=Math.PI,Jy=2*N0,rk=Math.PI,ak=2*rk,iu=1e-6,LJ=ak-iu;function ij(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function zJ(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return ij;const n=10**e;return function(r){this._+=r[0];for(let a=1,i=r.length;a<i;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class FJ{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?ij:zJ(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,a){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(e,n,r,a,i,s){this._append`C${+e},${+n},${+r},${+a},${this._x1=+i},${this._y1=+s}`}arcTo(e,n,r,a,i){if(e=+e,n=+n,r=+r,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let s=this._x1,o=this._y1,l=r-e,c=a-n,f=s-e,h=o-n,p=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(p>iu)if(!(Math.abs(h*l-c*f)>iu)||!i)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-s,v=a-o,x=l*l+c*c,b=g*g+v*v,w=Math.sqrt(x),S=Math.sqrt(p),k=i*Math.tan((rk-Math.acos((x+p-b)/(2*w*S)))/2),N=k/S,I=k/w;Math.abs(N-1)>iu&&this._append`L${e+N*f},${n+N*h}`,this._append`A${i},${i},0,0,${+(h*g>f*v)},${this._x1=e+I*l},${this._y1=n+I*c}`}}arc(e,n,r,a,i,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(a),l=r*Math.sin(a),c=e+o,f=n+l,h=1^s,p=s?a-i:i-a;this._x1===null?this._append`M${c},${f}`:(Math.abs(this._x1-c)>iu||Math.abs(this._y1-f)>iu)&&this._append`L${c},${f}`,r&&(p<0&&(p=p%ak+ak),p>LJ?this._append`A${r},${r},0,1,${h},${e-o},${n-l}A${r},${r},0,1,${h},${this._x1=c},${this._y1=f}`:p>iu&&this._append`A${r},${r},0,${+(p>=rk)},${h},${this._x1=e+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(e,n,r,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function YE(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new FJ(e)}function ZE(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function sj(t){this._context=t}sj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function ex(t){return new sj(t)}function oj(t){return t[0]}function lj(t){return t[1]}function uj(t,e){var n=Kt(!0),r=null,a=ex,i=null,s=YE(o);t=typeof t=="function"?t:t===void 0?oj:Kt(t),e=typeof e=="function"?e:e===void 0?lj:Kt(e);function o(l){var c,f=(l=ZE(l)).length,h,p=!1,g;for(r==null&&(i=a(g=s())),c=0;c<=f;++c)!(c<f&&n(h=l[c],c,l))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+t(h,c,l),+e(h,c,l));if(g)return i=null,g+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:Kt(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:Kt(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Kt(!!l),o):n},o.curve=function(l){return arguments.length?(a=l,r!=null&&(i=a(r)),o):a},o.context=function(l){return arguments.length?(l==null?r=i=null:i=a(r=l),o):r},o}function Tv(t,e,n){var r=null,a=Kt(!0),i=null,s=ex,o=null,l=YE(c);t=typeof t=="function"?t:t===void 0?oj:Kt(+t),e=typeof e=="function"?e:Kt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?lj:Kt(+n);function c(h){var p,g,v,x=(h=ZE(h)).length,b,w=!1,S,k=new Array(x),N=new Array(x);for(i==null&&(o=s(S=l())),p=0;p<=x;++p){if(!(p<x&&a(b=h[p],p,h))===w)if(w=!w)g=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),v=p-1;v>=g;--v)o.point(k[v],N[v]);o.lineEnd(),o.areaEnd()}w&&(k[p]=+t(b,p,h),N[p]=+e(b,p,h),o.point(r?+r(b,p,h):k[p],n?+n(b,p,h):N[p]))}if(S)return o=null,S+""||null}function f(){return uj().defined(a).curve(s).context(i)}return c.x=function(h){return arguments.length?(t=typeof h=="function"?h:Kt(+h),r=null,c):t},c.x0=function(h){return arguments.length?(t=typeof h=="function"?h:Kt(+h),c):t},c.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Kt(+h),c):r},c.y=function(h){return arguments.length?(e=typeof h=="function"?h:Kt(+h),n=null,c):e},c.y0=function(h){return arguments.length?(e=typeof h=="function"?h:Kt(+h),c):e},c.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Kt(+h),c):n},c.lineX0=c.lineY0=function(){return f().x(t).y(e)},c.lineY1=function(){return f().x(t).y(n)},c.lineX1=function(){return f().x(r).y(e)},c.defined=function(h){return arguments.length?(a=typeof h=="function"?h:Kt(!!h),c):a},c.curve=function(h){return arguments.length?(s=h,i!=null&&(o=s(i)),c):s},c.context=function(h){return arguments.length?(h==null?i=o=null:o=s(i=h),c):i},c}class cj{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function jJ(t){return new cj(t,!0)}function BJ(t){return new cj(t,!1)}const QE={draw(t,e){const n=Vi(e/N0);t.moveTo(n,0),t.arc(0,0,n,0,Jy)}},UJ={draw(t,e){const n=Vi(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},dj=Vi(1/3),VJ=dj*2,WJ={draw(t,e){const n=Vi(e/VJ),r=n*dj;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},GJ={draw(t,e){const n=Vi(e),r=-n/2;t.rect(r,r,n,n)}},HJ=.8908130915292852,fj=E0(N0/10)/E0(7*N0/10),qJ=E0(Jy/10)*fj,KJ=-aj(Jy/10)*fj,XJ={draw(t,e){const n=Vi(e*HJ),r=qJ*n,a=KJ*n;t.moveTo(0,-n),t.lineTo(r,a);for(let i=1;i<5;++i){const s=Jy*i/5,o=aj(s),l=E0(s);t.lineTo(l*n,-o*n),t.lineTo(o*r-l*a,l*r+o*a)}t.closePath()}},YS=Vi(3),YJ={draw(t,e){const n=-Vi(e/(YS*3));t.moveTo(0,n*2),t.lineTo(-YS*n,-n),t.lineTo(YS*n,-n),t.closePath()}},Qa=-.5,Ja=Vi(3)/2,ik=1/Vi(12),ZJ=(ik/2+1)*3,QJ={draw(t,e){const n=Vi(e/ZJ),r=n/2,a=n*ik,i=r,s=n*ik+n,o=-i,l=s;t.moveTo(r,a),t.lineTo(i,s),t.lineTo(o,l),t.lineTo(Qa*r-Ja*a,Ja*r+Qa*a),t.lineTo(Qa*i-Ja*s,Ja*i+Qa*s),t.lineTo(Qa*o-Ja*l,Ja*o+Qa*l),t.lineTo(Qa*r+Ja*a,Qa*a-Ja*r),t.lineTo(Qa*i+Ja*s,Qa*s-Ja*i),t.lineTo(Qa*o+Ja*l,Qa*l-Ja*o),t.closePath()}};function JJ(t,e){let n=null,r=YE(a);t=typeof t=="function"?t:Kt(t||QE),e=typeof e=="function"?e:Kt(e===void 0?64:+e);function a(){let i;if(n||(n=i=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return a.type=function(i){return arguments.length?(t=typeof i=="function"?i:Kt(i),a):t},a.size=function(i){return arguments.length?(e=typeof i=="function"?i:Kt(+i),a):e},a.context=function(i){return arguments.length?(n=i??null,a):n},a}function I0(){}function A0(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function hj(t){this._context=t}hj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:A0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:A0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function eee(t){return new hj(t)}function pj(t){this._context=t}pj.prototype={areaStart:I0,areaEnd:I0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:A0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function tee(t){return new pj(t)}function mj(t){this._context=t}mj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:A0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function nee(t){return new mj(t)}function gj(t){this._context=t}gj.prototype={areaStart:I0,areaEnd:I0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function ree(t){return new gj(t)}function T_(t){return t<0?-1:1}function $_(t,e,n){var r=t._x1-t._x0,a=e-t._x1,i=(t._y1-t._y0)/(r||a<0&&-0),s=(n-t._y1)/(a||r<0&&-0),o=(i*a+s*r)/(r+a);return(T_(i)+T_(s))*Math.min(Math.abs(i),Math.abs(s),.5*Math.abs(o))||0}function O_(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function ZS(t,e,n){var r=t._x0,a=t._y0,i=t._x1,s=t._y1,o=(i-r)/3;t._context.bezierCurveTo(r+o,a+o*e,i-o,s-o*n,i,s)}function T0(t){this._context=t}T0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ZS(this,this._t0,O_(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,ZS(this,O_(this,n=$_(this,t,e)),n);break;default:ZS(this,this._t0,n=$_(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function vj(t){this._context=new yj(t)}(vj.prototype=Object.create(T0.prototype)).point=function(t,e){T0.prototype.point.call(this,e,t)};function yj(t){this._context=t}yj.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,a,i){this._context.bezierCurveTo(e,t,r,n,i,a)}};function aee(t){return new T0(t)}function iee(t){return new vj(t)}function xj(t){this._context=t}xj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=D_(t),a=D_(e),i=0,s=1;s<n;++i,++s)this._context.bezierCurveTo(r[0][i],a[0][i],r[1][i],a[1][i],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function D_(t){var e,n=t.length-1,r,a=new Array(n),i=new Array(n),s=new Array(n);for(a[0]=0,i[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)a[e]=1,i[e]=4,s[e]=4*t[e]+2*t[e+1];for(a[n-1]=2,i[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=a[e]/i[e-1],i[e]-=r,s[e]-=r*s[e-1];for(a[n-1]=s[n-1]/i[n-1],e=n-2;e>=0;--e)a[e]=(s[e]-a[e+1])/i[e];for(i[n-1]=(t[n]+a[n-1])/2,e=0;e<n-1;++e)i[e]=2*t[e+1]-a[e+1];return[a,i]}function see(t){return new xj(t)}function tx(t,e){this._context=t,this._t=e}tx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function oee(t){return new tx(t,.5)}function lee(t){return new tx(t,0)}function uee(t){return new tx(t,1)}function Nu(t,e){if((s=t.length)>1)for(var n=1,r,a,i=t[e[0]],s,o=i.length;n<s;++n)for(a=i,i=t[e[n]],r=0;r<o;++r)i[r][1]+=i[r][0]=isNaN(a[r][1])?a[r][0]:a[r][1]}function sk(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function cee(t,e){return t[e]}function dee(t){const e=[];return e.key=t,e}function fee(){var t=Kt([]),e=sk,n=Nu,r=cee;function a(i){var s=Array.from(t.apply(this,arguments),dee),o,l=s.length,c=-1,f;for(const h of i)for(o=0,++c;o<l;++o)(s[o][c]=[0,+r(h,s[o].key,c,i)]).data=h;for(o=0,f=ZE(e(s));o<l;++o)s[f[o]].index=o;return n(s,f),s}return a.keys=function(i){return arguments.length?(t=typeof i=="function"?i:Kt(Array.from(i)),a):t},a.value=function(i){return arguments.length?(r=typeof i=="function"?i:Kt(+i),a):r},a.order=function(i){return arguments.length?(e=i==null?sk:typeof i=="function"?i:Kt(Array.from(i)),a):e},a.offset=function(i){return arguments.length?(n=i??Nu,a):n},a}function hee(t,e){if((r=t.length)>0){for(var n,r,a=0,i=t[0].length,s;a<i;++a){for(s=n=0;n<r;++n)s+=t[n][a][1]||0;if(s)for(n=0;n<r;++n)t[n][a][1]/=s}Nu(t,e)}}function pee(t,e){if((a=t.length)>0){for(var n=0,r=t[e[0]],a,i=r.length;n<i;++n){for(var s=0,o=0;s<a;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}Nu(t,e)}}function mee(t,e){if(!(!((s=t.length)>0)||!((i=(a=t[e[0]]).length)>0))){for(var n=0,r=1,a,i,s;r<i;++r){for(var o=0,l=0,c=0;o<s;++o){for(var f=t[e[o]],h=f[r][1]||0,p=f[r-1][1]||0,g=(h-p)/2,v=0;v<o;++v){var x=t[e[v]],b=x[r][1]||0,w=x[r-1][1]||0;g+=b-w}l+=h,c+=g*h}a[r-1][1]+=a[r-1][0]=n,l&&(n-=c/l)}a[r-1][1]+=a[r-1][0]=n,Nu(t,e)}}var QS={},JS={},R_;function gee(){return R_||(R_=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(JS)),JS}var eC={},__;function bj(){return __||(__=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(eC)),eC}var tC={},M_;function JE(){return M_||(M_=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(tC)),tC}var nC={},rC={},P_;function vee(){return P_||(P_=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(rC)),rC}var L_;function eN(){return L_||(L_=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=vee(),n=JE();function r(a){if(Array.isArray(a))return a.map(n.toKey);if(typeof a=="symbol")return[a];a=e.toString(a);const i=[],s=a.length;if(s===0)return i;let o=0,l="",c="",f=!1;for(a.charCodeAt(0)===46&&(i.push(""),o++);o<s;){const h=a[o];c?h==="\\"&&o+1<s?(o++,l+=a[o]):h===c?c="":l+=h:f?h==='"'||h==="'"?c=h:h==="]"?(f=!1,i.push(l),l=""):l+=h:h==="["?(f=!0,l&&(i.push(l),l="")):h==="."?l&&(i.push(l),l=""):l+=h,o++}return l&&i.push(l),i}t.toPath=r})(nC)),nC}var z_;function tN(){return z_||(z_=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gee(),n=bj(),r=JE(),a=eN();function i(o,l,c){if(o==null)return c;switch(typeof l){case"string":{if(e.isUnsafeProperty(l))return c;const f=o[l];return f===void 0?n.isDeepKey(l)?i(o,a.toPath(l),c):c:f}case"number":case"symbol":{typeof l=="number"&&(l=r.toKey(l));const f=o[l];return f===void 0?c:f}default:{if(Array.isArray(l))return s(o,l,c);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),e.isUnsafeProperty(l))return c;const f=o[l];return f===void 0?c:f}}}function s(o,l,c){if(l.length===0)return c;let f=o;for(let h=0;h<l.length;h++){if(f==null||e.isUnsafeProperty(l[h]))return c;f=f[l[h]]}return f===void 0?c:f}t.get=i})(QS)),QS}var aC,F_;function yee(){return F_||(F_=1,aC=tN().get),aC}var xee=yee();const vd=Ui(xee);var bee=4;function al(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bee,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function pn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((a,i,s)=>{var o=n[s-1];return typeof o=="string"?a+o+i:o!==void 0?a+al(o)+i:a+i},"")}var ua=t=>t===0?0:t>0?1:-1,ha=t=>typeof t=="number"&&t!=+t,oo=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,De=t=>(typeof t=="number"||t instanceof Number)&&!ha(t),li=t=>De(t)||typeof t=="string",wee=0,Wh=t=>{var e=++wee;return"".concat(t||"").concat(e)},Li=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!De(e)&&typeof e!="string")return r;var i;if(oo(e)){if(n==null)return r;var s=e.indexOf("%");i=n*parseFloat(e.slice(0,s))/100}else i=+e;return ha(i)&&(i=r),a&&n!=null&&i>n&&(i=n),i},wj=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function Ct(t,e,n){return De(t)&&De(e)?al(t+n*(e-t)):e}function Sj(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):vd(r,e))===n)}var See=t=>{for(var e=t.length,n=0,r=0,a=0,i=0,s=1/0,o=-1/0,l=0,c=0,f=0;f<e;f++){var h,p;l=((h=t[f])===null||h===void 0?void 0:h.cx)||0,c=((p=t[f])===null||p===void 0?void 0:p.cy)||0,n+=l,r+=c,a+=l*c,i+=l*l,s=Math.min(s,l),o=Math.max(o,l)}var g=e*i!==n*n?(e*a-n*r)/(e*i-n*n):0;return{xmin:s,xmax:o,a:g,b:(r-g*n)/e}},Dt=t=>t===null||typeof t>"u",Sp=t=>Dt(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function Cee(t){return t!=null}function Cp(){}var kee=["type","size","sizeType"];function ok(){return ok=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ok.apply(null,arguments)}function j_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function B_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j_(Object(n),!0).forEach(function(r){Eee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Eee(t,e,n){return(e=Nee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nee(t){var e=Iee(t,"string");return typeof e=="symbol"?e:e+""}function Iee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Aee(t,e){if(t==null)return{};var n,r,a=Tee(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Tee(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Cj={symbolCircle:QE,symbolCross:UJ,symbolDiamond:WJ,symbolSquare:GJ,symbolStar:XJ,symbolTriangle:YJ,symbolWye:QJ},$ee=Math.PI/180,Oee=t=>{var e="symbol".concat(Sp(t));return Cj[e]||QE},Dee=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*$ee;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Ree=(t,e)=>{Cj["symbol".concat(Sp(t))]=e},nN=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,a=Aee(t,kee),i=B_(B_({},a),{},{type:e,size:n,sizeType:r}),s="circle";typeof e=="string"&&(s=e);var o=()=>{var p=Oee(s),g=JJ().type(p).size(Dee(n,r,s)),v=g();if(v!==null)return v},{className:l,cx:c,cy:f}=i,h=wr(i);return De(c)&&De(f)&&De(n)?A.createElement("path",ok({},h,{className:Et("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(f,")"),d:o()})):null};nN.registerSymbol=Ree;var kj=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,rN=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(A.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(a=>{XE(a)&&(r[a]=(i=>n[a](n,i)))}),r},_ee=(t,e,n)=>r=>(t(e,n,r),null),nx=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(a=>{var i=t[a];XE(a)&&typeof i=="function"&&(r||(r={}),r[a]=_ee(i,e,n))}),r},Mee=t=>Array.isArray(t)&&t.length>0;function U_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Pee(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U_(Object(n),!0).forEach(function(r){Lee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lee(t,e,n){return(e=zee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zee(t){var e=Fee(t,"string");return typeof e=="symbol"?e:e+""}function Fee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Un(t,e){var n=Pee({},t),r=e,a=Object.keys(e),i=a.reduce((s,o)=>(s[o]===void 0&&r[o]!==void 0&&(s[o]=r[o]),s),n);return i}var iC={},sC={},V_;function jee(){return V_||(V_=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const a=new Map;for(let i=0;i<n.length;i++){const s=n[i],o=r(s);a.has(o)||a.set(o,s)}return Array.from(a.values())}t.uniqBy=e})(sC)),sC}var oC={},W_;function Ej(){return W_||(W_=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(oC)),oC}var lC={},uC={},cC={},G_;function Bee(){return G_||(G_=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(cC)),cC}var H_;function aN(){return H_||(H_=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Bee();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(uC)),uC}var dC={},q_;function Uee(){return q_||(q_=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(dC)),dC}var K_;function Vee(){return K_||(K_=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=aN(),n=Uee();function r(a){return n.isObjectLike(a)&&e.isArrayLike(a)}t.isArrayLikeObject=r})(lC)),lC}var fC={},hC={},X_;function Wee(){return X_||(X_=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=tN();function n(r){return function(a){return e.get(a,r)}}t.property=n})(hC)),hC}var pC={},mC={},gC={},vC={},Y_;function Nj(){return Y_||(Y_=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(vC)),vC}var yC={},Z_;function Ij(){return Z_||(Z_=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(yC)),yC}var xC={},Q_;function Aj(){return Q_||(Q_=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(xC)),xC}var J_;function Gee(){return J_||(J_=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Nj(),n=Ij(),r=Aj();function a(f,h,p){return typeof p!="function"?a(f,h,()=>{}):i(f,h,function g(v,x,b,w,S,k){const N=p(v,x,b,w,S,k);return N!==void 0?!!N:i(v,x,g,k)},new Map)}function i(f,h,p,g){if(h===f)return!0;switch(typeof h){case"object":return s(f,h,p,g);case"function":return Object.keys(h).length>0?i(f,{...h},p,g):r.eq(f,h);default:return e.isObject(f)?typeof h=="string"?h==="":!0:r.eq(f,h)}}function s(f,h,p,g){if(h==null)return!0;if(Array.isArray(h))return l(f,h,p,g);if(h instanceof Map)return o(f,h,p,g);if(h instanceof Set)return c(f,h,p,g);const v=Object.keys(h);if(f==null||n.isPrimitive(f))return v.length===0;if(v.length===0)return!0;if(g!=null&&g.has(h))return g.get(h)===f;g==null||g.set(h,f);try{for(let x=0;x<v.length;x++){const b=v[x];if(!n.isPrimitive(f)&&!(b in f)||h[b]===void 0&&f[b]!==void 0||h[b]===null&&f[b]!==null||!p(f[b],h[b],b,f,h,g))return!1}return!0}finally{g==null||g.delete(h)}}function o(f,h,p,g){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[v,x]of h.entries()){const b=f.get(v);if(p(b,x,v,f,h,g)===!1)return!1}return!0}function l(f,h,p,g){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const v=new Set;for(let x=0;x<h.length;x++){const b=h[x];let w=!1;for(let S=0;S<f.length;S++){if(v.has(S))continue;const k=f[S];let N=!1;if(p(k,b,x,f,h,g)&&(N=!0),N){v.add(S),w=!0;break}}if(!w)return!1}return!0}function c(f,h,p,g){return h.size===0?!0:f instanceof Set?l([...f],[...h],p,g):!1}t.isMatchWith=a,t.isSetMatch=c})(gC)),gC}var eM;function Tj(){return eM||(eM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Gee();function n(r,a){return e.isMatchWith(r,a,()=>{})}t.isMatch=n})(mC)),mC}var bC={},wC={},SC={},tM;function Hee(){return tM||(tM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(SC)),SC}var CC={},nM;function $j(){return nM||(nM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(CC)),CC}var kC={},rM;function Oj(){return rM||(rM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",a="[object Boolean]",i="[object Arguments]",s="[object Symbol]",o="[object Date]",l="[object Map]",c="[object Set]",f="[object Array]",h="[object Function]",p="[object ArrayBuffer]",g="[object Object]",v="[object Error]",x="[object DataView]",b="[object Uint8Array]",w="[object Uint8ClampedArray]",S="[object Uint16Array]",k="[object Uint32Array]",N="[object BigUint64Array]",I="[object Int8Array]",T="[object Int16Array]",R="[object Int32Array]",_="[object BigInt64Array]",M="[object Float32Array]",P="[object Float64Array]";t.argumentsTag=i,t.arrayBufferTag=p,t.arrayTag=f,t.bigInt64ArrayTag=_,t.bigUint64ArrayTag=N,t.booleanTag=a,t.dataViewTag=x,t.dateTag=o,t.errorTag=v,t.float32ArrayTag=M,t.float64ArrayTag=P,t.functionTag=h,t.int16ArrayTag=T,t.int32ArrayTag=R,t.int8ArrayTag=I,t.mapTag=l,t.numberTag=r,t.objectTag=g,t.regexpTag=e,t.setTag=c,t.stringTag=n,t.symbolTag=s,t.uint16ArrayTag=S,t.uint32ArrayTag=k,t.uint8ArrayTag=b,t.uint8ClampedArrayTag=w})(kC)),kC}var EC={},aM;function qee(){return aM||(aM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(EC)),EC}var iM;function Dj(){return iM||(iM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Hee(),n=$j(),r=Oj(),a=Ij(),i=qee();function s(f,h){return o(f,void 0,f,new Map,h)}function o(f,h,p,g=new Map,v=void 0){const x=v==null?void 0:v(f,h,p,g);if(x!==void 0)return x;if(a.isPrimitive(f))return f;if(g.has(f))return g.get(f);if(Array.isArray(f)){const b=new Array(f.length);g.set(f,b);for(let w=0;w<f.length;w++)b[w]=o(f[w],w,p,g,v);return Object.hasOwn(f,"index")&&(b.index=f.index),Object.hasOwn(f,"input")&&(b.input=f.input),b}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const b=new RegExp(f.source,f.flags);return b.lastIndex=f.lastIndex,b}if(f instanceof Map){const b=new Map;g.set(f,b);for(const[w,S]of f)b.set(w,o(S,w,p,g,v));return b}if(f instanceof Set){const b=new Set;g.set(f,b);for(const w of f)b.add(o(w,void 0,p,g,v));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(i.isTypedArray(f)){const b=new(Object.getPrototypeOf(f)).constructor(f.length);g.set(f,b);for(let w=0;w<f.length;w++)b[w]=o(f[w],w,p,g,v);return b}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const b=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return g.set(f,b),l(b,f,p,g,v),b}if(typeof File<"u"&&f instanceof File){const b=new File([f],f.name,{type:f.type});return g.set(f,b),l(b,f,p,g,v),b}if(typeof Blob<"u"&&f instanceof Blob){const b=new Blob([f],{type:f.type});return g.set(f,b),l(b,f,p,g,v),b}if(f instanceof Error){const b=new f.constructor;return g.set(f,b),b.message=f.message,b.name=f.name,b.stack=f.stack,b.cause=f.cause,l(b,f,p,g,v),b}if(f instanceof Boolean){const b=new Boolean(f.valueOf());return g.set(f,b),l(b,f,p,g,v),b}if(f instanceof Number){const b=new Number(f.valueOf());return g.set(f,b),l(b,f,p,g,v),b}if(f instanceof String){const b=new String(f.valueOf());return g.set(f,b),l(b,f,p,g,v),b}if(typeof f=="object"&&c(f)){const b=Object.create(Object.getPrototypeOf(f));return g.set(f,b),l(b,f,p,g,v),b}return f}function l(f,h,p=f,g,v){const x=[...Object.keys(h),...e.getSymbols(h)];for(let b=0;b<x.length;b++){const w=x[b],S=Object.getOwnPropertyDescriptor(f,w);(S==null||S.writable)&&(f[w]=o(h[w],w,p,g,v))}}function c(f){switch(n.getTag(f)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=s,t.cloneDeepWithImpl=o,t.copyProperties=l})(wC)),wC}var sM;function Kee(){return sM||(sM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Dj();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(bC)),bC}var oM;function Xee(){return oM||(oM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Tj(),n=Kee();function r(a){return a=n.cloneDeep(a),i=>e.isMatch(i,a)}t.matches=r})(pC)),pC}var NC={},IC={},AC={},lM;function Yee(){return lM||(lM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Dj(),n=Oj();function r(a,i){return e.cloneDeepWith(a,(s,o,l,c)=>{const f=i==null?void 0:i(s,o,l,c);if(f!==void 0)return f;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case n.numberTag:case n.stringTag:case n.booleanTag:{const h=new a.constructor(a==null?void 0:a.valueOf());return e.copyProperties(h,a),h}case n.argumentsTag:{const h={};return e.copyProperties(h,a),h.length=a.length,h[Symbol.iterator]=a[Symbol.iterator],h}default:return}})}t.cloneDeepWith=r})(AC)),AC}var uM;function Zee(){return uM||(uM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Yee();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(IC)),IC}var TC={},$C={},cM;function Rj(){return cM||(cM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,a=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<a;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})($C)),$C}var OC={},dM;function Qee(){return dM||(dM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$j();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(OC)),OC}var fM;function Jee(){return fM||(fM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bj(),n=Rj(),r=Qee(),a=eN();function i(s,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&e.isDeepKey(o)&&(s==null?void 0:s[o])==null?l=a.toPath(o):l=[o],l.length===0)return!1;let c=s;for(let f=0;f<l.length;f++){const h=l[f];if((c==null||!Object.hasOwn(c,h))&&!((Array.isArray(c)||r.isArguments(c))&&n.isIndex(h)&&h<c.length))return!1;c=c[h]}return!0}t.has=i})(TC)),TC}var hM;function ete(){return hM||(hM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Tj(),n=JE(),r=Zee(),a=tN(),i=Jee();function s(o,l){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=n.toKey(o);break}}return l=r.cloneDeep(l),function(c){const f=a.get(c,o);return f===void 0?i.has(c,o):l===void 0?f===void 0:e.isMatch(f,l)}}t.matchesProperty=s})(NC)),NC}var pM;function tte(){return pM||(pM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ej(),n=Wee(),r=Xee(),a=ete();function i(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?a.matchesProperty(s[0],s[1]):r.matches(s);case"string":case"symbol":case"number":return n.property(s)}}t.iteratee=i})(fC)),fC}var mM;function nte(){return mM||(mM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jee(),n=Ej(),r=Vee(),a=tte();function i(s,o=n.identity){return r.isArrayLikeObject(s)?e.uniqBy(Array.from(s),a.iteratee(o)):[]}t.uniqBy=i})(iC)),iC}var DC,gM;function rte(){return gM||(gM=1,DC=nte().uniqBy),DC}var ate=rte();const vM=Ui(ate);function ite(t,e,n){return e===!0?vM(t,n):typeof e=="function"?vM(t,e):t}var RC={exports:{}},_C={},MC={exports:{}},PC={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yM;function ste(){if(yM)return PC;yM=1;var t=Ld();function e(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,a=t.useEffect,i=t.useLayoutEffect,s=t.useDebugValue;function o(h,p){var g=p(),v=r({inst:{value:g,getSnapshot:p}}),x=v[0].inst,b=v[1];return i(function(){x.value=g,x.getSnapshot=p,l(x)&&b({inst:x})},[h,g,p]),a(function(){return l(x)&&b({inst:x}),h(function(){l(x)&&b({inst:x})})},[h]),s(g),g}function l(h){var p=h.getSnapshot;h=h.value;try{var g=p();return!n(h,g)}catch{return!0}}function c(h,p){return p()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:o;return PC.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,PC}var xM;function ote(){return xM||(xM=1,MC.exports=ste()),MC.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bM;function lte(){if(bM)return _C;bM=1;var t=Ld(),e=ote();function n(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var r=typeof Object.is=="function"?Object.is:n,a=e.useSyncExternalStore,i=t.useRef,s=t.useEffect,o=t.useMemo,l=t.useDebugValue;return _C.useSyncExternalStoreWithSelector=function(c,f,h,p,g){var v=i(null);if(v.current===null){var x={hasValue:!1,value:null};v.current=x}else x=v.current;v=o(function(){function w(T){if(!S){if(S=!0,k=T,T=p(T),g!==void 0&&x.hasValue){var R=x.value;if(g(R,T))return N=R}return N=T}if(R=N,r(k,T))return R;var _=p(T);return g!==void 0&&g(R,_)?(k=T,R):(k=T,N=_)}var S=!1,k,N,I=h===void 0?null:h;return[function(){return w(f())},I===null?void 0:function(){return w(I())}]},[f,h,p,g]);var b=a(c,v[0],v[1]);return s(function(){x.hasValue=!0,x.value=b},[b]),l(b),b},_C}var wM;function ute(){return wM||(wM=1,RC.exports=lte()),RC.exports}var cte=ute(),iN=A.createContext(null),dte=t=>t,bn=()=>{var t=A.useContext(iN);return t?t.store.dispatch:dte},u0=()=>{},fte=()=>u0,hte=(t,e)=>t===e;function Fe(t){var e=A.useContext(iN);return cte.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:fte,e?e.store.getState:u0,e?e.store.getState:u0,e?t:u0,hte)}function pte(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function mte(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function gte(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var SM=t=>Array.isArray(t)?t:[t];function vte(t){const e=Array.isArray(t[0])?t[0]:t;return gte(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function yte(t,e){const n=[],{length:r}=t;for(let a=0;a<r;a++)n.push(t[a].apply(null,e));return n}var xte=class{constructor(t){this.value=t}deref(){return this.value}},bte=typeof WeakRef<"u"?WeakRef:xte,wte=0,CM=1;function $v(){return{s:wte,v:void 0,o:null,p:null}}function _j(t,e={}){let n=$v();const{resultEqualityCheck:r}=e;let a,i=0;function s(){var h;let o=n;const{length:l}=arguments;for(let p=0,g=l;p<g;p++){const v=arguments[p];if(typeof v=="function"||typeof v=="object"&&v!==null){let x=o.o;x===null&&(o.o=x=new WeakMap);const b=x.get(v);b===void 0?(o=$v(),x.set(v,o)):o=b}else{let x=o.p;x===null&&(o.p=x=new Map);const b=x.get(v);b===void 0?(o=$v(),x.set(v,o)):o=b}}const c=o;let f;if(o.s===CM)f=o.v;else if(f=t.apply(null,arguments),i++,r){const p=((h=a==null?void 0:a.deref)==null?void 0:h.call(a))??a;p!=null&&r(p,f)&&(f=p,i!==0&&i--),a=typeof f=="object"&&f!==null||typeof f=="function"?new bte(f):f}return c.s=CM,c.v=f,f}return s.clearCache=()=>{n=$v(),s.resetResultsCount()},s.resultsCount=()=>i,s.resetResultsCount=()=>{i=0},s}function Ste(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...a)=>{let i=0,s=0,o,l={},c=a.pop();typeof c=="object"&&(l=c,c=a.pop()),pte(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const f={...n,...l},{memoize:h,memoizeOptions:p=[],argsMemoize:g=_j,argsMemoizeOptions:v=[]}=f,x=SM(p),b=SM(v),w=vte(a),S=h(function(){return i++,c.apply(null,arguments)},...x),k=g(function(){s++;const I=yte(w,arguments);return o=S.apply(null,I),o},...b);return Object.assign(k,{resultFunc:c,memoizedResultFunc:S,dependencies:w,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:h,argsMemoize:g})};return Object.assign(r,{withTypes:()=>r}),r}var he=Ste(_j),Cte=Object.assign((t,e=he)=>{mte(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(i=>t[i]);return e(r,(...i)=>i.reduce((s,o,l)=>(s[n[l]]=o,s),{}))},{withTypes:()=>Cte}),LC={},zC={},FC={},kM;function kte(){return kM||(kM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,a,i)=>{if(r!==a){const s=e(r),o=e(a);if(s===o&&s===0){if(r<a)return i==="desc"?1:-1;if(r>a)return i==="desc"?-1:1}return i==="desc"?o-s:s-o}return 0};t.compareValues=n})(FC)),FC}var jC={},BC={},EM;function Mj(){return EM||(EM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(BC)),BC}var NM;function Ete(){return NM||(NM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Mj(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function a(i,s){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||e.isSymbol(i)?!0:typeof i=="string"&&(r.test(i)||!n.test(i))||s!=null&&Object.hasOwn(s,i)}t.isKey=a})(jC)),jC}var IM;function Nte(){return IM||(IM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kte(),n=Ete(),r=eN();function a(i,s,o,l){if(i==null)return[];o=l?void 0:o,Array.isArray(i)||(i=Object.values(i)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(g=>String(g));const c=(g,v)=>{let x=g;for(let b=0;b<v.length&&x!=null;++b)x=x[v[b]];return x},f=(g,v)=>v==null||g==null?v:typeof g=="object"&&"key"in g?Object.hasOwn(v,g.key)?v[g.key]:c(v,g.path):typeof g=="function"?g(v):Array.isArray(g)?c(v,g):typeof v=="object"?v[g]:v,h=s.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||n.isKey(g)?g:{key:g,path:r.toPath(g)}));return i.map(g=>({original:g,criteria:h.map(v=>f(v,g))})).slice().sort((g,v)=>{for(let x=0;x<h.length;x++){const b=e.compareValues(g.criteria[x],v.criteria[x],o[x]);if(b!==0)return b}return 0}).map(g=>g.original)}t.orderBy=a})(zC)),zC}var UC={},AM;function Ite(){return AM||(AM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const a=[],i=Math.floor(r),s=(o,l)=>{for(let c=0;c<o.length;c++){const f=o[c];Array.isArray(f)&&l<i?s(f,l+1):a.push(f)}};return s(n,0),a}t.flatten=e})(UC)),UC}var VC={},TM;function Pj(){return TM||(TM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Rj(),n=aN(),r=Nj(),a=Aj();function i(s,o,l){return r.isObject(l)&&(typeof o=="number"&&n.isArrayLike(l)&&e.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?a.eq(l[o],s):!1}t.isIterateeCall=i})(VC)),VC}var $M;function Ate(){return $M||($M=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Nte(),n=Ite(),r=Pj();function a(i,...s){const o=s.length;return o>1&&r.isIterateeCall(i,s[0],s[1])?s=[]:o>2&&r.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(i,n.flatten(s),["asc"])}t.sortBy=a})(LC)),LC}var WC,OM;function Tte(){return OM||(OM=1,WC=Ate().sortBy),WC}var $te=Tte();const rx=Ui($te);var Lj=t=>t.legend.settings,Ote=t=>t.legend.size,Dte=t=>t.legend.payload;he([Dte,Lj],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?rx(r,n):r});var Ov=1;function Rte(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=A.useState({height:0,left:0,top:0,width:0}),r=A.useCallback(a=>{if(a!=null){var i=a.getBoundingClientRect(),s={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(s.height-e.height)>Ov||Math.abs(s.left-e.left)>Ov||Math.abs(s.top-e.top)>Ov||Math.abs(s.width-e.width)>Ov)&&n({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function yr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var _te=typeof Symbol=="function"&&Symbol.observable||"@@observable",DM=_te,GC=()=>Math.random().toString(36).substring(7).split("").join("."),Mte={INIT:`@@redux/INIT${GC()}`,REPLACE:`@@redux/REPLACE${GC()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${GC()}`},$0=Mte;function sN(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function zj(t,e,n){if(typeof t!="function")throw new Error(yr(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(yr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(yr(1));return n(zj)(t,e)}let r=t,a=e,i=new Map,s=i,o=0,l=!1;function c(){s===i&&(s=new Map,i.forEach((b,w)=>{s.set(w,b)}))}function f(){if(l)throw new Error(yr(3));return a}function h(b){if(typeof b!="function")throw new Error(yr(4));if(l)throw new Error(yr(5));let w=!0;c();const S=o++;return s.set(S,b),function(){if(w){if(l)throw new Error(yr(6));w=!1,c(),s.delete(S),i=null}}}function p(b){if(!sN(b))throw new Error(yr(7));if(typeof b.type>"u")throw new Error(yr(8));if(typeof b.type!="string")throw new Error(yr(17));if(l)throw new Error(yr(9));try{l=!0,a=r(a,b)}finally{l=!1}return(i=s).forEach(S=>{S()}),b}function g(b){if(typeof b!="function")throw new Error(yr(10));r=b,p({type:$0.REPLACE})}function v(){const b=h;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(yr(11));function S(){const N=w;N.next&&N.next(f())}return S(),{unsubscribe:b(S)}},[DM](){return this}}}return p({type:$0.INIT}),{dispatch:p,subscribe:h,getState:f,replaceReducer:g,[DM]:v}}function Pte(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:$0.INIT})>"u")throw new Error(yr(12));if(typeof n(void 0,{type:$0.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(yr(13))})}function Fj(t){const e=Object.keys(t),n={};for(let i=0;i<e.length;i++){const s=e[i];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let a;try{Pte(n)}catch(i){a=i}return function(s={},o){if(a)throw a;let l=!1;const c={};for(let f=0;f<r.length;f++){const h=r[f],p=n[h],g=s[h],v=p(g,o);if(typeof v>"u")throw o&&o.type,new Error(yr(14));c[h]=v,l=l||v!==g}return l=l||r.length!==Object.keys(s).length,l?c:s}}function O0(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function Lte(...t){return e=>(n,r)=>{const a=e(n,r);let i=()=>{throw new Error(yr(15))};const s={getState:a.getState,dispatch:(l,...c)=>i(l,...c)},o=t.map(l=>l(s));return i=O0(...o)(a.dispatch),{...a,dispatch:i}}}function jj(t){return sN(t)&&"type"in t&&typeof t.type=="string"}var Bj=Symbol.for("immer-nothing"),RM=Symbol.for("immer-draftable"),Xr=Symbol.for("immer-state");function Ti(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Oa=Object,yd=Oa.getPrototypeOf,D0="constructor",ax="prototype",lk="configurable",R0="enumerable",c0="writable",Gh="value",lo=t=>!!t&&!!t[Xr];function zi(t){var e;return t?Uj(t)||sx(t)||!!t[RM]||!!((e=t[D0])!=null&&e[RM])||ox(t)||lx(t):!1}var zte=Oa[ax][D0].toString(),_M=new WeakMap;function Uj(t){if(!t||!oN(t))return!1;const e=yd(t);if(e===null||e===Oa[ax])return!0;const n=Oa.hasOwnProperty.call(e,D0)&&e[D0];if(n===Object)return!0;if(!td(n))return!1;let r=_M.get(n);return r===void 0&&(r=Function.toString.call(n),_M.set(n,r)),r===zte}function ix(t,e,n=!0){kp(t)===0?(n?Reflect.ownKeys(t):Oa.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((r,a)=>e(a,r,t))}function kp(t){const e=t[Xr];return e?e.type_:sx(t)?1:ox(t)?2:lx(t)?3:0}var MM=(t,e,n=kp(t))=>n===2?t.has(e):Oa[ax].hasOwnProperty.call(t,e),uk=(t,e,n=kp(t))=>n===2?t.get(e):t[e],_0=(t,e,n,r=kp(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function Fte(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var sx=Array.isArray,ox=t=>t instanceof Map,lx=t=>t instanceof Set,oN=t=>typeof t=="object",td=t=>typeof t=="function",HC=t=>typeof t=="boolean";function jte(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var Ks=t=>t.copy_||t.base_,lN=t=>t.modified_?t.copy_:t.base_;function ck(t,e){if(ox(t))return new Map(t);if(lx(t))return new Set(t);if(sx(t))return Array[ax].slice.call(t);const n=Uj(t);if(e===!0||e==="class_only"&&!n){const r=Oa.getOwnPropertyDescriptors(t);delete r[Xr];let a=Reflect.ownKeys(r);for(let i=0;i<a.length;i++){const s=a[i],o=r[s];o[c0]===!1&&(o[c0]=!0,o[lk]=!0),(o.get||o.set)&&(r[s]={[lk]:!0,[c0]:!0,[R0]:o[R0],[Gh]:t[s]})}return Oa.create(yd(t),r)}else{const r=yd(t);if(r!==null&&n)return{...t};const a=Oa.create(r);return Oa.assign(a,t)}}function uN(t,e=!1){return ux(t)||lo(t)||!zi(t)||(kp(t)>1&&Oa.defineProperties(t,{set:Dv,add:Dv,clear:Dv,delete:Dv}),Oa.freeze(t),e&&ix(t,(n,r)=>{uN(r,!0)},!1)),t}function Bte(){Ti(2)}var Dv={[Gh]:Bte};function ux(t){return t===null||!oN(t)?!0:Oa.isFrozen(t)}var M0="MapSet",dk="Patches",PM="ArrayMethods",Vj={};function Iu(t){const e=Vj[t];return e||Ti(0,t),e}var LM=t=>!!Vj[t],Hh,Wj=()=>Hh,Ute=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:LM(M0)?Iu(M0):void 0,arrayMethodsPlugin_:LM(PM)?Iu(PM):void 0});function zM(t,e){e&&(t.patchPlugin_=Iu(dk),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function fk(t){hk(t),t.drafts_.forEach(Vte),t.drafts_=null}function hk(t){t===Hh&&(Hh=t.parent_)}var FM=t=>Hh=Ute(Hh,t);function Vte(t){const e=t[Xr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function jM(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[Xr].modified_&&(fk(e),Ti(4)),zi(t)&&(t=BM(e,t));const{patchPlugin_:a}=e;a&&a.generateReplacementPatches_(n[Xr].base_,t,e)}else t=BM(e,n);return Wte(e,t,!0),fk(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Bj?t:void 0}function BM(t,e){if(ux(e))return e;const n=e[Xr];if(!n)return P0(e,t.handledSet_,t);if(!cx(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);qj(n,t)}return n.copy_}function Wte(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&uN(e,n)}function Gj(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var cx=(t,e)=>t.scope_===e,Gte=[];function Hj(t,e,n,r){const a=Ks(t),i=t.type_;if(r!==void 0&&uk(a,r,i)===e){_0(a,r,n,i);return}if(!t.draftLocations_){const o=t.draftLocations_=new Map;ix(a,(l,c)=>{if(lo(c)){const f=o.get(c)||[];f.push(l),o.set(c,f)}})}const s=t.draftLocations_.get(e)??Gte;for(const o of s)_0(a,o,n,i)}function Hte(t,e,n){t.callbacks_.push(function(a){var o;const i=e;if(!i||!cx(i,a))return;(o=a.mapSetPlugin_)==null||o.fixSetContents(i);const s=lN(i);Hj(t,i.draft_??i,s,n),qj(i,a)})}function qj(t,e){var r;if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(((r=t.assigned_)==null?void 0:r.size)??0)>0)){const{patchPlugin_:a}=e;if(a){const i=a.getPath(t);i&&a.generatePatches_(t,i,e)}Gj(t)}}function qte(t,e,n){const{scope_:r}=t;if(lo(n)){const a=n[Xr];cx(a,r)&&a.callbacks_.push(function(){d0(t);const s=lN(a);Hj(t,n,s,e)})}else zi(n)&&t.callbacks_.push(function(){const i=Ks(t);t.type_===3?i.has(n)&&P0(n,r.handledSet_,r):uk(i,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&P0(uk(t.copy_,e,t.type_),r.handledSet_,r)})}function P0(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||lo(t)||e.has(t)||!zi(t)||ux(t)||(e.add(t),ix(t,(r,a)=>{if(lo(a)){const i=a[Xr];if(cx(i,n)){const s=lN(i);_0(t,r,s,t.type_),Gj(i)}}else zi(a)&&P0(a,e,n)})),t}function Kte(t,e){const n=sx(t),r={type_:n?1:0,scope_:e?e.scope_:Wj(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=r,i=L0;n&&(a=[r],i=qh);const{revoke:s,proxy:o}=Proxy.revocable(a,i);return r.draft_=o,r.revoke_=s,[o,r]}var L0={get(t,e){if(e===Xr)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n!=null&&n.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const a=Ks(t);if(!MM(a,e,t.type_))return Xte(t,a,e);const i=a[e];if(t.finalized_||!zi(i)||r&&t.operationMethod&&(n!=null&&n.isMutatingArrayMethod(t.operationMethod))&&jte(e))return i;if(i===qC(t.base_,e)){d0(t);const s=t.type_===1?+e:e,o=mk(t.scope_,i,t,s);return t.copy_[s]=o}return i},has(t,e){return e in Ks(t)},ownKeys(t){return Reflect.ownKeys(Ks(t))},set(t,e,n){const r=Kj(Ks(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const a=qC(Ks(t),e),i=a==null?void 0:a[Xr];if(i&&i.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(Fte(n,a)&&(n!==void 0||MM(t.base_,e,t.type_)))return!0;d0(t),pk(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),qte(t,e,n)),!0},deleteProperty(t,e){return d0(t),qC(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),pk(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Ks(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[c0]:!0,[lk]:t.type_!==1||e!=="length",[R0]:r[R0],[Gh]:n[e]}},defineProperty(){Ti(11)},getPrototypeOf(t){return yd(t.base_)},setPrototypeOf(){Ti(12)}},qh={};for(let t in L0){let e=L0[t];qh[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}qh.deleteProperty=function(t,e){return qh.set.call(this,t,e,void 0)};qh.set=function(t,e,n){return L0.set.call(this,t[0],e,n,t[0])};function qC(t,e){const n=t[Xr];return(n?Ks(n):t)[e]}function Xte(t,e,n){var a;const r=Kj(e,n);return r?Gh in r?r[Gh]:(a=r.get)==null?void 0:a.call(t.draft_):void 0}function Kj(t,e){if(!(e in t))return;let n=yd(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=yd(n)}}function pk(t){t.modified_||(t.modified_=!0,t.parent_&&pk(t.parent_))}function d0(t){t.copy_||(t.assigned_=new Map,t.copy_=ck(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Yte=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,a)=>{if(td(n)&&!td(r)){const s=r;r=n;const o=this;return function(c=s,...f){return o.produce(c,h=>r.call(this,h,...f))}}td(r)||Ti(6),a!==void 0&&!td(a)&&Ti(7);let i;if(zi(n)){const s=FM(this),o=mk(s,n,void 0);let l=!0;try{i=r(o),l=!1}finally{l?fk(s):hk(s)}return zM(s,a),jM(i,s)}else if(!n||!oN(n)){if(i=r(n),i===void 0&&(i=n),i===Bj&&(i=void 0),this.autoFreeze_&&uN(i,!0),a){const s=[],o=[];Iu(dk).generateReplacementPatches_(n,i,{patches_:s,inversePatches_:o}),a(s,o)}return i}else Ti(1,n)},this.produceWithPatches=(n,r)=>{if(td(n))return(o,...l)=>this.produceWithPatches(o,c=>n(c,...l));let a,i;return[this.produce(n,r,(o,l)=>{a=o,i=l}),a,i]},HC(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),HC(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),HC(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){zi(e)||Ti(8),lo(e)&&(e=Ri(e));const n=FM(this),r=mk(n,e,void 0);return r[Xr].isManual_=!0,hk(n),r}finishDraft(e,n){const r=e&&e[Xr];(!r||!r.isManual_)&&Ti(9);const{scope_:a}=r;return zM(a,n),jM(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const i=n[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(n=n.slice(r+1));const a=Iu(dk).applyPatches_;return lo(e)?a(e,n):this.produce(e,i=>a(i,n))}};function mk(t,e,n,r){const[a,i]=ox(e)?Iu(M0).proxyMap_(e,n):lx(e)?Iu(M0).proxySet_(e,n):Kte(e,n);return((n==null?void 0:n.scope_)??Wj()).drafts_.push(a),i.callbacks_=(n==null?void 0:n.callbacks_)??[],i.key_=r,n&&r!==void 0?Hte(n,i,r):i.callbacks_.push(function(l){var f;(f=l.mapSetPlugin_)==null||f.fixSetContents(i);const{patchPlugin_:c}=l;i.modified_&&c&&c.generatePatches_(i,[],l)}),a}function Ri(t){return lo(t)||Ti(10,t),Xj(t)}function Xj(t){if(!zi(t)||ux(t))return t;const e=t[Xr];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=ck(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=ck(t,!0);return ix(n,(a,i)=>{_0(n,a,Xj(i))},r),e&&(e.finalized_=!1),n}var Zte=new Yte,Yj=Zte.produce;function Zj(t){return({dispatch:n,getState:r})=>a=>i=>typeof i=="function"?i(n,r,t):a(i)}var Qte=Zj(),Jte=Zj,ene=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?O0:O0.apply(null,arguments)};function ui(t,e){function n(...r){if(e){let a=e(...r);if(!a)throw new Error(Ra(0));return{type:t,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>jj(r)&&r.type===t,n}var Qj=class Oh extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Oh.prototype)}static get[Symbol.species](){return Oh}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Oh(...e[0].concat(this)):new Oh(...e.concat(this))}};function UM(t){return zi(t)?Yj(t,()=>{}):t}function Rv(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function tne(t){return typeof t=="boolean"}var nne=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:a=!0,actionCreatorCheck:i=!0}=e??{};let s=new Qj;return n&&(tne(n)?s.push(Qte):s.push(Jte(n.extraArgument))),s},Jj="RTK_autoBatch",sn=()=>t=>({payload:t,meta:{[Jj]:!0}}),VM=t=>e=>{setTimeout(e,t)},eB=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let a=!0,i=!1,s=!1;const o=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:VM(10):t.type==="callback"?t.queueNotification:VM(t.timeout),c=()=>{s=!1,i&&(i=!1,o.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const h=()=>a&&f(),p=r.subscribe(h);return o.add(f),()=>{p(),o.delete(f)}},dispatch(f){var h;try{return a=!((h=f==null?void 0:f.meta)!=null&&h[Jj]),i=!a,i&&(s||(s=!0,l(c))),r.dispatch(f)}finally{a=!0}}})},rne=t=>function(n){const{autoBatch:r=!0}=n??{};let a=new Qj(t);return r&&a.push(eB(typeof r=="object"?r:void 0)),a};function ane(t){const e=nne(),{reducer:n=void 0,middleware:r,devTools:a=!0,preloadedState:i=void 0,enhancers:s=void 0}=t||{};let o;if(typeof n=="function")o=n;else if(sN(n))o=Fj(n);else throw new Error(Ra(1));let l;typeof r=="function"?l=r(e):l=e();let c=O0;a&&(c=ene({trace:!1,...typeof a=="object"&&a}));const f=Lte(...l),h=rne(f);let p=typeof s=="function"?s(h):h();const g=c(...p);return zj(o,i,g)}function tB(t){const e={},n=[];let r;const a={addCase(i,s){const o=typeof i=="string"?i:i.type;if(!o)throw new Error(Ra(28));if(o in e)throw new Error(Ra(29));return e[o]=s,a},addAsyncThunk(i,s){return s.pending&&(e[i.pending.type]=s.pending),s.rejected&&(e[i.rejected.type]=s.rejected),s.fulfilled&&(e[i.fulfilled.type]=s.fulfilled),s.settled&&n.push({matcher:i.settled,reducer:s.settled}),a},addMatcher(i,s){return n.push({matcher:i,reducer:s}),a},addDefaultCase(i){return r=i,a}};return t(a),[e,n,r]}function ine(t){return typeof t=="function"}function sne(t,e){let[n,r,a]=tB(e),i;if(ine(t))i=()=>UM(t());else{const o=UM(t);i=()=>o}function s(o=i(),l){let c=[n[l.type],...r.filter(({matcher:f})=>f(l)).map(({reducer:f})=>f)];return c.filter(f=>!!f).length===0&&(c=[a]),c.reduce((f,h)=>{if(h)if(lo(f)){const g=h(f,l);return g===void 0?f:g}else{if(zi(f))return Yj(f,p=>h(p,l));{const p=h(f,l);if(p===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return f},o)}return s.getInitialState=i,s}var one="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",lne=(t=21)=>{let e="",n=t;for(;n--;)e+=one[Math.random()*64|0];return e},une=Symbol.for("rtk-slice-createasyncthunk");function cne(t,e){return`${t}/${e}`}function dne({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[une];return function(a){const{name:i,reducerPath:s=i}=a;if(!i)throw new Error(Ra(11));const o=(typeof a.reducers=="function"?a.reducers(hne()):a.reducers)||{},l=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(N,I){const T=typeof N=="string"?N:N.type;if(!T)throw new Error(Ra(12));if(T in c.sliceCaseReducersByType)throw new Error(Ra(13));return c.sliceCaseReducersByType[T]=I,f},addMatcher(N,I){return c.sliceMatchers.push({matcher:N,reducer:I}),f},exposeAction(N,I){return c.actionCreators[N]=I,f},exposeCaseReducer(N,I){return c.sliceCaseReducersByName[N]=I,f}};l.forEach(N=>{const I=o[N],T={reducerName:N,type:cne(i,N),createNotation:typeof a.reducers=="function"};mne(I)?vne(T,I,f,e):pne(T,I,f)});function h(){const[N={},I=[],T=void 0]=typeof a.extraReducers=="function"?tB(a.extraReducers):[a.extraReducers],R={...N,...c.sliceCaseReducersByType};return sne(a.initialState,_=>{for(let M in R)_.addCase(M,R[M]);for(let M of c.sliceMatchers)_.addMatcher(M.matcher,M.reducer);for(let M of I)_.addMatcher(M.matcher,M.reducer);T&&_.addDefaultCase(T)})}const p=N=>N,g=new Map,v=new WeakMap;let x;function b(N,I){return x||(x=h()),x(N,I)}function w(){return x||(x=h()),x.getInitialState()}function S(N,I=!1){function T(_){let M=_[N];return typeof M>"u"&&I&&(M=Rv(v,T,w)),M}function R(_=p){const M=Rv(g,I,()=>new WeakMap);return Rv(M,_,()=>{const P={};for(const[$,z]of Object.entries(a.selectors??{}))P[$]=fne(z,_,()=>Rv(v,_,w),I);return P})}return{reducerPath:N,getSelectors:R,get selectors(){return R(T)},selectSlice:T}}const k={name:i,reducer:b,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:w,...S(s),injectInto(N,{reducerPath:I,...T}={}){const R=I??s;return N.inject({reducerPath:R,reducer:b},T),{...k,...S(R,!0)}}};return k}}function fne(t,e,n,r){function a(i,...s){let o=e(i);return typeof o>"u"&&r&&(o=n()),t(o,...s)}return a.unwrapped=t,a}var va=dne();function hne(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function pne({type:t,reducerName:e,createNotation:n},r,a){let i,s;if("reducer"in r){if(n&&!gne(r))throw new Error(Ra(17));i=r.reducer,s=r.prepare}else i=r;a.addCase(t,i).exposeCaseReducer(e,i).exposeAction(e,s?ui(t,s):ui(t))}function mne(t){return t._reducerDefinitionType==="asyncThunk"}function gne(t){return t._reducerDefinitionType==="reducerWithPrepare"}function vne({type:t,reducerName:e},n,r,a){if(!a)throw new Error(Ra(18));const{payloadCreator:i,fulfilled:s,pending:o,rejected:l,settled:c,options:f}=n,h=a(t,i,f);r.exposeAction(e,h),s&&r.addCase(h.fulfilled,s),o&&r.addCase(h.pending,o),l&&r.addCase(h.rejected,l),c&&r.addMatcher(h.settled,c),r.exposeCaseReducer(e,{fulfilled:s||_v,pending:o||_v,rejected:l||_v,settled:c||_v})}function _v(){}var yne="task",nB="listener",rB="completed",cN="cancelled",xne=`task-${cN}`,bne=`task-${rB}`,gk=`${nB}-${cN}`,wne=`${nB}-${rB}`,dx=class{constructor(t){zS(this,"name","TaskAbortError");zS(this,"message");this.code=t,this.message=`${yne} ${cN} (reason: ${t})`}},dN=(t,e)=>{if(typeof t!="function")throw new TypeError(Ra(32))},z0=()=>{},aB=(t,e=z0)=>(t.catch(e),t),iB=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),xu=t=>{if(t.aborted)throw new dx(t.reason)};function sB(t,e){let n=z0;return new Promise((r,a)=>{const i=()=>a(new dx(t.reason));if(t.aborted){i();return}n=iB(t,i),e.finally(()=>n()).then(r,a)}).finally(()=>{n=z0})}var Sne=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof dx?"cancelled":"rejected",error:n}}finally{e==null||e()}},F0=t=>e=>aB(sB(t,e).then(n=>(xu(t),n))),oB=t=>{const e=F0(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:ld}=Object,WM={},fx="listenerMiddleware",Cne=(t,e)=>{const n=r=>iB(t,()=>r.abort(t.reason));return(r,a)=>{dN(r);const i=new AbortController;n(i);const s=Sne(async()=>{xu(t),xu(i.signal);const o=await r({pause:F0(i.signal),delay:oB(i.signal),signal:i.signal});return xu(i.signal),o},()=>i.abort(bne));return a!=null&&a.autoJoin&&e.push(s.catch(z0)),{result:F0(t)(s),cancel(){i.abort(xne)}}}},kne=(t,e)=>{const n=async(r,a)=>{xu(e);let i=()=>{};const o=[new Promise((l,c)=>{let f=t({predicate:r,effect:(h,p)=>{p.unsubscribe(),l([h,p.getState(),p.getOriginalState()])}});i=()=>{f(),c()}})];a!=null&&o.push(new Promise(l=>setTimeout(l,a,null)));try{const l=await sB(e,Promise.race(o));return xu(e),l}finally{i()}};return(r,a)=>aB(n(r,a))},lB=t=>{let{type:e,actionCreator:n,matcher:r,predicate:a,effect:i}=t;if(e)a=ui(e).match;else if(n)e=n.type,a=n.match;else if(r)a=r;else if(!a)throw new Error(Ra(21));return dN(i),{predicate:a,type:e,effect:i}},uB=ld(t=>{const{type:e,predicate:n,effect:r}=lB(t);return{id:lne(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Ra(22))}}},{withTypes:()=>uB}),GM=(t,e)=>{const{type:n,effect:r,predicate:a}=lB(e);return Array.from(t.values()).find(i=>(typeof n=="string"?i.type===n:i.predicate===a)&&i.effect===r)},vk=t=>{t.pending.forEach(e=>{e.abort(gk)})},Ene=(t,e)=>()=>{for(const n of e.keys())vk(n);t.clear()},HM=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},cB=ld(ui(`${fx}/add`),{withTypes:()=>cB}),Nne=ui(`${fx}/removeAll`),dB=ld(ui(`${fx}/remove`),{withTypes:()=>dB}),Ine=(...t)=>{console.error(`${fx}/error`,...t)},Ep=(t={})=>{const e=new Map,n=new Map,r=g=>{const v=n.get(g)??0;n.set(g,v+1)},a=g=>{const v=n.get(g)??1;v===1?n.delete(g):n.set(g,v-1)},{extra:i,onError:s=Ine}=t;dN(s);const o=g=>(g.unsubscribe=()=>e.delete(g.id),e.set(g.id,g),v=>{g.unsubscribe(),v!=null&&v.cancelActive&&vk(g)}),l=g=>{const v=GM(e,g)??uB(g);return o(v)};ld(l,{withTypes:()=>l});const c=g=>{const v=GM(e,g);return v&&(v.unsubscribe(),g.cancelActive&&vk(v)),!!v};ld(c,{withTypes:()=>c});const f=async(g,v,x,b)=>{const w=new AbortController,S=kne(l,w.signal),k=[];try{g.pending.add(w),r(g),await Promise.resolve(g.effect(v,ld({},x,{getOriginalState:b,condition:(N,I)=>S(N,I).then(Boolean),take:S,delay:oB(w.signal),pause:F0(w.signal),extra:i,signal:w.signal,fork:Cne(w.signal,k),unsubscribe:g.unsubscribe,subscribe:()=>{e.set(g.id,g)},cancelActiveListeners:()=>{g.pending.forEach((N,I,T)=>{N!==w&&(N.abort(gk),T.delete(N))})},cancel:()=>{w.abort(gk),g.pending.delete(w)},throwIfCancelled:()=>{xu(w.signal)}})))}catch(N){N instanceof dx||HM(s,N,{raisedBy:"effect"})}finally{await Promise.all(k),w.abort(wne),a(g),g.pending.delete(w)}},h=Ene(e,n);return{middleware:g=>v=>x=>{if(!jj(x))return v(x);if(cB.match(x))return l(x.payload);if(Nne.match(x)){h();return}if(dB.match(x))return c(x.payload);let b=g.getState();const w=()=>{if(b===WM)throw new Error(Ra(23));return b};let S;try{if(S=v(x),e.size>0){const k=g.getState(),N=Array.from(e.values());for(const I of N){let T=!1;try{T=I.predicate(x,k,b)}catch(R){T=!1,HM(s,R,{raisedBy:"predicate"})}T&&f(I,x,g,w)}}}finally{b=WM}return S},startListening:l,stopListening:c,clearListeners:h}};function Ra(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Ane={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},fB=va({name:"chartLayout",initialState:Ane,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,a,i;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(a=e.payload.bottom)!==null&&a!==void 0?a:0,t.margin.left=(i=e.payload.left)!==null&&i!==void 0?i:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:Tne,setLayout:$ne,setChartSize:One,setScale:Dne}=fB.actions,Rne=fB.reducer;function hB(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function $t(t){return Number.isFinite(t)}function hs(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function qM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function id(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qM(Object(n),!0).forEach(function(r){_ne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _ne(t,e,n){return(e=Mne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mne(t){var e=Pne(t,"string");return typeof e=="symbol"?e:e+""}function Pne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yt(t,e,n){return Dt(t)||Dt(e)?n:li(e)?vd(t,e,n):typeof e=="function"?e(t):n}var Lne=(t,e,n)=>{if(e&&n){var{width:r,height:a}=n,{align:i,verticalAlign:s,layout:o}=e;if((o==="vertical"||o==="horizontal"&&s==="middle")&&i!=="center"&&De(t[i]))return id(id({},t),{},{[i]:t[i]+(r||0)});if((o==="horizontal"||o==="vertical"&&i==="center")&&s!=="middle"&&De(t[s]))return id(id({},t),{},{[s]:t[s]+(a||0)})}return t},ws=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",pB=(t,e,n,r)=>{if(r)return t.map(o=>o.coordinate);var a,i,s=t.map(o=>(o.coordinate===e&&(a=!0),o.coordinate===n&&(i=!0),o.coordinate));return a||s.push(e),i||s.push(n),s},mB=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:a,range:i,scale:s,realScaleType:o,isCategorical:l,categoricalDomain:c,tickCount:f,ticks:h,niceTicks:p,axisType:g}=t;if(!s)return null;var v=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,x=a==="category"&&s.bandwidth?s.bandwidth()/v:0;if(x=g==="angleAxis"&&i&&i.length>=2?ua(i[0]-i[1])*2*x:x,h||p){var b=(h||p||[]).map((w,S)=>{var k=r?r.indexOf(w):w;return{coordinate:s(k)+x,value:w,offset:x,index:S}});return b.filter(w=>!ha(w.coordinate))}return l&&c?c.map((w,S)=>({coordinate:s(w)+x,value:w,index:S,offset:x})):s.ticks&&f!=null?s.ticks(f).map((w,S)=>({coordinate:s(w)+x,value:w,offset:x,index:S})):s.domain().map((w,S)=>({coordinate:s(w)+x,value:r?r[w]:w,index:S,offset:x}))},KM=1e-4,zne=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),a=Math.min(r[0],r[1])-KM,i=Math.max(r[0],r[1])+KM,s=t(e[0]),o=t(e[n-1]);(s<a||s>i||o<a||o>i)&&t.domain([e[0],e[n-1]])}},Fne=(t,e)=>{if(!e||e.length!==2||!De(e[0])||!De(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),a=[t[0],t[1]];return(!De(t[0])||t[0]<n)&&(a[0]=n),(!De(t[1])||t[1]>r)&&(a[1]=r),a[0]>r&&(a[0]=r),a[1]<n&&(a[1]=n),a},jne=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var a=0;a<r;++a)for(var i=0,s=0,o=0;o<n;++o){var l=t[o],c=l==null?void 0:l[a];if(c!=null){var f=c[1],h=c[0],p=ha(f)?h:f;p>=0?(c[0]=i,c[1]=i+p,i=f):(c[0]=s,c[1]=s+p,s=f)}}}},Bne=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var a=0;a<r;++a)for(var i=0,s=0;s<n;++s){var o=t[s],l=o==null?void 0:o[a];if(l!=null){var c=ha(l[1])?l[0]:l[1];c>=0?(l[0]=i,l[1]=i+c,i=l[1]):(l[0]=0,l[1]=0)}}}},Une={sign:jne,expand:hee,none:Nu,silhouette:pee,wiggle:mee,positive:Bne},Vne=(t,e,n)=>{var r,a=(r=Une[n])!==null&&r!==void 0?r:Nu,i=fee().keys(e).value((o,l)=>Number(Yt(o,l,0))).order(sk).offset(a),s=i(t);return s.forEach((o,l)=>{o.forEach((c,f)=>{var h=Yt(t[f],e[l],0);Array.isArray(h)&&h.length===2&&De(h[0])&&De(h[1])&&(c[0]=h[0],c[1]=h[1])})}),s};function gB(t){return t==null?void 0:String(t)}function xd(t){var{axis:e,ticks:n,bandSize:r,entry:a,index:i,dataKey:s}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Dt(a[e.dataKey])){var o=Sj(n,"value",a[e.dataKey]);if(o)return o.coordinate+r/2}return n[i]?n[i].coordinate+r/2:null}var l=Yt(a,Dt(s)?e.dataKey:s);return Dt(l)?null:e.scale(l)}var XM=t=>{var{axis:e,ticks:n,offset:r,bandSize:a,entry:i,index:s}=t;if(e.type==="category")return n[s]?n[s].coordinate+r:null;var o=Yt(i,e.dataKey,e.scale.domain()[s]);return Dt(o)?null:e.scale(o)-a/2+r},Wne=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return r<=0&&a>=0?0:a<0?a:r}return n[0]},Gne=t=>{var e=t.flat(2).filter(De);return[Math.min(...e),Math.max(...e)]},Hne=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],qne=(t,e,n)=>{if(t!=null)return Hne(Object.keys(t).reduce((r,a)=>{var i=t[a];if(!i)return r;var{stackedData:s}=i,o=s.reduce((l,c)=>{var f=hB(c,e,n),h=Gne(f);return!$t(h[0])||!$t(h[1])?l:[Math.min(l[0],h[0]),Math.max(l[1],h[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]))},YM=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ZM=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,hl=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var a=rx(e,f=>f.coordinate),i=1/0,s=1,o=a.length;s<o;s++){var l=a[s],c=a[s-1];i=Math.min(((l==null?void 0:l.coordinate)||0)-((c==null?void 0:c.coordinate)||0),i)}return i===1/0?0:i}return n?void 0:0};function QM(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:a,name:i}=t;return id(id({},e),{},{dataKey:n,payload:r,value:a,name:i})}function Cl(t,e){if(t)return String(t);if(typeof e=="string")return e}var Kne=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},Xne=(t,e)=>e==="centric"?t.angle:t.radius,xo=t=>t.layout.width,bo=t=>t.layout.height,Yne=t=>t.layout.scale,vB=t=>t.layout.margin,hx=he(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),px=he(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),yB="data-recharts-item-index",xB="data-recharts-item-id",Np=60;function JM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Mv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JM(Object(n),!0).forEach(function(r){Zne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zne(t,e,n){return(e=Qne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qne(t){var e=Jne(t,"string");return typeof e=="symbol"?e:e+""}function Jne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ere=t=>t.brush.height;function tre(t){var e=px(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var a=typeof r.width=="number"?r.width:Np;return n+a}return n},0)}function nre(t){var e=px(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var a=typeof r.width=="number"?r.width:Np;return n+a}return n},0)}function rre(t){var e=hx(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function are(t){var e=hx(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var lr=he([xo,bo,vB,ere,tre,nre,rre,are,Lj,Ote],(t,e,n,r,a,i,s,o,l,c)=>{var f={left:(n.left||0)+a,right:(n.right||0)+i},h={top:(n.top||0)+s,bottom:(n.bottom||0)+o},p=Mv(Mv({},h),f),g=p.bottom;p.bottom+=r,p=Lne(p,l,c);var v=t-p.left-p.right,x=e-p.top-p.bottom;return Mv(Mv({brushBottom:g},p),{},{width:Math.max(v,0),height:Math.max(x,0)})}),ire=he(lr,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),fN=he(xo,bo,(t,e)=>({x:0,y:0,width:t,height:e})),sre=A.createContext(null),Tn=()=>A.useContext(sre)!=null,mx=t=>t.brush,gx=he([mx,lr,vB],(t,e,n)=>({height:t.height,x:De(t.x)?t.x:e.left,y:De(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:De(t.width)?t.width:e.width})),KC={},XC={},YC={},eP;function ore(){return eP||(eP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:a,edges:i}={}){let s,o=null;const l=i!=null&&i.includes("leading"),c=i==null||i.includes("trailing"),f=()=>{o!==null&&(n.apply(s,o),s=void 0,o=null)},h=()=>{c&&f(),x()};let p=null;const g=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,h()},r)},v=()=>{p!==null&&(clearTimeout(p),p=null)},x=()=>{v(),s=void 0,o=null},b=()=>{f()},w=function(...S){if(a!=null&&a.aborted)return;s=this,o=S;const k=p==null;g(),l&&k&&f()};return w.schedule=g,w.cancel=x,w.flush=b,a==null||a.addEventListener("abort",x,{once:!0}),w}t.debounce=e})(YC)),YC}var tP;function lre(){return tP||(tP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ore();function n(r,a=0,i={}){typeof i!="object"&&(i={});const{leading:s=!1,trailing:o=!0,maxWait:l}=i,c=Array(2);s&&(c[0]="leading"),o&&(c[1]="trailing");let f,h=null;const p=e.debounce(function(...x){f=r.apply(this,x),h=null},a,{edges:c}),g=function(...x){return l!=null&&(h===null&&(h=Date.now()),Date.now()-h>=l)?(f=r.apply(this,x),h=Date.now(),p.cancel(),p.schedule(),f):(p.apply(this,x),f)},v=()=>(p.flush(),f);return g.cancel=p.cancel,g.flush=v,g}t.debounce=n})(XC)),XC}var nP;function ure(){return nP||(nP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=lre();function n(r,a=0,i={}){const{leading:s=!0,trailing:o=!0}=i;return e.debounce(r,a,{leading:s,maxWait:a,trailing:o})}t.throttle=n})(KC)),KC}var ZC,rP;function cre(){return rP||(rP=1,ZC=ure().throttle),ZC}var dre=cre();const fre=Ui(dre);var j0=function(e,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(n.replace(/%s/g,()=>a[s++]))}},bB=(t,e,n)=>{var{width:r="100%",height:a="100%",aspect:i,maxHeight:s}=n,o=oo(r)?t:Number(r),l=oo(a)?e:Number(a);return i&&i>0&&(o?l=o/i:l&&(o=l*i),s&&l!=null&&l>s&&(l=s)),{calculatedWidth:o,calculatedHeight:l}},hre={width:0,height:0,overflow:"visible"},pre={width:0,overflowX:"visible"},mre={height:0,overflowY:"visible"},gre={},vre=t=>{var{width:e,height:n}=t,r=oo(e),a=oo(n);return r&&a?hre:r?pre:a?mre:gre};function yre(t){var{width:e,height:n,aspect:r}=t,a=e,i=n;return a===void 0&&i===void 0?(a="100%",i="100%"):a===void 0?a=r&&r>0?void 0:"100%":i===void 0&&(i=r&&r>0?void 0:"100%"),{width:a,height:i}}function yk(){return yk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yk.apply(null,arguments)}function aP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function iP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aP(Object(n),!0).forEach(function(r){xre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xre(t,e,n){return(e=bre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bre(t){var e=wre(t,"string");return typeof e=="symbol"?e:e+""}function wre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wB=A.createContext({width:-1,height:-1});function Sre(t){return hs(t.width)&&hs(t.height)}function SB(t){var{children:e,width:n,height:r}=t,a=A.useMemo(()=>({width:n,height:r}),[n,r]);return Sre(a)?A.createElement(wB.Provider,{value:a},e):null}var hN=()=>A.useContext(wB),Cre=A.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:a,height:i,minWidth:s=0,minHeight:o,maxHeight:l,children:c,debounce:f=0,id:h,className:p,onResize:g,style:v={}}=t,x=A.useRef(null),b=A.useRef();b.current=g,A.useImperativeHandle(e,()=>x.current);var[w,S]=A.useState({containerWidth:r.width,containerHeight:r.height}),k=A.useCallback((_,M)=>{S(P=>{var $=Math.round(_),z=Math.round(M);return P.containerWidth===$&&P.containerHeight===z?P:{containerWidth:$,containerHeight:z}})},[]);A.useEffect(()=>{if(x.current==null||typeof ResizeObserver>"u")return Cp;var _=z=>{var W,{width:H,height:G}=z[0].contentRect;k(H,G),(W=b.current)===null||W===void 0||W.call(b,H,G)};f>0&&(_=fre(_,f,{trailing:!0,leading:!1}));var M=new ResizeObserver(_),{width:P,height:$}=x.current.getBoundingClientRect();return k(P,$),M.observe(x.current),()=>{M.disconnect()}},[k,f]);var{containerWidth:N,containerHeight:I}=w;j0(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:T,calculatedHeight:R}=bB(N,I,{width:a,height:i,aspect:n,maxHeight:l});return j0(T!=null&&T>0||R!=null&&R>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,R,a,i,s,o,n),A.createElement("div",{id:h?"".concat(h):void 0,className:Et("recharts-responsive-container",p),style:iP(iP({},v),{},{width:a,height:i,minWidth:s,minHeight:o,maxHeight:l}),ref:x},A.createElement("div",{style:vre({width:a,height:i})},A.createElement(SB,{width:T,height:R},c)))}),Vd=A.forwardRef((t,e)=>{var n=hN();if(hs(n.width)&&hs(n.height))return t.children;var{width:r,height:a}=yre({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:i,calculatedHeight:s}=bB(void 0,void 0,{width:r,height:a,aspect:t.aspect,maxHeight:t.maxHeight});return De(i)&&De(s)?A.createElement(SB,{width:i,height:s},t.children):A.createElement(Cre,yk({},t,{width:r,height:a,ref:e}))});function CB(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var Wd=()=>{var t,e=Tn(),n=Fe(ire),r=Fe(gx),a=(t=Fe(mx))===null||t===void 0?void 0:t.padding;return!e||!r||!a?n:{width:r.width-a.left-a.right,height:r.height-a.top-a.bottom,x:a.left,y:a.top}},kre={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},kB=()=>{var t;return(t=Fe(lr))!==null&&t!==void 0?t:kre},EB=()=>Fe(xo),NB=()=>Fe(bo),xt=t=>t.layout.layoutType,kl=()=>Fe(xt),Ere=()=>{var t=kl();if(t==="horizontal"||t==="vertical")return t},Nre=()=>{var t=kl();return t!==void 0},vx=t=>{var e=bn(),n=Tn(),{width:r,height:a}=t,i=hN(),s=r,o=a;return i&&(s=i.width>0?i.width:r,o=i.height>0?i.height:a),A.useEffect(()=>{!n&&hs(s)&&hs(o)&&e(One({width:s,height:o}))},[e,n,s,o]),null},IB=Symbol.for("immer-nothing"),sP=Symbol.for("immer-draftable"),Pa=Symbol.for("immer-state");function $i(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Kh=Object.getPrototypeOf;function bd(t){return!!t&&!!t[Pa]}function Au(t){var e;return t?AB(t)||Array.isArray(t)||!!t[sP]||!!((e=t.constructor)!=null&&e[sP])||Ip(t)||xx(t):!1}var Ire=Object.prototype.constructor.toString(),oP=new WeakMap;function AB(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=oP.get(n);return r===void 0&&(r=Function.toString.call(n),oP.set(n,r)),r===Ire}function B0(t,e,n=!0){yx(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((r,a)=>e(a,r,t))}function yx(t){const e=t[Pa];return e?e.type_:Array.isArray(t)?1:Ip(t)?2:xx(t)?3:0}function xk(t,e){return yx(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function TB(t,e,n){const r=yx(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Are(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Ip(t){return t instanceof Map}function xx(t){return t instanceof Set}function su(t){return t.copy_||t.base_}function bk(t,e){if(Ip(t))return new Map(t);if(xx(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=AB(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Pa];let a=Reflect.ownKeys(r);for(let i=0;i<a.length;i++){const s=a[i],o=r[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[s]})}return Object.create(Kh(t),r)}else{const r=Kh(t);if(r!==null&&n)return{...t};const a=Object.create(r);return Object.assign(a,t)}}function pN(t,e=!1){return bx(t)||bd(t)||!Au(t)||(yx(t)>1&&Object.defineProperties(t,{set:Pv,add:Pv,clear:Pv,delete:Pv}),Object.freeze(t),e&&Object.values(t).forEach(n=>pN(n,!0))),t}function Tre(){$i(2)}var Pv={value:Tre};function bx(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var $re={};function Tu(t){const e=$re[t];return e||$i(0,t),e}var Xh;function $B(){return Xh}function Ore(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function lP(t,e){e&&(Tu("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function wk(t){Sk(t),t.drafts_.forEach(Dre),t.drafts_=null}function Sk(t){t===Xh&&(Xh=t.parent_)}function uP(t){return Xh=Ore(Xh,t)}function Dre(t){const e=t[Pa];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function cP(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Pa].modified_&&(wk(e),$i(4)),Au(t)&&(t=U0(e,t),e.parent_||V0(e,t)),e.patches_&&Tu("Patches").generateReplacementPatches_(n[Pa].base_,t,e.patches_,e.inversePatches_)):t=U0(e,n,[]),wk(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==IB?t:void 0}function U0(t,e,n){if(bx(e))return e;const r=t.immer_.shouldUseStrictIteration(),a=e[Pa];if(!a)return B0(e,(i,s)=>dP(t,a,e,i,s,n),r),e;if(a.scope_!==t)return e;if(!a.modified_)return V0(t,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const i=a.copy_;let s=i,o=!1;a.type_===3&&(s=new Set(i),i.clear(),o=!0),B0(s,(l,c)=>dP(t,a,i,l,c,n,o),r),V0(t,i,!1),n&&t.patches_&&Tu("Patches").generatePatches_(a,n,t.patches_,t.inversePatches_)}return a.copy_}function dP(t,e,n,r,a,i,s){if(a==null||typeof a!="object"&&!s)return;const o=bx(a);if(!(o&&!s)){if(bd(a)){const l=i&&e&&e.type_!==3&&!xk(e.assigned_,r)?i.concat(r):void 0,c=U0(t,a,l);if(TB(n,r,c),bd(c))t.canAutoFreeze_=!1;else return}else s&&n.add(a);if(Au(a)&&!o){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===a&&o)return;U0(t,a),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(Ip(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&V0(t,a)}}}function V0(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&pN(e,n)}function Rre(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:$B(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,i=mN;n&&(a=[r],i=Yh);const{revoke:s,proxy:o}=Proxy.revocable(a,i);return r.draft_=o,r.revoke_=s,o}var mN={get(t,e){if(e===Pa)return t;const n=su(t);if(!xk(n,e))return _re(t,n,e);const r=n[e];return t.finalized_||!Au(r)?r:r===QC(t.base_,e)?(JC(t),t.copy_[e]=kk(r,t)):r},has(t,e){return e in su(t)},ownKeys(t){return Reflect.ownKeys(su(t))},set(t,e,n){const r=OB(su(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const a=QC(su(t),e),i=a==null?void 0:a[Pa];if(i&&i.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Are(n,a)&&(n!==void 0||xk(t.base_,e)))return!0;JC(t),Ck(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return QC(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,JC(t),Ck(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=su(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){$i(11)},getPrototypeOf(t){return Kh(t.base_)},setPrototypeOf(){$i(12)}},Yh={};B0(mN,(t,e)=>{Yh[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Yh.deleteProperty=function(t,e){return Yh.set.call(this,t,e,void 0)};Yh.set=function(t,e,n){return mN.set.call(this,t[0],e,n,t[0])};function QC(t,e){const n=t[Pa];return(n?su(n):t)[e]}function _re(t,e,n){var a;const r=OB(e,n);return r?"value"in r?r.value:(a=r.get)==null?void 0:a.call(t.draft_):void 0}function OB(t,e){if(!(e in t))return;let n=Kh(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Kh(n)}}function Ck(t){t.modified_||(t.modified_=!0,t.parent_&&Ck(t.parent_))}function JC(t){t.copy_||(t.copy_=bk(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Mre=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const i=n;n=e;const s=this;return function(l=i,...c){return s.produce(l,f=>n.call(this,f,...c))}}typeof n!="function"&&$i(6),r!==void 0&&typeof r!="function"&&$i(7);let a;if(Au(e)){const i=uP(this),s=kk(e,void 0);let o=!0;try{a=n(s),o=!1}finally{o?wk(i):Sk(i)}return lP(i,r),cP(a,i)}else if(!e||typeof e!="object"){if(a=n(e),a===void 0&&(a=e),a===IB&&(a=void 0),this.autoFreeze_&&pN(a,!0),r){const i=[],s=[];Tu("Patches").generateReplacementPatches_(e,a,i,s),r(i,s)}return a}else $i(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...o)=>this.produceWithPatches(s,l=>e(l,...o));let r,a;return[this.produce(e,n,(s,o)=>{r=s,a=o}),r,a]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Au(t)||$i(8),bd(t)&&(t=Pre(t));const e=uP(this),n=kk(t,void 0);return n[Pa].isManual_=!0,Sk(e),n}finishDraft(t,e){const n=t&&t[Pa];(!n||!n.isManual_)&&$i(9);const{scope_:r}=n;return lP(r,e),cP(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const a=e[n];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}n>-1&&(e=e.slice(n+1));const r=Tu("Patches").applyPatches_;return bd(t)?r(t,e):this.produce(t,a=>r(a,e))}};function kk(t,e){const n=Ip(t)?Tu("MapSet").proxyMap_(t,e):xx(t)?Tu("MapSet").proxySet_(t,e):Rre(t,e);return(e?e.scope_:$B()).drafts_.push(n),n}function Pre(t){return bd(t)||$i(10,t),DB(t)}function DB(t){if(!Au(t)||bx(t))return t;const e=t[Pa];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=bk(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=bk(t,!0);return B0(n,(a,i)=>{TB(n,a,DB(i))},r),e&&(e.finalized_=!1),n}var Lre=new Mre;Lre.produce;var zre={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},RB=va({name:"legend",initialState:zre,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:sn()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,a=Ri(t).payload.indexOf(n);a>-1&&(t.payload[a]=r)},prepare:sn()},removeLegendPayload:{reducer(t,e){var n=Ri(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:sn()}}}),{setLegendSize:g5e,setLegendSettings:v5e,addLegendPayload:Fre,replaceLegendPayload:jre,removeLegendPayload:Bre}=RB.actions,Ure=RB.reducer;function Ek(){return Ek=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ek.apply(null,arguments)}function fP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function e2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fP(Object(n),!0).forEach(function(r){Vre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vre(t,e,n){return(e=Wre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wre(t){var e=Gre(t,"string");return typeof e=="symbol"?e:e+""}function Gre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hre(t){return Array.isArray(t)&&li(t[0])&&li(t[1])?t.join(" ~ "):t}var qre=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:a={},payload:i,formatter:s,itemSorter:o,wrapperClassName:l,labelClassName:c,label:f,labelFormatter:h,accessibilityLayer:p=!1}=t,g=()=>{if(i&&i.length){var I={padding:0,margin:0},T=(o?rx(i,o):i).map((R,_)=>{if(R.type==="none")return null;var M=R.formatter||s||Hre,{value:P,name:$}=R,z=P,W=$;if(M){var H=M(P,$,R,_,i);if(Array.isArray(H))[z,W]=H;else if(H!=null)z=H;else return null}var G=e2({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},r);return A.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(_),style:G},li(W)?A.createElement("span",{className:"recharts-tooltip-item-name"},W):null,li(W)?A.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,A.createElement("span",{className:"recharts-tooltip-item-value"},z),A.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return A.createElement("ul",{className:"recharts-tooltip-item-list",style:I},T)}return null},v=e2({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),x=e2({margin:0},a),b=!Dt(f),w=b?f:"",S=Et("recharts-default-tooltip",l),k=Et("recharts-tooltip-label",c);b&&h&&i!==void 0&&i!==null&&(w=h(f,i));var N=p?{role:"status","aria-live":"assertive"}:{};return A.createElement("div",Ek({className:S,style:v},N),A.createElement("p",{className:k,style:x},A.isValidElement(w)?w:"".concat(w)),g())},xh="recharts-tooltip-wrapper",Kre={visibility:"hidden"};function Xre(t){var{coordinate:e,translateX:n,translateY:r}=t;return Et(xh,{["".concat(xh,"-right")]:De(n)&&e&&De(e.x)&&n>=e.x,["".concat(xh,"-left")]:De(n)&&e&&De(e.x)&&n<e.x,["".concat(xh,"-bottom")]:De(r)&&e&&De(e.y)&&r>=e.y,["".concat(xh,"-top")]:De(r)&&e&&De(e.y)&&r<e.y})}function hP(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:a,position:i,reverseDirection:s,tooltipDimension:o,viewBox:l,viewBoxDimension:c}=t;if(i&&De(i[r]))return i[r];var f=n[r]-o-(a>0?a:0),h=n[r]+a;if(e[r])return s[r]?f:h;var p=l[r];if(p==null)return 0;if(s[r]){var g=f,v=p;return g<v?Math.max(h,p):Math.max(f,p)}if(c==null)return 0;var x=h+o,b=p+c;return x>b?Math.max(f,p):Math.max(h,p)}function Yre(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Zre(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:a,reverseDirection:i,tooltipBox:s,useTranslate3d:o,viewBox:l}=t,c,f,h;return s.height>0&&s.width>0&&n?(f=hP({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:a,reverseDirection:i,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),h=hP({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:a,reverseDirection:i,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),c=Yre({translateX:f,translateY:h,useTranslate3d:o})):c=Kre,{cssProperties:c,cssClasses:Xre({translateX:f,translateY:h,coordinate:n})}}function pP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Lv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pP(Object(n),!0).forEach(function(r){Nk(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nk(t,e,n){return(e=Qre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qre(t){var e=Jre(t,"string");return typeof e=="symbol"?e:e+""}function Jre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class eae extends A.PureComponent{constructor(){super(...arguments),Nk(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Nk(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,a,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(a=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:a,children:i,coordinate:s,hasPayload:o,isAnimationActive:l,offset:c,position:f,reverseDirection:h,useTranslate3d:p,viewBox:g,wrapperStyle:v,lastBoundingBox:x,innerRef:b,hasPortalFromProps:w}=this.props,{cssClasses:S,cssProperties:k}=Zre({allowEscapeViewBox:n,coordinate:s,offsetTopLeft:c,position:f,reverseDirection:h,tooltipBox:{height:x.height,width:x.width},useTranslate3d:p,viewBox:g}),N=w?{}:Lv(Lv({transition:l&&e?"transform ".concat(r,"ms ").concat(a):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),I=Lv(Lv({},N),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},v);return A.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:S,style:I,ref:b},i)}}var _B=()=>{var t;return(t=Fe(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function Ik(){return Ik=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ik.apply(null,arguments)}function mP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function gP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mP(Object(n),!0).forEach(function(r){tae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tae(t,e,n){return(e=nae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nae(t){var e=rae(t,"string");return typeof e=="symbol"?e:e+""}function rae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vP={curveBasisClosed:tee,curveBasisOpen:nee,curveBasis:eee,curveBumpX:jJ,curveBumpY:BJ,curveLinearClosed:ree,curveLinear:ex,curveMonotoneX:aee,curveMonotoneY:iee,curveNatural:see,curveStep:oee,curveStepAfter:uee,curveStepBefore:lee},W0=t=>$t(t.x)&&$t(t.y),yP=t=>t.base!=null&&W0(t.base)&&W0(t),bh=t=>t.x,wh=t=>t.y,aae=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(Sp(t));return(n==="curveMonotone"||n==="curveBump")&&e?vP["".concat(n).concat(e==="vertical"?"Y":"X")]:vP[n]||ex},iae=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:a,connectNulls:i=!1}=t,s=aae(e,a),o=i?n.filter(W0):n,l;if(Array.isArray(r)){var c=n.map((g,v)=>gP(gP({},g),{},{base:r[v]}));a==="vertical"?l=Tv().y(wh).x1(bh).x0(g=>g.base.x):l=Tv().x(bh).y1(wh).y0(g=>g.base.y);var f=l.defined(yP).curve(s),h=i?c.filter(yP):c;return f(h)}a==="vertical"&&De(r)?l=Tv().y(wh).x1(bh).x0(r):De(r)?l=Tv().x(bh).y1(wh).y0(r):l=uj().x(bh).y(wh);var p=l.defined(W0).curve(s);return p(o)},ud=t=>{var{className:e,points:n,path:r,pathRef:a}=t,i=kl();if((!n||!n.length)&&!r)return null;var s={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||i,connectNulls:t.connectNulls},o=n&&n.length?iae(s):r;return A.createElement("path",Ik({},Kr(t),rN(t),{className:Et("recharts-curve",e),d:o===null?void 0:o,ref:a}))},sae=["x","y","top","left","width","height","className"];function Ak(){return Ak=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ak.apply(null,arguments)}function xP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function oae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xP(Object(n),!0).forEach(function(r){lae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lae(t,e,n){return(e=uae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uae(t){var e=cae(t,"string");return typeof e=="symbol"?e:e+""}function cae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dae(t,e){if(t==null)return{};var n,r,a=fae(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function fae(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var hae=(t,e,n,r,a,i)=>"M".concat(t,",").concat(a,"v").concat(r,"M").concat(i,",").concat(e,"h").concat(n),pae=t=>{var{x:e=0,y:n=0,top:r=0,left:a=0,width:i=0,height:s=0,className:o}=t,l=dae(t,sae),c=oae({x:e,y:n,top:r,left:a,width:i,height:s},l);return!De(e)||!De(n)||!De(i)||!De(s)||!De(r)||!De(a)?null:A.createElement("path",Ak({},wr(c),{className:Et("recharts-cross",o),d:hae(e,n,i,s,r,a)}))};function mae(t,e,n,r){var a=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-a,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function bP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function wP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bP(Object(n),!0).forEach(function(r){gae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gae(t,e,n){return(e=vae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vae(t){var e=yae(t,"string");return typeof e=="symbol"?e:e+""}function yae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xae=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),MB=(t,e,n)=>t.map(r=>"".concat(xae(r)," ").concat(e,"ms ").concat(n)).join(","),bae=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(a=>r.includes(a))),Zh=(t,e)=>Object.keys(e).reduce((n,r)=>wP(wP({},n),{},{[r]:t(r,e[r])}),{});function SP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Hn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SP(Object(n),!0).forEach(function(r){wae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wae(t,e,n){return(e=Sae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sae(t){var e=Cae(t,"string");return typeof e=="symbol"?e:e+""}function Cae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var G0=(t,e,n)=>t+(e-t)*n,Tk=t=>{var{from:e,to:n}=t;return e!==n},PB=(t,e,n)=>{var r=Zh((a,i)=>{if(Tk(i)){var[s,o]=t(i.from,i.to,i.velocity);return Hn(Hn({},i),{},{from:s,velocity:o})}return i},e);return n<1?Zh((a,i)=>Tk(i)&&r[a]!=null?Hn(Hn({},i),{},{velocity:G0(i.velocity,r[a].velocity,n),from:G0(i.from,r[a].from,n)}):i,e):PB(t,r,n-1)};function kae(t,e,n,r,a,i){var s,o=r.reduce((p,g)=>Hn(Hn({},p),{},{[g]:{from:t[g],velocity:0,to:e[g]}}),{}),l=()=>Zh((p,g)=>g.from,o),c=()=>!Object.values(o).filter(Tk).length,f=null,h=p=>{s||(s=p);var g=p-s,v=g/n.dt;o=PB(n,o,v),a(Hn(Hn(Hn({},t),e),l())),s=p,c()||(f=i.setTimeout(h))};return()=>(f=i.setTimeout(h),()=>{var p;(p=f)===null||p===void 0||p()})}function Eae(t,e,n,r,a,i,s){var o=null,l=a.reduce((h,p)=>{var g=t[p],v=e[p];return g==null||v==null?h:Hn(Hn({},h),{},{[p]:[g,v]})},{}),c,f=h=>{c||(c=h);var p=(h-c)/r,g=Zh((x,b)=>G0(...b,n(p)),l);if(i(Hn(Hn(Hn({},t),e),g)),p<1)o=s.setTimeout(f);else{var v=Zh((x,b)=>G0(...b,n(1)),l);i(Hn(Hn(Hn({},t),e),v))}};return()=>(o=s.setTimeout(f),()=>{var h;(h=o)===null||h===void 0||h()})}const Nae=(t,e,n,r,a,i)=>{var s=bae(t,e);return n==null?()=>(a(Hn(Hn({},t),e)),()=>{}):n.isStepper===!0?kae(t,e,n,s,a,i):Eae(t,e,n,r,s,a,i)};var H0=1e-4,LB=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],zB=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),CP=(t,e)=>n=>{var r=LB(t,e);return zB(r,n)},Iae=(t,e)=>n=>{var r=LB(t,e),a=[...r.map((i,s)=>i*s).slice(1),0];return zB(a,n)},Aae=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var a=r.map(i=>parseFloat(i));return[a[0],a[1],a[2],a[3]]},Tae=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a=Aae(n[0]);if(a)return a}}return n.length===4?n:[0,0,1,1]},$ae=(t,e,n,r)=>{var a=CP(t,n),i=CP(e,r),s=Iae(t,n),o=c=>c>1?1:c<0?0:c,l=c=>{for(var f=c>1?1:c,h=f,p=0;p<8;++p){var g=a(h)-f,v=s(h);if(Math.abs(g-f)<H0||v<H0)return i(h);h=o(h-g/v)}return i(h)};return l.isStepper=!1,l},kP=function(){return $ae(...Tae(...arguments))},Oae=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:a=17}=e,i=(s,o,l)=>{var c=-(s-o)*n,f=l*r,h=l+(c-f)*a/1e3,p=l*a/1e3+s;return Math.abs(p-o)<H0&&Math.abs(h)<H0?[o,0]:[p,h]};return i.isStepper=!0,i.dt=a,i},Dae=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return kP(t);case"spring":return Oae();default:if(t.split("(")[0]==="cubic-bezier")return kP(t)}return typeof t=="function"?t:null};function Rae(t){var e,n=()=>null,r=!1,a=null,i=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var o=s,[l,...c]=o;if(typeof l=="number"){a=t.setTimeout(i.bind(null,c),l);return}i(l),a=t.setTimeout(i.bind(null,c));return}typeof s=="string"&&(e=s,n(e)),typeof s=="object"&&(e=s,n(e)),typeof s=="function"&&s()}};return{stop:()=>{r=!0},start:s=>{r=!1,a&&(a(),a=null),i(s)},subscribe:s=>(n=s,()=>{n=()=>null}),getTimeoutController:()=>t}}class _ae{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),a=null,i=s=>{s-r>=n?e(s):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(i))};return a=requestAnimationFrame(i),()=>{a!=null&&cancelAnimationFrame(a)}}}function Mae(){return Rae(new _ae)}var Pae=A.createContext(Mae);function Lae(t,e){var n=A.useContext(Pae);return A.useMemo(()=>e??n(t),[t,e,n])}var zae=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Ap={isSsr:zae()},Fae={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},EP={t:0},t2={t:1};function Gd(t){var e=Un(t,Fae),{isActive:n,canBegin:r,duration:a,easing:i,begin:s,onAnimationEnd:o,onAnimationStart:l,children:c}=e,f=n==="auto"?!Ap.isSsr:n,h=Lae(e.animationId,e.animationManager),[p,g]=A.useState(f?EP:t2),v=A.useRef(null);return A.useEffect(()=>{f||g(t2)},[f]),A.useEffect(()=>{if(!f||!r)return Cp;var x=Nae(EP,t2,Dae(i),a,g,h.getTimeoutController()),b=()=>{v.current=x()};return h.start([l,s,b,a,o]),()=>{h.stop(),v.current&&v.current(),o()}},[f,r,a,i,s,l,o,h]),c(p.t)}function Hd(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=A.useRef(Wh(e)),r=A.useRef(t);return r.current!==t&&(n.current=Wh(e),r.current=t),n.current}var jae=["radius"],Bae=["radius"],NP,IP,AP,TP,$P,OP,DP,RP,_P,MP;function PP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function LP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PP(Object(n),!0).forEach(function(r){Uae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Uae(t,e,n){return(e=Vae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vae(t){var e=Wae(t,"string");return typeof e=="symbol"?e:e+""}function Wae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function q0(){return q0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},q0.apply(null,arguments)}function zP(t,e){if(t==null)return{};var n,r,a=Gae(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Gae(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Zi(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var FP=(t,e,n,r,a)=>{var i=al(n),s=al(r),o=Math.min(Math.abs(i)/2,Math.abs(s)/2),l=s>=0?1:-1,c=i>=0?1:-1,f=s>=0&&i>=0||s<0&&i<0?1:0,h;if(o>0&&a instanceof Array){for(var p=[0,0,0,0],g=0,v=4;g<v;g++)p[g]=a[g]>o?o:a[g];h=pn(NP||(NP=Zi(["M",",",""])),t,e+l*p[0]),p[0]>0&&(h+=pn(IP||(IP=Zi(["A ",",",",0,0,",",",",",""])),p[0],p[0],f,t+c*p[0],e)),h+=pn(AP||(AP=Zi(["L ",",",""])),t+n-c*p[1],e),p[1]>0&&(h+=pn(TP||(TP=Zi(["A ",",",",0,0,",`,
        `,",",""])),p[1],p[1],f,t+n,e+l*p[1])),h+=pn($P||($P=Zi(["L ",",",""])),t+n,e+r-l*p[2]),p[2]>0&&(h+=pn(OP||(OP=Zi(["A ",",",",0,0,",`,
        `,",",""])),p[2],p[2],f,t+n-c*p[2],e+r)),h+=pn(DP||(DP=Zi(["L ",",",""])),t+c*p[3],e+r),p[3]>0&&(h+=pn(RP||(RP=Zi(["A ",",",",0,0,",`,
        `,",",""])),p[3],p[3],f,t,e+r-l*p[3])),h+="Z"}else if(o>0&&a===+a&&a>0){var x=Math.min(o,a);h=pn(_P||(_P=Zi(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+l*x,x,x,f,t+c*x,e,t+n-c*x,e,x,x,f,t+n,e+l*x,t+n,e+r-l*x,x,x,f,t+n-c*x,e+r,t+c*x,e+r,x,x,f,t,e+r-l*x)}else h=pn(MP||(MP=Zi(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return h},jP={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},FB=t=>{var e=Un(t,jP),n=A.useRef(null),[r,a]=A.useState(-1);A.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var V=n.current.getTotalLength();V&&a(V)}catch{}},[]);var{x:i,y:s,width:o,height:l,radius:c,className:f}=e,{animationEasing:h,animationDuration:p,animationBegin:g,isAnimationActive:v,isUpdateAnimationActive:x}=e,b=A.useRef(o),w=A.useRef(l),S=A.useRef(i),k=A.useRef(s),N=A.useMemo(()=>({x:i,y:s,width:o,height:l,radius:c}),[i,s,o,l,c]),I=Hd(N,"rectangle-");if(i!==+i||s!==+s||o!==+o||l!==+l||o===0||l===0)return null;var T=Et("recharts-rectangle",f);if(!x){var R=wr(e),{radius:_}=R,M=zP(R,jae);return A.createElement("path",q0({},M,{x:al(i),y:al(s),width:al(o),height:al(l),radius:typeof c=="number"?c:void 0,className:T,d:FP(i,s,o,l,c)}))}var P=b.current,$=w.current,z=S.current,W=k.current,H="0px ".concat(r===-1?1:r,"px"),G="".concat(r,"px 0px"),F=MB(["strokeDasharray"],p,typeof h=="string"?h:jP.animationEasing);return A.createElement(Gd,{animationId:I,key:I,canBegin:r>0,duration:p,easing:h,isActive:x,begin:g},V=>{var U=Ct(P,o,V),Y=Ct($,l,V),oe=Ct(z,i,V),j=Ct(W,s,V);n.current&&(b.current=U,w.current=Y,S.current=oe,k.current=j);var q;v?V>0?q={transition:F,strokeDasharray:G}:q={strokeDasharray:H}:q={strokeDasharray:G};var Z=wr(e),{radius:se}=Z,pe=zP(Z,Bae);return A.createElement("path",q0({},pe,{radius:typeof c=="number"?c:void 0,className:T,d:FP(oe,j,U,Y,c),ref:n,style:LP(LP({},q),e.style)}))})};function BP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function UP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BP(Object(n),!0).forEach(function(r){Hae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hae(t,e,n){return(e=qae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qae(t){var e=Kae(t,"string");return typeof e=="symbol"?e:e+""}function Kae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var K0=Math.PI/180,Xae=t=>t*180/Math.PI,br=(t,e,n,r)=>({x:t+Math.cos(-K0*r)*n,y:e+Math.sin(-K0*r)*n}),Yae=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},Zae=(t,e)=>{var{x:n,y:r}=t,{x:a,y:i}=e;return Math.sqrt((n-a)**2+(r-i)**2)},Qae=(t,e)=>{var{x:n,y:r}=t,{cx:a,cy:i}=e,s=Zae({x:n,y:r},{x:a,y:i});if(s<=0)return{radius:s,angle:0};var o=(n-a)/s,l=Math.acos(o);return r>i&&(l=2*Math.PI-l),{radius:s,angle:Xae(l),angleInRadian:l}},Jae=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),a=Math.floor(n/360),i=Math.min(r,a);return{startAngle:e-i*360,endAngle:n-i*360}},eie=(t,e)=>{var{startAngle:n,endAngle:r}=e,a=Math.floor(n/360),i=Math.floor(r/360),s=Math.min(a,i);return t+s*360},tie=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:a,angle:i}=Qae({x:n,y:r},e),{innerRadius:s,outerRadius:o}=e;if(a<s||a>o||a===0)return null;var{startAngle:l,endAngle:c}=Jae(e),f=i,h;if(l<=c){for(;f>c;)f-=360;for(;f<l;)f+=360;h=f>=l&&f<=c}else{for(;f>l;)f-=360;for(;f<c;)f+=360;h=f>=c&&f<=l}return h?UP(UP({},e),{},{radius:a,angle:eie(f,e)}):null};function jB(t){var{cx:e,cy:n,radius:r,startAngle:a,endAngle:i}=t,s=br(e,n,r,a),o=br(e,n,r,i);return{points:[s,o],cx:e,cy:n,radius:r,startAngle:a,endAngle:i}}var VP,WP,GP,HP,qP,KP,XP;function $k(){return $k=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$k.apply(null,arguments)}function fu(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var nie=(t,e)=>{var n=ua(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},zv=t=>{var{cx:e,cy:n,radius:r,angle:a,sign:i,isExternal:s,cornerRadius:o,cornerIsExternal:l}=t,c=o*(s?1:-1)+r,f=Math.asin(o/c)/K0,h=l?a:a+i*f,p=br(e,n,c,h),g=br(e,n,r,h),v=l?a-i*f:a,x=br(e,n,c*Math.cos(f*K0),v);return{center:p,circleTangency:g,lineTangency:x,theta:f}},BB=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:a,startAngle:i,endAngle:s}=t,o=nie(i,s),l=i+o,c=br(e,n,a,i),f=br(e,n,a,l),h=pn(VP||(VP=fu(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),c.x,c.y,a,a,+(Math.abs(o)>180),+(i>l),f.x,f.y);if(r>0){var p=br(e,n,r,i),g=br(e,n,r,l);h+=pn(WP||(WP=fu(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),g.x,g.y,r,r,+(Math.abs(o)>180),+(i<=l),p.x,p.y)}else h+=pn(GP||(GP=fu(["L ",","," Z"])),e,n);return h},rie=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:a,cornerRadius:i,forceCornerRadius:s,cornerIsExternal:o,startAngle:l,endAngle:c}=t,f=ua(c-l),{circleTangency:h,lineTangency:p,theta:g}=zv({cx:e,cy:n,radius:a,angle:l,sign:f,cornerRadius:i,cornerIsExternal:o}),{circleTangency:v,lineTangency:x,theta:b}=zv({cx:e,cy:n,radius:a,angle:c,sign:-f,cornerRadius:i,cornerIsExternal:o}),w=o?Math.abs(l-c):Math.abs(l-c)-g-b;if(w<0)return s?pn(HP||(HP=fu(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),p.x,p.y,i,i,i*2,i,i,-i*2):BB({cx:e,cy:n,innerRadius:r,outerRadius:a,startAngle:l,endAngle:c});var S=pn(qP||(qP=fu(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),p.x,p.y,i,i,+(f<0),h.x,h.y,a,a,+(w>180),+(f<0),v.x,v.y,i,i,+(f<0),x.x,x.y);if(r>0){var{circleTangency:k,lineTangency:N,theta:I}=zv({cx:e,cy:n,radius:r,angle:l,sign:f,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),{circleTangency:T,lineTangency:R,theta:_}=zv({cx:e,cy:n,radius:r,angle:c,sign:-f,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),M=o?Math.abs(l-c):Math.abs(l-c)-I-_;if(M<0&&i===0)return"".concat(S,"L").concat(e,",").concat(n,"Z");S+=pn(KP||(KP=fu(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),R.x,R.y,i,i,+(f<0),T.x,T.y,r,r,+(M>180),+(f>0),k.x,k.y,i,i,+(f<0),N.x,N.y)}else S+=pn(XP||(XP=fu(["L",",","Z"])),e,n);return S},aie={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},UB=t=>{var e=Un(t,aie),{cx:n,cy:r,innerRadius:a,outerRadius:i,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:f,className:h}=e;if(i<a||c===f)return null;var p=Et("recharts-sector",h),g=i-a,v=Li(s,g,0,!0),x;return v>0&&Math.abs(c-f)<360?x=rie({cx:n,cy:r,innerRadius:a,outerRadius:i,cornerRadius:Math.min(v,g/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:f}):x=BB({cx:n,cy:r,innerRadius:a,outerRadius:i,startAngle:c,endAngle:f}),A.createElement("path",$k({},wr(e),{className:p,d:x}))};function iie(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(kj(e)){if(t==="centric"){var{cx:r,cy:a,innerRadius:i,outerRadius:s,angle:o}=e,l=br(r,a,i,o),c=br(r,a,s,o);return[{x:l.x,y:l.y},{x:c.x,y:c.y}]}return jB(e)}}var n2={},r2={},a2={},YP;function sie(){return YP||(YP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Mj();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(a2)),a2}var ZP;function oie(){return ZP||(ZP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=sie();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(r2)),r2}var QP;function lie(){return QP||(QP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Pj(),n=oie();function r(a,i,s){s&&typeof s!="number"&&e.isIterateeCall(a,i,s)&&(i=s=void 0),a=n.toFinite(a),i===void 0?(i=a,a=0):i=n.toFinite(i),s=s===void 0?a<i?1:-1:n.toFinite(s);const o=Math.max(Math.ceil((i-a)/(s||1)),0),l=new Array(o);for(let c=0;c<o;c++)l[c]=a,a+=s;return l}t.range=r})(n2)),n2}var i2,JP;function uie(){return JP||(JP=1,i2=lie().range),i2}var cie=uie();const VB=Ui(cie);function ll(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function die(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function gN(t){let e,n,r;t.length!==2?(e=ll,n=(o,l)=>ll(t(o),l),r=(o,l)=>t(o)-l):(e=t===ll||t===die?t:fie,n=t,r=t);function a(o,l,c=0,f=o.length){if(c<f){if(e(l,l)!==0)return f;do{const h=c+f>>>1;n(o[h],l)<0?c=h+1:f=h}while(c<f)}return c}function i(o,l,c=0,f=o.length){if(c<f){if(e(l,l)!==0)return f;do{const h=c+f>>>1;n(o[h],l)<=0?c=h+1:f=h}while(c<f)}return c}function s(o,l,c=0,f=o.length){const h=a(o,l,c,f-1);return h>c&&r(o[h-1],l)>-r(o[h],l)?h-1:h}return{left:a,center:s,right:i}}function fie(){return 0}function WB(t){return t===null?NaN:+t}function*hie(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const pie=gN(ll),Tp=pie.right;gN(WB).center;class e3 extends Map{constructor(e,n=vie){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,a]of e)this.set(r,a)}get(e){return super.get(t3(this,e))}has(e){return super.has(t3(this,e))}set(e,n){return super.set(mie(this,e),n)}delete(e){return super.delete(gie(this,e))}}function t3({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function mie({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function gie({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function vie(t){return t!==null&&typeof t=="object"?t.valueOf():t}function yie(t=ll){if(t===ll)return GB;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function GB(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const xie=Math.sqrt(50),bie=Math.sqrt(10),wie=Math.sqrt(2);function X0(t,e,n){const r=(e-t)/Math.max(0,n),a=Math.floor(Math.log10(r)),i=r/Math.pow(10,a),s=i>=xie?10:i>=bie?5:i>=wie?2:1;let o,l,c;return a<0?(c=Math.pow(10,-a)/s,o=Math.round(t*c),l=Math.round(e*c),o/c<t&&++o,l/c>e&&--l,c=-c):(c=Math.pow(10,a)*s,o=Math.round(t/c),l=Math.round(e/c),o*c<t&&++o,l*c>e&&--l),l<o&&.5<=n&&n<2?X0(t,e,n*2):[o,l,c]}function Ok(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[a,i,s]=r?X0(e,t,n):X0(t,e,n);if(!(i>=a))return[];const o=i-a+1,l=new Array(o);if(r)if(s<0)for(let c=0;c<o;++c)l[c]=(i-c)/-s;else for(let c=0;c<o;++c)l[c]=(i-c)*s;else if(s<0)for(let c=0;c<o;++c)l[c]=(a+c)/-s;else for(let c=0;c<o;++c)l[c]=(a+c)*s;return l}function Dk(t,e,n){return e=+e,t=+t,n=+n,X0(t,e,n)[2]}function Rk(t,e,n){e=+e,t=+t,n=+n;const r=e<t,a=r?Dk(e,t,n):Dk(t,e,n);return(r?-1:1)*(a<0?1/-a:a)}function n3(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function r3(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function HB(t,e,n=0,r=1/0,a){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(a=a===void 0?GB:yie(a);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,f=Math.log(l),h=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*h*(l-h)/l)*(c-l/2<0?-1:1),g=Math.max(n,Math.floor(e-c*h/l+p)),v=Math.min(r,Math.floor(e+(l-c)*h/l+p));HB(t,e,g,v,a)}const i=t[e];let s=n,o=r;for(Sh(t,n,e),a(t[r],i)>0&&Sh(t,n,r);s<o;){for(Sh(t,s,o),++s,--o;a(t[s],i)<0;)++s;for(;a(t[o],i)>0;)--o}a(t[n],i)===0?Sh(t,n,o):(++o,Sh(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function Sh(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Sie(t,e,n){if(t=Float64Array.from(hie(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return r3(t);if(e>=1)return n3(t);var r,a=(r-1)*e,i=Math.floor(a),s=n3(HB(t,i).subarray(0,i+1)),o=r3(t.subarray(i+1));return s+(o-s)*(a-i)}}function Cie(t,e,n=WB){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,a=(r-1)*e,i=Math.floor(a),s=+n(t[i],i,t),o=+n(t[i+1],i+1,t);return s+(o-s)*(a-i)}}function kie(t,e,n){t=+t,e=+e,n=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((e-t)/n))|0,i=new Array(a);++r<a;)i[r]=t+r*n;return i}function mi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function wo(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const _k=Symbol("implicit");function vN(){var t=new e3,e=[],n=[],r=_k;function a(i){let s=t.get(i);if(s===void 0){if(r!==_k)return r;t.set(i,s=e.push(i)-1)}return n[s%n.length]}return a.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new e3;for(const s of i)t.has(s)||t.set(s,e.push(s)-1);return a},a.range=function(i){return arguments.length?(n=Array.from(i),a):n.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return vN(e,n).unknown(r)},mi.apply(a,arguments),a}function yN(){var t=vN().unknown(void 0),e=t.domain,n=t.range,r=0,a=1,i,s,o=!1,l=0,c=0,f=.5;delete t.unknown;function h(){var p=e().length,g=a<r,v=g?a:r,x=g?r:a;i=(x-v)/Math.max(1,p-l+c*2),o&&(i=Math.floor(i)),v+=(x-v-i*(p-l))*f,s=i*(1-l),o&&(v=Math.round(v),s=Math.round(s));var b=kie(p).map(function(w){return v+i*w});return n(g?b.reverse():b)}return t.domain=function(p){return arguments.length?(e(p),h()):e()},t.range=function(p){return arguments.length?([r,a]=p,r=+r,a=+a,h()):[r,a]},t.rangeRound=function(p){return[r,a]=p,r=+r,a=+a,o=!0,h()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(p){return arguments.length?(o=!!p,h()):o},t.padding=function(p){return arguments.length?(l=Math.min(1,c=+p),h()):l},t.paddingInner=function(p){return arguments.length?(l=Math.min(1,p),h()):l},t.paddingOuter=function(p){return arguments.length?(c=+p,h()):c},t.align=function(p){return arguments.length?(f=Math.max(0,Math.min(1,p)),h()):f},t.copy=function(){return yN(e(),[r,a]).round(o).paddingInner(l).paddingOuter(c).align(f)},mi.apply(h(),arguments)}function qB(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return qB(e())},t}function Eie(){return qB(yN.apply(null,arguments).paddingInner(1))}function xN(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function KB(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function $p(){}var Qh=.7,Y0=1/Qh,cd="\\s*([+-]?\\d+)\\s*",Jh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",os="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Nie=/^#([0-9a-f]{3,8})$/,Iie=new RegExp(`^rgb\\(${cd},${cd},${cd}\\)$`),Aie=new RegExp(`^rgb\\(${os},${os},${os}\\)$`),Tie=new RegExp(`^rgba\\(${cd},${cd},${cd},${Jh}\\)$`),$ie=new RegExp(`^rgba\\(${os},${os},${os},${Jh}\\)$`),Oie=new RegExp(`^hsl\\(${Jh},${os},${os}\\)$`),Die=new RegExp(`^hsla\\(${Jh},${os},${os},${Jh}\\)$`),a3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};xN($p,ep,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:i3,formatHex:i3,formatHex8:Rie,formatHsl:_ie,formatRgb:s3,toString:s3});function i3(){return this.rgb().formatHex()}function Rie(){return this.rgb().formatHex8()}function _ie(){return XB(this).formatHsl()}function s3(){return this.rgb().formatRgb()}function ep(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Nie.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?o3(e):n===3?new ca(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Fv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Fv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Iie.exec(t))?new ca(e[1],e[2],e[3],1):(e=Aie.exec(t))?new ca(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Tie.exec(t))?Fv(e[1],e[2],e[3],e[4]):(e=$ie.exec(t))?Fv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Oie.exec(t))?c3(e[1],e[2]/100,e[3]/100,1):(e=Die.exec(t))?c3(e[1],e[2]/100,e[3]/100,e[4]):a3.hasOwnProperty(t)?o3(a3[t]):t==="transparent"?new ca(NaN,NaN,NaN,0):null}function o3(t){return new ca(t>>16&255,t>>8&255,t&255,1)}function Fv(t,e,n,r){return r<=0&&(t=e=n=NaN),new ca(t,e,n,r)}function Mie(t){return t instanceof $p||(t=ep(t)),t?(t=t.rgb(),new ca(t.r,t.g,t.b,t.opacity)):new ca}function Mk(t,e,n,r){return arguments.length===1?Mie(t):new ca(t,e,n,r??1)}function ca(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}xN(ca,Mk,KB($p,{brighter(t){return t=t==null?Y0:Math.pow(Y0,t),new ca(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Qh:Math.pow(Qh,t),new ca(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ca(bu(this.r),bu(this.g),bu(this.b),Z0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:l3,formatHex:l3,formatHex8:Pie,formatRgb:u3,toString:u3}));function l3(){return`#${hu(this.r)}${hu(this.g)}${hu(this.b)}`}function Pie(){return`#${hu(this.r)}${hu(this.g)}${hu(this.b)}${hu((isNaN(this.opacity)?1:this.opacity)*255)}`}function u3(){const t=Z0(this.opacity);return`${t===1?"rgb(":"rgba("}${bu(this.r)}, ${bu(this.g)}, ${bu(this.b)}${t===1?")":`, ${t})`}`}function Z0(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function bu(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function hu(t){return t=bu(t),(t<16?"0":"")+t.toString(16)}function c3(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Oi(t,e,n,r)}function XB(t){if(t instanceof Oi)return new Oi(t.h,t.s,t.l,t.opacity);if(t instanceof $p||(t=ep(t)),!t)return new Oi;if(t instanceof Oi)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,a=Math.min(e,n,r),i=Math.max(e,n,r),s=NaN,o=i-a,l=(i+a)/2;return o?(e===i?s=(n-r)/o+(n<r)*6:n===i?s=(r-e)/o+2:s=(e-n)/o+4,o/=l<.5?i+a:2-i-a,s*=60):o=l>0&&l<1?0:s,new Oi(s,o,l,t.opacity)}function Lie(t,e,n,r){return arguments.length===1?XB(t):new Oi(t,e,n,r??1)}function Oi(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}xN(Oi,Lie,KB($p,{brighter(t){return t=t==null?Y0:Math.pow(Y0,t),new Oi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Qh:Math.pow(Qh,t),new Oi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,a=2*n-r;return new ca(s2(t>=240?t-240:t+120,a,r),s2(t,a,r),s2(t<120?t+240:t-120,a,r),this.opacity)},clamp(){return new Oi(d3(this.h),jv(this.s),jv(this.l),Z0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Z0(this.opacity);return`${t===1?"hsl(":"hsla("}${d3(this.h)}, ${jv(this.s)*100}%, ${jv(this.l)*100}%${t===1?")":`, ${t})`}`}}));function d3(t){return t=(t||0)%360,t<0?t+360:t}function jv(t){return Math.max(0,Math.min(1,t||0))}function s2(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const bN=t=>()=>t;function zie(t,e){return function(n){return t+n*e}}function Fie(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function jie(t){return(t=+t)==1?YB:function(e,n){return n-e?Fie(e,n,t):bN(isNaN(e)?n:e)}}function YB(t,e){var n=e-t;return n?zie(t,n):bN(isNaN(t)?e:t)}const f3=(function t(e){var n=jie(e);function r(a,i){var s=n((a=Mk(a)).r,(i=Mk(i)).r),o=n(a.g,i.g),l=n(a.b,i.b),c=YB(a.opacity,i.opacity);return function(f){return a.r=s(f),a.g=o(f),a.b=l(f),a.opacity=c(f),a+""}}return r.gamma=t,r})(1);function Bie(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),a;return function(i){for(a=0;a<n;++a)r[a]=t[a]*(1-i)+e[a]*i;return r}}function Uie(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Vie(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,a=new Array(r),i=new Array(n),s;for(s=0;s<r;++s)a[s]=qd(t[s],e[s]);for(;s<n;++s)i[s]=e[s];return function(o){for(s=0;s<r;++s)i[s]=a[s](o);return i}}function Wie(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Q0(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Gie(t,e){var n={},r={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?n[a]=qd(t[a],e[a]):r[a]=e[a];return function(i){for(a in n)r[a]=n[a](i);return r}}var Pk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,o2=new RegExp(Pk.source,"g");function Hie(t){return function(){return t}}function qie(t){return function(e){return t(e)+""}}function Kie(t,e){var n=Pk.lastIndex=o2.lastIndex=0,r,a,i,s=-1,o=[],l=[];for(t=t+"",e=e+"";(r=Pk.exec(t))&&(a=o2.exec(e));)(i=a.index)>n&&(i=e.slice(n,i),o[s]?o[s]+=i:o[++s]=i),(r=r[0])===(a=a[0])?o[s]?o[s]+=a:o[++s]=a:(o[++s]=null,l.push({i:s,x:Q0(r,a)})),n=o2.lastIndex;return n<e.length&&(i=e.slice(n),o[s]?o[s]+=i:o[++s]=i),o.length<2?l[0]?qie(l[0].x):Hie(e):(e=l.length,function(c){for(var f=0,h;f<e;++f)o[(h=l[f]).i]=h.x(c);return o.join("")})}function qd(t,e){var n=typeof e,r;return e==null||n==="boolean"?bN(e):(n==="number"?Q0:n==="string"?(r=ep(e))?(e=r,f3):Kie:e instanceof ep?f3:e instanceof Date?Wie:Uie(e)?Bie:Array.isArray(e)?Vie:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Gie:Q0)(t,e)}function wN(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Xie(t,e){e===void 0&&(e=t,t=qd);for(var n=0,r=e.length-1,a=e[0],i=new Array(r<0?0:r);n<r;)i[n]=t(a,a=e[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return i[o](s-o)}}function Yie(t){return function(){return t}}function J0(t){return+t}var h3=[0,1];function Hr(t){return t}function Lk(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Yie(isNaN(e)?NaN:.5)}function Zie(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Qie(t,e,n){var r=t[0],a=t[1],i=e[0],s=e[1];return a<r?(r=Lk(a,r),i=n(s,i)):(r=Lk(r,a),i=n(i,s)),function(o){return i(r(o))}}function Jie(t,e,n){var r=Math.min(t.length,e.length)-1,a=new Array(r),i=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)a[s]=Lk(t[s],t[s+1]),i[s]=n(e[s],e[s+1]);return function(o){var l=Tp(t,o,1,r)-1;return i[l](a[l](o))}}function Op(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function wx(){var t=h3,e=h3,n=qd,r,a,i,s=Hr,o,l,c;function f(){var p=Math.min(t.length,e.length);return s!==Hr&&(s=Zie(t[0],t[p-1])),o=p>2?Jie:Qie,l=c=null,h}function h(p){return p==null||isNaN(p=+p)?i:(l||(l=o(t.map(r),e,n)))(r(s(p)))}return h.invert=function(p){return s(a((c||(c=o(e,t.map(r),Q0)))(p)))},h.domain=function(p){return arguments.length?(t=Array.from(p,J0),f()):t.slice()},h.range=function(p){return arguments.length?(e=Array.from(p),f()):e.slice()},h.rangeRound=function(p){return e=Array.from(p),n=wN,f()},h.clamp=function(p){return arguments.length?(s=p?!0:Hr,f()):s!==Hr},h.interpolate=function(p){return arguments.length?(n=p,f()):n},h.unknown=function(p){return arguments.length?(i=p,h):i},function(p,g){return r=p,a=g,f()}}function SN(){return wx()(Hr,Hr)}function ese(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ey(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function wd(t){return t=ey(Math.abs(t)),t?t[1]:NaN}function tse(t,e){return function(n,r){for(var a=n.length,i=[],s=0,o=t[0],l=0;a>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),i.push(n.substring(a-=o,a+o)),!((l+=o+1)>r));)o=t[s=(s+1)%t.length];return i.reverse().join(e)}}function nse(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var rse=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function tp(t){if(!(e=rse.exec(t)))throw new Error("invalid format: "+t);var e;return new CN({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}tp.prototype=CN.prototype;function CN(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}CN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ase(t){e:for(var e=t.length,n=1,r=-1,a;n<e;++n)switch(t[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(a+1):t}var ZB;function ise(t,e){var n=ey(t,e);if(!n)return t+"";var r=n[0],a=n[1],i=a-(ZB=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,s=r.length;return i===s?r:i>s?r+new Array(i-s+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+ey(t,Math.max(0,e+i-1))[0]}function p3(t,e){var n=ey(t,e);if(!n)return t+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const m3={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:ese,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>p3(t*100,e),r:p3,s:ise,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function g3(t){return t}var v3=Array.prototype.map,y3=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function sse(t){var e=t.grouping===void 0||t.thousands===void 0?g3:tse(v3.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?g3:nse(v3.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(h){h=tp(h);var p=h.fill,g=h.align,v=h.sign,x=h.symbol,b=h.zero,w=h.width,S=h.comma,k=h.precision,N=h.trim,I=h.type;I==="n"?(S=!0,I="g"):m3[I]||(k===void 0&&(k=12),N=!0,I="g"),(b||p==="0"&&g==="=")&&(b=!0,p="0",g="=");var T=x==="$"?n:x==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():"",R=x==="$"?r:/[%p]/.test(I)?s:"",_=m3[I],M=/[defgprs%]/.test(I);k=k===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function P($){var z=T,W=R,H,G,F;if(I==="c")W=_($)+W,$="";else{$=+$;var V=$<0||1/$<0;if($=isNaN($)?l:_(Math.abs($),k),N&&($=ase($)),V&&+$==0&&v!=="+"&&(V=!1),z=(V?v==="("?v:o:v==="-"||v==="("?"":v)+z,W=(I==="s"?y3[8+ZB/3]:"")+W+(V&&v==="("?")":""),M){for(H=-1,G=$.length;++H<G;)if(F=$.charCodeAt(H),48>F||F>57){W=(F===46?a+$.slice(H+1):$.slice(H))+W,$=$.slice(0,H);break}}}S&&!b&&($=e($,1/0));var U=z.length+$.length+W.length,Y=U<w?new Array(w-U+1).join(p):"";switch(S&&b&&($=e(Y+$,Y.length?w-W.length:1/0),Y=""),g){case"<":$=z+$+W+Y;break;case"=":$=z+Y+$+W;break;case"^":$=Y.slice(0,U=Y.length>>1)+z+$+W+Y.slice(U);break;default:$=Y+z+$+W;break}return i($)}return P.toString=function(){return h+""},P}function f(h,p){var g=c((h=tp(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(wd(p)/3)))*3,x=Math.pow(10,-v),b=y3[8+v/3];return function(w){return g(x*w)+b}}return{format:c,formatPrefix:f}}var Bv,kN,QB;ose({thousands:",",grouping:[3],currency:["$",""]});function ose(t){return Bv=sse(t),kN=Bv.format,QB=Bv.formatPrefix,Bv}function lse(t){return Math.max(0,-wd(Math.abs(t)))}function use(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(wd(e)/3)))*3-wd(Math.abs(t)))}function cse(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,wd(e)-wd(t))+1}function JB(t,e,n,r){var a=Rk(t,e,n),i;switch(r=tp(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(i=use(a,s))&&(r.precision=i),QB(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=cse(a,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=lse(a))&&(r.precision=i-(r.type==="%")*2);break}}return kN(r)}function El(t){var e=t.domain;return t.ticks=function(n){var r=e();return Ok(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var a=e();return JB(a[0],a[a.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),a=0,i=r.length-1,s=r[a],o=r[i],l,c,f=10;for(o<s&&(c=s,s=o,o=c,c=a,a=i,i=c);f-- >0;){if(c=Dk(s,o,n),c===l)return r[a]=s,r[i]=o,e(r);if(c>0)s=Math.floor(s/c)*c,o=Math.ceil(o/c)*c;else if(c<0)s=Math.ceil(s*c)/c,o=Math.floor(o*c)/c;else break;l=c}return t},t}function eU(){var t=SN();return t.copy=function(){return Op(t,eU())},mi.apply(t,arguments),El(t)}function tU(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,J0),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return tU(t).unknown(e)},t=arguments.length?Array.from(t,J0):[0,1],El(n)}function nU(t,e){t=t.slice();var n=0,r=t.length-1,a=t[n],i=t[r],s;return i<a&&(s=n,n=r,r=s,s=a,a=i,i=s),t[n]=e.floor(a),t[r]=e.ceil(i),t}function x3(t){return Math.log(t)}function b3(t){return Math.exp(t)}function dse(t){return-Math.log(-t)}function fse(t){return-Math.exp(-t)}function hse(t){return isFinite(t)?+("1e"+t):t<0?0:t}function pse(t){return t===10?hse:t===Math.E?Math.exp:e=>Math.pow(t,e)}function mse(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function w3(t){return(e,n)=>-t(-e,n)}function EN(t){const e=t(x3,b3),n=e.domain;let r=10,a,i;function s(){return a=mse(r),i=pse(r),n()[0]<0?(a=w3(a),i=w3(i),t(dse,fse)):t(x3,b3),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const l=n();let c=l[0],f=l[l.length-1];const h=f<c;h&&([c,f]=[f,c]);let p=a(c),g=a(f),v,x;const b=o==null?10:+o;let w=[];if(!(r%1)&&g-p<b){if(p=Math.floor(p),g=Math.ceil(g),c>0){for(;p<=g;++p)for(v=1;v<r;++v)if(x=p<0?v/i(-p):v*i(p),!(x<c)){if(x>f)break;w.push(x)}}else for(;p<=g;++p)for(v=r-1;v>=1;--v)if(x=p>0?v/i(-p):v*i(p),!(x<c)){if(x>f)break;w.push(x)}w.length*2<b&&(w=Ok(c,f,b))}else w=Ok(p,g,Math.min(g-p,b)).map(i);return h?w.reverse():w},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=tp(l)).precision==null&&(l.trim=!0),l=kN(l)),o===1/0)return l;const c=Math.max(1,r*o/e.ticks().length);return f=>{let h=f/i(Math.round(a(f)));return h*r<r-.5&&(h*=r),h<=c?l(f):""}},e.nice=()=>n(nU(n(),{floor:o=>i(Math.floor(a(o))),ceil:o=>i(Math.ceil(a(o)))})),e}function rU(){const t=EN(wx()).domain([1,10]);return t.copy=()=>Op(t,rU()).base(t.base()),mi.apply(t,arguments),t}function S3(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function C3(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function NN(t){var e=1,n=t(S3(e),C3(e));return n.constant=function(r){return arguments.length?t(S3(e=+r),C3(e)):e},El(n)}function aU(){var t=NN(wx());return t.copy=function(){return Op(t,aU()).constant(t.constant())},mi.apply(t,arguments)}function k3(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function gse(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function vse(t){return t<0?-t*t:t*t}function IN(t){var e=t(Hr,Hr),n=1;function r(){return n===1?t(Hr,Hr):n===.5?t(gse,vse):t(k3(n),k3(1/n))}return e.exponent=function(a){return arguments.length?(n=+a,r()):n},El(e)}function AN(){var t=IN(wx());return t.copy=function(){return Op(t,AN()).exponent(t.exponent())},mi.apply(t,arguments),t}function yse(){return AN.apply(null,arguments).exponent(.5)}function E3(t){return Math.sign(t)*t*t}function xse(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function iU(){var t=SN(),e=[0,1],n=!1,r;function a(i){var s=xse(t(i));return isNaN(s)?r:n?Math.round(s):s}return a.invert=function(i){return t.invert(E3(i))},a.domain=function(i){return arguments.length?(t.domain(i),a):t.domain()},a.range=function(i){return arguments.length?(t.range((e=Array.from(i,J0)).map(E3)),a):e.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(n=!!i,a):n},a.clamp=function(i){return arguments.length?(t.clamp(i),a):t.clamp()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return iU(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},mi.apply(a,arguments),El(a)}function sU(){var t=[],e=[],n=[],r;function a(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=Cie(t,s/o);return i}function i(s){return s==null||isNaN(s=+s)?r:e[Tp(n,s)]}return i.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},i.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(ll),a()},i.range=function(s){return arguments.length?(e=Array.from(s),a()):e.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return sU().domain(t).range(e).unknown(r)},mi.apply(i,arguments)}function oU(){var t=0,e=1,n=1,r=[.5],a=[0,1],i;function s(l){return l!=null&&l<=l?a[Tp(r,l,0,n)]:i}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return s}return s.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},s.range=function(l){return arguments.length?(n=(a=Array.from(l)).length-1,o()):a.slice()},s.invertExtent=function(l){var c=a.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},s.unknown=function(l){return arguments.length&&(i=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return oU().domain([t,e]).range(a).unknown(i)},mi.apply(El(s),arguments)}function lU(){var t=[.5],e=[0,1],n,r=1;function a(i){return i!=null&&i<=i?e[Tp(t,i,0,r)]:n}return a.domain=function(i){return arguments.length?(t=Array.from(i),r=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(i){return arguments.length?(e=Array.from(i),r=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(i){var s=e.indexOf(i);return[t[s-1],t[s]]},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return lU().domain(t).range(e).unknown(n)},mi.apply(a,arguments)}const l2=new Date,u2=new Date;function Yn(t,e,n,r){function a(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(t(i=new Date(+i)),i),a.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),a.round=i=>{const s=a(i),o=a.ceil(i);return i-s<o-i?s:o},a.offset=(i,s)=>(e(i=new Date(+i),s==null?1:Math.floor(s)),i),a.range=(i,s,o)=>{const l=[];if(i=a.ceil(i),o=o==null?1:Math.floor(o),!(i<s)||!(o>0))return l;let c;do l.push(c=new Date(+i)),e(i,o),t(i);while(c<i&&i<s);return l},a.filter=i=>Yn(s=>{if(s>=s)for(;t(s),!i(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!i(s););else for(;--o>=0;)for(;e(s,1),!i(s););}),n&&(a.count=(i,s)=>(l2.setTime(+i),u2.setTime(+s),t(l2),t(u2),Math.floor(n(l2,u2))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(r?s=>r(s)%i===0:s=>a.count(0,s)%i===0):a)),a}const ty=Yn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);ty.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Yn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):ty);ty.range;const Js=1e3,ii=Js*60,eo=ii*60,uo=eo*24,TN=uo*7,N3=uo*30,c2=uo*365,pu=Yn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Js)},(t,e)=>(e-t)/Js,t=>t.getUTCSeconds());pu.range;const $N=Yn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Js)},(t,e)=>{t.setTime(+t+e*ii)},(t,e)=>(e-t)/ii,t=>t.getMinutes());$N.range;const ON=Yn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ii)},(t,e)=>(e-t)/ii,t=>t.getUTCMinutes());ON.range;const DN=Yn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Js-t.getMinutes()*ii)},(t,e)=>{t.setTime(+t+e*eo)},(t,e)=>(e-t)/eo,t=>t.getHours());DN.range;const RN=Yn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*eo)},(t,e)=>(e-t)/eo,t=>t.getUTCHours());RN.range;const Dp=Yn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ii)/uo,t=>t.getDate()-1);Dp.range;const Sx=Yn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/uo,t=>t.getUTCDate()-1);Sx.range;const uU=Yn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/uo,t=>Math.floor(t/uo));uU.range;function Yu(t){return Yn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ii)/TN)}const Cx=Yu(0),ny=Yu(1),bse=Yu(2),wse=Yu(3),Sd=Yu(4),Sse=Yu(5),Cse=Yu(6);Cx.range;ny.range;bse.range;wse.range;Sd.range;Sse.range;Cse.range;function Zu(t){return Yn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/TN)}const kx=Zu(0),ry=Zu(1),kse=Zu(2),Ese=Zu(3),Cd=Zu(4),Nse=Zu(5),Ise=Zu(6);kx.range;ry.range;kse.range;Ese.range;Cd.range;Nse.range;Ise.range;const _N=Yn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());_N.range;const MN=Yn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());MN.range;const co=Yn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());co.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Yn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});co.range;const fo=Yn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());fo.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Yn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});fo.range;function cU(t,e,n,r,a,i){const s=[[pu,1,Js],[pu,5,5*Js],[pu,15,15*Js],[pu,30,30*Js],[i,1,ii],[i,5,5*ii],[i,15,15*ii],[i,30,30*ii],[a,1,eo],[a,3,3*eo],[a,6,6*eo],[a,12,12*eo],[r,1,uo],[r,2,2*uo],[n,1,TN],[e,1,N3],[e,3,3*N3],[t,1,c2]];function o(c,f,h){const p=f<c;p&&([c,f]=[f,c]);const g=h&&typeof h.range=="function"?h:l(c,f,h),v=g?g.range(c,+f+1):[];return p?v.reverse():v}function l(c,f,h){const p=Math.abs(f-c)/h,g=gN(([,,b])=>b).right(s,p);if(g===s.length)return t.every(Rk(c/c2,f/c2,h));if(g===0)return ty.every(Math.max(Rk(c,f,h),1));const[v,x]=s[p/s[g-1][2]<s[g][2]/p?g-1:g];return v.every(x)}return[o,l]}const[Ase,Tse]=cU(fo,MN,kx,uU,RN,ON),[$se,Ose]=cU(co,_N,Cx,Dp,DN,$N);function d2(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function f2(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ch(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Dse(t){var e=t.dateTime,n=t.date,r=t.time,a=t.periods,i=t.days,s=t.shortDays,o=t.months,l=t.shortMonths,c=kh(a),f=Eh(a),h=kh(i),p=Eh(i),g=kh(s),v=Eh(s),x=kh(o),b=Eh(o),w=kh(l),S=Eh(l),k={a:V,A:U,b:Y,B:oe,c:null,d:D3,e:D3,f:toe,g:doe,G:hoe,H:Qse,I:Jse,j:eoe,L:dU,m:noe,M:roe,p:j,q,Q:M3,s:P3,S:aoe,u:ioe,U:soe,V:ooe,w:loe,W:uoe,x:null,X:null,y:coe,Y:foe,Z:poe,"%":_3},N={a:Z,A:se,b:pe,B:Se,c:null,d:R3,e:R3,f:yoe,g:Aoe,G:$oe,H:moe,I:goe,j:voe,L:hU,m:xoe,M:boe,p:be,q:Te,Q:M3,s:P3,S:woe,u:Soe,U:Coe,V:koe,w:Eoe,W:Noe,x:null,X:null,y:Ioe,Y:Toe,Z:Ooe,"%":_3},I={a:P,A:$,b:z,B:W,c:H,d:$3,e:$3,f:Kse,g:T3,G:A3,H:O3,I:O3,j:Wse,L:qse,m:Vse,M:Gse,p:M,q:Use,Q:Yse,s:Zse,S:Hse,u:Lse,U:zse,V:Fse,w:Pse,W:jse,x:G,X:F,y:T3,Y:A3,Z:Bse,"%":Xse};k.x=T(n,k),k.X=T(r,k),k.c=T(e,k),N.x=T(n,N),N.X=T(r,N),N.c=T(e,N);function T(ae,Ne){return function(Ie){var ye=[],Ze=-1,Be=0,Qe=ae.length,Ye,vt,At;for(Ie instanceof Date||(Ie=new Date(+Ie));++Ze<Qe;)ae.charCodeAt(Ze)===37&&(ye.push(ae.slice(Be,Ze)),(vt=I3[Ye=ae.charAt(++Ze)])!=null?Ye=ae.charAt(++Ze):vt=Ye==="e"?" ":"0",(At=Ne[Ye])&&(Ye=At(Ie,vt)),ye.push(Ye),Be=Ze+1);return ye.push(ae.slice(Be,Ze)),ye.join("")}}function R(ae,Ne){return function(Ie){var ye=Ch(1900,void 0,1),Ze=_(ye,ae,Ie+="",0),Be,Qe;if(Ze!=Ie.length)return null;if("Q"in ye)return new Date(ye.Q);if("s"in ye)return new Date(ye.s*1e3+("L"in ye?ye.L:0));if(Ne&&!("Z"in ye)&&(ye.Z=0),"p"in ye&&(ye.H=ye.H%12+ye.p*12),ye.m===void 0&&(ye.m="q"in ye?ye.q:0),"V"in ye){if(ye.V<1||ye.V>53)return null;"w"in ye||(ye.w=1),"Z"in ye?(Be=f2(Ch(ye.y,0,1)),Qe=Be.getUTCDay(),Be=Qe>4||Qe===0?ry.ceil(Be):ry(Be),Be=Sx.offset(Be,(ye.V-1)*7),ye.y=Be.getUTCFullYear(),ye.m=Be.getUTCMonth(),ye.d=Be.getUTCDate()+(ye.w+6)%7):(Be=d2(Ch(ye.y,0,1)),Qe=Be.getDay(),Be=Qe>4||Qe===0?ny.ceil(Be):ny(Be),Be=Dp.offset(Be,(ye.V-1)*7),ye.y=Be.getFullYear(),ye.m=Be.getMonth(),ye.d=Be.getDate()+(ye.w+6)%7)}else("W"in ye||"U"in ye)&&("w"in ye||(ye.w="u"in ye?ye.u%7:"W"in ye?1:0),Qe="Z"in ye?f2(Ch(ye.y,0,1)).getUTCDay():d2(Ch(ye.y,0,1)).getDay(),ye.m=0,ye.d="W"in ye?(ye.w+6)%7+ye.W*7-(Qe+5)%7:ye.w+ye.U*7-(Qe+6)%7);return"Z"in ye?(ye.H+=ye.Z/100|0,ye.M+=ye.Z%100,f2(ye)):d2(ye)}}function _(ae,Ne,Ie,ye){for(var Ze=0,Be=Ne.length,Qe=Ie.length,Ye,vt;Ze<Be;){if(ye>=Qe)return-1;if(Ye=Ne.charCodeAt(Ze++),Ye===37){if(Ye=Ne.charAt(Ze++),vt=I[Ye in I3?Ne.charAt(Ze++):Ye],!vt||(ye=vt(ae,Ie,ye))<0)return-1}else if(Ye!=Ie.charCodeAt(ye++))return-1}return ye}function M(ae,Ne,Ie){var ye=c.exec(Ne.slice(Ie));return ye?(ae.p=f.get(ye[0].toLowerCase()),Ie+ye[0].length):-1}function P(ae,Ne,Ie){var ye=g.exec(Ne.slice(Ie));return ye?(ae.w=v.get(ye[0].toLowerCase()),Ie+ye[0].length):-1}function $(ae,Ne,Ie){var ye=h.exec(Ne.slice(Ie));return ye?(ae.w=p.get(ye[0].toLowerCase()),Ie+ye[0].length):-1}function z(ae,Ne,Ie){var ye=w.exec(Ne.slice(Ie));return ye?(ae.m=S.get(ye[0].toLowerCase()),Ie+ye[0].length):-1}function W(ae,Ne,Ie){var ye=x.exec(Ne.slice(Ie));return ye?(ae.m=b.get(ye[0].toLowerCase()),Ie+ye[0].length):-1}function H(ae,Ne,Ie){return _(ae,e,Ne,Ie)}function G(ae,Ne,Ie){return _(ae,n,Ne,Ie)}function F(ae,Ne,Ie){return _(ae,r,Ne,Ie)}function V(ae){return s[ae.getDay()]}function U(ae){return i[ae.getDay()]}function Y(ae){return l[ae.getMonth()]}function oe(ae){return o[ae.getMonth()]}function j(ae){return a[+(ae.getHours()>=12)]}function q(ae){return 1+~~(ae.getMonth()/3)}function Z(ae){return s[ae.getUTCDay()]}function se(ae){return i[ae.getUTCDay()]}function pe(ae){return l[ae.getUTCMonth()]}function Se(ae){return o[ae.getUTCMonth()]}function be(ae){return a[+(ae.getUTCHours()>=12)]}function Te(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var Ne=T(ae+="",k);return Ne.toString=function(){return ae},Ne},parse:function(ae){var Ne=R(ae+="",!1);return Ne.toString=function(){return ae},Ne},utcFormat:function(ae){var Ne=T(ae+="",N);return Ne.toString=function(){return ae},Ne},utcParse:function(ae){var Ne=R(ae+="",!0);return Ne.toString=function(){return ae},Ne}}}var I3={"-":"",_:" ",0:"0"},ur=/^\s*\d+/,Rse=/^%/,_se=/[\\^$*+?|[\]().{}]/g;function Nt(t,e,n){var r=t<0?"-":"",a=(r?-t:t)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(e)+a:a)}function Mse(t){return t.replace(_se,"\\$&")}function kh(t){return new RegExp("^(?:"+t.map(Mse).join("|")+")","i")}function Eh(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Pse(t,e,n){var r=ur.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Lse(t,e,n){var r=ur.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function zse(t,e,n){var r=ur.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Fse(t,e,n){var r=ur.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function jse(t,e,n){var r=ur.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function A3(t,e,n){var r=ur.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function T3(t,e,n){var r=ur.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Bse(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Use(t,e,n){var r=ur.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Vse(t,e,n){var r=ur.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function $3(t,e,n){var r=ur.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Wse(t,e,n){var r=ur.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function O3(t,e,n){var r=ur.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Gse(t,e,n){var r=ur.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Hse(t,e,n){var r=ur.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function qse(t,e,n){var r=ur.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Kse(t,e,n){var r=ur.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Xse(t,e,n){var r=Rse.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Yse(t,e,n){var r=ur.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Zse(t,e,n){var r=ur.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function D3(t,e){return Nt(t.getDate(),e,2)}function Qse(t,e){return Nt(t.getHours(),e,2)}function Jse(t,e){return Nt(t.getHours()%12||12,e,2)}function eoe(t,e){return Nt(1+Dp.count(co(t),t),e,3)}function dU(t,e){return Nt(t.getMilliseconds(),e,3)}function toe(t,e){return dU(t,e)+"000"}function noe(t,e){return Nt(t.getMonth()+1,e,2)}function roe(t,e){return Nt(t.getMinutes(),e,2)}function aoe(t,e){return Nt(t.getSeconds(),e,2)}function ioe(t){var e=t.getDay();return e===0?7:e}function soe(t,e){return Nt(Cx.count(co(t)-1,t),e,2)}function fU(t){var e=t.getDay();return e>=4||e===0?Sd(t):Sd.ceil(t)}function ooe(t,e){return t=fU(t),Nt(Sd.count(co(t),t)+(co(t).getDay()===4),e,2)}function loe(t){return t.getDay()}function uoe(t,e){return Nt(ny.count(co(t)-1,t),e,2)}function coe(t,e){return Nt(t.getFullYear()%100,e,2)}function doe(t,e){return t=fU(t),Nt(t.getFullYear()%100,e,2)}function foe(t,e){return Nt(t.getFullYear()%1e4,e,4)}function hoe(t,e){var n=t.getDay();return t=n>=4||n===0?Sd(t):Sd.ceil(t),Nt(t.getFullYear()%1e4,e,4)}function poe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Nt(e/60|0,"0",2)+Nt(e%60,"0",2)}function R3(t,e){return Nt(t.getUTCDate(),e,2)}function moe(t,e){return Nt(t.getUTCHours(),e,2)}function goe(t,e){return Nt(t.getUTCHours()%12||12,e,2)}function voe(t,e){return Nt(1+Sx.count(fo(t),t),e,3)}function hU(t,e){return Nt(t.getUTCMilliseconds(),e,3)}function yoe(t,e){return hU(t,e)+"000"}function xoe(t,e){return Nt(t.getUTCMonth()+1,e,2)}function boe(t,e){return Nt(t.getUTCMinutes(),e,2)}function woe(t,e){return Nt(t.getUTCSeconds(),e,2)}function Soe(t){var e=t.getUTCDay();return e===0?7:e}function Coe(t,e){return Nt(kx.count(fo(t)-1,t),e,2)}function pU(t){var e=t.getUTCDay();return e>=4||e===0?Cd(t):Cd.ceil(t)}function koe(t,e){return t=pU(t),Nt(Cd.count(fo(t),t)+(fo(t).getUTCDay()===4),e,2)}function Eoe(t){return t.getUTCDay()}function Noe(t,e){return Nt(ry.count(fo(t)-1,t),e,2)}function Ioe(t,e){return Nt(t.getUTCFullYear()%100,e,2)}function Aoe(t,e){return t=pU(t),Nt(t.getUTCFullYear()%100,e,2)}function Toe(t,e){return Nt(t.getUTCFullYear()%1e4,e,4)}function $oe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Cd(t):Cd.ceil(t),Nt(t.getUTCFullYear()%1e4,e,4)}function Ooe(){return"+0000"}function _3(){return"%"}function M3(t){return+t}function P3(t){return Math.floor(+t/1e3)}var Yc,mU,gU;Doe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Doe(t){return Yc=Dse(t),mU=Yc.format,Yc.parse,gU=Yc.utcFormat,Yc.utcParse,Yc}function Roe(t){return new Date(t)}function _oe(t){return t instanceof Date?+t:+new Date(+t)}function PN(t,e,n,r,a,i,s,o,l,c){var f=SN(),h=f.invert,p=f.domain,g=c(".%L"),v=c(":%S"),x=c("%I:%M"),b=c("%I %p"),w=c("%a %d"),S=c("%b %d"),k=c("%B"),N=c("%Y");function I(T){return(l(T)<T?g:o(T)<T?v:s(T)<T?x:i(T)<T?b:r(T)<T?a(T)<T?w:S:n(T)<T?k:N)(T)}return f.invert=function(T){return new Date(h(T))},f.domain=function(T){return arguments.length?p(Array.from(T,_oe)):p().map(Roe)},f.ticks=function(T){var R=p();return t(R[0],R[R.length-1],T??10)},f.tickFormat=function(T,R){return R==null?I:c(R)},f.nice=function(T){var R=p();return(!T||typeof T.range!="function")&&(T=e(R[0],R[R.length-1],T??10)),T?p(nU(R,T)):f},f.copy=function(){return Op(f,PN(t,e,n,r,a,i,s,o,l,c))},f}function Moe(){return mi.apply(PN($se,Ose,co,_N,Cx,Dp,DN,$N,pu,mU).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Poe(){return mi.apply(PN(Ase,Tse,fo,MN,kx,Sx,RN,ON,pu,gU).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ex(){var t=0,e=1,n,r,a,i,s=Hr,o=!1,l;function c(h){return h==null||isNaN(h=+h)?l:s(a===0?.5:(h=(i(h)-n)*a,o?Math.max(0,Math.min(1,h)):h))}c.domain=function(h){return arguments.length?([t,e]=h,n=i(t=+t),r=i(e=+e),a=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(h){return arguments.length?(o=!!h,c):o},c.interpolator=function(h){return arguments.length?(s=h,c):s};function f(h){return function(p){var g,v;return arguments.length?([g,v]=p,s=h(g,v),c):[s(0),s(1)]}}return c.range=f(qd),c.rangeRound=f(wN),c.unknown=function(h){return arguments.length?(l=h,c):l},function(h){return i=h,n=h(t),r=h(e),a=n===r?0:1/(r-n),c}}function Nl(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function vU(){var t=El(Ex()(Hr));return t.copy=function(){return Nl(t,vU())},wo.apply(t,arguments)}function yU(){var t=EN(Ex()).domain([1,10]);return t.copy=function(){return Nl(t,yU()).base(t.base())},wo.apply(t,arguments)}function xU(){var t=NN(Ex());return t.copy=function(){return Nl(t,xU()).constant(t.constant())},wo.apply(t,arguments)}function LN(){var t=IN(Ex());return t.copy=function(){return Nl(t,LN()).exponent(t.exponent())},wo.apply(t,arguments)}function Loe(){return LN.apply(null,arguments).exponent(.5)}function bU(){var t=[],e=Hr;function n(r){if(r!=null&&!isNaN(r=+r))return e((Tp(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let a of r)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(ll),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,a)=>e(a/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(a,i)=>Sie(t,i/r))},n.copy=function(){return bU(e).domain(t)},wo.apply(n,arguments)}function Nx(){var t=0,e=.5,n=1,r=1,a,i,s,o,l,c=Hr,f,h=!1,p;function g(x){return isNaN(x=+x)?p:(x=.5+((x=+f(x))-i)*(r*x<r*i?o:l),c(h?Math.max(0,Math.min(1,x)):x))}g.domain=function(x){return arguments.length?([t,e,n]=x,a=f(t=+t),i=f(e=+e),s=f(n=+n),o=a===i?0:.5/(i-a),l=i===s?0:.5/(s-i),r=i<a?-1:1,g):[t,e,n]},g.clamp=function(x){return arguments.length?(h=!!x,g):h},g.interpolator=function(x){return arguments.length?(c=x,g):c};function v(x){return function(b){var w,S,k;return arguments.length?([w,S,k]=b,c=Xie(x,[w,S,k]),g):[c(0),c(.5),c(1)]}}return g.range=v(qd),g.rangeRound=v(wN),g.unknown=function(x){return arguments.length?(p=x,g):p},function(x){return f=x,a=x(t),i=x(e),s=x(n),o=a===i?0:.5/(i-a),l=i===s?0:.5/(s-i),r=i<a?-1:1,g}}function wU(){var t=El(Nx()(Hr));return t.copy=function(){return Nl(t,wU())},wo.apply(t,arguments)}function SU(){var t=EN(Nx()).domain([.1,1,10]);return t.copy=function(){return Nl(t,SU()).base(t.base())},wo.apply(t,arguments)}function CU(){var t=NN(Nx());return t.copy=function(){return Nl(t,CU()).constant(t.constant())},wo.apply(t,arguments)}function zN(){var t=IN(Nx());return t.copy=function(){return Nl(t,zN()).exponent(t.exponent())},wo.apply(t,arguments)}function zoe(){return zN.apply(null,arguments).exponent(.5)}const Dh=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:yN,scaleDiverging:wU,scaleDivergingLog:SU,scaleDivergingPow:zN,scaleDivergingSqrt:zoe,scaleDivergingSymlog:CU,scaleIdentity:tU,scaleImplicit:_k,scaleLinear:eU,scaleLog:rU,scaleOrdinal:vN,scalePoint:Eie,scalePow:AN,scaleQuantile:sU,scaleQuantize:oU,scaleRadial:iU,scaleSequential:vU,scaleSequentialLog:yU,scaleSequentialPow:LN,scaleSequentialQuantile:bU,scaleSequentialSqrt:Loe,scaleSequentialSymlog:xU,scaleSqrt:yse,scaleSymlog:aU,scaleThreshold:lU,scaleTime:Moe,scaleUtc:Poe,tickFormat:JB},Symbol.toStringTag,{value:"Module"}));var So=t=>t.chartData,kU=he([So],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),Ix=(t,e,n,r)=>r?kU(t):So(t),EU=(t,e,n)=>n?kU(t):So(t);function pl(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if($t(e)&&$t(n))return!0}return!1}function L3(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function NU(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,a,i;if($t(n))a=n;else if(typeof n=="function")return;if($t(r))i=r;else if(typeof r=="function")return;var s=[a,i];if(pl(s))return s}}function Foe(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(pl(r))return L3(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[a,i]=t,s,o;if(a==="auto")e!=null&&(s=Math.min(...e));else if(De(a))s=a;else if(typeof a=="function")try{e!=null&&(s=a(e==null?void 0:e[0]))}catch{}else if(typeof a=="string"&&YM.test(a)){var l=YM.exec(a);if(l==null||l[1]==null||e==null)s=void 0;else{var c=+l[1];s=e[0]-c}}else s=e==null?void 0:e[0];if(i==="auto")e!=null&&(o=Math.max(...e));else if(De(i))o=i;else if(typeof i=="function")try{e!=null&&(o=i(e==null?void 0:e[1]))}catch{}else if(typeof i=="string"&&ZM.test(i)){var f=ZM.exec(i);if(f==null||f[1]==null||e==null)o=void 0;else{var h=+f[1];o=e[1]+h}}else o=e==null?void 0:e[1];var p=[s,o];if(pl(p))return e==null?p:L3(p,e,n)}}}var Kd=1e9,joe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},jN,on=!0,ci="[DecimalError] ",wu=ci+"Invalid argument: ",FN=ci+"Exponent out of range: ",Xd=Math.floor,ou=Math.pow,Boe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ta,ir=1e7,en=7,IU=9007199254740991,ay=Xd(IU/en),Re={};Re.absoluteValue=Re.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Re.comparedTo=Re.cmp=function(t){var e,n,r,a,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(r=i.d.length,a=t.d.length,e=0,n=r<a?r:a;e<n;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return r===a?0:r>a^i.s<0?1:-1};Re.decimalPlaces=Re.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*en;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Re.dividedBy=Re.div=function(t){return ro(this,new this.constructor(t))};Re.dividedToIntegerBy=Re.idiv=function(t){var e=this,n=e.constructor;return Ht(ro(e,new n(t),0,1),n.precision)};Re.equals=Re.eq=function(t){return!this.cmp(t)};Re.exponent=function(){return zn(this)};Re.greaterThan=Re.gt=function(t){return this.cmp(t)>0};Re.greaterThanOrEqualTo=Re.gte=function(t){return this.cmp(t)>=0};Re.isInteger=Re.isint=function(){return this.e>this.d.length-2};Re.isNegative=Re.isneg=function(){return this.s<0};Re.isPositive=Re.ispos=function(){return this.s>0};Re.isZero=function(){return this.s===0};Re.lessThan=Re.lt=function(t){return this.cmp(t)<0};Re.lessThanOrEqualTo=Re.lte=function(t){return this.cmp(t)<1};Re.logarithm=Re.log=function(t){var e,n=this,r=n.constructor,a=r.precision,i=a+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Ta))throw Error(ci+"NaN");if(n.s<1)throw Error(ci+(n.s?"NaN":"-Infinity"));return n.eq(Ta)?new r(0):(on=!1,e=ro(np(n,i),np(t,i),i),on=!0,Ht(e,a))};Re.minus=Re.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?$U(e,t):AU(e,(t.s=-t.s,t))};Re.modulo=Re.mod=function(t){var e,n=this,r=n.constructor,a=r.precision;if(t=new r(t),!t.s)throw Error(ci+"NaN");return n.s?(on=!1,e=ro(n,t,0,1).times(t),on=!0,n.minus(e)):Ht(new r(n),a)};Re.naturalExponential=Re.exp=function(){return TU(this)};Re.naturalLogarithm=Re.ln=function(){return np(this)};Re.negated=Re.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Re.plus=Re.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?AU(e,t):$U(e,(t.s=-t.s,t))};Re.precision=Re.sd=function(t){var e,n,r,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(wu+t);if(e=zn(a)+1,r=a.d.length-1,n=r*en+1,r=a.d[r],r){for(;r%10==0;r/=10)n--;for(r=a.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Re.squareRoot=Re.sqrt=function(){var t,e,n,r,a,i,s,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(ci+"NaN")}for(t=zn(o),on=!1,a=Math.sqrt(+o),a==0||a==1/0?(e=as(o.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=Xd((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(a.toString()),n=l.precision,a=s=n+3;;)if(i=r,r=i.plus(ro(o,i,s+2)).times(.5),as(i.d).slice(0,s)===(e=as(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),a==s&&e=="4999"){if(Ht(i,n+1,0),i.times(i).eq(o)){r=i;break}}else if(e!="9999")break;s+=4}return on=!0,Ht(r,n)};Re.times=Re.mul=function(t){var e,n,r,a,i,s,o,l,c,f=this,h=f.constructor,p=f.d,g=(t=new h(t)).d;if(!f.s||!t.s)return new h(0);for(t.s*=f.s,n=f.e+t.e,l=p.length,c=g.length,l<c&&(i=p,p=g,g=i,s=l,l=c,c=s),i=[],s=l+c,r=s;r--;)i.push(0);for(r=c;--r>=0;){for(e=0,a=l+r;a>r;)o=i[a]+g[r]*p[a-r-1]+e,i[a--]=o%ir|0,e=o/ir|0;i[a]=(i[a]+e)%ir|0}for(;!i[--s];)i.pop();return e?++n:i.shift(),t.d=i,t.e=n,on?Ht(t,h.precision):t};Re.toDecimalPlaces=Re.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(ps(t,0,Kd),e===void 0?e=r.rounding:ps(e,0,8),Ht(n,t+zn(n)+1,e))};Re.toExponential=function(t,e){var n,r=this,a=r.constructor;return t===void 0?n=$u(r,!0):(ps(t,0,Kd),e===void 0?e=a.rounding:ps(e,0,8),r=Ht(new a(r),t+1,e),n=$u(r,!0,t+1)),n};Re.toFixed=function(t,e){var n,r,a=this,i=a.constructor;return t===void 0?$u(a):(ps(t,0,Kd),e===void 0?e=i.rounding:ps(e,0,8),r=Ht(new i(a),t+zn(a)+1,e),n=$u(r.abs(),!1,t+zn(r)+1),a.isneg()&&!a.isZero()?"-"+n:n)};Re.toInteger=Re.toint=function(){var t=this,e=t.constructor;return Ht(new e(t),zn(t)+1,e.rounding)};Re.toNumber=function(){return+this};Re.toPower=Re.pow=function(t){var e,n,r,a,i,s,o=this,l=o.constructor,c=12,f=+(t=new l(t));if(!t.s)return new l(Ta);if(o=new l(o),!o.s){if(t.s<1)throw Error(ci+"Infinity");return o}if(o.eq(Ta))return o;if(r=l.precision,t.eq(Ta))return Ht(o,r);if(e=t.e,n=t.d.length-1,s=e>=n,i=o.s,s){if((n=f<0?-f:f)<=IU){for(a=new l(Ta),e=Math.ceil(r/en+4),on=!1;n%2&&(a=a.times(o),F3(a.d,e)),n=Xd(n/2),n!==0;)o=o.times(o),F3(o.d,e);return on=!0,t.s<0?new l(Ta).div(a):Ht(a,r)}}else if(i<0)throw Error(ci+"NaN");return i=i<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,on=!1,a=t.times(np(o,r+c)),on=!0,a=TU(a),a.s=i,a};Re.toPrecision=function(t,e){var n,r,a=this,i=a.constructor;return t===void 0?(n=zn(a),r=$u(a,n<=i.toExpNeg||n>=i.toExpPos)):(ps(t,1,Kd),e===void 0?e=i.rounding:ps(e,0,8),a=Ht(new i(a),t,e),n=zn(a),r=$u(a,t<=n||n<=i.toExpNeg,t)),r};Re.toSignificantDigits=Re.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(ps(t,1,Kd),e===void 0?e=r.rounding:ps(e,0,8)),Ht(new r(n),t,e)};Re.toString=Re.valueOf=Re.val=Re.toJSON=Re[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=zn(t),n=t.constructor;return $u(t,e<=n.toExpNeg||e>=n.toExpPos)};function AU(t,e){var n,r,a,i,s,o,l,c,f=t.constructor,h=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),on?Ht(e,h):e;if(l=t.d,c=e.d,s=t.e,a=e.e,l=l.slice(),i=s-a,i){for(i<0?(r=l,i=-i,o=c.length):(r=c,a=s,o=l.length),s=Math.ceil(h/en),o=s>o?s+1:o+1,i>o&&(i=o,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(o=l.length,i=c.length,o-i<0&&(i=o,r=c,c=l,l=r),n=0;i;)n=(l[--i]=l[i]+c[i]+n)/ir|0,l[i]%=ir;for(n&&(l.unshift(n),++a),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=a,on?Ht(e,h):e}function ps(t,e,n){if(t!==~~t||t<e||t>n)throw Error(wu+t)}function as(t){var e,n,r,a=t.length-1,i="",s=t[0];if(a>0){for(i+=s,e=1;e<a;e++)r=t[e]+"",n=en-r.length,n&&(i+=Jo(n)),i+=r;s=t[e],r=s+"",n=en-r.length,n&&(i+=Jo(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return i+s}var ro=(function(){function t(r,a){var i,s=0,o=r.length;for(r=r.slice();o--;)i=r[o]*a+s,r[o]=i%ir|0,s=i/ir|0;return s&&r.unshift(s),r}function e(r,a,i,s){var o,l;if(i!=s)l=i>s?1:-1;else for(o=l=0;o<i;o++)if(r[o]!=a[o]){l=r[o]>a[o]?1:-1;break}return l}function n(r,a,i){for(var s=0;i--;)r[i]-=s,s=r[i]<a[i]?1:0,r[i]=s*ir+r[i]-a[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,a,i,s){var o,l,c,f,h,p,g,v,x,b,w,S,k,N,I,T,R,_,M=r.constructor,P=r.s==a.s?1:-1,$=r.d,z=a.d;if(!r.s)return new M(r);if(!a.s)throw Error(ci+"Division by zero");for(l=r.e-a.e,R=z.length,I=$.length,g=new M(P),v=g.d=[],c=0;z[c]==($[c]||0);)++c;if(z[c]>($[c]||0)&&--l,i==null?S=i=M.precision:s?S=i+(zn(r)-zn(a))+1:S=i,S<0)return new M(0);if(S=S/en+2|0,c=0,R==1)for(f=0,z=z[0],S++;(c<I||f)&&S--;c++)k=f*ir+($[c]||0),v[c]=k/z|0,f=k%z|0;else{for(f=ir/(z[0]+1)|0,f>1&&(z=t(z,f),$=t($,f),R=z.length,I=$.length),N=R,x=$.slice(0,R),b=x.length;b<R;)x[b++]=0;_=z.slice(),_.unshift(0),T=z[0],z[1]>=ir/2&&++T;do f=0,o=e(z,x,R,b),o<0?(w=x[0],R!=b&&(w=w*ir+(x[1]||0)),f=w/T|0,f>1?(f>=ir&&(f=ir-1),h=t(z,f),p=h.length,b=x.length,o=e(h,x,p,b),o==1&&(f--,n(h,R<p?_:z,p))):(f==0&&(o=f=1),h=z.slice()),p=h.length,p<b&&h.unshift(0),n(x,h,b),o==-1&&(b=x.length,o=e(z,x,R,b),o<1&&(f++,n(x,R<b?_:z,b))),b=x.length):o===0&&(f++,x=[0]),v[c++]=f,o&&x[0]?x[b++]=$[N]||0:(x=[$[N]],b=1);while((N++<I||x[0]!==void 0)&&S--)}return v[0]||v.shift(),g.e=l,Ht(g,s?i+zn(g)+1:i)}})();function TU(t,e){var n,r,a,i,s,o,l=0,c=0,f=t.constructor,h=f.precision;if(zn(t)>16)throw Error(FN+zn(t));if(!t.s)return new f(Ta);for(on=!1,o=h,s=new f(.03125);t.abs().gte(.1);)t=t.times(s),c+=5;for(r=Math.log(ou(2,c))/Math.LN10*2+5|0,o+=r,n=a=i=new f(Ta),f.precision=o;;){if(a=Ht(a.times(t),o),n=n.times(++l),s=i.plus(ro(a,n,o)),as(s.d).slice(0,o)===as(i.d).slice(0,o)){for(;c--;)i=Ht(i.times(i),o);return f.precision=h,e==null?(on=!0,Ht(i,h)):i}i=s}}function zn(t){for(var e=t.e*en,n=t.d[0];n>=10;n/=10)e++;return e}function h2(t,e,n){if(e>t.LN10.sd())throw on=!0,n&&(t.precision=n),Error(ci+"LN10 precision limit exceeded");return Ht(new t(t.LN10),e)}function Jo(t){for(var e="";t--;)e+="0";return e}function np(t,e){var n,r,a,i,s,o,l,c,f,h=1,p=10,g=t,v=g.d,x=g.constructor,b=x.precision;if(g.s<1)throw Error(ci+(g.s?"NaN":"-Infinity"));if(g.eq(Ta))return new x(0);if(e==null?(on=!1,c=b):c=e,g.eq(10))return e==null&&(on=!0),h2(x,c);if(c+=p,x.precision=c,n=as(v),r=n.charAt(0),i=zn(g),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)g=g.times(t),n=as(g.d),r=n.charAt(0),h++;i=zn(g),r>1?(g=new x("0."+n),i++):g=new x(r+"."+n.slice(1))}else return l=h2(x,c+2,b).times(i+""),g=np(new x(r+"."+n.slice(1)),c-p).plus(l),x.precision=b,e==null?(on=!0,Ht(g,b)):g;for(o=s=g=ro(g.minus(Ta),g.plus(Ta),c),f=Ht(g.times(g),c),a=3;;){if(s=Ht(s.times(f),c),l=o.plus(ro(s,new x(a),c)),as(l.d).slice(0,c)===as(o.d).slice(0,c))return o=o.times(2),i!==0&&(o=o.plus(h2(x,c+2,b).times(i+""))),o=ro(o,new x(h),c),x.precision=b,e==null?(on=!0,Ht(o,b)):o;o=l,a+=2}}function z3(t,e){var n,r,a;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(r,a),e){if(a-=r,n=n-r-1,t.e=Xd(n/en),t.d=[],r=(n+1)%en,n<0&&(r+=en),r<a){for(r&&t.d.push(+e.slice(0,r)),a-=en;r<a;)t.d.push(+e.slice(r,r+=en));e=e.slice(r),r=en-e.length}else r-=a;for(;r--;)e+="0";if(t.d.push(+e),on&&(t.e>ay||t.e<-ay))throw Error(FN+n)}else t.s=0,t.e=0,t.d=[0];return t}function Ht(t,e,n){var r,a,i,s,o,l,c,f,h=t.d;for(s=1,i=h[0];i>=10;i/=10)s++;if(r=e-s,r<0)r+=en,a=e,c=h[f=0];else{if(f=Math.ceil((r+1)/en),i=h.length,f>=i)return t;for(c=i=h[f],s=1;i>=10;i/=10)s++;r%=en,a=r-en+s}if(n!==void 0&&(i=ou(10,s-a-1),o=c/i%10|0,l=e<0||h[f+1]!==void 0||c%i,l=n<4?(o||l)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||l||n==6&&(r>0?a>0?c/ou(10,s-a):0:h[f-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return l?(i=zn(t),h.length=1,e=e-i-1,h[0]=ou(10,(en-e%en)%en),t.e=Xd(-e/en)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=f,i=1,f--):(h.length=f+1,i=ou(10,en-r),h[f]=a>0?(c/ou(10,s-a)%ou(10,a)|0)*i:0),l)for(;;)if(f==0){(h[0]+=i)==ir&&(h[0]=1,++t.e);break}else{if(h[f]+=i,h[f]!=ir)break;h[f--]=0,i=1}for(r=h.length;h[--r]===0;)h.pop();if(on&&(t.e>ay||t.e<-ay))throw Error(FN+zn(t));return t}function $U(t,e){var n,r,a,i,s,o,l,c,f,h,p=t.constructor,g=p.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new p(t),on?Ht(e,g):e;if(l=t.d,h=e.d,r=e.e,c=t.e,l=l.slice(),s=c-r,s){for(f=s<0,f?(n=l,s=-s,o=h.length):(n=h,r=c,o=l.length),a=Math.max(Math.ceil(g/en),o)+2,s>a&&(s=a,n.length=1),n.reverse(),a=s;a--;)n.push(0);n.reverse()}else{for(a=l.length,o=h.length,f=a<o,f&&(o=a),a=0;a<o;a++)if(l[a]!=h[a]){f=l[a]<h[a];break}s=0}for(f&&(n=l,l=h,h=n,e.s=-e.s),o=l.length,a=h.length-o;a>0;--a)l[o++]=0;for(a=h.length;a>s;){if(l[--a]<h[a]){for(i=a;i&&l[--i]===0;)l[i]=ir-1;--l[i],l[a]+=ir}l[a]-=h[a]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,on?Ht(e,g):e):new p(0)}function $u(t,e,n){var r,a=zn(t),i=as(t.d),s=i.length;return e?(n&&(r=n-s)>0?i=i.charAt(0)+"."+i.slice(1)+Jo(r):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Jo(-a-1)+i,n&&(r=n-s)>0&&(i+=Jo(r))):a>=s?(i+=Jo(a+1-s),n&&(r=n-a-1)>0&&(i=i+"."+Jo(r))):((r=a+1)<s&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-s)>0&&(a+1===s&&(i+="."),i+=Jo(r))),t.s<0?"-"+i:i}function F3(t,e){if(t.length>e)return t.length=e,!0}function OU(t){var e,n,r;function a(i){var s=this;if(!(s instanceof a))return new a(i);if(s.constructor=a,i instanceof a){s.s=i.s,s.e=i.e,s.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(wu+i);if(i>0)s.s=1;else if(i<0)i=-i,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(i===~~i&&i<1e7){s.e=0,s.d=[i];return}return z3(s,i.toString())}else if(typeof i!="string")throw Error(wu+i);if(i.charCodeAt(0)===45?(i=i.slice(1),s.s=-1):s.s=1,Boe.test(i))z3(s,i);else throw Error(wu+i)}if(a.prototype=Re,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=OU,a.config=a.set=Uoe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return a.config(t),a}function Uoe(t){if(!t||typeof t!="object")throw Error(ci+"Object expected");var e,n,r,a=["precision",1,Kd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((r=t[n=a[e]])!==void 0)if(Xd(r)===r&&r>=a[e+1]&&r<=a[e+2])this[n]=r;else throw Error(wu+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(wu+n+": "+r);return this}var jN=OU(joe);Ta=new jN(1);const Pt=jN;var Voe=t=>t,DU={},RU=t=>t===DU,j3=t=>function e(){return arguments.length===0||arguments.length===1&&RU(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},_U=(t,e)=>t===1?e:j3(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i=r.filter(s=>s!==DU).length;return i>=t?e(...r):_U(t-i,j3(function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];var c=r.map(f=>RU(f)?o.shift():f);return e(...c,...o)}))}),Woe=t=>_U(t.length,t),zk=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},Goe=Woe((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),Hoe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Voe;var a=n.reverse(),i=a[0],s=a.slice(1);return function(){return s.reduce((o,l)=>l(o),i(...arguments))}};function MU(t){var e;return t===0?e=1:e=Math.floor(new Pt(t).abs().log(10).toNumber())+1,e}function PU(t,e,n){for(var r=new Pt(t),a=0,i=[];r.lt(e)&&a<1e5;)i.push(r.toNumber()),r=r.add(n),a++;return i}var LU=t=>{var[e,n]=t,[r,a]=[e,n];return e>n&&([r,a]=[n,e]),[r,a]},zU=(t,e,n)=>{if(t.lte(0))return new Pt(0);var r=MU(t.toNumber()),a=new Pt(10).pow(r),i=t.div(a),s=r!==1?.05:.1,o=new Pt(Math.ceil(i.div(s).toNumber())).add(n).mul(s),l=o.mul(a);return e?new Pt(l.toNumber()):new Pt(Math.ceil(l.toNumber()))},qoe=(t,e,n)=>{var r=new Pt(1),a=new Pt(t);if(!a.isint()&&n){var i=Math.abs(t);i<1?(r=new Pt(10).pow(MU(t)-1),a=new Pt(Math.floor(a.div(r).toNumber())).mul(r)):i>1&&(a=new Pt(Math.floor(t)))}else t===0?a=new Pt(Math.floor((e-1)/2)):n||(a=new Pt(Math.floor(t)));var s=Math.floor((e-1)/2),o=Hoe(Goe(l=>a.add(new Pt(l-s).mul(r)).toNumber()),zk);return o(0,e)},FU=function(e,n,r,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new Pt(0),tickMin:new Pt(0),tickMax:new Pt(0)};var s=zU(new Pt(n).sub(e).div(r-1),a,i),o;e<=0&&n>=0?o=new Pt(0):(o=new Pt(e).add(n).div(2),o=o.sub(new Pt(o).mod(s)));var l=Math.ceil(o.sub(e).div(s).toNumber()),c=Math.ceil(new Pt(n).sub(o).div(s).toNumber()),f=l+c+1;return f>r?FU(e,n,r,a,i+1):(f<r&&(c=n>0?c+(r-f):c,l=n>0?l:l+(r-f)),{step:s,tickMin:o.sub(new Pt(l).mul(s)),tickMax:o.add(new Pt(c).mul(s))})},Koe=function(e){var[n,r]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(a,2),[o,l]=LU([n,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...zk(0,a-1).map(()=>1/0)]:[...zk(0,a-1).map(()=>-1/0),l];return n>r?c.reverse():c}if(o===l)return qoe(o,a,i);var{step:f,tickMin:h,tickMax:p}=FU(o,l,s,i,0),g=PU(h,p.add(new Pt(.1).mul(f)),f);return n>r?g.reverse():g},Xoe=function(e,n){var[r,a]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=LU([r,a]);if(s===-1/0||o===1/0)return[r,a];if(s===o)return[s];var l=Math.max(n,2),c=zU(new Pt(o).sub(s).div(l-1),i,0),f=[...PU(new Pt(s),new Pt(o),c),o];return i===!1&&(f=f.map(h=>Math.round(h))),r>a?f.reverse():f},jU=t=>t.rootProps.maxBarSize,Yoe=t=>t.rootProps.barGap,BU=t=>t.rootProps.barCategoryGap,Zoe=t=>t.rootProps.barSize,Ax=t=>t.rootProps.stackOffset,UU=t=>t.rootProps.reverseStackOrder,BN=t=>t.options.chartName,UN=t=>t.rootProps.syncId,VU=t=>t.rootProps.syncMethod,VN=t=>t.options.eventEmitter,Qoe=t=>t.rootProps.baseValue,mn={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Ys={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Aa={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Tx=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},Joe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ys.angleAxisId,includeHidden:!1,name:void 0,reversed:Ys.reversed,scale:Ys.scale,tick:Ys.tick,tickCount:void 0,ticks:void 0,type:Ys.type,unit:void 0},ele={allowDataOverflow:Aa.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Aa.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Aa.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Aa.scale,tick:Aa.tick,tickCount:Aa.tickCount,ticks:void 0,type:Aa.type,unit:void 0},tle={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ys.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ys.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ys.scale,tick:Ys.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},nle={allowDataOverflow:Aa.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Aa.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Aa.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Aa.scale,tick:Aa.tick,tickCount:Aa.tickCount,ticks:void 0,type:"category",unit:void 0},WN=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?tle:Joe,GN=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?nle:ele,$x=t=>t.polarOptions,HN=he([xo,bo,lr],Yae),WU=he([$x,HN],(t,e)=>{if(t!=null)return Li(t.innerRadius,e,0)}),GU=he([$x,HN],(t,e)=>{if(t!=null)return Li(t.outerRadius,e,e*.8)}),rle=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},HU=he([$x],rle);he([WN,HU],Tx);var qU=he([HN,WU,GU],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});he([GN,qU],Tx);var KU=he([xt,$x,WU,GU,xo,bo],(t,e,n,r,a,i)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:s,cy:o,startAngle:l,endAngle:c}=e;return{cx:Li(s,a,a/2),cy:Li(o,i,i/2),innerRadius:n,outerRadius:r,startAngle:l,endAngle:c,clockWise:!1}}}),Zn=(t,e)=>e,Ox=(t,e,n)=>n;function Dx(t){return t==null?void 0:t.id}function XU(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:a,dataKey:i}=n,s=new Map;return t.forEach(o=>{var l,c=(l=o.data)!==null&&l!==void 0?l:r;if(!(c==null||c.length===0)){var f=Dx(o);c.forEach((h,p)=>{var g=i==null||a?p:String(Yt(h,i,null)),v=Yt(h,o.dataKey,0),x;s.has(g)?x=s.get(g):x={},Object.assign(x,{[f]:v}),s.set(g,x)})}}),Array.from(s.values())}function Rx(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var _x=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function Mx(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function ale(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var Qn=t=>{var e=xt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Yd=t=>t.tooltip.settings.axisId;function B3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function iy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B3(Object(n),!0).forEach(function(r){ile(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ile(t,e,n){return(e=sle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sle(t){var e=ole(t,"string");return typeof e=="symbol"?e:e+""}function ole(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fk=[0,"auto"],rr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},YU=(t,e)=>t.cartesianAxis.xAxis[e],Ss=(t,e)=>{var n=YU(t,e);return n??rr},ar={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Fk,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Np},ZU=(t,e)=>t.cartesianAxis.yAxis[e],Cs=(t,e)=>{var n=ZU(t,e);return n??ar},QU={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},qN=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??QU},Qr=(t,e,n)=>{switch(e){case"xAxis":return Ss(t,n);case"yAxis":return Cs(t,n);case"zAxis":return qN(t,n);case"angleAxis":return WN(t,n);case"radiusAxis":return GN(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},lle=(t,e,n)=>{switch(e){case"xAxis":return Ss(t,n);case"yAxis":return Cs(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Rp=(t,e,n)=>{switch(e){case"xAxis":return Ss(t,n);case"yAxis":return Cs(t,n);case"angleAxis":return WN(t,n);case"radiusAxis":return GN(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},JU=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function e5(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var Zd=t=>t.graphicalItems.cartesianItems,ule=he([Zn,Ox],e5),t5=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),_p=he([Zd,Qr,ule],t5,{memoizeOptions:{resultEqualityCheck:Mx}}),n5=he([_p],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(Rx)),r5=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),cle=he([_p],r5),a5=t=>t.map(e=>e.data).filter(Boolean).flat(1),dle=he([_p],a5,{memoizeOptions:{resultEqualityCheck:Mx}}),i5=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:a}=e;return t.length>0?t:n.slice(r,a+1)},KN=he([dle,Ix],i5),s5=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Yt(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(a=>({value:Yt(a,r)}))):t.map(r=>({value:r})),Px=he([KN,Qr,_p],s5);function o5(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function f0(t){if(li(t)||t instanceof Date){var e=Number(t);if($t(e))return e}}function U3(t){if(Array.isArray(t)){var e=[f0(t[0]),f0(t[1])];return pl(e)?e:void 0}var n=f0(t);if(n!=null)return[n,n]}function ho(t){return t.map(f0).filter(Cee)}function fle(t,e,n){return!n||typeof e!="number"||ha(e)?[]:n.length?ho(n.flatMap(r=>{var a=Yt(t,r.dataKey),i,s;if(Array.isArray(a)?[i,s]=a:i=s=a,!(!$t(i)||!$t(s)))return[e-i,e+s]})):[]}var Jn=t=>{var e=Qn(t),n=Yd(t);return Rp(t,e,n)},Mp=he([Jn],t=>t==null?void 0:t.dataKey),hle=he([n5,Ix,Jn],XU),l5=(t,e,n,r)=>{var a={},i=e.reduce((s,o)=>{if(o.stackId==null)return s;var l=s[o.stackId];return l==null&&(l=[]),l.push(o),s[o.stackId]=l,s},a);return Object.fromEntries(Object.entries(i).map(s=>{var[o,l]=s,c=r?[...l].reverse():l,f=c.map(Dx);return[o,{stackedData:Vne(t,f,n),graphicalItems:c}]}))},sy=he([hle,n5,Ax,UU],l5),u5=(t,e,n,r)=>{var{dataStartIndex:a,dataEndIndex:i}=e;if(r==null&&n!=="zAxis"){var s=qne(t,a,i);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},ple=he([Qr],t=>t.allowDataOverflow),XN=t=>{var e;if(t==null||!("domain"in t))return Fk;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=ho(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:Fk},c5=he([Qr],XN),d5=he([c5,ple],NU),mle=he([sy,So,Zn,d5],u5,{memoizeOptions:{resultEqualityCheck:_x}}),YN=t=>t.errorBars,gle=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>o5(n,r)),oy=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=n.filter(Boolean);if(a.length!==0){var i=a.flat(),s=Math.min(...i),o=Math.max(...i);return[s,o]}},f5=(t,e,n,r,a)=>{var i,s;if(n.length>0&&t.forEach(o=>{n.forEach(l=>{var c,f,h=(c=r[l.id])===null||c===void 0?void 0:c.filter(w=>o5(a,w)),p=Yt(o,(f=e.dataKey)!==null&&f!==void 0?f:l.dataKey),g=fle(o,p,h);if(g.length>=2){var v=Math.min(...g),x=Math.max(...g);(i==null||v<i)&&(i=v),(s==null||x>s)&&(s=x)}var b=U3(p);b!=null&&(i=i==null?b[0]:Math.min(i,b[0]),s=s==null?b[1]:Math.max(s,b[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(o=>{var l=U3(Yt(o,e.dataKey));l!=null&&(i=i==null?l[0]:Math.min(i,l[0]),s=s==null?l[1]:Math.max(s,l[1]))}),$t(i)&&$t(s))return[i,s]},vle=he([KN,Qr,cle,YN,Zn],f5,{memoizeOptions:{resultEqualityCheck:_x}});function yle(t){var{value:e}=t;if(li(e)||e instanceof Date)return e}var xle=(t,e,n)=>{var r=t.map(yle).filter(a=>a!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&wj(r))?VB(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},h5=t=>t.referenceElements.dots,Qd=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),ble=he([h5,Zn,Ox],Qd),p5=t=>t.referenceElements.areas,wle=he([p5,Zn,Ox],Qd),m5=t=>t.referenceElements.lines,Sle=he([m5,Zn,Ox],Qd),g5=(t,e)=>{if(t!=null){var n=ho(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Cle=he(ble,Zn,g5),v5=(t,e)=>{if(t!=null){var n=ho(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},kle=he([wle,Zn],v5);function Ele(t){var e;if(t.x!=null)return ho([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:ho(n)}function Nle(t){var e;if(t.y!=null)return ho([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:ho(n)}var y5=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?Ele(r):Nle(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Ile=he([Sle,Zn],y5),Ale=he(Cle,Ile,kle,(t,e,n)=>oy(t,n,e)),x5=(t,e,n,r,a,i,s,o)=>{if(n!=null)return n;var l=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",c=l?oy(r,i,a):oy(i,a);return Foe(e,c,t.allowDataOverflow)},Tle=he([Qr,c5,d5,mle,vle,Ale,xt,Zn],x5,{memoizeOptions:{resultEqualityCheck:_x}}),$le=[0,1],b5=(t,e,n,r,a,i,s)=>{if(!((t==null||n==null||n.length===0)&&s===void 0)){var{dataKey:o,type:l}=t,c=ws(e,i);if(c&&o==null){var f;return VB(0,(f=n==null?void 0:n.length)!==null&&f!==void 0?f:0)}return l==="category"?xle(r,t,c):a==="expand"?$le:s}},ZN=he([Qr,xt,KN,Px,Ax,Zn,Tle],b5),w5=(t,e,n,r,a)=>{if(t!=null){var{scale:i,type:s}=t;if(i==="auto")return e==="radial"&&a==="radiusAxis"?"band":e==="radial"&&a==="angleAxis"?"linear":s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":s==="category"?"band":"linear";if(typeof i=="string"){var o="scale".concat(Sp(i));return o in Dh?o:"point"}}},Pp=he([Qr,xt,JU,BN,Zn],w5);function Ole(t){if(t!=null){if(t in Dh)return Dh[t]();var e="scale".concat(Sp(t));if(e in Dh)return Dh[e]()}}function QN(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var a=Ole(e);if(a!=null){var i=a.domain(n).range(r);return zne(i),i}}}var S5=(t,e,n)=>{var r=XN(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&pl(t))return Koe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&pl(t))return Xoe(t,e.tickCount,e.allowDecimals)}},JN=he([ZN,Rp,Pp],S5),C5=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&pl(e)&&Array.isArray(n)&&n.length>0){var a=e[0],i=n[0],s=e[1],o=n[n.length-1];return[Math.min(a,i),Math.max(s,o)]}return e},Dle=he([Qr,ZN,JN,Zn],C5),Rle=he(Px,Qr,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(ho(t.map(h=>h.value))).sort((h,p)=>h-p),a=r[0],i=r[r.length-1];if(a==null||i==null)return 1/0;var s=i-a;if(s===0)return 1/0;for(var o=0;o<r.length-1;o++){var l=r[o],c=r[o+1];if(!(l==null||c==null)){var f=c-l;n=Math.min(n,f)}}return n/s}}),k5=he(Rle,xt,BU,lr,(t,e,n,r,a)=>a,(t,e,n,r,a)=>{if(!$t(t))return 0;var i=e==="vertical"?r.height:r.width;if(a==="gap")return t*i/2;if(a==="no-gap"){var s=Li(n,t*i),o=t*i/2;return o-s-(o-s)/i*s}return 0}),_le=(t,e,n)=>{var r=Ss(t,e);return r==null||typeof r.padding!="string"?0:k5(t,"xAxis",e,n,r.padding)},Mle=(t,e,n)=>{var r=Cs(t,e);return r==null||typeof r.padding!="string"?0:k5(t,"yAxis",e,n,r.padding)},Ple=he(Ss,_le,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:a}=t;return typeof a=="string"?{left:e,right:e}:{left:((n=a.left)!==null&&n!==void 0?n:0)+e,right:((r=a.right)!==null&&r!==void 0?r:0)+e}}),Lle=he(Cs,Mle,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:a}=t;return typeof a=="string"?{top:e,bottom:e}:{top:((n=a.top)!==null&&n!==void 0?n:0)+e,bottom:((r=a.bottom)!==null&&r!==void 0?r:0)+e}}),zle=he([lr,Ple,gx,mx,(t,e,n)=>n],(t,e,n,r,a)=>{var{padding:i}=r;return a?[i.left,n.width-i.right]:[t.left+e.left,t.left+t.width-e.right]}),Fle=he([lr,xt,Lle,gx,mx,(t,e,n)=>n],(t,e,n,r,a,i)=>{var{padding:s}=a;return i?[r.height-s.bottom,s.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),Lp=(t,e,n,r)=>{var a;switch(e){case"xAxis":return zle(t,n,r);case"yAxis":return Fle(t,n,r);case"zAxis":return(a=qN(t,n))===null||a===void 0?void 0:a.range;case"angleAxis":return HU(t);case"radiusAxis":return qU(t,n);default:return}},E5=he([Qr,Lp],Tx),kd=he([Qr,Pp,Dle,E5],QN);he([_p,YN,Zn],gle);function N5(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var Lx=(t,e)=>e,zx=(t,e,n)=>n,jle=he(hx,Lx,zx,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(N5)),Ble=he(px,Lx,zx,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(N5)),I5=(t,e)=>({width:t.width,height:e.height}),Ule=(t,e)=>{var n=typeof e.width=="number"?e.width:Np;return{width:n,height:t.height}},A5=he(lr,Ss,I5),Vle=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},Wle=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},Gle=he(bo,lr,jle,Lx,zx,(t,e,n,r,a)=>{var i={},s;return n.forEach(o=>{var l=I5(e,o);s==null&&(s=Vle(e,r,t));var c=r==="top"&&!a||r==="bottom"&&a;i[o.id]=s-Number(c)*l.height,s+=(c?-1:1)*l.height}),i}),Hle=he(xo,lr,Ble,Lx,zx,(t,e,n,r,a)=>{var i={},s;return n.forEach(o=>{var l=Ule(e,o);s==null&&(s=Wle(e,r,t));var c=r==="left"&&!a||r==="right"&&a;i[o.id]=s-Number(c)*l.width,s+=(c?-1:1)*l.width}),i}),qle=(t,e)=>{var n=Ss(t,e);if(n!=null)return Gle(t,n.orientation,n.mirror)},Kle=he([lr,Ss,qle,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var a=n==null?void 0:n[r];return a==null?{x:t.left,y:0}:{x:t.left,y:a}}}),Xle=(t,e)=>{var n=Cs(t,e);if(n!=null)return Hle(t,n.orientation,n.mirror)},Yle=he([lr,Cs,Xle,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var a=n==null?void 0:n[r];return a==null?{x:0,y:t.top}:{x:a,y:t.top}}}),T5=he(lr,Cs,(t,e)=>{var n=typeof e.width=="number"?e.width:Np;return{width:n,height:t.height}}),V3=(t,e,n)=>{switch(e){case"xAxis":return A5(t,n).width;case"yAxis":return T5(t,n).height;default:return}},$5=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:a,type:i,dataKey:s}=n,o=ws(t,r),l=e.map(c=>c.value);if(s&&o&&i==="category"&&a&&wj(l))return l}},eI=he([xt,Px,Qr,Zn],$5),O5=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:a,scale:i}=n,s=ws(t,r);if(s&&(a==="number"||i!=="auto"))return e.map(o=>o.value)}},tI=he([xt,Px,Rp,Zn],O5),W3=he([xt,lle,Pp,kd,eI,tI,Lp,JN,Zn],(t,e,n,r,a,i,s,o,l)=>{if(e!=null){var c=ws(t,l);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:l,categoricalDomain:i,duplicateDomain:a,isCategorical:c,niceTicks:o,range:s,realScaleType:n,scale:r}}}),Zle=(t,e,n,r,a,i,s,o,l)=>{if(!(e==null||r==null)){var c=ws(t,l),{type:f,ticks:h,tickCount:p}=e,g=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,v=f==="category"&&r.bandwidth?r.bandwidth()/g:0;v=l==="angleAxis"&&i!=null&&i.length>=2?ua(i[0]-i[1])*2*v:v;var x=h||a;if(x){var b=x.map((w,S)=>{var k=s?s.indexOf(w):w;return{index:S,coordinate:r(k)+v,value:w,offset:v}});return b.filter(w=>$t(w.coordinate))}return c&&o?o.map((w,S)=>({coordinate:r(w)+v,value:w,index:S,offset:v})).filter(w=>$t(w.coordinate)):r.ticks?r.ticks(p).map(w=>({coordinate:r(w)+v,value:w,offset:v})):r.domain().map((w,S)=>({coordinate:r(w)+v,value:s?s[w]:w,index:S,offset:v}))}},D5=he([xt,Rp,Pp,kd,JN,Lp,eI,tI,Zn],Zle),Qle=(t,e,n,r,a,i,s)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var o=ws(t,s),{tickCount:l}=e,c=0;return c=s==="angleAxis"&&(r==null?void 0:r.length)>=2?ua(r[0]-r[1])*2*c:c,o&&i?i.map((f,h)=>({coordinate:n(f)+c,value:f,index:h,offset:c})):n.ticks?n.ticks(l).map(f=>({coordinate:n(f)+c,value:f,offset:c})):n.domain().map((f,h)=>({coordinate:n(f)+c,value:a?a[f]:f,index:h,offset:c}))}},di=he([xt,Rp,kd,Lp,eI,tI,Zn],Qle),fi=he(Qr,kd,(t,e)=>{if(!(t==null||e==null))return iy(iy({},t),{},{scale:e})}),Jle=he([Qr,Pp,ZN,E5],QN),eue=he((t,e,n)=>qN(t,n),Jle,(t,e)=>{if(!(t==null||e==null))return iy(iy({},t),{},{scale:e})}),tue=he([xt,hx,px],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),R5=t=>t.options.defaultTooltipEventType,_5=t=>t.options.validateTooltipEventTypes;function M5(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function nI(t,e){var n=R5(t),r=_5(t);return M5(e,n,r)}function nue(t){return Fe(e=>nI(e,t))}var P5=(t,e)=>{var n,r=Number(e);if(!(ha(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},rue=t=>t.tooltip.settings,rl={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},aue={itemInteraction:{click:rl,hover:rl},axisInteraction:{click:rl,hover:rl},keyboardInteraction:rl,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},L5=va({name:"tooltip",initialState:aue,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:sn()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,a=Ri(t).tooltipItemPayloads.indexOf(n);a>-1&&(t.tooltipItemPayloads[a]=r)},prepare:sn()},removeTooltipEntrySettings:{reducer(t,e){var n=Ri(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:sn()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:iue,replaceTooltipEntrySettings:sue,removeTooltipEntrySettings:oue,setTooltipSettingsState:lue,setActiveMouseOverItemIndex:z5,mouseLeaveItem:uue,mouseLeaveChart:F5,setActiveClickItemIndex:cue,setMouseOverAxisIndex:j5,setMouseClickAxisIndex:due,setSyncInteraction:jk,setKeyboardInteraction:Bk}=L5.actions,fue=L5.reducer;function G3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Uv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G3(Object(n),!0).forEach(function(r){hue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hue(t,e,n){return(e=pue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pue(t){var e=mue(t,"string");return typeof e=="symbol"?e:e+""}function mue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gue(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function vue(t){return t.index!=null}var B5=(t,e,n,r)=>{if(e==null)return rl;var a=gue(t,e,n);if(a==null)return rl;if(a.active)return a;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var i=t.settings.active===!0;if(vue(a)){if(i)return Uv(Uv({},a),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return Uv(Uv({},rl),{},{coordinate:a.coordinate})};function yue(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function xue(t,e){var n=yue(t),r=e[0],a=e[1];if(n===void 0)return!1;var i=Math.min(r,a),s=Math.max(r,a);return n>=i&&n<=s}function bue(t,e,n){if(n==null||e==null)return!0;var r=Yt(t,e);return r==null||!pl(n)?!0:xue(r,n)}var rI=(t,e,n,r)=>{var a=t==null?void 0:t.index;if(a==null)return null;var i=Number(a);if(!$t(i))return a;var s=0,o=1/0;e.length>0&&(o=e.length-1);var l=Math.max(s,Math.min(i,o)),c=e[l];return c==null||bue(c,n,r)?String(l):null},U5=(t,e,n,r,a,i,s,o)=>{if(!(i==null||o==null)){var l=s[0],c=l==null?void 0:o(l.positions,i);if(c!=null)return c;var f=a==null?void 0:a[Number(i)];if(f)switch(n){case"horizontal":return{x:f.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:f.coordinate}}}},V5=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var a;if(n==="hover"?a=t.itemInteraction.hover.graphicalItemId:a=t.itemInteraction.click.graphicalItemId,a==null&&r!=null){var i=t.tooltipItemPayloads[0];return i!=null?[i]:[]}return t.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.graphicalItemId)===a})},zp=t=>t.options.tooltipPayloadSearcher,Jd=t=>t.tooltip;function H3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function q3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H3(Object(n),!0).forEach(function(r){wue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wue(t,e,n){return(e=Sue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sue(t){var e=Cue(t,"string");return typeof e=="symbol"?e:e+""}function Cue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kue(t,e){return t??e}var W5=(t,e,n,r,a,i,s)=>{if(!(e==null||i==null)){var{chartData:o,computedData:l,dataStartIndex:c,dataEndIndex:f}=n,h=[];return t.reduce((p,g)=>{var v,{dataDefinedOnItem:x,settings:b}=g,w=kue(x,o),S=Array.isArray(w)?hB(w,c,f):w,k=(v=b==null?void 0:b.dataKey)!==null&&v!==void 0?v:r,N=b==null?void 0:b.nameKey,I;if(r&&Array.isArray(S)&&!Array.isArray(S[0])&&s==="axis"?I=Sj(S,r,a):I=i(S,e,l,N),Array.isArray(I))I.forEach(R=>{var _=q3(q3({},b),{},{name:R.name,unit:R.unit,color:void 0,fill:void 0});p.push(QM({tooltipEntrySettings:_,dataKey:R.dataKey,payload:R.payload,value:Yt(R.payload,R.dataKey),name:R.name}))});else{var T;p.push(QM({tooltipEntrySettings:b,dataKey:k,payload:I,value:Yt(I,k),name:(T=Yt(I,N))!==null&&T!==void 0?T:b==null?void 0:b.name}))}return p},h)}},aI=he([Jn,xt,JU,BN,Qn],w5),Eue=he([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),Nue=he([Qn,Yd],e5),ef=he([Eue,Jn,Nue],t5,{memoizeOptions:{resultEqualityCheck:Mx}}),Iue=he([ef],t=>t.filter(Rx)),Aue=he([ef],a5,{memoizeOptions:{resultEqualityCheck:Mx}}),tf=he([Aue,So],i5),Tue=he([Iue,So,Jn],XU),iI=he([tf,Jn,ef],s5),G5=he([Jn],XN),$ue=he([Jn],t=>t.allowDataOverflow),H5=he([G5,$ue],NU),Oue=he([ef],t=>t.filter(Rx)),Due=he([Tue,Oue,Ax,UU],l5),Rue=he([Due,So,Qn,H5],u5),_ue=he([ef],r5),Mue=he([tf,Jn,_ue,YN,Qn],f5,{memoizeOptions:{resultEqualityCheck:_x}}),Pue=he([h5,Qn,Yd],Qd),Lue=he([Pue,Qn],g5),zue=he([p5,Qn,Yd],Qd),Fue=he([zue,Qn],v5),jue=he([m5,Qn,Yd],Qd),Bue=he([jue,Qn],y5),Uue=he([Lue,Bue,Fue],oy),Vue=he([Jn,G5,H5,Rue,Mue,Uue,xt,Qn],x5),Fp=he([Jn,xt,tf,iI,Ax,Qn,Vue],b5),Wue=he([Fp,Jn,aI],S5),Gue=he([Jn,Fp,Wue,Qn],C5),q5=t=>{var e=Qn(t),n=Yd(t),r=!1;return Lp(t,e,n,r)},K5=he([Jn,q5],Tx),X5=he([Jn,aI,Gue,K5],QN),Hue=he([xt,iI,Jn,Qn],$5),que=he([xt,iI,Jn,Qn],O5),Kue=(t,e,n,r,a,i,s,o)=>{if(e){var{type:l}=e,c=ws(t,o);if(r){var f=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,h=l==="category"&&r.bandwidth?r.bandwidth()/f:0;return h=o==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?ua(a[0]-a[1])*2*h:h,c&&s?s.map((p,g)=>({coordinate:r(p)+h,value:p,index:g,offset:h})):r.domain().map((p,g)=>({coordinate:r(p)+h,value:i?i[p]:p,index:g,offset:h}))}}},Co=he([xt,Jn,aI,X5,q5,Hue,que,Qn],Kue),sI=he([R5,_5,rue],(t,e,n)=>M5(n.shared,t,e)),Y5=t=>t.tooltip.settings.trigger,oI=t=>t.tooltip.settings.defaultIndex,jp=he([Jd,sI,Y5,oI],B5),ml=he([jp,tf,Mp,Fp],rI),Z5=he([Co,ml],P5),Q5=he([jp],t=>{if(t)return t.dataKey});he([jp],t=>{if(t)return t.graphicalItemId});var J5=he([Jd,sI,Y5,oI],V5),Xue=he([xo,bo,xt,lr,Co,oI,J5,zp],U5),Yue=he([jp,Xue],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),Zue=he([jp],t=>{var e;return(e=t==null?void 0:t.active)!==null&&e!==void 0?e:!1}),Que=he([J5,ml,So,Mp,Z5,zp,sI],W5),Jue=he([Que],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function K3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function X3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K3(Object(n),!0).forEach(function(r){ece(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ece(t,e,n){return(e=tce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tce(t){var e=nce(t,"string");return typeof e=="symbol"?e:e+""}function nce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rce=()=>Fe(Jn),ace=()=>{var t=rce(),e=Fe(Co),n=Fe(X5);return hl(!t||!n?void 0:X3(X3({},t),{},{scale:n}),e)};function Y3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Zc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y3(Object(n),!0).forEach(function(r){ice(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ice(t,e,n){return(e=sce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sce(t){var e=oce(t,"string");return typeof e=="symbol"?e:e+""}function oce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lce=(t,e,n,r)=>{var a=e.find(i=>i&&i.index===n);if(a){if(t==="horizontal")return{x:a.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:a.coordinate}}return{x:0,y:0}},uce=(t,e,n,r)=>{var a=e.find(c=>c&&c.index===n);if(a){if(t==="centric"){var i=a.coordinate,{radius:s}=r;return Zc(Zc(Zc({},r),br(r.cx,r.cy,s,i)),{},{angle:i,radius:s})}var o=a.coordinate,{angle:l}=r;return Zc(Zc(Zc({},r),br(r.cx,r.cy,o,l)),{},{angle:l,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function cce(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var eV=(t,e,n,r,a)=>{var i,s=(i=e==null?void 0:e.length)!==null&&i!==void 0?i:0;if(s<=1||t==null)return 0;if(r==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var o=0;o<s;o++){var l,c,f,h,p,g=o>0?(l=n[o-1])===null||l===void 0?void 0:l.coordinate:(c=n[s-1])===null||c===void 0?void 0:c.coordinate,v=(f=n[o])===null||f===void 0?void 0:f.coordinate,x=o>=s-1?(h=n[0])===null||h===void 0?void 0:h.coordinate:(p=n[o+1])===null||p===void 0?void 0:p.coordinate,b=void 0;if(!(g==null||v==null||x==null))if(ua(v-g)!==ua(x-v)){var w=[];if(ua(x-v)===ua(a[1]-a[0])){b=x;var S=v+a[1]-a[0];w[0]=Math.min(S,(S+g)/2),w[1]=Math.max(S,(S+g)/2)}else{b=g;var k=x+a[1]-a[0];w[0]=Math.min(v,(k+v)/2),w[1]=Math.max(v,(k+v)/2)}var N=[Math.min(v,(b+v)/2),Math.max(v,(b+v)/2)];if(t>N[0]&&t<=N[1]||t>=w[0]&&t<=w[1]){var I;return(I=n[o])===null||I===void 0?void 0:I.index}}else{var T=Math.min(g,x),R=Math.max(g,x);if(t>(T+v)/2&&t<=(R+v)/2){var _;return(_=n[o])===null||_===void 0?void 0:_.index}}}else if(e)for(var M=0;M<s;M++){var P=e[M];if(P!=null){var $=e[M+1],z=e[M-1];if(M===0&&$!=null&&t<=(P.coordinate+$.coordinate)/2||M===s-1&&z!=null&&t>(P.coordinate+z.coordinate)/2||M>0&&M<s-1&&z!=null&&$!=null&&t>(P.coordinate+z.coordinate)/2&&t<=(P.coordinate+$.coordinate)/2)return P.index}}return-1},tV=()=>Fe(BN),lI=(t,e)=>e,nV=(t,e,n)=>n,uI=(t,e,n,r)=>r,dce=he(Co,t=>rx(t,e=>e.coordinate)),cI=he([Jd,lI,nV,uI],B5),dI=he([cI,tf,Mp,Fp],rI),fce=(t,e,n)=>{if(e!=null){var r=Jd(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},rV=he([Jd,lI,nV,uI],V5),ly=he([xo,bo,xt,lr,Co,uI,rV,zp],U5),hce=he([cI,ly],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),aV=he([Co,dI],P5),pce=he([rV,dI,So,Mp,aV,zp,lI],W5),mce=he([cI,dI],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),gce=(t,e,n,r,a,i,s)=>{if(!(!t||!n||!r||!a)&&cce(t,s)){var o=Kne(t,e),l=eV(o,i,a,n,r),c=lce(e,a,l,t);return{activeIndex:String(l),activeCoordinate:c}}},vce=(t,e,n,r,a,i,s)=>{if(!(!t||!r||!a||!i||!n)){var o=tie(t,n);if(o){var l=Xne(o,e),c=eV(l,s,i,r,a),f=uce(e,i,c,o);return{activeIndex:String(c),activeCoordinate:f}}}},yce=(t,e,n,r,a,i,s,o)=>{if(!(!t||!e||!r||!a||!i))return e==="horizontal"||e==="vertical"?gce(t,e,r,a,i,s,o):vce(t,e,n,r,a,i,s)},xce=he(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),bce=he(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(mn)),n=Array.from(new Set(e));return n.sort((r,a)=>r-a)},{memoizeOptions:{resultEqualityCheck:ale}});function Z3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Q3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z3(Object(n),!0).forEach(function(r){wce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wce(t,e,n){return(e=Sce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sce(t){var e=Cce(t,"string");return typeof e=="symbol"?e:e+""}function Cce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kce={},Ece={zIndexMap:Object.values(mn).reduce((t,e)=>Q3(Q3({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),kce)},Nce=new Set(Object.values(mn));function Ice(t){return Nce.has(t)}var iV=va({name:"zIndex",initialState:Ece,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:sn()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!Ice(n)&&delete t.zIndexMap[n])},prepare:sn()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:a}=e.payload;t.zIndexMap[n]?a?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:a?void 0:r,panoramaElement:a?r:void 0}},prepare:sn()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:sn()}}}),{registerZIndexPortal:Ace,unregisterZIndexPortal:Tce,registerZIndexPortalElement:$ce,unregisterZIndexPortalElement:Oce}=iV.actions,Dce=iV.reducer;function Lr(t){var{zIndex:e,children:n}=t,r=Nre(),a=r&&e!==void 0&&e!==0,i=Tn(),s=bn();A.useLayoutEffect(()=>a?(s(Ace({zIndex:e})),()=>{s(Tce({zIndex:e}))}):Cp,[s,e,a]);var o=Fe(l=>xce(l,e,i));return a?o?B4.createPortal(n,o):null:n}function Uk(){return Uk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uk.apply(null,arguments)}function J3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Vv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J3(Object(n),!0).forEach(function(r){Rce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rce(t,e,n){return(e=_ce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _ce(t){var e=Mce(t,"string");return typeof e=="symbol"?e:e+""}function Mce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pce(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return A.isValidElement(e)?A.cloneElement(e,r):A.createElement(n,r)}function Lce(t){var e,{coordinate:n,payload:r,index:a,offset:i,tooltipAxisBandSize:s,layout:o,cursor:l,tooltipEventType:c,chartName:f}=t,h=n,p=r,g=a;if(!l||!h||f!=="ScatterChart"&&c!=="axis")return null;var v,x,b;if(f==="ScatterChart")v=h,x=pae,b=mn.cursorLine;else if(f==="BarChart")v=mae(o,h,i,s),x=FB,b=mn.cursorRectangle;else if(o==="radial"&&kj(h)){var{cx:w,cy:S,radius:k,startAngle:N,endAngle:I}=jB(h);v={cx:w,cy:S,startAngle:N,endAngle:I,innerRadius:k,outerRadius:k},x=UB,b=mn.cursorLine}else v={points:iie(o,h,i)},x=ud,b=mn.cursorLine;var T=typeof l=="object"&&"className"in l?l.className:void 0,R=Vv(Vv(Vv(Vv({stroke:"#ccc",pointerEvents:"none"},i),v),Ud(l)),{},{payload:p,payloadIndex:g,className:Et("recharts-tooltip-cursor",T)});return A.createElement(Lr,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:b},A.createElement(Pce,{cursor:l,cursorComp:x,cursorProps:R}))}function zce(t){var e=ace(),n=kB(),r=kl(),a=tV();return e==null||n==null||r==null||a==null?null:A.createElement(Lce,Uk({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:a}))}var sV=A.createContext(null),Fce=()=>A.useContext(sV),p2={exports:{}},eL;function jce(){return eL||(eL=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(l,c,f){this.fn=l,this.context=c,this.once=f||!1}function i(l,c,f,h,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new a(f,h||l,p),v=n?n+c:c;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],g]:l._events[v].push(g):(l._events[v]=g,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],f,h;if(this._eventsCount===0)return c;for(h in f=this._events)e.call(f,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},o.prototype.listeners=function(c){var f=n?n+c:c,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,g=h.length,v=new Array(g);p<g;p++)v[p]=h[p].fn;return v},o.prototype.listenerCount=function(c){var f=n?n+c:c,h=this._events[f];return h?h.fn?1:h.length:0},o.prototype.emit=function(c,f,h,p,g,v){var x=n?n+c:c;if(!this._events[x])return!1;var b=this._events[x],w=arguments.length,S,k;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),w){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,f),!0;case 3:return b.fn.call(b.context,f,h),!0;case 4:return b.fn.call(b.context,f,h,p),!0;case 5:return b.fn.call(b.context,f,h,p,g),!0;case 6:return b.fn.call(b.context,f,h,p,g,v),!0}for(k=1,S=new Array(w-1);k<w;k++)S[k-1]=arguments[k];b.fn.apply(b.context,S)}else{var N=b.length,I;for(k=0;k<N;k++)switch(b[k].once&&this.removeListener(c,b[k].fn,void 0,!0),w){case 1:b[k].fn.call(b[k].context);break;case 2:b[k].fn.call(b[k].context,f);break;case 3:b[k].fn.call(b[k].context,f,h);break;case 4:b[k].fn.call(b[k].context,f,h,p);break;default:if(!S)for(I=1,S=new Array(w-1);I<w;I++)S[I-1]=arguments[I];b[k].fn.apply(b[k].context,S)}}return!0},o.prototype.on=function(c,f,h){return i(this,c,f,h,!1)},o.prototype.once=function(c,f,h){return i(this,c,f,h,!0)},o.prototype.removeListener=function(c,f,h,p){var g=n?n+c:c;if(!this._events[g])return this;if(!f)return s(this,g),this;var v=this._events[g];if(v.fn)v.fn===f&&(!p||v.once)&&(!h||v.context===h)&&s(this,g);else{for(var x=0,b=[],w=v.length;x<w;x++)(v[x].fn!==f||p&&!v[x].once||h&&v[x].context!==h)&&b.push(v[x]);b.length?this._events[g]=b.length===1?b[0]:b:s(this,g)}return this},o.prototype.removeAllListeners=function(c){var f;return c?(f=n?n+c:c,this._events[f]&&s(this,f)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(p2)),p2.exports}var Bce=jce();const Uce=Ui(Bce);var rp=new Uce,Vk="recharts.syncEvent.tooltip",tL="recharts.syncEvent.brush";function Bp(t,e){if(e){var n=Number.parseInt(e,10);if(!ha(n))return t==null?void 0:t[n]}}var Vce={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},oV=va({name:"options",initialState:Vce,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Wce=oV.reducer,{createEventEmitter:Gce}=oV.actions;function Hce(t){return t.tooltip.syncInteraction}var qce={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},lV=va({name:"chartData",initialState:qce,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:nL,setDataStartEndIndexes:Kce,setComputedData:y5e}=lV.actions,Xce=lV.reducer,Yce=["x","y"];function rL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Qc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rL(Object(n),!0).forEach(function(r){Zce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zce(t,e,n){return(e=Qce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qce(t){var e=Jce(t,"string");return typeof e=="symbol"?e:e+""}function Jce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ede(t,e){if(t==null)return{};var n,r,a=tde(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function tde(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function nde(){var t=Fe(UN),e=Fe(VN),n=bn(),r=Fe(VU),a=Fe(Co),i=kl(),s=Wd(),o=Fe(l=>l.rootProps.className);A.useEffect(()=>{if(t==null)return Cp;var l=(c,f,h)=>{if(e!==h&&t===c){if(r==="index"){var p;if(s&&f!==null&&f!==void 0&&(p=f.payload)!==null&&p!==void 0&&p.coordinate&&f.payload.sourceViewBox){var g=f.payload.coordinate,{x:v,y:x}=g,b=ede(g,Yce),{x:w,y:S,width:k,height:N}=f.payload.sourceViewBox,I=Qc(Qc({},b),{},{x:s.x+(k?(v-w)/k:0)*s.width,y:s.y+(N?(x-S)/N:0)*s.height});n(Qc(Qc({},f),{},{payload:Qc(Qc({},f.payload),{},{coordinate:I})}))}else n(f);return}if(a!=null){var T;if(typeof r=="function"){var R={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},_=r(a,R);T=a[_]}else r==="value"&&(T=a.find(F=>String(F.value)===f.payload.label));var{coordinate:M}=f.payload;if(T==null||f.payload.active===!1||M==null||s==null){n(jk({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:P,y:$}=M,z=Math.min(P,s.x+s.width),W=Math.min($,s.y+s.height),H={x:i==="horizontal"?T.coordinate:z,y:i==="horizontal"?W:T.coordinate},G=jk({active:f.payload.active,coordinate:H,dataKey:f.payload.dataKey,index:String(T.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox,graphicalItemId:f.payload.graphicalItemId});n(G)}}};return rp.on(Vk,l),()=>{rp.off(Vk,l)}},[o,n,e,t,r,a,i,s])}function rde(){var t=Fe(UN),e=Fe(VN),n=bn();A.useEffect(()=>{if(t==null)return Cp;var r=(a,i,s)=>{e!==s&&t===a&&n(Kce(i))};return rp.on(tL,r),()=>{rp.off(tL,r)}},[n,e,t])}function ade(){var t=bn();A.useEffect(()=>{t(Gce())},[t]),nde(),rde()}function ide(t,e,n,r,a,i){var s=Fe(g=>fce(g,t,e)),o=Fe(VN),l=Fe(UN),c=Fe(VU),f=Fe(Hce),h=f==null?void 0:f.active,p=Wd();A.useEffect(()=>{if(!h&&l!=null&&o!=null){var g=jk({active:i,coordinate:n,dataKey:s,index:a,label:typeof r=="number"?String(r):r,sourceViewBox:p,graphicalItemId:void 0});rp.emit(Vk,l,g,o)}},[h,n,s,a,r,o,l,c,i,p])}function aL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function iL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aL(Object(n),!0).forEach(function(r){sde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sde(t,e,n){return(e=ode(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ode(t){var e=lde(t,"string");return typeof e=="symbol"?e:e+""}function lde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ude(t){return t.dataKey}function cde(t,e){return A.isValidElement(t)?A.cloneElement(t,e):typeof t=="function"?A.createElement(t,e):A.createElement(qre,e)}var sL=[],dde={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Up(t){var e,n,r=Un(t,dde),{active:a,allowEscapeViewBox:i,animationDuration:s,animationEasing:o,content:l,filterNull:c,isAnimationActive:f,offset:h,payloadUniqBy:p,position:g,reverseDirection:v,useTranslate3d:x,wrapperStyle:b,cursor:w,shared:S,trigger:k,defaultIndex:N,portal:I,axisId:T}=r,R=bn(),_=typeof N=="number"?String(N):N;A.useEffect(()=>{R(lue({shared:S,trigger:k,axisId:T,active:a,defaultIndex:_}))},[R,S,k,T,a,_]);var M=Wd(),P=_B(),$=nue(S),{activeIndex:z,isActive:W}=(e=Fe(be=>mce(be,$,k,_)))!==null&&e!==void 0?e:{},H=Fe(be=>pce(be,$,k,_)),G=Fe(be=>aV(be,$,k,_)),F=Fe(be=>hce(be,$,k,_)),V=H,U=Fce(),Y=(n=a??W)!==null&&n!==void 0?n:!1,[oe,j]=Rte([V,Y]),q=$==="axis"?G:void 0;ide($,k,F,q,z,Y);var Z=I??U;if(Z==null||M==null||$==null)return null;var se=V??sL;Y||(se=sL),c&&se.length&&(se=ite(se.filter(be=>be.value!=null&&(be.hide!==!0||r.includeHidden)),p,ude));var pe=se.length>0,Se=A.createElement(eae,{allowEscapeViewBox:i,animationDuration:s,animationEasing:o,isAnimationActive:f,active:Y,coordinate:F,hasPayload:pe,offset:h,position:g,reverseDirection:v,useTranslate3d:x,viewBox:M,wrapperStyle:b,lastBoundingBox:oe,innerRef:j,hasPortalFromProps:!!I},cde(l,iL(iL({},r),{},{payload:se,label:q,active:Y,activeIndex:z,coordinate:F,accessibilityLayer:P})));return A.createElement(A.Fragment,null,B4.createPortal(Se,Z),Y&&A.createElement(zce,{cursor:w,tooltipEventType:$,coordinate:F,payload:se,index:z}))}var Ou=t=>null;Ou.displayName="Cell";function fde(t,e,n){return(e=hde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hde(t){var e=pde(t,"string");return typeof e=="symbol"?e:e+""}function pde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class mde{constructor(e){fde(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function oL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function gde(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oL(Object(n),!0).forEach(function(r){vde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vde(t,e,n){return(e=yde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yde(t){var e=xde(t,"string");return typeof e=="symbol"?e:e+""}function xde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bde={cacheSize:2e3,enableCache:!0},uV=gde({},bde),lL=new mde(uV.cacheSize),wde={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},uL="recharts_measurement_span";function Sde(t,e){var n=e.fontSize||"",r=e.fontFamily||"",a=e.fontWeight||"",i=e.fontStyle||"",s=e.letterSpacing||"",o=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(a,"|").concat(i,"|").concat(s,"|").concat(o)}var cL=(t,e)=>{try{var n=document.getElementById(uL);n||(n=document.createElement("span"),n.setAttribute("id",uL),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,wde,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Fh=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Ap.isSsr)return{width:0,height:0};if(!uV.enableCache)return cL(e,n);var r=Sde(e,n),a=lL.get(r);if(a)return a;var i=cL(e,n);return lL.set(r,i),i},cV;function Cde(t,e,n){return(e=kde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kde(t){var e=Ede(t,"string");return typeof e=="symbol"?e:e+""}function Ede(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,fL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Nde=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Ide=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Ade={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Tde=["cm","mm","pt","pc","in","Q","px"];function $de(t){return Tde.includes(t)}var sd="NaN";function Ode(t,e){return t*Ade[e]}class xr{static parse(e){var n,[,r,a]=(n=Ide.exec(e))!==null&&n!==void 0?n:[];return r==null?xr.NaN:new xr(parseFloat(r),a??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,ha(e)&&(this.unit=""),n!==""&&!Nde.test(n)&&(this.num=NaN,this.unit=""),$de(n)&&(this.num=Ode(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new xr(NaN,""):new xr(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new xr(NaN,""):new xr(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new xr(NaN,""):new xr(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new xr(NaN,""):new xr(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ha(this.num)}}cV=xr;Cde(xr,"NaN",new cV(NaN,""));function dV(t){if(t==null||t.includes(sd))return sd;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,a,i]=(n=dL.exec(e))!==null&&n!==void 0?n:[],s=xr.parse(r??""),o=xr.parse(i??""),l=a==="*"?s.multiply(o):s.divide(o);if(l.isNaN())return sd;e=e.replace(dL,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,[,f,h,p]=(c=fL.exec(e))!==null&&c!==void 0?c:[],g=xr.parse(f??""),v=xr.parse(p??""),x=h==="+"?g.add(v):g.subtract(v);if(x.isNaN())return sd;e=e.replace(fL,x.toString())}return e}var hL=/\(([^()]*)\)/;function Dde(t){for(var e=t,n;(n=hL.exec(e))!=null;){var[,r]=n;e=e.replace(hL,dV(r))}return e}function Rde(t){var e=t.replace(/\s+/g,"");return e=Dde(e),e=dV(e),e}function _de(t){try{return Rde(t)}catch{return sd}}function m2(t){var e=_de(t.slice(5,-1));return e===sd?"":e}var Mde=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Pde=["dx","dy","angle","className","breakAll"];function Wk(){return Wk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wk.apply(null,arguments)}function pL(t,e){if(t==null)return{};var n,r,a=Lde(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Lde(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var fV=/[ \f\n\r\t\v\u2028\u2029]+/,hV=t=>{var{children:e,breakAll:n,style:r}=t;try{var a=[];Dt(e)||(n?a=e.toString().split(""):a=e.toString().split(fV));var i=a.map(o=>({word:o,width:Fh(o,r).width})),s=n?0:Fh("",r).width;return{wordsWithComputedWidth:i,spaceWidth:s}}catch{return null}};function zde(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var pV=(t,e,n,r)=>t.reduce((a,i)=>{var{word:s,width:o}=i,l=a[a.length-1];if(l&&o!=null&&(e==null||r||l.width+o+n<Number(e)))l.words.push(s),l.width+=o+n;else{var c={words:[s],width:o};a.push(c)}return a},[]),mV=t=>t.reduce((e,n)=>e.width>n.width?e:n),Fde="",mL=(t,e,n,r,a,i,s,o)=>{var l=t.slice(0,e),c=hV({breakAll:n,style:r,children:l+Fde});if(!c)return[!1,[]];var f=pV(c.wordsWithComputedWidth,i,s,o),h=f.length>a||mV(f).width>Number(i);return[h,f]},jde=(t,e,n,r,a)=>{var{maxLines:i,children:s,style:o,breakAll:l}=t,c=De(i),f=String(s),h=pV(e,r,n,a);if(!c||a)return h;var p=h.length>i||mV(h).width>Number(r);if(!p)return h;for(var g=0,v=f.length-1,x=0,b;g<=v&&x<=f.length-1;){var w=Math.floor((g+v)/2),S=w-1,[k,N]=mL(f,S,l,o,i,r,n,a),[I]=mL(f,w,l,o,i,r,n,a);if(!k&&!I&&(g=w+1),k&&I&&(v=w-1),!k&&I){b=N;break}x++}return b||h},gL=t=>{var e=Dt(t)?[]:t.toString().split(fV);return[{words:e,width:void 0}]},Bde=t=>{var{width:e,scaleToFit:n,children:r,style:a,breakAll:i,maxLines:s}=t;if((e||n)&&!Ap.isSsr){var o,l,c=hV({breakAll:i,children:r,style:a});if(c){var{wordsWithComputedWidth:f,spaceWidth:h}=c;o=f,l=h}else return gL(r);return jde({breakAll:i,children:r,maxLines:s,style:a},o,l,e,!!n)}return gL(r)},gV="#808080",Ude={angle:0,breakAll:!1,capHeight:"0.71em",fill:gV,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},fI=A.forwardRef((t,e)=>{var n=Un(t,Ude),{x:r,y:a,lineHeight:i,capHeight:s,fill:o,scaleToFit:l,textAnchor:c,verticalAnchor:f}=n,h=pL(n,Mde),p=A.useMemo(()=>Bde({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:l,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,l,h.style,h.width]),{dx:g,dy:v,angle:x,className:b,breakAll:w}=h,S=pL(h,Pde);if(!li(r)||!li(a)||p.length===0)return null;var k=Number(r)+(De(g)?g:0),N=Number(a)+(De(v)?v:0);if(!$t(k)||!$t(N))return null;var I;switch(f){case"start":I=m2("calc(".concat(s,")"));break;case"middle":I=m2("calc(".concat((p.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:I=m2("calc(".concat(p.length-1," * -").concat(i,")"));break}var T=[];if(l){var R=p[0].width,{width:_}=h;T.push("scale(".concat(De(_)&&De(R)?_/R:1,")"))}return x&&T.push("rotate(".concat(x,", ").concat(k,", ").concat(N,")")),T.length&&(S.transform=T.join(" ")),A.createElement("text",Wk({},wr(S),{ref:e,x:k,y:N,className:Et("recharts-text",b),textAnchor:c,fill:o.includes("url")?gV:o}),p.map((M,P)=>{var $=M.words.join(w?"":" ");return A.createElement("tspan",{x:k,dy:P===0?I:i,key:"".concat($,"-").concat(P)},$)}))});fI.displayName="Text";var Vde=["labelRef"],Wde=["content"];function vL(t,e){if(t==null)return{};var n,r,a=Gde(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Gde(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function yL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Nn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yL(Object(n),!0).forEach(function(r){Hde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hde(t,e,n){return(e=qde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qde(t){var e=Kde(t,"string");return typeof e=="symbol"?e:e+""}function Kde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zs(){return Zs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zs.apply(null,arguments)}var vV=A.createContext(null),yV=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:a,width:i,height:s,children:o}=t,l=A.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:a,width:i,height:s}),[e,n,r,a,i,s]);return A.createElement(vV.Provider,{value:l},o)},xV=()=>{var t=A.useContext(vV),e=Wd();return t||CB(e)},Xde=A.createContext(null),Yde=()=>{var t=A.useContext(Xde),e=Fe(KU);return t||e},Zde=t=>{var{value:e,formatter:n}=t,r=Dt(t.children)?e:t.children;return typeof n=="function"?n(r):r},hI=t=>t!=null&&typeof t=="function",Qde=(t,e)=>{var n=ua(e-t),r=Math.min(Math.abs(e-t),360);return n*r},Jde=(t,e,n,r,a)=>{var{offset:i,className:s}=t,{cx:o,cy:l,innerRadius:c,outerRadius:f,startAngle:h,endAngle:p,clockWise:g}=a,v=(c+f)/2,x=Qde(h,p),b=x>=0?1:-1,w,S;switch(e){case"insideStart":w=h+b*i,S=g;break;case"insideEnd":w=p-b*i,S=!g;break;case"end":w=p+b*i,S=g;break;default:throw new Error("Unsupported position ".concat(e))}S=x<=0?S:!S;var k=br(o,l,v,w),N=br(o,l,v,w+(S?1:-1)*359),I="M".concat(k.x,",").concat(k.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(S?0:1,`,
    `).concat(N.x,",").concat(N.y),T=Dt(t.id)?Wh("recharts-radial-line-"):t.id;return A.createElement("text",Zs({},r,{dominantBaseline:"central",className:Et("recharts-radial-bar-label",s)}),A.createElement("defs",null,A.createElement("path",{id:T,d:I})),A.createElement("textPath",{xlinkHref:"#".concat(T)},n))},efe=(t,e,n)=>{var{cx:r,cy:a,innerRadius:i,outerRadius:s,startAngle:o,endAngle:l}=t,c=(o+l)/2;if(n==="outside"){var{x:f,y:h}=br(r,a,s+e,c);return{x:f,y:h,textAnchor:f>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:a,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:a,textAnchor:"middle",verticalAnchor:"end"};var p=(i+s)/2,{x:g,y:v}=br(r,a,p,c);return{x:g,y:v,textAnchor:"middle",verticalAnchor:"middle"}},Gk=t=>"cx"in t&&De(t.cx),tfe=(t,e)=>{var{parentViewBox:n,offset:r,position:a}=t,i;n!=null&&!Gk(n)&&(i=n);var{x:s,y:o,upperWidth:l,lowerWidth:c,height:f}=e,h=s,p=s+(l-c)/2,g=(h+p)/2,v=(l+c)/2,x=h+l/2,b=f>=0?1:-1,w=b*r,S=b>0?"end":"start",k=b>0?"start":"end",N=l>=0?1:-1,I=N*r,T=N>0?"end":"start",R=N>0?"start":"end";if(a==="top"){var _={x:h+l/2,y:o-w,textAnchor:"middle",verticalAnchor:S};return Nn(Nn({},_),i?{height:Math.max(o-i.y,0),width:l}:{})}if(a==="bottom"){var M={x:p+c/2,y:o+f+w,textAnchor:"middle",verticalAnchor:k};return Nn(Nn({},M),i?{height:Math.max(i.y+i.height-(o+f),0),width:c}:{})}if(a==="left"){var P={x:g-I,y:o+f/2,textAnchor:T,verticalAnchor:"middle"};return Nn(Nn({},P),i?{width:Math.max(P.x-i.x,0),height:f}:{})}if(a==="right"){var $={x:g+v+I,y:o+f/2,textAnchor:R,verticalAnchor:"middle"};return Nn(Nn({},$),i?{width:Math.max(i.x+i.width-$.x,0),height:f}:{})}var z=i?{width:v,height:f}:{};return a==="insideLeft"?Nn({x:g+I,y:o+f/2,textAnchor:R,verticalAnchor:"middle"},z):a==="insideRight"?Nn({x:g+v-I,y:o+f/2,textAnchor:T,verticalAnchor:"middle"},z):a==="insideTop"?Nn({x:h+l/2,y:o+w,textAnchor:"middle",verticalAnchor:k},z):a==="insideBottom"?Nn({x:p+c/2,y:o+f-w,textAnchor:"middle",verticalAnchor:S},z):a==="insideTopLeft"?Nn({x:h+I,y:o+w,textAnchor:R,verticalAnchor:k},z):a==="insideTopRight"?Nn({x:h+l-I,y:o+w,textAnchor:T,verticalAnchor:k},z):a==="insideBottomLeft"?Nn({x:p+I,y:o+f-w,textAnchor:R,verticalAnchor:S},z):a==="insideBottomRight"?Nn({x:p+c-I,y:o+f-w,textAnchor:T,verticalAnchor:S},z):a&&typeof a=="object"&&(De(a.x)||oo(a.x))&&(De(a.y)||oo(a.y))?Nn({x:s+Li(a.x,v),y:o+Li(a.y,f),textAnchor:"end",verticalAnchor:"end"},z):Nn({x,y:o+f/2,textAnchor:"middle",verticalAnchor:"middle"},z)},nfe={angle:0,offset:5,zIndex:mn.label,position:"middle",textBreakAll:!1};function el(t){var e=Un(t,nfe),{viewBox:n,position:r,value:a,children:i,content:s,className:o="",textBreakAll:l,labelRef:c}=e,f=Yde(),h=xV(),p=r==="center"?h:f??h,g,v,x;if(n==null?g=p:Gk(n)?g=n:g=CB(n),!g||Dt(a)&&Dt(i)&&!A.isValidElement(s)&&typeof s!="function")return null;var b=Nn(Nn({},e),{},{viewBox:g});if(A.isValidElement(s)){var{labelRef:w}=b,S=vL(b,Vde);return A.cloneElement(s,S)}if(typeof s=="function"){var{content:k}=b,N=vL(b,Wde);if(v=A.createElement(s,N),A.isValidElement(v))return v}else v=Zde(e);var I=wr(e);if(Gk(g)){if(r==="insideStart"||r==="insideEnd"||r==="end")return Jde(e,r,v,I,g);x=efe(g,e.offset,e.position)}else x=tfe(e,g);return A.createElement(Lr,{zIndex:e.zIndex},A.createElement(fI,Zs({ref:c,className:Et("recharts-label",o)},I,x,{textAnchor:zde(I.textAnchor)?I.textAnchor:x.textAnchor,breakAll:l}),v))}el.displayName="Label";var rfe=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?A.createElement(el,Zs({key:"label-implicit"},r)):li(t)?A.createElement(el,Zs({key:"label-implicit",value:t},r)):A.isValidElement(t)?t.type===el?A.cloneElement(t,Nn({key:"label-implicit"},r)):A.createElement(el,Zs({key:"label-implicit",content:t},r)):hI(t)?A.createElement(el,Zs({key:"label-implicit",content:t},r)):t&&typeof t=="object"?A.createElement(el,Zs({},t,{key:"label-implicit"},r)):null};function bV(t){var{label:e,labelRef:n}=t,r=xV();return rfe(e,r,n)||null}var g2={},v2={},xL;function afe(){return xL||(xL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(v2)),v2}var y2={},bL;function ife(){return bL||(bL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(y2)),y2}var wL;function sfe(){return wL||(wL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=afe(),n=ife(),r=aN();function a(i){if(r.isArrayLike(i))return e.last(n.toArray(i))}t.last=a})(g2)),g2}var x2,SL;function ofe(){return SL||(SL=1,x2=sfe().last),x2}var lfe=ofe();const ufe=Ui(lfe);var cfe=["valueAccessor"],dfe=["dataKey","clockWise","id","textBreakAll","zIndex"];function uy(){return uy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uy.apply(null,arguments)}function CL(t,e){if(t==null)return{};var n,r,a=ffe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function ffe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var hfe=t=>Array.isArray(t.value)?ufe(t.value):t.value,wV=A.createContext(void 0),Fx=wV.Provider,SV=A.createContext(void 0);SV.Provider;function pfe(){return A.useContext(wV)}function mfe(){return A.useContext(SV)}function h0(t){var{valueAccessor:e=hfe}=t,n=CL(t,cfe),{dataKey:r,clockWise:a,id:i,textBreakAll:s,zIndex:o}=n,l=CL(n,dfe),c=pfe(),f=mfe(),h=c||f;return!h||!h.length?null:A.createElement(Lr,{zIndex:o??mn.label},A.createElement(yn,{className:"recharts-label-list"},h.map((p,g)=>{var v,x=Dt(r)?e(p,g):Yt(p&&p.payload,r),b=Dt(i)?{}:{id:"".concat(i,"-").concat(g)};return A.createElement(el,uy({key:"label-".concat(g)},wr(p),l,b,{fill:(v=n.fill)!==null&&v!==void 0?v:p.fill,parentViewBox:p.parentViewBox,value:x,textBreakAll:s,viewBox:p.viewBox,index:g,zIndex:0}))})))}h0.displayName="LabelList";function jx(t){var{label:e}=t;return e?e===!0?A.createElement(h0,{key:"labelList-implicit"}):A.isValidElement(e)||hI(e)?A.createElement(h0,{key:"labelList-implicit",content:e}):typeof e=="object"?A.createElement(h0,uy({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function Hk(){return Hk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hk.apply(null,arguments)}var CV=t=>{var{cx:e,cy:n,r,className:a}=t,i=Et("recharts-dot",a);return De(e)&&De(n)&&De(r)?A.createElement("circle",Hk({},Kr(t),rN(t),{className:i,cx:e,cy:n,r})):null},gfe={radiusAxis:{},angleAxis:{}},kV=va({name:"polarAxis",initialState:gfe,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:x5e,removeRadiusAxis:b5e,addAngleAxis:w5e,removeAngleAxis:S5e}=kV.actions,vfe=kV.reducer,b2={exports:{}},Bt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kL;function yfe(){if(kL)return Bt;kL=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.view_transition"),g=Symbol.for("react.client.reference");function v(x){if(typeof x=="object"&&x!==null){var b=x.$$typeof;switch(b){case t:switch(x=x.type,x){case n:case a:case r:case l:case c:case p:return x;default:switch(x=x&&x.$$typeof,x){case s:case o:case h:case f:return x;case i:return x;default:return b}}case e:return b}}}return Bt.ContextConsumer=i,Bt.ContextProvider=s,Bt.Element=t,Bt.ForwardRef=o,Bt.Fragment=n,Bt.Lazy=h,Bt.Memo=f,Bt.Portal=e,Bt.Profiler=a,Bt.StrictMode=r,Bt.Suspense=l,Bt.SuspenseList=c,Bt.isContextConsumer=function(x){return v(x)===i},Bt.isContextProvider=function(x){return v(x)===s},Bt.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===t},Bt.isForwardRef=function(x){return v(x)===o},Bt.isFragment=function(x){return v(x)===n},Bt.isLazy=function(x){return v(x)===h},Bt.isMemo=function(x){return v(x)===f},Bt.isPortal=function(x){return v(x)===e},Bt.isProfiler=function(x){return v(x)===a},Bt.isStrictMode=function(x){return v(x)===r},Bt.isSuspense=function(x){return v(x)===l},Bt.isSuspenseList=function(x){return v(x)===c},Bt.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===n||x===a||x===r||x===l||x===c||typeof x=="object"&&x!==null&&(x.$$typeof===h||x.$$typeof===f||x.$$typeof===s||x.$$typeof===i||x.$$typeof===o||x.$$typeof===g||x.getModuleId!==void 0)},Bt.typeOf=v,Bt}var EL;function xfe(){return EL||(EL=1,b2.exports=yfe()),b2.exports}var bfe=xfe(),NL=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",IL=null,w2=null,EV=t=>{if(t===IL&&Array.isArray(w2))return w2;var e=[];return A.Children.forEach(t,n=>{Dt(n)||(bfe.isFragment(n)?e=e.concat(EV(n.props.children)):e.push(n))}),w2=e,IL=t,e};function NV(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(a=>NL(a)):r=[NL(e)],EV(t).forEach(a=>{var i=vd(a,"type.displayName")||vd(a,"type.name");i&&r.indexOf(i)!==-1&&n.push(a)}),n}var pI=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,S2={},AL;function wfe(){return AL||(AL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var a;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!((a=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&a.writable)?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(S2)),S2}var C2,TL;function Sfe(){return TL||(TL=1,C2=wfe().isPlainObject),C2}var Cfe=Sfe();const kfe=Ui(Cfe);var $L,OL,DL,RL,_L;function ML(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function PL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ML(Object(n),!0).forEach(function(r){Efe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ML(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Efe(t,e,n){return(e=Nfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nfe(t){var e=Ife(t,"string");return typeof e=="symbol"?e:e+""}function Ife(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cy(){return cy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cy.apply(null,arguments)}function Nh(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var LL=(t,e,n,r,a)=>{var i=n-r,s;return s=pn($L||($L=Nh(["M ",",",""])),t,e),s+=pn(OL||(OL=Nh(["L ",",",""])),t+n,e),s+=pn(DL||(DL=Nh(["L ",",",""])),t+n-i/2,e+a),s+=pn(RL||(RL=Nh(["L ",",",""])),t+n-i/2-r,e+a),s+=pn(_L||(_L=Nh(["L ",","," Z"])),t,e),s},Afe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Tfe=t=>{var e=Un(t,Afe),{x:n,y:r,upperWidth:a,lowerWidth:i,height:s,className:o}=e,{animationEasing:l,animationDuration:c,animationBegin:f,isUpdateAnimationActive:h}=e,p=A.useRef(null),[g,v]=A.useState(-1),x=A.useRef(a),b=A.useRef(i),w=A.useRef(s),S=A.useRef(n),k=A.useRef(r),N=Hd(t,"trapezoid-");if(A.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var H=p.current.getTotalLength();H&&v(H)}catch{}},[]),n!==+n||r!==+r||a!==+a||i!==+i||s!==+s||a===0&&i===0||s===0)return null;var I=Et("recharts-trapezoid",o);if(!h)return A.createElement("g",null,A.createElement("path",cy({},wr(e),{className:I,d:LL(n,r,a,i,s)})));var T=x.current,R=b.current,_=w.current,M=S.current,P=k.current,$="0px ".concat(g===-1?1:g,"px"),z="".concat(g,"px 0px"),W=MB(["strokeDasharray"],c,l);return A.createElement(Gd,{animationId:N,key:N,canBegin:g>0,duration:c,easing:l,isActive:h,begin:f},H=>{var G=Ct(T,a,H),F=Ct(R,i,H),V=Ct(_,s,H),U=Ct(M,n,H),Y=Ct(P,r,H);p.current&&(x.current=G,b.current=F,w.current=V,S.current=U,k.current=Y);var oe=H>0?{transition:W,strokeDasharray:z}:{strokeDasharray:$};return A.createElement("path",cy({},wr(e),{className:I,d:LL(U,Y,G,F,V),ref:p,style:PL(PL({},oe),e.style)}))})},$fe=["option","shapeType","activeClassName"];function Ofe(t,e){if(t==null)return{};var n,r,a=Dfe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Dfe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function zL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function dy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zL(Object(n),!0).forEach(function(r){Rfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rfe(t,e,n){return(e=_fe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _fe(t){var e=Mfe(t,"string");return typeof e=="symbol"?e:e+""}function Mfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pfe(t,e){return dy(dy({},e),t)}function Lfe(t,e){return t==="symbols"}function FL(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return A.createElement(FB,n);case"trapezoid":return A.createElement(Tfe,n);case"sector":return A.createElement(UB,n);case"symbols":if(Lfe(e))return A.createElement(nN,n);break;case"curve":return A.createElement(ud,n);default:return null}}function zfe(t){return A.isValidElement(t)?t.props:t}function fy(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,a=Ofe(t,$fe),i;if(A.isValidElement(e))i=A.cloneElement(e,dy(dy({},a),zfe(e)));else if(typeof e=="function")i=e(a,a.index);else if(kfe(e)&&typeof e!="boolean"){var s=Pfe(e,a);i=A.createElement(FL,{shapeType:n,elementProps:s})}else{var o=a;i=A.createElement(FL,{shapeType:n,elementProps:o})}return a.isActive?A.createElement(yn,{className:r},i):i}var mI=(t,e,n)=>{var r=bn();return(a,i)=>s=>{t==null||t(a,i,s),r(z5({activeIndex:String(i),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:n}))}},gI=t=>{var e=bn();return(n,r)=>a=>{t==null||t(n,r,a),e(uue())}},vI=(t,e,n)=>{var r=bn();return(a,i)=>s=>{t==null||t(a,i,s),r(cue({activeIndex:String(i),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:n}))}};function Bx(t){var{tooltipEntrySettings:e}=t,n=bn(),r=Tn(),a=A.useRef(null);return A.useLayoutEffect(()=>{r||(a.current===null?n(iue(e)):a.current!==e&&n(sue({prev:a.current,next:e})),a.current=e)},[e,n,r]),A.useLayoutEffect(()=>()=>{a.current&&(n(oue(a.current)),a.current=null)},[n]),null}function Ux(t){var{legendPayload:e}=t,n=bn(),r=Tn(),a=A.useRef(null);return A.useLayoutEffect(()=>{r||(a.current===null?n(Fre(e)):a.current!==e&&n(jre({prev:a.current,next:e})),a.current=e)},[n,r,e]),A.useLayoutEffect(()=>()=>{a.current&&(n(Bre(a.current)),a.current=null)},[n]),null}var k2,Ffe=()=>{var[t]=A.useState(()=>Wh("uid-"));return t},jfe=(k2=SX.useId)!==null&&k2!==void 0?k2:Ffe;function Bfe(t,e){var n=jfe();return e||(t?"".concat(t,"-").concat(n):n)}var Ufe=A.createContext(void 0),Vx=t=>{var{id:e,type:n,children:r}=t,a=Bfe("recharts-".concat(n),e);return A.createElement(Ufe.Provider,{value:a},r(a))},Vfe={cartesianItems:[],polarItems:[]},IV=va({name:"graphicalItems",initialState:Vfe,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:sn()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,a=Ri(t).cartesianItems.indexOf(n);a>-1&&(t.cartesianItems[a]=r)},prepare:sn()},removeCartesianGraphicalItem:{reducer(t,e){var n=Ri(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:sn()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:sn()},removePolarGraphicalItem:{reducer(t,e){var n=Ri(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:sn()}}}),{addCartesianGraphicalItem:Wfe,replaceCartesianGraphicalItem:Gfe,removeCartesianGraphicalItem:Hfe,addPolarGraphicalItem:C5e,removePolarGraphicalItem:k5e}=IV.actions,qfe=IV.reducer,Kfe=t=>{var e=bn(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(Wfe(t)):n.current!==t&&e(Gfe({prev:n.current,next:t})),n.current=t},[e,t]),A.useLayoutEffect(()=>()=>{n.current&&(e(Hfe(n.current)),n.current=null)},[e]),null},Wx=A.memo(Kfe),Xfe=["points"];function jL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function E2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jL(Object(n),!0).forEach(function(r){Yfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yfe(t,e,n){return(e=Zfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zfe(t){var e=Qfe(t,"string");return typeof e=="symbol"?e:e+""}function Qfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hy(){return hy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hy.apply(null,arguments)}function Jfe(t,e){if(t==null)return{};var n,r,a=ehe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function ehe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function the(t){var{option:e,dotProps:n,className:r}=t;if(A.isValidElement(e))return A.cloneElement(e,n);if(typeof e=="function")return e(n);var a=Et(r,typeof e!="boolean"?e.className:""),i=n??{},{points:s}=i,o=Jfe(i,Xfe);return A.createElement(CV,hy({},o,{className:a}))}function nhe(t,e){return t==null?!1:e?!0:t.length===1}function AV(t){var{points:e,dot:n,className:r,dotClassName:a,dataKey:i,baseProps:s,needClip:o,clipPathId:l,zIndex:c=mn.scatter}=t;if(!nhe(e,n))return null;var f=pI(n),h=TJ(n),p=e.map((v,x)=>{var b,w,S=E2(E2(E2({r:3},s),h),{},{index:x,cx:(b=v.x)!==null&&b!==void 0?b:void 0,cy:(w=v.y)!==null&&w!==void 0?w:void 0,dataKey:i,value:v.value,payload:v.payload,points:e});return A.createElement(the,{key:"dot-".concat(x),option:n,dotProps:S,className:a})}),g={};return o&&l!=null&&(g.clipPath="url(#clipPath-".concat(f?"":"dots-").concat(l,")")),A.createElement(Lr,{zIndex:c},A.createElement(yn,hy({className:r},g),p))}function BL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function UL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BL(Object(n),!0).forEach(function(r){rhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rhe(t,e,n){return(e=ahe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ahe(t){var e=ihe(t,"string");return typeof e=="symbol"?e:e+""}function ihe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var TV=0,she={xAxis:{},yAxis:{},zAxis:{}},$V=va({name:"cartesianAxis",initialState:she,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:sn()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:sn()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:sn()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:sn()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:sn()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:sn()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:sn()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:sn()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:sn()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,a=t.yAxis[n];if(a){var i=a.widthHistory||[];if(i.length===3&&i[0]===i[2]&&r===i[1]&&r!==a.width&&Math.abs(r-i[0])<=1)return;var s=[...i,r].slice(-3);t.yAxis[n]=UL(UL({},t.yAxis[n]),{},{width:r,widthHistory:s})}}}}),{addXAxis:ohe,replaceXAxis:lhe,removeXAxis:uhe,addYAxis:che,replaceYAxis:dhe,removeYAxis:fhe,addZAxis:E5e,replaceZAxis:N5e,removeZAxis:I5e,updateYAxisWidth:hhe}=$V.actions,phe=$V.reducer,mhe=he([lr],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),ghe=he([mhe,xo,bo],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),Gx=()=>Fe(ghe),vhe=()=>Fe(Jue);function VL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function N2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VL(Object(n),!0).forEach(function(r){yhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yhe(t,e,n){return(e=xhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xhe(t){var e=bhe(t,"string");return typeof e=="symbol"?e:e+""}function bhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var whe=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:a,dataKey:i,clipPath:s}=t;if(a===!1||e.x==null||e.y==null)return null;var o={index:n,dataKey:i,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},l=N2(N2(N2({},o),Ud(a)),rN(a)),c;return A.isValidElement(a)?c=A.cloneElement(a,l):typeof a=="function"?c=a(l):c=A.createElement(CV,l),A.createElement(yn,{className:"recharts-active-dot",clipPath:s},c)};function qk(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:a,clipPath:i,zIndex:s=mn.activeDot}=t,o=Fe(ml),l=vhe();if(e==null||l==null)return null;var c=e.find(f=>l.includes(f.payload));return Dt(c)?null:A.createElement(Lr,{zIndex:s},A.createElement(whe,{point:c,childIndex:Number(o),mainColor:n,dataKey:a,activeDot:r,clipPath:i}))}var WL=(t,e,n)=>{var r=n??t;if(!Dt(r))return Li(r,e,0)},She=(t,e,n)=>{var r={},a=t.filter(Rx),i=t.filter(c=>c.stackId==null),s=a.reduce((c,f)=>(c[f.stackId]||(c[f.stackId]=[]),c[f.stackId].push(f),c),r),o=Object.entries(s).map(c=>{var[f,h]=c,p=h.map(v=>v.dataKey),g=WL(e,n,h[0].barSize);return{stackId:f,dataKeys:p,barSize:g}}),l=i.map(c=>{var f=[c.dataKey].filter(p=>p!=null),h=WL(e,n,c.barSize);return{stackId:void 0,dataKeys:f,barSize:h}});return[...o,...l]};function GL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Wv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GL(Object(n),!0).forEach(function(r){Che(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Che(t,e,n){return(e=khe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function khe(t){var e=Ehe(t,"string");return typeof e=="symbol"?e:e+""}function Ehe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nhe(t,e,n,r,a){var i=r.length;if(!(i<1)){var s=Li(t,n,0,!0),o,l=[];if($t(r[0].barSize)){var c=!1,f=n/i,h=r.reduce((w,S)=>w+(S.barSize||0),0);h+=(i-1)*s,h>=n&&(h-=(i-1)*s,s=0),h>=n&&f>0&&(c=!0,f*=.9,h=i*f);var p=(n-h)/2>>0,g={offset:p-s,size:0};o=r.reduce((w,S)=>{var k,N={stackId:S.stackId,dataKeys:S.dataKeys,position:{offset:g.offset+g.size+s,size:c?f:(k=S.barSize)!==null&&k!==void 0?k:0}},I=[...w,N];return g=I[I.length-1].position,I},l)}else{var v=Li(e,n,0,!0);n-2*v-(i-1)*s<=0&&(s=0);var x=(n-2*v-(i-1)*s)/i;x>1&&(x>>=0);var b=$t(a)?Math.min(x,a):x;o=r.reduce((w,S,k)=>[...w,{stackId:S.stackId,dataKeys:S.dataKeys,position:{offset:v+(x+s)*k+(x-b)/2,size:b}}],l)}return o}}var Ihe=(t,e,n,r,a,i,s)=>{var o=Dt(s)?e:s,l=Nhe(n,r,a!==i?a:i,t,o);return a!==i&&l!=null&&(l=l.map(c=>Wv(Wv({},c),{},{position:Wv(Wv({},c.position),{},{offset:c.position.offset-a/2})}))),l},Ahe=(t,e)=>{var n=Dx(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var a=t[r];if(a){var{stackedData:i}=a;if(i)return i.find(s=>s.key===n)}}}};function The(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&$t(t.zIndex)?t.zIndex:e}var $he=t=>{var{chartData:e}=t,n=bn(),r=Tn();return A.useEffect(()=>r?()=>{}:(n(nL(e)),()=>{n(nL(void 0))}),[e,n,r]),null},HL={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},OV=va({name:"brush",initialState:HL,reducers:{setBrushSettings(t,e){return e.payload==null?HL:e.payload}}}),{setBrushSettings:A5e}=OV.actions,Ohe=OV.reducer;function qL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Gv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qL(Object(n),!0).forEach(function(r){DV(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DV(t,e,n){return(e=Dhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dhe(t){var e=Rhe(t,"string");return typeof e=="symbol"?e:e+""}function Rhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _he=(t,e)=>{var{x:n,y:r}=t,{x:a,y:i}=e;return{x:Math.min(n,a),y:Math.min(r,i),width:Math.abs(a-n),height:Math.abs(i-r)}},Mhe=t=>{var{x1:e,y1:n,x2:r,y2:a}=t;return _he({x:e,y:n},{x:r,y:a})};class Hx{static create(e){return new Hx(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(e)+i}default:return this.scale(e)}if(n){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],a=n[n.length-1];return r<=a?e>=r&&e<=a:e>=a&&e<=r}}DV(Hx,"EPS",1e-4);var Phe=t=>{var e=Object.keys(t).reduce((n,r)=>Gv(Gv({},n),{},{[r]:Hx.create(t[r])}),{});return Gv(Gv({},e),{},{apply(n){var{bandAware:r,position:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.fromEntries(Object.entries(n).map(i=>{var[s,o]=i;return[s,e[s].apply(o,{bandAware:r,position:a})]}))},isInRange(n){return Object.keys(n).every(r=>e[r].isInRange(n[r]))}})};function Lhe(t){return(t%180+180)%180}var zhe=function(e){var{width:n,height:r}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Lhe(a),s=i*Math.PI/180,o=Math.atan(r/n),l=s>o&&s<Math.PI-o?r/Math.sin(s):n/Math.cos(s);return Math.abs(l)},Fhe={dots:[],areas:[],lines:[]},RV=va({name:"referenceElements",initialState:Fhe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Ri(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Ri(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Ri(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:T5e,removeDot:$5e,addArea:O5e,removeArea:D5e,addLine:jhe,removeLine:Bhe}=RV.actions,Uhe=RV.reducer,_V=A.createContext(void 0),Vhe=t=>{var{children:e}=t,[n]=A.useState("".concat(Wh("recharts"),"-clip")),r=Gx();if(r==null)return null;var{x:a,y:i,width:s,height:o}=r;return A.createElement(_V.Provider,{value:n},A.createElement("defs",null,A.createElement("clipPath",{id:n},A.createElement("rect",{x:a,y:i,height:o,width:s}))),e)},Whe=()=>A.useContext(_V);function KL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function XL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KL(Object(n),!0).forEach(function(r){Ghe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ghe(t,e,n){return(e=Hhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hhe(t){var e=qhe(t,"string");return typeof e=="symbol"?e:e+""}function qhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function py(){return py=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},py.apply(null,arguments)}var Khe=(t,e)=>{var n;if(A.isValidElement(t))n=A.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{if(!$t(e.x1)||!$t(e.y1)||!$t(e.x2)||!$t(e.y2))return null;n=A.createElement("line",py({},e,{className:"recharts-reference-line-line"}))}return n},Xhe=(t,e,n,r,a,i)=>{var{x:s,width:o}=i,l=a.y.apply(t,{position:n});if(ha(l)||e==="discard"&&!a.y.isInRange(l))return null;var c=[{x:s+o,y:l},{x:s,y:l}];return r==="left"?c.reverse():c},Yhe=(t,e,n,r,a,i)=>{var{y:s,height:o}=i,l=a.x.apply(t,{position:n});if(ha(l)||e==="discard"&&!a.x.isInRange(l))return null;var c=[{x:l,y:s+o},{x:l,y:s}];return r==="top"?c.reverse():c},Zhe=(t,e,n,r)=>{var a=t.map(i=>r.apply(i,{position:n}));return e==="discard"&&a.some(i=>!r.isInRange(i))?null:a},Qhe=(t,e,n,r,a,i)=>{var{x:s,y:o,segment:l,ifOverflow:c}=i,f=li(s),h=li(o);return h?Xhe(o,c,n,a,t,e):f?Yhe(s,c,n,r,t,e):l!=null&&l.length===2?Zhe(l,c,n,t):null};function Jhe(t){var e=bn();return A.useEffect(()=>(e(jhe(t)),()=>{e(Bhe(t))})),null}function epe(t){var{xAxisId:e,yAxisId:n,shape:r,className:a,ifOverflow:i}=t,s=Tn(),o=Whe(),l=Fe(T=>Ss(T,e)),c=Fe(T=>Cs(T,n)),f=Fe(T=>kd(T,"xAxis",e,s)),h=Fe(T=>kd(T,"yAxis",n,s)),p=Wd();if(!o||!p||l==null||c==null||f==null||h==null)return null;var g=Phe({x:f,y:h}),v=Qhe(g,p,t.position,l.orientation,c.orientation,t);if(!v)return null;var[{x,y:b},{x:w,y:S}]=v,k=i==="hidden"?"url(#".concat(o,")"):void 0,N=XL(XL({clipPath:k},wr(t)),{},{x1:x,y1:b,x2:w,y2:S}),I=Mhe({x1:x,y1:b,x2:w,y2:S});return A.createElement(Lr,{zIndex:t.zIndex},A.createElement(yn,{className:Et("recharts-reference-line",a)},Khe(r,N),A.createElement(yV,py({},I,{lowerWidth:I.width,upperWidth:I.width}),A.createElement(bV,{label:t.label}),t.children)))}var tpe={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:mn.line};function ap(t){var e=Un(t,tpe);return A.createElement(A.Fragment,null,A.createElement(Jhe,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x:e.x,y:e.y,segment:e.segment}),A.createElement(epe,e))}ap.displayName="ReferenceLine";function MV(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var a=t[r];a!==void 0&&n.push(a)}return n}function npe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return zhe(r,n)}function rpe(t,e,n){var r=n==="width",{x:a,y:i,width:s,height:o}=t;return e===1?{start:r?a:i,end:r?a+s:i+o}:{start:r?a+s:i+o,end:r?a:i}}function ip(t,e,n,r,a){if(t*e<t*r||t*e>t*a)return!1;var i=n();return t*(e-t*i/2-r)>=0&&t*(e+t*i/2-a)<=0}function ape(t,e){return MV(t,e+1)}function ipe(t,e,n,r,a){for(var i=(r||[]).slice(),{start:s,end:o}=e,l=0,c=1,f=s,h=function(){var v=r==null?void 0:r[l];if(v===void 0)return{v:MV(r,c)};var x=l,b,w=()=>(b===void 0&&(b=n(v,x)),b),S=v.coordinate,k=l===0||ip(t,S,w,f,o);k||(l=0,f=s,c+=1),k&&(f=S+t*(w()/2+a),l+=c)},p;c<=i.length;)if(p=h(),p)return p.v;return[]}function spe(t,e,n,r,a){var i=(r||[]).slice(),s=i.length;if(s===0)return[];for(var{start:o,end:l}=e,c=1;c<=s;c++){for(var f=(s-1)%c,h=o,p=!0,g=function(){var S=r[v],k=v,N,I=()=>(N===void 0&&(N=n(S,k)),N),T=S.coordinate,R=v===f||ip(t,T,I,h,l);if(!R)return p=!1,1;R&&(h=T+t*(I()/2+a))},v=f;v<s&&!g();v+=c);if(p){for(var x=[],b=f;b<s;b+=c)x.push(r[b]);return x}}return[]}function YL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Tr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YL(Object(n),!0).forEach(function(r){ope(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ope(t,e,n){return(e=lpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lpe(t){var e=upe(t,"string");return typeof e=="symbol"?e:e+""}function upe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cpe(t,e,n,r,a){for(var i=(r||[]).slice(),s=i.length,{start:o}=e,{end:l}=e,c=function(p){var g=i[p],v,x=()=>(v===void 0&&(v=n(g,p)),v);if(p===s-1){var b=t*(g.coordinate+t*x()/2-l);i[p]=g=Tr(Tr({},g),{},{tickCoord:b>0?g.coordinate-b*t:g.coordinate})}else i[p]=g=Tr(Tr({},g),{},{tickCoord:g.coordinate});if(g.tickCoord!=null){var w=ip(t,g.tickCoord,x,o,l);w&&(l=g.tickCoord-t*(x()/2+a),i[p]=Tr(Tr({},g),{},{isShow:!0}))}},f=s-1;f>=0;f--)c(f);return i}function dpe(t,e,n,r,a,i){var s=(r||[]).slice(),o=s.length,{start:l,end:c}=e;if(i){var f=r[o-1],h=n(f,o-1),p=t*(f.coordinate+t*h/2-c);if(s[o-1]=f=Tr(Tr({},f),{},{tickCoord:p>0?f.coordinate-p*t:f.coordinate}),f.tickCoord!=null){var g=ip(t,f.tickCoord,()=>h,l,c);g&&(c=f.tickCoord-t*(h/2+a),s[o-1]=Tr(Tr({},f),{},{isShow:!0}))}}for(var v=i?o-1:o,x=function(S){var k=s[S],N,I=()=>(N===void 0&&(N=n(k,S)),N);if(S===0){var T=t*(k.coordinate-t*I()/2-l);s[S]=k=Tr(Tr({},k),{},{tickCoord:T<0?k.coordinate-T*t:k.coordinate})}else s[S]=k=Tr(Tr({},k),{},{tickCoord:k.coordinate});if(k.tickCoord!=null){var R=ip(t,k.tickCoord,I,l,c);R&&(l=k.tickCoord+t*(I()/2+a),s[S]=Tr(Tr({},k),{},{isShow:!0}))}},b=0;b<v;b++)x(b);return s}function yI(t,e,n){var{tick:r,ticks:a,viewBox:i,minTickGap:s,orientation:o,interval:l,tickFormatter:c,unit:f,angle:h}=t;if(!a||!a.length||!r)return[];if(De(l)||Ap.isSsr){var p;return(p=ape(a,De(l)?l:0))!==null&&p!==void 0?p:[]}var g=[],v=o==="top"||o==="bottom"?"width":"height",x=f&&v==="width"?Fh(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},b=(k,N)=>{var I=typeof c=="function"?c(k.value,N):k.value;return v==="width"?npe(Fh(I,{fontSize:e,letterSpacing:n}),x,h):Fh(I,{fontSize:e,letterSpacing:n})[v]},w=a.length>=2?ua(a[1].coordinate-a[0].coordinate):1,S=rpe(i,w,v);return l==="equidistantPreserveStart"?ipe(w,S,b,a,s):l==="equidistantPreserveEnd"?spe(w,S,b,a,s):(l==="preserveStart"||l==="preserveStartEnd"?g=dpe(w,S,b,a,s,l==="preserveStartEnd"):g=cpe(w,S,b,a,s),g.filter(k=>k.isShow))}var fpe=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:a=0,tickMargin:i=0}=t,s=0;if(e){Array.from(e).forEach(f=>{if(f){var h=f.getBoundingClientRect();h.width>s&&(s=h.width)}});var o=n?n.getBoundingClientRect().width:0,l=a+i,c=s+l+o+(n?r:0);return Math.round(c)}return 0},hpe=["axisLine","width","height","className","hide","ticks","axisType"];function ppe(t,e){if(t==null)return{};var n,r,a=mpe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function mpe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Du(){return Du=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Du.apply(null,arguments)}function ZL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function _n(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZL(Object(n),!0).forEach(function(r){gpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gpe(t,e,n){return(e=vpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vpe(t){var e=ype(t,"string");return typeof e=="symbol"?e:e+""}function ype(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ao={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:mn.axis};function xpe(t){var{x:e,y:n,width:r,height:a,orientation:i,mirror:s,axisLine:o,otherSvgProps:l}=t;if(!o)return null;var c=_n(_n(_n({},l),Kr(o)),{},{fill:"none"});if(i==="top"||i==="bottom"){var f=+(i==="top"&&!s||i==="bottom"&&s);c=_n(_n({},c),{},{x1:e,y1:n+f*a,x2:e+r,y2:n+f*a})}else{var h=+(i==="left"&&!s||i==="right"&&s);c=_n(_n({},c),{},{x1:e+h*r,y1:n,x2:e+h*r,y2:n+a})}return A.createElement("line",Du({},c,{className:Et("recharts-cartesian-axis-line",vd(o,"className"))}))}function bpe(t,e,n,r,a,i,s,o,l){var c,f,h,p,g,v,x=o?-1:1,b=t.tickSize||s,w=De(t.tickCoord)?t.tickCoord:t.coordinate;switch(i){case"top":c=f=t.coordinate,p=n+ +!o*a,h=p-x*b,v=h-x*l,g=w;break;case"left":h=p=t.coordinate,f=e+ +!o*r,c=f-x*b,g=c-x*l,v=w;break;case"right":h=p=t.coordinate,f=e+ +o*r,c=f+x*b,g=c+x*l,v=w;break;default:c=f=t.coordinate,p=n+ +o*a,h=p+x*b,v=h+x*l,g=w;break}return{line:{x1:c,y1:h,x2:f,y2:p},tick:{x:g,y:v}}}function wpe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function Spe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function Cpe(t){var{option:e,tickProps:n,value:r}=t,a,i=Et(n.className,"recharts-cartesian-axis-tick-value");if(A.isValidElement(e))a=A.cloneElement(e,_n(_n({},n),{},{className:i}));else if(typeof e=="function")a=e(_n(_n({},n),{},{className:i}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=Et(s,e==null?void 0:e.className)),a=A.createElement(fI,Du({},n,{className:s}),r)}return a}var kpe=A.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:a,stroke:i,tickFormatter:s,unit:o,padding:l,tickTextProps:c,orientation:f,mirror:h,x:p,y:g,width:v,height:x,tickSize:b,tickMargin:w,fontSize:S,letterSpacing:k,getTicksConfig:N,events:I,axisType:T}=t,R=yI(_n(_n({},N),{},{ticks:n}),S,k),_=wpe(f,h),M=Spe(f,h),P=Kr(N),$=Ud(r),z={};typeof a=="object"&&(z=a);var W=_n(_n({},P),{},{fill:"none"},z),H=R.map(V=>_n({entry:V},bpe(V,p,g,v,x,f,b,h,w))),G=H.map(V=>{var{entry:U,line:Y}=V;return A.createElement(yn,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(U.value,"-").concat(U.coordinate,"-").concat(U.tickCoord)},a&&A.createElement("line",Du({},W,Y,{className:Et("recharts-cartesian-axis-tick-line",vd(a,"className"))})))}),F=H.map((V,U)=>{var{entry:Y,tick:oe}=V,j=_n(_n(_n(_n({textAnchor:_,verticalAnchor:M},P),{},{stroke:"none",fill:i},$),oe),{},{index:U,payload:Y,visibleTicksCount:R.length,tickFormatter:s,padding:l},c);return A.createElement(yn,Du({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Y.value,"-").concat(Y.coordinate,"-").concat(Y.tickCoord)},nx(I,Y,U)),r&&A.createElement(Cpe,{option:r,tickProps:j,value:"".concat(typeof s=="function"?s(Y.value,U):Y.value).concat(o||"")}))});return A.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(T,"-ticks")},F.length>0&&A.createElement(Lr,{zIndex:mn.label},A.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(T,"-tick-labels"),ref:e},F)),G.length>0&&A.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(T,"-tick-lines")},G))}),Epe=A.forwardRef((t,e)=>{var{axisLine:n,width:r,height:a,className:i,hide:s,ticks:o,axisType:l}=t,c=ppe(t,hpe),[f,h]=A.useState(""),[p,g]=A.useState(""),v=A.useRef(null);A.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var b;return fpe({ticks:v.current,label:(b=t.labelRef)===null||b===void 0?void 0:b.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var x=A.useCallback(b=>{if(b){var w=b.getElementsByClassName("recharts-cartesian-axis-tick-value");v.current=w;var S=w[0];if(S){var k=window.getComputedStyle(S),N=k.fontSize,I=k.letterSpacing;(N!==f||I!==p)&&(h(N),g(I))}}},[f,p]);return s||r!=null&&r<=0||a!=null&&a<=0?null:A.createElement(Lr,{zIndex:t.zIndex},A.createElement(yn,{className:Et("recharts-cartesian-axis",i)},A.createElement(xpe,{x:t.x,y:t.y,width:r,height:a,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Kr(t)}),A.createElement(kpe,{ref:x,axisType:l,events:c,fontSize:f,getTicksConfig:t,height:t.height,letterSpacing:p,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:o,unit:t.unit,width:t.width,x:t.x,y:t.y}),A.createElement(yV,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},A.createElement(bV,{label:t.label,labelRef:t.labelRef}),t.children)))}),xI=A.forwardRef((t,e)=>{var n=Un(t,ao);return A.createElement(Epe,Du({},n,{ref:e}))});xI.displayName="CartesianAxis";var Npe=["x1","y1","x2","y2","key"],Ipe=["offset"],Ape=["xAxisId","yAxisId"],Tpe=["xAxisId","yAxisId"];function QL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Dr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QL(Object(n),!0).forEach(function(r){$pe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $pe(t,e,n){return(e=Ope(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ope(t){var e=Dpe(t,"string");return typeof e=="symbol"?e:e+""}function Dpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mu(){return mu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mu.apply(null,arguments)}function my(t,e){if(t==null)return{};var n,r,a=Rpe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Rpe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var _pe=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:a,width:i,height:s,ry:o}=t;return A.createElement("rect",{x:r,y:a,ry:o,width:i,height:s,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function PV(t){var{option:e,lineItemProps:n}=t,r;if(A.isValidElement(e))r=A.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var a,{x1:i,y1:s,x2:o,y2:l,key:c}=n,f=my(n,Npe),h=(a=Kr(f))!==null&&a!==void 0?a:{},{offset:p}=h,g=my(h,Ipe);r=A.createElement("line",mu({},g,{x1:i,y1:s,x2:o,y2:l,fill:"none",key:c}))}return r}function Mpe(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:a}=t;if(!r||!a||!a.length)return null;var{xAxisId:i,yAxisId:s}=t,o=my(t,Ape),l=a.map((c,f)=>{var h=Dr(Dr({},o),{},{x1:e,y1:c,x2:e+n,y2:c,key:"line-".concat(f),index:f});return A.createElement(PV,{key:"line-".concat(f),option:r,lineItemProps:h})});return A.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function Ppe(t){var{y:e,height:n,vertical:r=!0,verticalPoints:a}=t;if(!r||!a||!a.length)return null;var{xAxisId:i,yAxisId:s}=t,o=my(t,Tpe),l=a.map((c,f)=>{var h=Dr(Dr({},o),{},{x1:c,y1:e,x2:c,y2:e+n,key:"line-".concat(f),index:f});return A.createElement(PV,{option:r,lineItemProps:h,key:"line-".concat(f)})});return A.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function Lpe(t){var{horizontalFill:e,fillOpacity:n,x:r,y:a,width:i,height:s,horizontalPoints:o,horizontal:l=!0}=t;if(!l||!e||!e.length||o==null)return null;var c=o.map(h=>Math.round(h+a-a)).sort((h,p)=>h-p);a!==c[0]&&c.unshift(0);var f=c.map((h,p)=>{var g=!c[p+1],v=g?a+s-h:c[p+1]-h;if(v<=0)return null;var x=p%e.length;return A.createElement("rect",{key:"react-".concat(p),y:h,x:r,height:v,width:i,stroke:"none",fill:e[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function zpe(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:a,y:i,width:s,height:o,verticalPoints:l}=t;if(!e||!n||!n.length)return null;var c=l.map(h=>Math.round(h+a-a)).sort((h,p)=>h-p);a!==c[0]&&c.unshift(0);var f=c.map((h,p)=>{var g=!c[p+1],v=g?a+s-h:c[p+1]-h;if(v<=0)return null;var x=p%n.length;return A.createElement("rect",{key:"react-".concat(p),x:h,y:i,width:v,height:o,stroke:"none",fill:n[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var Fpe=(t,e)=>{var{xAxis:n,width:r,height:a,offset:i}=t;return pB(yI(Dr(Dr(Dr({},ao),n),{},{ticks:mB(n),viewBox:{x:0,y:0,width:r,height:a}})),i.left,i.left+i.width,e)},jpe=(t,e)=>{var{yAxis:n,width:r,height:a,offset:i}=t;return pB(yI(Dr(Dr(Dr({},ao),n),{},{ticks:mB(n),viewBox:{x:0,y:0,width:r,height:a}})),i.top,i.top+i.height,e)},Bpe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:mn.grid};function nf(t){var e=EB(),n=NB(),r=kB(),a=Dr(Dr({},Un(t,Bpe)),{},{x:De(t.x)?t.x:r.left,y:De(t.y)?t.y:r.top,width:De(t.width)?t.width:r.width,height:De(t.height)?t.height:r.height}),{xAxisId:i,yAxisId:s,x:o,y:l,width:c,height:f,syncWithTicks:h,horizontalValues:p,verticalValues:g}=a,v=Tn(),x=Fe(M=>W3(M,"xAxis",i,v)),b=Fe(M=>W3(M,"yAxis",s,v));if(!hs(c)||!hs(f)||!De(o)||!De(l))return null;var w=a.verticalCoordinatesGenerator||Fpe,S=a.horizontalCoordinatesGenerator||jpe,{horizontalPoints:k,verticalPoints:N}=a;if((!k||!k.length)&&typeof S=="function"){var I=p&&p.length,T=S({yAxis:b?Dr(Dr({},b),{},{ticks:I?p:b.ticks}):void 0,width:e??c,height:n??f,offset:r},I?!0:h);j0(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof T,"]")),Array.isArray(T)&&(k=T)}if((!N||!N.length)&&typeof w=="function"){var R=g&&g.length,_=w({xAxis:x?Dr(Dr({},x),{},{ticks:R?g:x.ticks}):void 0,width:e??c,height:n??f,offset:r},R?!0:h);j0(Array.isArray(_),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof _,"]")),Array.isArray(_)&&(N=_)}return A.createElement(Lr,{zIndex:a.zIndex},A.createElement("g",{className:"recharts-cartesian-grid"},A.createElement(_pe,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),A.createElement(Lpe,mu({},a,{horizontalPoints:k})),A.createElement(zpe,mu({},a,{verticalPoints:N})),A.createElement(Mpe,mu({},a,{offset:r,horizontalPoints:k,xAxis:x,yAxis:b})),A.createElement(Ppe,mu({},a,{offset:r,verticalPoints:N,xAxis:x,yAxis:b}))))}nf.displayName="CartesianGrid";var Upe={},LV=va({name:"errorBars",initialState:Upe,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:a}=e.payload;t[n]&&(t[n]=t[n].map(i=>i.dataKey===r.dataKey&&i.direction===r.direction?a:i))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(a=>a.dataKey!==r.dataKey||a.direction!==r.direction))}}}),{addErrorBar:R5e,replaceErrorBar:_5e,removeErrorBar:M5e}=LV.actions,Vpe=LV.reducer,Wpe=["children"];function Gpe(t,e){if(t==null)return{};var n,r,a=Hpe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Hpe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var qpe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Kpe=A.createContext(qpe);function bI(t){var{children:e}=t,n=Gpe(t,Wpe);return A.createElement(Kpe.Provider,{value:n},e)}function Vp(t,e){var n,r,a=Fe(c=>Ss(c,t)),i=Fe(c=>Cs(c,e)),s=(n=a==null?void 0:a.allowDataOverflow)!==null&&n!==void 0?n:rr.allowDataOverflow,o=(r=i==null?void 0:i.allowDataOverflow)!==null&&r!==void 0?r:ar.allowDataOverflow,l=s||o;return{needClip:l,needClipX:s,needClipY:o}}function qx(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,a=Gx(),{needClipX:i,needClipY:s,needClip:o}=Vp(e,n);if(!o||!a)return null;var{x:l,y:c,width:f,height:h}=a;return A.createElement("clipPath",{id:"clipPath-".concat(r)},A.createElement("rect",{x:i?l:l-f/2,y:s?c:c-h/2,width:i?f:f*2,height:s?h:h*2}))}var zV=(t,e,n,r)=>fi(t,"xAxis",e,r),FV=(t,e,n,r)=>di(t,"xAxis",e,r),jV=(t,e,n,r)=>fi(t,"yAxis",n,r),BV=(t,e,n,r)=>di(t,"yAxis",n,r),Xpe=he([xt,zV,jV,FV,BV],(t,e,n,r,a)=>ws(t,"xAxis")?hl(e,r,!1):hl(n,a,!1)),Ype=(t,e,n,r,a)=>a;function Zpe(t){return t.type==="line"}var Qpe=he([Zd,Ype],(t,e)=>t.filter(Zpe).find(n=>n.id===e)),Jpe=he([xt,zV,jV,FV,BV,Qpe,Xpe,Ix],(t,e,n,r,a,i,s,o)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:f}=o;if(!(i==null||e==null||n==null||r==null||a==null||r.length===0||a.length===0||s==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:h,data:p}=i,g;if(p!=null&&p.length>0?g=p:g=l==null?void 0:l.slice(c,f+1),g!=null)return Lme({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:a,dataKey:h,bandSize:s,displayedData:g})}});function UV(t){var e=Ud(t),n=3,r=2;if(e!=null){var{r:a,strokeWidth:i}=e,s=Number(a),o=Number(i);return(Number.isNaN(s)||s<0)&&(s=n),(Number.isNaN(o)||o<0)&&(o=r),{r:s,strokeWidth:o}}return{r:n,strokeWidth:r}}var I2={exports:{}},A2={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JL;function eme(){if(JL)return A2;JL=1;var t=Ld();function e(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,a=t.useRef,i=t.useEffect,s=t.useMemo,o=t.useDebugValue;return A2.useSyncExternalStoreWithSelector=function(l,c,f,h,p){var g=a(null);if(g.current===null){var v={hasValue:!1,value:null};g.current=v}else v=g.current;g=s(function(){function b(I){if(!w){if(w=!0,S=I,I=h(I),p!==void 0&&v.hasValue){var T=v.value;if(p(T,I))return k=T}return k=I}if(T=k,n(S,I))return T;var R=h(I);return p!==void 0&&p(T,R)?(S=I,T):(S=I,k=R)}var w=!1,S,k,N=f===void 0?null:f;return[function(){return b(c())},N===null?void 0:function(){return b(N())}]},[c,f,h,p]);var x=r(l,g[0],g[1]);return i(function(){v.hasValue=!0,v.value=x},[x]),o(x),x},A2}var ez;function tme(){return ez||(ez=1,I2.exports=eme()),I2.exports}tme();function nme(t){t()}function rme(){let t=null,e=null;return{clear(){t=null,e=null},notify(){nme(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const a=e={callback:n,next:null,prev:e};return a.prev?a.prev.next=a:t=a,function(){!r||t===null||(r=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}var tz={notify(){},get:()=>[]};function ame(t,e){let n,r=tz,a=0,i=!1;function s(x){f();const b=r.subscribe(x);let w=!1;return()=>{w||(w=!0,b(),h())}}function o(){r.notify()}function l(){v.onStateChange&&v.onStateChange()}function c(){return i}function f(){a++,n||(n=t.subscribe(l),r=rme())}function h(){a--,n&&a===0&&(n(),n=void 0,r.clear(),r=tz)}function p(){i||(i=!0,f())}function g(){i&&(i=!1,h())}const v={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:c,trySubscribe:p,tryUnsubscribe:g,getListeners:()=>r};return v}var ime=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sme=ime(),ome=()=>typeof navigator<"u"&&navigator.product==="ReactNative",lme=ome(),ume=()=>sme||lme?A.useLayoutEffect:A.useEffect,cme=ume();function nz(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function dme(t,e){if(nz(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(!Object.prototype.hasOwnProperty.call(e,n[a])||!nz(t[n[a]],e[n[a]]))return!1;return!0}var T2=Symbol.for("react-redux-context"),$2=typeof globalThis<"u"?globalThis:{};function fme(){if(!A.createContext)return{};const t=$2[T2]??($2[T2]=new Map);let e=t.get(A.createContext);return e||(e=A.createContext(null),t.set(A.createContext,e)),e}var hme=fme();function pme(t){const{children:e,context:n,serverState:r,store:a}=t,i=A.useMemo(()=>{const l=ame(a);return{store:a,subscription:l,getServerState:r?()=>r:void 0}},[a,r]),s=A.useMemo(()=>a.getState(),[a]);cme(()=>{const{subscription:l}=i;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),s!==a.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[i,s]);const o=n||hme;return A.createElement(o.Provider,{value:i},e)}var mme=pme,gme=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function vme(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function rf(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(gme.has(r)){if(t[r]==null&&e[r]==null)continue;if(!dme(t[r],e[r]))return!1}else if(!vme(t[r],e[r]))return!1;return!0}var yme=["id"],xme=["type","layout","connectNulls","needClip","shape"],bme=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function sp(){return sp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sp.apply(null,arguments)}function rz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function es(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rz(Object(n),!0).forEach(function(r){wme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wme(t,e,n){return(e=Sme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sme(t){var e=Cme(t,"string");return typeof e=="symbol"?e:e+""}function Cme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wI(t,e){if(t==null)return{};var n,r,a=kme(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function kme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Eme=t=>{var{dataKey:e,name:n,stroke:r,legendType:a,hide:i}=t;return[{inactive:i,dataKey:e,type:a,color:r,value:Cl(n,e),payload:t}]},Nme=A.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:a,fill:i,name:s,hide:o,unit:l,tooltipType:c,id:f}=t,h={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:a,fill:i,dataKey:e,nameKey:void 0,name:Cl(s,e),hide:o,type:c,color:r,unit:l,graphicalItemId:f}};return A.createElement(Bx,{tooltipEntrySettings:h})}),VV=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function Ime(t,e){for(var n=t.length%2!==0?[...t,0]:t,r=[],a=0;a<e;++a)r=[...r,...n];return r}var Ame=(t,e,n)=>{var r=n.reduce((h,p)=>h+p);if(!r)return VV(e,t);for(var a=Math.floor(t/r),i=t%r,s=e-t,o=[],l=0,c=0;l<n.length;c+=n[l],++l)if(c+n[l]>i){o=[...n.slice(0,l),i-c];break}var f=o.length%2===0?[0,s]:[s];return[...Ime(n,a),...o,...f].map(h=>"".concat(h,"px")).join(", ")};function Tme(t){var{clipPathId:e,points:n,props:r}=t,{dot:a,dataKey:i,needClip:s}=r,{id:o}=r,l=wI(r,yme),c=Kr(l);return A.createElement(AV,{points:n,dot:a,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:i,baseProps:c,needClip:s,clipPathId:e})}function $me(t){var{showLabels:e,children:n,points:r}=t,a=A.useMemo(()=>r==null?void 0:r.map(i=>{var s,o,l={x:(s=i.x)!==null&&s!==void 0?s:0,y:(o=i.y)!==null&&o!==void 0?o:0,width:0,lowerWidth:0,upperWidth:0,height:0};return es(es({},l),{},{value:i.value,payload:i.payload,viewBox:l,parentViewBox:void 0,fill:void 0})}),[r]);return A.createElement(Fx,{value:e?a:void 0},n)}function az(t){var{clipPathId:e,pathRef:n,points:r,strokeDasharray:a,props:i}=t,{type:s,layout:o,connectNulls:l,needClip:c,shape:f}=i,h=wI(i,xme),p=es(es({},wr(h)),{},{fill:"none",className:"recharts-line-curve",clipPath:c?"url(#clipPath-".concat(e,")"):void 0,points:r,type:s,layout:o,connectNulls:l,strokeDasharray:a??i.strokeDasharray});return A.createElement(A.Fragment,null,(r==null?void 0:r.length)>1&&A.createElement(fy,sp({shapeType:"curve",option:f},p,{pathRef:n})),A.createElement(Tme,{points:r,clipPathId:e,props:i}))}function Ome(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function Dme(t){var{clipPathId:e,props:n,pathRef:r,previousPointsRef:a,longestAnimatedLengthRef:i}=t,{points:s,strokeDasharray:o,isAnimationActive:l,animationBegin:c,animationDuration:f,animationEasing:h,animateNewValues:p,width:g,height:v,onAnimationEnd:x,onAnimationStart:b}=n,w=a.current,S=Hd(s,"recharts-line-"),k=A.useRef(S),[N,I]=A.useState(!1),T=!N,R=A.useCallback(()=>{typeof x=="function"&&x(),I(!1)},[x]),_=A.useCallback(()=>{typeof b=="function"&&b(),I(!0)},[b]),M=Ome(r.current),P=A.useRef(0);k.current!==S&&(P.current=i.current,k.current=S);var $=P.current;return A.createElement($me,{points:s,showLabels:T},n.children,A.createElement(Gd,{animationId:S,begin:c,duration:f,isActive:l,easing:h,onAnimationEnd:R,onAnimationStart:_,key:S},z=>{var W=Ct($,M+$,z),H=Math.min(W,M),G;if(l)if(o){var F="".concat(o).split(/[,\s]+/gim).map(Y=>parseFloat(Y));G=Ame(H,M,F)}else G=VV(M,H);else G=o==null?void 0:String(o);if(z>0&&M>0&&(a.current=s,i.current=Math.max(i.current,H)),w){var V=w.length/s.length,U=z===1?s:s.map((Y,oe)=>{var j=Math.floor(oe*V);if(w[j]){var q=w[j];return es(es({},Y),{},{x:Ct(q.x,Y.x,z),y:Ct(q.y,Y.y,z)})}return p?es(es({},Y),{},{x:Ct(g*2,Y.x,z),y:Ct(v/2,Y.y,z)}):es(es({},Y),{},{x:Y.x,y:Y.y})});return a.current=U,A.createElement(az,{props:n,points:U,clipPathId:e,pathRef:r,strokeDasharray:G})}return A.createElement(az,{props:n,points:s,clipPathId:e,pathRef:r,strokeDasharray:G})}),A.createElement(jx,{label:n.label}))}function Rme(t){var{clipPathId:e,props:n}=t,r=A.useRef(null),a=A.useRef(0),i=A.useRef(null);return A.createElement(Dme,{props:n,clipPathId:e,previousPointsRef:r,longestAnimatedLengthRef:a,pathRef:i})}var _me=(t,e)=>{var n,r;return{x:(n=t.x)!==null&&n!==void 0?n:void 0,y:(r=t.y)!==null&&r!==void 0?r:void 0,value:t.value,errorVal:Yt(t.payload,e)}};class Mme extends A.Component{render(){var{hide:e,dot:n,points:r,className:a,xAxisId:i,yAxisId:s,top:o,left:l,width:c,height:f,id:h,needClip:p,zIndex:g}=this.props;if(e)return null;var v=Et("recharts-line",a),x=h,{r:b,strokeWidth:w}=UV(n),S=pI(n),k=b*2+w,N=p?"url(#clipPath-".concat(S?"":"dots-").concat(x,")"):void 0;return A.createElement(Lr,{zIndex:g},A.createElement(yn,{className:v},p&&A.createElement("defs",null,A.createElement(qx,{clipPathId:x,xAxisId:i,yAxisId:s}),!S&&A.createElement("clipPath",{id:"clipPath-dots-".concat(x)},A.createElement("rect",{x:l-k/2,y:o-k/2,width:c+k,height:f+k}))),A.createElement(bI,{xAxisId:i,yAxisId:s,data:r,dataPointFormatter:_me,errorBarOffset:0},A.createElement(Rme,{props:this.props,clipPathId:x}))),A.createElement(qk,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:N}))}}var WV={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:mn.line,type:"linear"};function Pme(t){var e=Un(t,WV),{activeDot:n,animateNewValues:r,animationBegin:a,animationDuration:i,animationEasing:s,connectNulls:o,dot:l,hide:c,isAnimationActive:f,label:h,legendType:p,xAxisId:g,yAxisId:v,id:x}=e,b=wI(e,bme),{needClip:w}=Vp(g,v),S=Gx(),k=kl(),N=Tn(),I=Fe(P=>Jpe(P,g,v,N,x));if(k!=="horizontal"&&k!=="vertical"||I==null||S==null)return null;var{height:T,width:R,x:_,y:M}=S;return A.createElement(Mme,sp({},b,{id:x,connectNulls:o,dot:l,activeDot:n,animateNewValues:r,animationBegin:a,animationDuration:i,animationEasing:s,isAnimationActive:f,hide:c,label:h,legendType:p,xAxisId:g,yAxisId:v,points:I,layout:k,height:T,width:R,left:_,top:M,needClip:w}))}function Lme(t){var{layout:e,xAxis:n,yAxis:r,xAxisTicks:a,yAxisTicks:i,dataKey:s,bandSize:o,displayedData:l}=t;return l.map((c,f)=>{var h=Yt(c,s);if(e==="horizontal"){var p=xd({axis:n,ticks:a,bandSize:o,entry:c,index:f}),g=Dt(h)?null:r.scale(h);return{x:p,y:g,value:h,payload:c}}var v=Dt(h)?null:n.scale(h),x=xd({axis:r,ticks:i,bandSize:o,entry:c,index:f});return v==null||x==null?null:{x:v,y:x,value:h,payload:c}}).filter(Boolean)}function zme(t){var e=Un(t,WV),n=Tn();return A.createElement(Vx,{id:e.id,type:"line"},r=>A.createElement(A.Fragment,null,A.createElement(Ux,{legendPayload:Eme(e)}),A.createElement(Nme,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),A.createElement(Wx,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),A.createElement(Pme,sp({},e,{id:r}))))}var Kx=A.memo(zme,rf);Kx.displayName="Line";function ks(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(a=>a.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:TV}function Es(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(a=>a.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:TV}var GV=(t,e,n)=>fi(t,"xAxis",ks(t,e),n),HV=(t,e,n)=>di(t,"xAxis",ks(t,e),n),qV=(t,e,n)=>fi(t,"yAxis",Es(t,e),n),KV=(t,e,n)=>di(t,"yAxis",Es(t,e),n),Fme=he([xt,GV,qV,HV,KV],(t,e,n,r,a)=>ws(t,"xAxis")?hl(e,r,!1):hl(n,a,!1)),jme=(t,e)=>e,XV=he([Zd,jme],(t,e)=>t.filter(n=>n.type==="area").find(n=>n.id===e)),YV=t=>{var e=xt(t),n=ws(e,"xAxis");return n?"yAxis":"xAxis"},Bme=(t,e)=>{var n=YV(t);return n==="yAxis"?Es(t,e):ks(t,e)},Ume=(t,e,n)=>sy(t,YV(t),Bme(t,e),n),Vme=he([XV,Ume],(t,e)=>{var n;if(!(t==null||e==null)){var{stackId:r}=t,a=Dx(t);if(!(r==null||a==null)){var i=(n=e[r])===null||n===void 0?void 0:n.stackedData,s=i==null?void 0:i.find(o=>o.key===a);if(s!=null)return s.map(o=>[o[0],o[1]])}}}),Wme=he([xt,GV,qV,HV,KV,Vme,EU,Fme,XV,Qoe],(t,e,n,r,a,i,s,o,l,c)=>{var{chartData:f,dataStartIndex:h,dataEndIndex:p}=s;if(!(l==null||t!=="horizontal"&&t!=="vertical"||e==null||n==null||r==null||a==null||r.length===0||a.length===0||o==null)){var{data:g}=l,v;if(g&&g.length>0?v=g:v=f==null?void 0:f.slice(h,p+1),v!=null)return uge({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:a,dataStartIndex:h,areaSettings:l,stackedData:i,displayedData:v,chartBaseValue:c,bandSize:o})}}),Gme=["id"],Hme=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function Su(){return Su=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Su.apply(null,arguments)}function ZV(t,e){if(t==null)return{};var n,r,a=qme(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function qme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function iz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function od(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iz(Object(n),!0).forEach(function(r){Kme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kme(t,e,n){return(e=Xme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xme(t){var e=Yme(t,"string");return typeof e=="symbol"?e:e+""}function Yme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gy(t,e){return t&&t!=="none"?t:e}var Zme=t=>{var{dataKey:e,name:n,stroke:r,fill:a,legendType:i,hide:s}=t;return[{inactive:s,dataKey:e,type:i,color:gy(r,a),value:Cl(n,e),payload:t}]},Qme=A.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:a,fill:i,name:s,hide:o,unit:l,tooltipType:c,id:f}=t,h={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:a,fill:i,dataKey:e,nameKey:void 0,name:Cl(s,e),hide:o,type:c,color:gy(r,i),unit:l,graphicalItemId:f}};return A.createElement(Bx,{tooltipEntrySettings:h})});function Jme(t){var{clipPathId:e,points:n,props:r}=t,{needClip:a,dot:i,dataKey:s}=r,o=Kr(r);return A.createElement(AV,{points:n,dot:i,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:s,baseProps:o,needClip:a,clipPathId:e})}function ege(t){var{showLabels:e,children:n,points:r}=t,a=r.map(i=>{var s,o,l={x:(s=i.x)!==null&&s!==void 0?s:0,y:(o=i.y)!==null&&o!==void 0?o:0,width:0,lowerWidth:0,upperWidth:0,height:0};return od(od({},l),{},{value:i.value,payload:i.payload,parentViewBox:void 0,viewBox:l,fill:void 0})});return A.createElement(Fx,{value:e?a:void 0},n)}function sz(t){var{points:e,baseLine:n,needClip:r,clipPathId:a,props:i}=t,{layout:s,type:o,stroke:l,connectNulls:c,isRange:f}=i,{id:h}=i,p=ZV(i,Gme),g=Kr(p),v=wr(p);return A.createElement(A.Fragment,null,(e==null?void 0:e.length)>1&&A.createElement(yn,{clipPath:r?"url(#clipPath-".concat(a,")"):void 0},A.createElement(ud,Su({},v,{id:h,points:e,connectNulls:c,type:o,baseLine:n,layout:s,stroke:"none",className:"recharts-area-area"})),l!=="none"&&A.createElement(ud,Su({},g,{className:"recharts-area-curve",layout:s,type:o,connectNulls:c,fill:"none",points:e})),l!=="none"&&f&&A.createElement(ud,Su({},g,{className:"recharts-area-curve",layout:s,type:o,connectNulls:c,fill:"none",points:n}))),A.createElement(Jme,{points:e,props:p,clipPathId:a}))}function tge(t){var e,n,{alpha:r,baseLine:a,points:i,strokeWidth:s}=t,o=(e=i[0])===null||e===void 0?void 0:e.y,l=(n=i[i.length-1])===null||n===void 0?void 0:n.y;if(!$t(o)||!$t(l))return null;var c=r*Math.abs(o-l),f=Math.max(...i.map(h=>h.x||0));return De(a)?f=Math.max(a,f):a&&Array.isArray(a)&&a.length&&(f=Math.max(...a.map(h=>h.x||0),f)),De(f)?A.createElement("rect",{x:0,y:o<l?o:o-c,width:f+(s?parseInt("".concat(s),10):1),height:Math.floor(c)}):null}function nge(t){var e,n,{alpha:r,baseLine:a,points:i,strokeWidth:s}=t,o=(e=i[0])===null||e===void 0?void 0:e.x,l=(n=i[i.length-1])===null||n===void 0?void 0:n.x;if(!$t(o)||!$t(l))return null;var c=r*Math.abs(o-l),f=Math.max(...i.map(h=>h.y||0));return De(a)?f=Math.max(a,f):a&&Array.isArray(a)&&a.length&&(f=Math.max(...a.map(h=>h.y||0),f)),De(f)?A.createElement("rect",{x:o<l?o:o-c,y:0,width:c,height:Math.floor(f+(s?parseInt("".concat(s),10):1))}):null}function rge(t){var{alpha:e,layout:n,points:r,baseLine:a,strokeWidth:i}=t;return n==="vertical"?A.createElement(tge,{alpha:e,points:r,baseLine:a,strokeWidth:i}):A.createElement(nge,{alpha:e,points:r,baseLine:a,strokeWidth:i})}function age(t){var{needClip:e,clipPathId:n,props:r,previousPointsRef:a,previousBaselineRef:i}=t,{points:s,baseLine:o,isAnimationActive:l,animationBegin:c,animationDuration:f,animationEasing:h,onAnimationStart:p,onAnimationEnd:g}=r,v=A.useMemo(()=>({points:s,baseLine:o}),[s,o]),x=Hd(v,"recharts-area-"),b=Ere(),[w,S]=A.useState(!1),k=!w,N=A.useCallback(()=>{typeof g=="function"&&g(),S(!1)},[g]),I=A.useCallback(()=>{typeof p=="function"&&p(),S(!0)},[p]);if(b==null)return null;var T=a.current,R=i.current;return A.createElement(ege,{showLabels:k,points:s},r.children,A.createElement(Gd,{animationId:x,begin:c,duration:f,isActive:l,easing:h,onAnimationEnd:N,onAnimationStart:I,key:x},_=>{if(T){var M=T.length/s.length,P=_===1?s:s.map((z,W)=>{var H=Math.floor(W*M);if(T[H]){var G=T[H];return od(od({},z),{},{x:Ct(G.x,z.x,_),y:Ct(G.y,z.y,_)})}return z}),$;return De(o)?$=Ct(R,o,_):Dt(o)||ha(o)?$=Ct(R,0,_):$=o.map((z,W)=>{var H=Math.floor(W*M);if(Array.isArray(R)&&R[H]){var G=R[H];return od(od({},z),{},{x:Ct(G.x,z.x,_),y:Ct(G.y,z.y,_)})}return z}),_>0&&(a.current=P,i.current=$),A.createElement(sz,{points:P,baseLine:$,needClip:e,clipPathId:n,props:r})}return _>0&&(a.current=s,i.current=o),A.createElement(yn,null,l&&A.createElement("defs",null,A.createElement("clipPath",{id:"animationClipPath-".concat(n)},A.createElement(rge,{alpha:_,points:s,baseLine:o,layout:b,strokeWidth:r.strokeWidth}))),A.createElement(yn,{clipPath:"url(#animationClipPath-".concat(n,")")},A.createElement(sz,{points:s,baseLine:o,needClip:e,clipPathId:n,props:r})))}),A.createElement(jx,{label:r.label}))}function ige(t){var{needClip:e,clipPathId:n,props:r}=t,a=A.useRef(null),i=A.useRef();return A.createElement(age,{needClip:e,clipPathId:n,props:r,previousPointsRef:a,previousBaselineRef:i})}class sge extends A.PureComponent{render(){var{hide:e,dot:n,points:r,className:a,top:i,left:s,needClip:o,xAxisId:l,yAxisId:c,width:f,height:h,id:p,baseLine:g,zIndex:v}=this.props;if(e)return null;var x=Et("recharts-area",a),b=p,{r:w,strokeWidth:S}=UV(n),k=pI(n),N=w*2+S,I=o?"url(#clipPath-".concat(k?"":"dots-").concat(b,")"):void 0;return A.createElement(Lr,{zIndex:v},A.createElement(yn,{className:x},o&&A.createElement("defs",null,A.createElement(qx,{clipPathId:b,xAxisId:l,yAxisId:c}),!k&&A.createElement("clipPath",{id:"clipPath-dots-".concat(b)},A.createElement("rect",{x:s-N/2,y:i-N/2,width:f+N,height:h+N}))),A.createElement(ige,{needClip:o,clipPathId:b,props:this.props})),A.createElement(qk,{points:r,mainColor:gy(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:I}),this.props.isRange&&Array.isArray(g)&&A.createElement(qk,{points:g,mainColor:gy(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:I}))}}var QV={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:mn.area};function oge(t){var e,n=Un(t,QV),{activeDot:r,animationBegin:a,animationDuration:i,animationEasing:s,connectNulls:o,dot:l,fill:c,fillOpacity:f,hide:h,isAnimationActive:p,legendType:g,stroke:v,xAxisId:x,yAxisId:b}=n,w=ZV(n,Hme),S=kl(),k=tV(),{needClip:N}=Vp(x,b),I=Tn(),{points:T,isRange:R,baseLine:_}=(e=Fe(H=>Wme(H,t.id,I)))!==null&&e!==void 0?e:{},M=Gx();if(S!=="horizontal"&&S!=="vertical"||M==null||k!=="AreaChart"&&k!=="ComposedChart")return null;var{height:P,width:$,x:z,y:W}=M;return!T||!T.length?null:A.createElement(sge,Su({},w,{activeDot:r,animationBegin:a,animationDuration:i,animationEasing:s,baseLine:_,connectNulls:o,dot:l,fill:c,fillOpacity:f,height:P,hide:h,layout:S,isAnimationActive:p==="auto"?!Ap.isSsr:p,isRange:R,legendType:g,needClip:N,points:T,stroke:v,width:$,left:z,top:W,xAxisId:x,yAxisId:b}))}var lge=(t,e,n,r,a)=>{var i=n??e;if(De(i))return i;var s=t==="horizontal"?a:r,o=s.scale.domain();if(s.type==="number"){var l=Math.max(o[0],o[1]),c=Math.min(o[0],o[1]);return i==="dataMin"?c:i==="dataMax"||l<0?l:Math.max(Math.min(o[0],o[1]),0)}return i==="dataMin"?o[0]:i==="dataMax"?o[1]:o[0]};function uge(t){var{areaSettings:{connectNulls:e,baseValue:n,dataKey:r},stackedData:a,layout:i,chartBaseValue:s,xAxis:o,yAxis:l,displayedData:c,dataStartIndex:f,xAxisTicks:h,yAxisTicks:p,bandSize:g}=t,v=a&&a.length,x=lge(i,s,n,o,l),b=i==="horizontal",w=!1,S=c.map((N,I)=>{var T,R,_;if(v)_=a[f+I];else{var M=Yt(N,r);Array.isArray(M)?(_=M,w=!0):_=[x,M]}var P=(T=(R=_)===null||R===void 0?void 0:R[1])!==null&&T!==void 0?T:null,$=P==null||v&&!e&&Yt(N,r)==null;return b?{x:xd({axis:o,ticks:h,bandSize:g,entry:N,index:I}),y:$?null:l.scale(P),value:_,payload:N}:{x:$?null:o.scale(P),y:xd({axis:l,ticks:p,bandSize:g,entry:N,index:I}),value:_,payload:N}}),k;return v||w?k=S.map(N=>{var I=Array.isArray(N.value)?N.value[0]:null;return b?{x:N.x,y:I!=null&&N.y!=null?l.scale(I):null,payload:N.payload}:{x:I!=null?o.scale(I):null,y:N.y,payload:N.payload}}):k=b?l.scale(x):o.scale(x),{points:S,baseLine:k,isRange:w}}function cge(t){var e=Un(t,QV),n=Tn();return A.createElement(Vx,{id:e.id,type:"area"},r=>A.createElement(A.Fragment,null,A.createElement(Ux,{legendPayload:Zme(e)}),A.createElement(Qme,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),A.createElement(Wx,{type:"area",id:r,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:gB(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:n,connectNulls:e.connectNulls}),A.createElement(oge,Su({},e,{id:r}))))}var Kk=A.memo(cge,rf);Kk.displayName="Area";var dge="Invariant failed";function fge(t,e){throw new Error(dge)}function Xk(){return Xk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xk.apply(null,arguments)}function vy(t){return A.createElement(fy,Xk({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var hge=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,a)=>{if(De(e))return e;var i=De(r)||Dt(r);return i?e(r,a):(i||fge(),n)}},pge=(t,e,n)=>n,mge=(t,e)=>e,Wp=he([Zd,mge],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),gge=he([Wp],t=>t==null?void 0:t.maxBarSize),vge=(t,e,n,r)=>r,yge=he([xt,Zd,ks,Es,pge],(t,e,n,r,a)=>e.filter(i=>t==="horizontal"?i.xAxisId===n:i.yAxisId===r).filter(i=>i.isPanorama===a).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),xge=(t,e,n)=>{var r=xt(t),a=ks(t,e),i=Es(t,e);if(!(a==null||i==null))return r==="horizontal"?sy(t,"yAxis",i,n):sy(t,"xAxis",a,n)},bge=(t,e)=>{var n=xt(t),r=ks(t,e),a=Es(t,e);if(!(r==null||a==null))return n==="horizontal"?V3(t,"xAxis",r):V3(t,"yAxis",a)},wge=he([yge,Zoe,bge],She),Sge=(t,e,n)=>{var r,a,i=Wp(t,e);if(i!=null){var s=ks(t,e),o=Es(t,e);if(!(s==null||o==null)){var l=xt(t),c=jU(t),{maxBarSize:f}=i,h=Dt(f)?c:f,p,g;return l==="horizontal"?(p=fi(t,"xAxis",s,n),g=di(t,"xAxis",s,n)):(p=fi(t,"yAxis",o,n),g=di(t,"yAxis",o,n)),(r=(a=hl(p,g,!0))!==null&&a!==void 0?a:h)!==null&&r!==void 0?r:0}}},JV=(t,e,n)=>{var r=xt(t),a=ks(t,e),i=Es(t,e);if(!(a==null||i==null)){var s,o;return r==="horizontal"?(s=fi(t,"xAxis",a,n),o=di(t,"xAxis",a,n)):(s=fi(t,"yAxis",i,n),o=di(t,"yAxis",i,n)),hl(s,o)}},Cge=he([wge,jU,Yoe,BU,Sge,JV,gge],Ihe),kge=(t,e,n)=>{var r=ks(t,e);if(r!=null)return fi(t,"xAxis",r,n)},Ege=(t,e,n)=>{var r=Es(t,e);if(r!=null)return fi(t,"yAxis",r,n)},Nge=(t,e,n)=>{var r=ks(t,e);if(r!=null)return di(t,"xAxis",r,n)},Ige=(t,e,n)=>{var r=Es(t,e);if(r!=null)return di(t,"yAxis",r,n)},Age=he([Cge,Wp],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),Tge=he([xge,Wp],Ahe),$ge=he([lr,fN,kge,Ege,Nge,Ige,Age,xt,EU,JV,Tge,Wp,vge],(t,e,n,r,a,i,s,o,l,c,f,h,p)=>{var{chartData:g,dataStartIndex:v,dataEndIndex:x}=l;if(!(h==null||s==null||e==null||o!=="horizontal"&&o!=="vertical"||n==null||r==null||a==null||i==null||c==null)){var{data:b}=h,w;if(b!=null&&b.length>0?w=b:w=g==null?void 0:g.slice(v,x+1),w!=null)return ive({layout:o,barSettings:h,pos:s,parentViewBox:e,bandSize:c,xAxis:n,yAxis:r,xAxisTicks:a,yAxisTicks:i,stackedData:f,displayedData:w,offset:t,cells:p,dataStartIndex:v})}}),Oge=["index"];function Yk(){return Yk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yk.apply(null,arguments)}function Dge(t,e){if(t==null)return{};var n,r,a=Rge(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Rge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var eW=A.createContext(void 0),_ge=t=>{var e=A.useContext(eW);if(e!=null)return e.stackId;if(t!=null)return gB(t)},Mge=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),Pge=t=>{var e=A.useContext(eW);if(e!=null){var{stackId:n}=e;return"url(#".concat(Mge(n,t),")")}},Lge=t=>{var{index:e}=t,n=Dge(t,Oge),r=Pge(e);return A.createElement(yn,Yk({className:"recharts-bar-stack-layer",clipPath:r},n))},zge=["onMouseEnter","onMouseLeave","onClick"],Fge=["value","background","tooltipPosition"],jge=["id"],Bge=["onMouseEnter","onClick","onMouseLeave"];function po(){return po=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},po.apply(null,arguments)}function oz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Vr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oz(Object(n),!0).forEach(function(r){Uge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Uge(t,e,n){return(e=Vge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vge(t){var e=Wge(t,"string");return typeof e=="symbol"?e:e+""}function Wge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yy(t,e){if(t==null)return{};var n,r,a=Gge(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Gge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Hge=t=>{var{dataKey:e,name:n,fill:r,legendType:a,hide:i}=t;return[{inactive:i,dataKey:e,type:a,color:r,value:Cl(n,e),payload:t}]},qge=A.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:a,name:i,hide:s,unit:o,tooltipType:l,id:c}=t,f={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:a,dataKey:e,nameKey:void 0,name:Cl(i,e),hide:s,type:l,color:a,unit:o,graphicalItemId:c}};return A.createElement(Bx,{tooltipEntrySettings:f})});function Kge(t){var e=Fe(ml),{data:n,dataKey:r,background:a,allOtherBarProps:i}=t,{onMouseEnter:s,onMouseLeave:o,onClick:l}=i,c=yy(i,zge),f=mI(s,r,i.id),h=gI(o),p=vI(l,r,i.id);if(!a||n==null)return null;var g=Ud(a);return A.createElement(Lr,{zIndex:The(a,mn.barBackground)},n.map((v,x)=>{var{value:b,background:w,tooltipPosition:S}=v,k=yy(v,Fge);if(!w)return null;var N=f(v,x),I=h(v,x),T=p(v,x),R=Vr(Vr(Vr(Vr(Vr({option:a,isActive:String(x)===e},k),{},{fill:"#eee"},w),g),nx(c,v,x)),{},{onMouseEnter:N,onMouseLeave:I,onClick:T,dataKey:r,index:x,className:"recharts-bar-background-rectangle"});return A.createElement(vy,po({key:"background-bar-".concat(x)},R))}))}function Xge(t){var{showLabels:e,children:n,rects:r}=t,a=r==null?void 0:r.map(i=>{var s={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return Vr(Vr({},s),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:s,fill:i.fill})});return A.createElement(Fx,{value:e?a:void 0},n)}function Yge(t){var{shape:e,activeBar:n,baseProps:r,entry:a,index:i,dataKey:s}=t,o=Fe(ml),l=Fe(Q5),c=n&&String(i)===o&&(l==null||s===l),f=c?n:e;return c?A.createElement(Lr,{zIndex:mn.activeBar},A.createElement(vy,po({},r,{name:String(r.name)},a,{isActive:c,option:f,index:i,dataKey:s}))):A.createElement(vy,po({},r,{name:String(r.name)},a,{isActive:c,option:f,index:i,dataKey:s}))}function Zge(t){var{shape:e,baseProps:n,entry:r,index:a,dataKey:i}=t;return A.createElement(vy,po({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:a,dataKey:i}))}function Qge(t){var e,{data:n,props:r}=t,a=(e=Kr(r))!==null&&e!==void 0?e:{},{id:i}=a,s=yy(a,jge),{shape:o,dataKey:l,activeBar:c}=r,{onMouseEnter:f,onClick:h,onMouseLeave:p}=r,g=yy(r,Bge),v=mI(f,l,i),x=gI(p),b=vI(h,l,i);return n?A.createElement(A.Fragment,null,n.map((w,S)=>A.createElement(Lge,po({index:S,key:"rectangle-".concat(w==null?void 0:w.x,"-").concat(w==null?void 0:w.y,"-").concat(w==null?void 0:w.value,"-").concat(S),className:"recharts-bar-rectangle"},nx(g,w,S),{onMouseEnter:v(w,S),onMouseLeave:x(w,S),onClick:b(w,S)}),c?A.createElement(Yge,{shape:o,activeBar:c,baseProps:s,entry:w,index:S,dataKey:l}):A.createElement(Zge,{shape:o,baseProps:s,entry:w,index:S,dataKey:l})))):null}function Jge(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:a,isAnimationActive:i,animationBegin:s,animationDuration:o,animationEasing:l,onAnimationEnd:c,onAnimationStart:f}=e,h=n.current,p=Hd(e,"recharts-bar-"),[g,v]=A.useState(!1),x=!g,b=A.useCallback(()=>{typeof c=="function"&&c(),v(!1)},[c]),w=A.useCallback(()=>{typeof f=="function"&&f(),v(!0)},[f]);return A.createElement(Xge,{showLabels:x,rects:r},A.createElement(Gd,{animationId:p,begin:s,duration:o,isActive:i,easing:l,onAnimationEnd:b,onAnimationStart:w,key:p},S=>{var k=S===1?r:r==null?void 0:r.map((N,I)=>{var T=h&&h[I];if(T)return Vr(Vr({},N),{},{x:Ct(T.x,N.x,S),y:Ct(T.y,N.y,S),width:Ct(T.width,N.width,S),height:Ct(T.height,N.height,S)});if(a==="horizontal"){var R=Ct(0,N.height,S),_=Ct(N.stackedBarStart,N.y,S);return Vr(Vr({},N),{},{y:_,height:R})}var M=Ct(0,N.width,S),P=Ct(N.stackedBarStart,N.x,S);return Vr(Vr({},N),{},{width:M,x:P})});return S>0&&(n.current=k??null),k==null?null:A.createElement(yn,null,A.createElement(Qge,{props:e,data:k}))}),A.createElement(jx,{label:e.label}),e.children)}function eve(t){var e=A.useRef(null);return A.createElement(Jge,{previousRectanglesRef:e,props:t})}var tW=0,tve=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:Yt(t,e)}};class nve extends A.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:a,xAxisId:i,yAxisId:s,needClip:o,background:l,id:c}=this.props;if(e||n==null)return null;var f=Et("recharts-bar",a),h=c;return A.createElement(yn,{className:f,id:c},o&&A.createElement("defs",null,A.createElement(qx,{clipPathId:h,xAxisId:i,yAxisId:s})),A.createElement(yn,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(h,")"):void 0},A.createElement(Kge,{data:n,dataKey:r,background:l,allOtherBarProps:this.props}),A.createElement(eve,this.props)))}}var rve={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:tW,xAxisId:0,yAxisId:0,zIndex:mn.bar};function ave(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:a,minPointSize:i,activeBar:s,animationBegin:o,animationDuration:l,animationEasing:c,isAnimationActive:f}=t,{needClip:h}=Vp(e,n),p=kl(),g=Tn(),v=NV(t.children,Ou),x=Fe(S=>$ge(S,t.id,g,v));if(p!=="vertical"&&p!=="horizontal")return null;var b,w=x==null?void 0:x[0];return w==null||w.height==null||w.width==null?b=0:b=p==="vertical"?w.height/2:w.width/2,A.createElement(bI,{xAxisId:e,yAxisId:n,data:x,dataPointFormatter:tve,errorBarOffset:b},A.createElement(nve,po({},t,{layout:p,needClip:h,data:x,xAxisId:e,yAxisId:n,hide:r,legendType:a,minPointSize:i,activeBar:s,animationBegin:o,animationDuration:l,animationEasing:c,isAnimationActive:f})))}function ive(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:a,bandSize:i,xAxis:s,yAxis:o,xAxisTicks:l,yAxisTicks:c,stackedData:f,displayedData:h,offset:p,cells:g,parentViewBox:v,dataStartIndex:x}=t,b=e==="horizontal"?o:s,w=f?b.scale.domain():null,S=Wne({numericAxis:b}),k=b.scale(S);return h.map((N,I)=>{var T,R,_,M,P,$;if(f){var z=f[I+x];if(z==null)return null;T=Fne(z,w)}else T=Yt(N,n),Array.isArray(T)||(T=[S,T]);var W=hge(r,tW)(T[1],I);if(e==="horizontal"){var H,[G,F]=[o.scale(T[0]),o.scale(T[1])];R=XM({axis:s,ticks:l,bandSize:i,offset:a.offset,entry:N,index:I}),_=(H=F??G)!==null&&H!==void 0?H:void 0,M=a.size;var V=G-F;if(P=ha(V)?0:V,$={x:R,y:p.top,width:M,height:p.height},Math.abs(W)>0&&Math.abs(P)<Math.abs(W)){var U=ua(P||W)*(Math.abs(W)-Math.abs(P));_-=U,P+=U}}else{var[Y,oe]=[s.scale(T[0]),s.scale(T[1])];if(R=Y,_=XM({axis:o,ticks:c,bandSize:i,offset:a.offset,entry:N,index:I}),M=oe-Y,P=a.size,$={x:p.left,y:_,width:p.width,height:P},Math.abs(W)>0&&Math.abs(M)<Math.abs(W)){var j=ua(M||W)*(Math.abs(W)-Math.abs(M));M+=j}}if(R==null||_==null||M==null||P==null)return null;var q=Vr(Vr({},N),{},{stackedBarStart:k,x:R,y:_,width:M,height:P,value:f?T:T[1],payload:N,background:$,tooltipPosition:{x:R+M/2,y:_+P/2},parentViewBox:v},g&&g[I]&&g[I].props);return q}).filter(Boolean)}function sve(t){var e=Un(t,rve),n=_ge(e.stackId),r=Tn();return A.createElement(Vx,{id:e.id,type:"bar"},a=>A.createElement(A.Fragment,null,A.createElement(Ux,{legendPayload:Hge(e)}),A.createElement(qge,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:a}),A.createElement(Wx,{type:"bar",id:a,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:n,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),A.createElement(Lr,{zIndex:e.zIndex},A.createElement(ave,po({},e,{id:a})))))}var nW=A.memo(sve,rf);nW.displayName="Bar";var ove=["option","isActive"];function jh(){return jh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jh.apply(null,arguments)}function lve(t,e){if(t==null)return{};var n,r,a=uve(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function uve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function cve(t){var{option:e,isActive:n}=t,r=lve(t,ove);return typeof e=="string"?A.createElement(fy,jh({option:A.createElement(nN,jh({type:e},r)),isActive:n,shapeType:"symbols"},r)):A.createElement(fy,jh({option:e,isActive:n,shapeType:"symbols"},r))}var dve=(t,e,n,r,a,i,s)=>fi(t,"xAxis",e,s),fve=(t,e,n,r,a,i,s)=>di(t,"xAxis",e,s),hve=(t,e,n,r,a,i,s)=>fi(t,"yAxis",n,s),pve=(t,e,n,r,a,i,s)=>di(t,"yAxis",n,s),mve=(t,e,n,r)=>eue(t,"zAxis",r,!1),gve=(t,e,n,r,a)=>a,vve=(t,e,n,r,a,i)=>i,yve=(t,e,n,r,a,i,s)=>Ix(t,void 0,void 0,s),xve=he([Zd,gve],(t,e)=>t.filter(n=>n.type==="scatter").find(n=>n.id===e)),bve=he([yve,dve,fve,hve,pve,mve,xve,vve],(t,e,n,r,a,i,s,o)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:f}=t;if(s!=null){var h;if((s==null?void 0:s.data)!=null&&s.data.length>0?h=s.data:h=l==null?void 0:l.slice(c,f+1),!(h==null||e==null||r==null||n==null||a==null||(n==null?void 0:n.length)===0||(a==null?void 0:a.length)===0))return _ve({displayedData:h,xAxis:e,yAxis:r,zAxis:i,scatterSettings:s,xAxisTicks:n,yAxisTicks:a,cells:o})}}),wve=["id"],Sve=["onMouseEnter","onClick","onMouseLeave"],Cve=["animationBegin","animationDuration","animationEasing","hide","isAnimationActive","legendType","lineJointType","lineType","shape","xAxisId","yAxisId","zAxisId"];function Zk(t,e){if(t==null)return{};var n,r,a=kve(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function kve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Ru(){return Ru=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ru.apply(null,arguments)}function lz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function da(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lz(Object(n),!0).forEach(function(r){Eve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Eve(t,e,n){return(e=Nve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nve(t){var e=Ive(t,"string");return typeof e=="symbol"?e:e+""}function Ive(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ave=t=>{var{dataKey:e,name:n,fill:r,legendType:a,hide:i}=t;return[{inactive:i,dataKey:e,type:a,color:r,value:Cl(n,e),payload:t}]},Tve=A.memo(t=>{var{dataKey:e,points:n,stroke:r,strokeWidth:a,fill:i,name:s,hide:o,tooltipType:l,id:c}=t,f={dataDefinedOnItem:n==null?void 0:n.map(h=>h.tooltipPayload),positions:n==null?void 0:n.map(h=>h.tooltipPosition),settings:{stroke:r,strokeWidth:a,fill:i,nameKey:void 0,dataKey:e,name:Cl(s,e),hide:o,type:l,color:i,unit:"",graphicalItemId:c}};return A.createElement(Bx,{tooltipEntrySettings:f})});function $ve(t){var{points:e,props:n}=t,{line:r,lineType:a,lineJointType:i}=n;if(!r)return null;var s=Kr(n),o=Ud(r),l,c;if(a==="joint")l=e.map(b=>{var w,S;return{x:(w=b.cx)!==null&&w!==void 0?w:null,y:(S=b.cy)!==null&&S!==void 0?S:null}});else if(a==="fitting"){var{xmin:f,xmax:h,a:p,b:g}=See(e),v=b=>p*b+g;l=[{x:f,y:v(f)},{x:h,y:v(h)}]}var x=da(da(da({},s),{},{fill:"none",stroke:s&&s.fill},o),{},{points:l});return A.isValidElement(r)?c=A.cloneElement(r,x):typeof r=="function"?c=r(x):c=A.createElement(ud,Ru({},x,{type:i})),A.createElement(yn,{className:"recharts-scatter-line",key:"recharts-scatter-line"},c)}function Ove(t){var{showLabels:e,points:n,children:r}=t,a=Wd(),i=A.useMemo(()=>n==null?void 0:n.map(s=>{var o,l,c={x:(o=s.x)!==null&&o!==void 0?o:0,y:(l=s.y)!==null&&l!==void 0?l:0,width:s.width,height:s.height,lowerWidth:s.width,upperWidth:s.width};return da(da({},c),{},{value:void 0,payload:s.payload,viewBox:c,parentViewBox:a,fill:void 0})}),[a,n]);return A.createElement(Fx,{value:e?i:void 0},r)}function Dve(t){var{points:e,allOtherScatterProps:n}=t,{shape:r,activeShape:a,dataKey:i}=n,{id:s}=n,o=Zk(n,wve),l=Fe(ml),{onMouseEnter:c,onClick:f,onMouseLeave:h}=n,p=Zk(n,Sve),g=mI(c,i,s),v=gI(h),x=vI(f,i,s);if(!Mee(e))return null;var b=Kr(o);return A.createElement(A.Fragment,null,A.createElement($ve,{points:e,props:o}),e.map((w,S)=>{var k=a!=null&&a!==!1,N=k&&l===String(S),I=k&&N?a:r,T=da(da(da({},b),w),{},{[yB]:S,[xB]:String(s)});return A.createElement(Lr,{key:"symbol-".concat(w==null?void 0:w.cx,"-").concat(w==null?void 0:w.cy,"-").concat(w==null?void 0:w.size,"-").concat(S),zIndex:N?mn.activeDot:void 0},A.createElement(yn,Ru({className:"recharts-scatter-symbol"},nx(p,w,S),{onMouseEnter:g(w,S),onMouseLeave:v(w,S),onClick:x(w,S)}),A.createElement(cve,Ru({option:I,isActive:N},T))))}))}function Rve(t){var{previousPointsRef:e,props:n}=t,{points:r,isAnimationActive:a,animationBegin:i,animationDuration:s,animationEasing:o}=n,l=e.current,c=Hd(n,"recharts-scatter-"),[f,h]=A.useState(!1),p=A.useCallback(()=>{h(!1)},[]),g=A.useCallback(()=>{h(!0)},[]),v=!f;return A.createElement(Ove,{showLabels:v,points:r},n.children,A.createElement(Gd,{animationId:c,begin:i,duration:s,isActive:a,easing:o,onAnimationEnd:p,onAnimationStart:g,key:c},x=>{var b=x===1?r:r==null?void 0:r.map((w,S)=>{var k=l&&l[S];return k?da(da({},w),{},{cx:w.cx==null?void 0:Ct(k.cx,w.cx,x),cy:w.cy==null?void 0:Ct(k.cy,w.cy,x),size:Ct(k.size,w.size,x)}):da(da({},w),{},{size:Ct(0,w.size,x)})});return x>0&&(e.current=b),A.createElement(yn,null,A.createElement(Dve,{points:b,allOtherScatterProps:n,showLabels:v}))}),A.createElement(jx,{label:n.label}))}function _ve(t){var{displayedData:e,xAxis:n,yAxis:r,zAxis:a,scatterSettings:i,xAxisTicks:s,yAxisTicks:o,cells:l}=t,c=Dt(n.dataKey)?i.dataKey:n.dataKey,f=Dt(r.dataKey)?i.dataKey:r.dataKey,h=a&&a.dataKey,p=a?a.range:QU.range,g=p&&p[0],v=n.scale.bandwidth?n.scale.bandwidth():0,x=r.scale.bandwidth?r.scale.bandwidth():0;return e.map((b,w)=>{var S=Yt(b,c),k=Yt(b,f),N=!Dt(h)&&Yt(b,h)||"-",I=[{name:Dt(n.dataKey)?i.name:n.name||String(n.dataKey),unit:n.unit||"",value:S,payload:b,dataKey:c,type:i.tooltipType},{name:Dt(r.dataKey)?i.name:r.name||String(r.dataKey),unit:r.unit||"",value:k,payload:b,dataKey:f,type:i.tooltipType}];N!=="-"&&I.push({name:a.name||a.dataKey,unit:a.unit||"",value:N,payload:b,dataKey:h,type:i.tooltipType});var T=xd({axis:n,ticks:s,bandSize:v,entry:b,index:w,dataKey:c}),R=xd({axis:r,ticks:o,bandSize:x,entry:b,index:w,dataKey:f}),_=N!=="-"?a.scale(N):g,M=Math.sqrt(Math.max(_,0)/Math.PI);return da(da({},b),{},{cx:T,cy:R,x:T==null?void 0:T-M,y:R==null?void 0:R-M,width:2*M,height:2*M,size:_,node:{x:S,y:k,z:N},tooltipPayload:I,tooltipPosition:{x:T,y:R},payload:b},l&&l[w]&&l[w].props)})}var Mve=(t,e,n)=>({x:t.cx,y:t.cy,value:Number(n==="x"?t.node.x:t.node.y),errorVal:Yt(t,e)});function Pve(t){var{hide:e,points:n,className:r,needClip:a,xAxisId:i,yAxisId:s,id:o}=t,l=A.useRef(null);if(e)return null;var c=Et("recharts-scatter",r),f=o;return A.createElement(Lr,{zIndex:t.zIndex},A.createElement(yn,{className:c,clipPath:a?"url(#clipPath-".concat(f,")"):void 0,id:o},a&&A.createElement("defs",null,A.createElement(qx,{clipPathId:f,xAxisId:i,yAxisId:s})),A.createElement(bI,{xAxisId:i,yAxisId:s,data:n,dataPointFormatter:Mve,errorBarOffset:0},A.createElement(yn,{key:"recharts-scatter-symbols"},A.createElement(Rve,{props:t,previousPointsRef:l})))))}var rW={xAxisId:0,yAxisId:0,zAxisId:0,label:!1,line:!1,legendType:"circle",lineType:"joint",lineJointType:"linear",shape:"circle",hide:!1,isAnimationActive:"auto",animationBegin:0,animationDuration:400,animationEasing:"linear",zIndex:mn.scatter};function Lve(t){var e=Un(t,rW),{animationBegin:n,animationDuration:r,animationEasing:a,hide:i,isAnimationActive:s,legendType:o,lineJointType:l,lineType:c,shape:f,xAxisId:h,yAxisId:p,zAxisId:g}=e,v=Zk(e,Cve),{needClip:x}=Vp(h,p),b=A.useMemo(()=>NV(t.children,Ou),[t.children]),w=Tn(),S=Fe(k=>bve(k,h,p,g,t.id,b,w));return x==null||S==null?null:A.createElement(A.Fragment,null,A.createElement(Tve,{dataKey:t.dataKey,points:S,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:t.id}),A.createElement(Pve,Ru({},v,{xAxisId:h,yAxisId:p,zAxisId:g,lineType:c,lineJointType:l,legendType:o,shape:f,hide:i,isAnimationActive:s,animationBegin:n,animationDuration:r,animationEasing:a,points:S,needClip:x})))}function zve(t){var e=Un(t,rW),n=Tn();return A.createElement(Vx,{id:e.id,type:"scatter"},r=>A.createElement(A.Fragment,null,A.createElement(Ux,{legendPayload:Ave(e)}),A.createElement(Wx,{type:"scatter",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:e.zAxisId,dataKey:e.dataKey,hide:e.hide,name:e.name,tooltipType:e.tooltipType,isPanorama:n}),A.createElement(Lve,Ru({},e,{id:r}))))}var gu=A.memo(zve,rf);gu.displayName="Scatter";var Fve=["domain","range"],jve=["domain","range"];function uz(t,e){if(t==null)return{};var n,r,a=Bve(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Bve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function cz(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function aW(t,e){if(t===e)return!0;var{domain:n,range:r}=t,a=uz(t,Fve),{domain:i,range:s}=e,o=uz(e,jve);return!cz(n,i)||!cz(r,s)?!1:rf(a,o)}var Uve=["dangerouslySetInnerHTML","ticks","scale"],Vve=["id","scale"];function Qk(){return Qk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qk.apply(null,arguments)}function dz(t,e){if(t==null)return{};var n,r,a=Wve(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Wve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Gve(t){var e=bn(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(ohe(t)):n.current!==t&&e(lhe({prev:n.current,next:t})),n.current=t},[t,e]),A.useLayoutEffect(()=>()=>{n.current&&(e(uhe(n.current)),n.current=null)},[e]),null}var Hve=t=>{var{xAxisId:e,className:n}=t,r=Fe(fN),a=Tn(),i="xAxis",s=Fe(w=>D5(w,i,e,a)),o=Fe(w=>A5(w,e)),l=Fe(w=>Kle(w,e)),c=Fe(w=>YU(w,e));if(o==null||l==null||c==null)return null;var{dangerouslySetInnerHTML:f,ticks:h,scale:p}=t,g=dz(t,Uve),{id:v,scale:x}=c,b=dz(c,Vve);return A.createElement(xI,Qk({},g,b,{x:l.x,y:l.y,width:o.width,height:o.height,className:Et("recharts-".concat(i," ").concat(i),n),viewBox:r,ticks:s,axisType:i}))},qve={allowDataOverflow:rr.allowDataOverflow,allowDecimals:rr.allowDecimals,allowDuplicatedCategory:rr.allowDuplicatedCategory,angle:rr.angle,axisLine:ao.axisLine,height:rr.height,hide:!1,includeHidden:rr.includeHidden,interval:rr.interval,minTickGap:rr.minTickGap,mirror:rr.mirror,orientation:rr.orientation,padding:rr.padding,reversed:rr.reversed,scale:rr.scale,tick:rr.tick,tickCount:rr.tickCount,tickLine:ao.tickLine,tickSize:ao.tickSize,type:rr.type,xAxisId:0},Kve=t=>{var e=Un(t,qve);return A.createElement(A.Fragment,null,A.createElement(Gve,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),A.createElement(Hve,e))},Qu=A.memo(Kve,aW);Qu.displayName="XAxis";var Xve=["dangerouslySetInnerHTML","ticks","scale"],Yve=["id","scale"];function Jk(){return Jk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jk.apply(null,arguments)}function fz(t,e){if(t==null)return{};var n,r,a=Zve(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Zve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Qve(t){var e=bn(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(che(t)):n.current!==t&&e(dhe({prev:n.current,next:t})),n.current=t},[t,e]),A.useLayoutEffect(()=>()=>{n.current&&(e(fhe(n.current)),n.current=null)},[e]),null}var Jve=t=>{var{yAxisId:e,className:n,width:r,label:a}=t,i=A.useRef(null),s=A.useRef(null),o=Fe(fN),l=Tn(),c=bn(),f="yAxis",h=Fe(T=>T5(T,e)),p=Fe(T=>Yle(T,e)),g=Fe(T=>D5(T,f,e,l)),v=Fe(T=>ZU(T,e));if(A.useLayoutEffect(()=>{if(!(r!=="auto"||!h||hI(a)||A.isValidElement(a)||v==null)){var T=i.current;if(T){var R=T.getCalculatedWidth();Math.round(h.width)!==Math.round(R)&&c(hhe({id:e,width:R}))}}},[g,h,c,a,e,r,v]),h==null||p==null||v==null)return null;var{dangerouslySetInnerHTML:x,ticks:b,scale:w}=t,S=fz(t,Xve),{id:k,scale:N}=v,I=fz(v,Yve);return A.createElement(xI,Jk({},S,I,{ref:i,labelRef:s,x:p.x,y:p.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:h.width,height:h.height,className:Et("recharts-".concat(f," ").concat(f),n),viewBox:o,ticks:g,axisType:f}))},e0e={allowDataOverflow:ar.allowDataOverflow,allowDecimals:ar.allowDecimals,allowDuplicatedCategory:ar.allowDuplicatedCategory,angle:ar.angle,axisLine:ao.axisLine,hide:!1,includeHidden:ar.includeHidden,interval:ar.interval,minTickGap:ar.minTickGap,mirror:ar.mirror,orientation:ar.orientation,padding:ar.padding,reversed:ar.reversed,scale:ar.scale,tick:ar.tick,tickCount:ar.tickCount,tickLine:ao.tickLine,tickSize:ao.tickSize,type:ar.type,width:ar.width,yAxisId:0},t0e=t=>{var e=Un(t,e0e);return A.createElement(A.Fragment,null,A.createElement(Qve,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),A.createElement(Jve,e))},Ju=A.memo(t0e,aW);Ju.displayName="YAxis";var n0e=(t,e)=>e,SI=he([n0e,xt,KU,Qn,K5,Co,dce,lr],yce),CI=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},iW=ui("mouseClick"),sW=Ep();sW.startListening({actionCreator:iW,effect:(t,e)=>{var n=t.payload,r=SI(e.getState(),CI(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(due({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var eE=ui("mouseMove"),oW=Ep(),Hv=null;oW.startListening({actionCreator:eE,effect:(t,e)=>{var n=t.payload;Hv!==null&&cancelAnimationFrame(Hv);var r=CI(n);Hv=requestAnimationFrame(()=>{var a=e.getState(),i=nI(a,a.tooltip.settings.shared);if(i==="axis"){var s=SI(a,r);(s==null?void 0:s.activeIndex)!=null?e.dispatch(j5({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(F5())}Hv=null})}});function r0e(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var hz={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},lW=va({name:"rootProps",initialState:hz,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:hz.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),a0e=lW.reducer,{updateOptions:i0e}=lW.actions,uW=va({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:P5e}=uW.actions,s0e=uW.reducer,cW=ui("keyDown"),dW=ui("focus"),kI=Ep();kI.startListening({actionCreator:cW,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:a}=n.tooltip,i=t.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var s=rI(a,tf(n),Mp(n),Fp(n)),o=s==null?-1:Number(s);if(!(!Number.isFinite(o)||o<0)){var l=Co(n);if(i==="Enter"){var c=ly(n,"axis","hover",String(a.index));e.dispatch(Bk({active:!a.active,activeIndex:a.index,activeCoordinate:c}));return}var f=tue(n),h=f==="left-to-right"?1:-1,p=i==="ArrowRight"?1:-1,g=o+p*h;if(!(l==null||g>=l.length||g<0)){var v=ly(n,"axis","hover",String(g));e.dispatch(Bk({active:!0,activeIndex:g.toString(),activeCoordinate:v}))}}}}}});kI.startListening({actionCreator:dW,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:a}=n.tooltip;if(!a.active&&a.index==null){var i="0",s=ly(n,"axis","hover",String(i));e.dispatch(Bk({active:!0,activeIndex:i,activeCoordinate:s}))}}}});var ni=ui("externalEvent"),fW=Ep(),O2=new Map;fW.startListening({actionCreator:ni,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var a=r.type,i=O2.get(a);i!==void 0&&cancelAnimationFrame(i);var s=requestAnimationFrame(()=>{try{var o=e.getState(),l={activeCoordinate:Yue(o),activeDataKey:Q5(o),activeIndex:ml(o),activeLabel:Z5(o),activeTooltipIndex:ml(o),isTooltipActive:Zue(o)};n(l,r)}finally{O2.delete(a)}});O2.set(a,s)}}});var o0e=he([Jd],t=>t.tooltipItemPayloads),l0e=he([o0e,zp,(t,e)=>e,(t,e,n)=>n],(t,e,n,r)=>{var a=t.find(o=>o.settings.graphicalItemId===r);if(a!=null){var{positions:i}=a;if(i!=null){var s=e(i,n);return s}}}),hW=ui("touchMove"),pW=Ep();pW.startListening({actionCreator:hW,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),a=nI(r,r.tooltip.settings.shared);if(a==="axis"){var i=n.touches[0];if(i==null)return;var s=SI(r,CI({clientX:i.clientX,clientY:i.clientY,currentTarget:n.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&e.dispatch(j5({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(a==="item"){var o,l=n.touches[0];if(document.elementFromPoint==null||l==null)return;var c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var f=c.getAttribute(yB),h=(o=c.getAttribute(xB))!==null&&o!==void 0?o:void 0,p=ef(r).find(x=>x.id===h);if(f==null||p==null||h==null)return;var{dataKey:g}=p,v=l0e(r,f,h);e.dispatch(z5({activeDataKey:g,activeIndex:f,activeCoordinate:v,activeGraphicalItemId:h}))}}}});var u0e=Fj({brush:Ohe,cartesianAxis:phe,chartData:Xce,errorBars:Vpe,graphicalItems:qfe,layout:Rne,legend:Ure,options:Wce,polarAxis:vfe,polarOptions:s0e,referenceElements:Uhe,rootProps:a0e,tooltip:fue,zIndex:Dce}),c0e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return ane({reducer:u0e,preloadedState:e,middleware:r=>{var a;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((a="es6")!==null&&a!==void 0?a:"")}).concat([sW.middleware,oW.middleware,kI.middleware,fW.middleware,pW.middleware])},enhancers:r=>{var a=r;return typeof r=="function"&&(a=r()),a.concat(eB({type:"raf"}))},devTools:{serialize:{replacer:r0e},name:"recharts-".concat(n)}})};function d0e(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,a=Tn(),i=A.useRef(null);if(a)return n;i.current==null&&(i.current=c0e(e,r));var s=iN;return A.createElement(mme,{context:s,store:i.current},n)}function f0e(t){var{layout:e,margin:n}=t,r=bn(),a=Tn();return A.useEffect(()=>{a||(r($ne(e)),r(Tne(n)))},[r,a,e,n]),null}var h0e=A.memo(f0e,rf);function p0e(t){var e=bn();return A.useEffect(()=>{e(i0e(t))},[e,t]),null}function pz(t){var{zIndex:e,isPanorama:n}=t,r=A.useRef(null),a=bn();return A.useLayoutEffect(()=>(r.current&&a($ce({zIndex:e,element:r.current,isPanorama:n})),()=>{a(Oce({zIndex:e,isPanorama:n}))}),[a,e,n]),A.createElement("g",{tabIndex:-1,ref:r})}function mz(t){var{children:e,isPanorama:n}=t,r=Fe(bce);if(!r||r.length===0)return e;var a=r.filter(s=>s<0),i=r.filter(s=>s>0);return A.createElement(A.Fragment,null,a.map(s=>A.createElement(pz,{key:s,zIndex:s,isPanorama:n})),e,i.map(s=>A.createElement(pz,{key:s,zIndex:s,isPanorama:n})))}var m0e=["children"];function g0e(t,e){if(t==null)return{};var n,r,a=v0e(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function v0e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function xy(){return xy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xy.apply(null,arguments)}var y0e={width:"100%",height:"100%",display:"block"},x0e=A.forwardRef((t,e)=>{var n=EB(),r=NB(),a=_B();if(!hs(n)||!hs(r))return null;var{children:i,otherAttributes:s,title:o,desc:l}=t,c,f;return s!=null&&(typeof s.tabIndex=="number"?c=s.tabIndex:c=a?0:void 0,typeof s.role=="string"?f=s.role:f=a?"application":void 0),A.createElement(rj,xy({},s,{title:o,desc:l,role:f,tabIndex:c,width:n,height:r,style:y0e,ref:e}),i)}),b0e=t=>{var{children:e}=t,n=Fe(gx);if(!n)return null;var{width:r,height:a,y:i,x:s}=n;return A.createElement(rj,{width:r,height:a,x:s,y:i},e)},gz=A.forwardRef((t,e)=>{var{children:n}=t,r=g0e(t,m0e),a=Tn();return a?A.createElement(b0e,null,A.createElement(mz,{isPanorama:!0},n)):A.createElement(x0e,xy({ref:e},r),A.createElement(mz,{isPanorama:!1},n))});function w0e(){var t=bn(),[e,n]=A.useState(null),r=Fe(Yne);return A.useEffect(()=>{if(e!=null){var a=e.getBoundingClientRect(),i=a.width/e.offsetWidth;$t(i)&&i!==r&&t(Dne(i))}},[e,t,r]),n}function vz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function S0e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vz(Object(n),!0).forEach(function(r){C0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function C0e(t,e,n){return(e=k0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k0e(t){var e=E0e(t,"string");return typeof e=="symbol"?e:e+""}function E0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _u(){return _u=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_u.apply(null,arguments)}var N0e=()=>(ade(),null);function by(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var I0e=A.forwardRef((t,e)=>{var n,r,a=A.useRef(null),[i,s]=A.useState({containerWidth:by((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:by((r=t.style)===null||r===void 0?void 0:r.height)}),o=A.useCallback((c,f)=>{s(h=>{var p=Math.round(c),g=Math.round(f);return h.containerWidth===p&&h.containerHeight===g?h:{containerWidth:p,containerHeight:g}})},[]),l=A.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null&&typeof ResizeObserver<"u"){var{width:f,height:h}=c.getBoundingClientRect();o(f,h);var p=v=>{var{width:x,height:b}=v[0].contentRect;o(x,b)},g=new ResizeObserver(p);g.observe(c),a.current=g}},[e,o]);return A.useEffect(()=>()=>{var c=a.current;c!=null&&c.disconnect()},[o]),A.createElement(A.Fragment,null,A.createElement(vx,{width:i.containerWidth,height:i.containerHeight}),A.createElement("div",_u({ref:l},t)))}),A0e=A.forwardRef((t,e)=>{var{width:n,height:r}=t,[a,i]=A.useState({containerWidth:by(n),containerHeight:by(r)}),s=A.useCallback((l,c)=>{i(f=>{var h=Math.round(l),p=Math.round(c);return f.containerWidth===h&&f.containerHeight===p?f:{containerWidth:h,containerHeight:p}})},[]),o=A.useCallback(l=>{if(typeof e=="function"&&e(l),l!=null){var{width:c,height:f}=l.getBoundingClientRect();s(c,f)}},[e,s]);return A.createElement(A.Fragment,null,A.createElement(vx,{width:a.containerWidth,height:a.containerHeight}),A.createElement("div",_u({ref:o},t)))}),T0e=A.forwardRef((t,e)=>{var{width:n,height:r}=t;return A.createElement(A.Fragment,null,A.createElement(vx,{width:n,height:r}),A.createElement("div",_u({ref:e},t)))}),$0e=A.forwardRef((t,e)=>{var{width:n,height:r}=t;return oo(n)||oo(r)?A.createElement(A0e,_u({},t,{ref:e})):A.createElement(T0e,_u({},t,{ref:e}))});function O0e(t){return t===!0?I0e:$0e}var D0e=A.forwardRef((t,e)=>{var{children:n,className:r,height:a,onClick:i,onContextMenu:s,onDoubleClick:o,onMouseDown:l,onMouseEnter:c,onMouseLeave:f,onMouseMove:h,onMouseUp:p,onTouchEnd:g,onTouchMove:v,onTouchStart:x,style:b,width:w,responsive:S,dispatchTouchEvents:k=!0}=t,N=A.useRef(null),I=bn(),[T,R]=A.useState(null),[_,M]=A.useState(null),P=w0e(),$=hN(),z=($==null?void 0:$.width)>0?$.width:w,W=($==null?void 0:$.height)>0?$.height:a,H=A.useCallback(ae=>{P(ae),typeof e=="function"&&e(ae),R(ae),M(ae),ae!=null&&(N.current=ae)},[P,e,R,M]),G=A.useCallback(ae=>{I(iW(ae)),I(ni({handler:i,reactEvent:ae}))},[I,i]),F=A.useCallback(ae=>{I(eE(ae)),I(ni({handler:c,reactEvent:ae}))},[I,c]),V=A.useCallback(ae=>{I(F5()),I(ni({handler:f,reactEvent:ae}))},[I,f]),U=A.useCallback(ae=>{I(eE(ae)),I(ni({handler:h,reactEvent:ae}))},[I,h]),Y=A.useCallback(()=>{I(dW())},[I]),oe=A.useCallback(ae=>{I(cW(ae.key))},[I]),j=A.useCallback(ae=>{I(ni({handler:s,reactEvent:ae}))},[I,s]),q=A.useCallback(ae=>{I(ni({handler:o,reactEvent:ae}))},[I,o]),Z=A.useCallback(ae=>{I(ni({handler:l,reactEvent:ae}))},[I,l]),se=A.useCallback(ae=>{I(ni({handler:p,reactEvent:ae}))},[I,p]),pe=A.useCallback(ae=>{I(ni({handler:x,reactEvent:ae}))},[I,x]),Se=A.useCallback(ae=>{k&&I(hW(ae)),I(ni({handler:v,reactEvent:ae}))},[I,k,v]),be=A.useCallback(ae=>{I(ni({handler:g,reactEvent:ae}))},[I,g]),Te=O0e(S);return A.createElement(sV.Provider,{value:T},A.createElement(PJ.Provider,{value:_},A.createElement(Te,{width:z??(b==null?void 0:b.width),height:W??(b==null?void 0:b.height),className:Et("recharts-wrapper",r),style:S0e({position:"relative",cursor:"default",width:z,height:W},b),onClick:G,onContextMenu:j,onDoubleClick:q,onFocus:Y,onKeyDown:oe,onMouseDown:Z,onMouseEnter:F,onMouseLeave:V,onMouseMove:U,onMouseUp:se,onTouchEnd:be,onTouchMove:Se,onTouchStart:pe,ref:H},A.createElement(N0e,null),n)))}),R0e=["width","height","responsive","children","className","style","compact","title","desc"];function _0e(t,e){if(t==null)return{};var n,r,a=M0e(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function M0e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var P0e=A.forwardRef((t,e)=>{var{width:n,height:r,responsive:a,children:i,className:s,style:o,compact:l,title:c,desc:f}=t,h=_0e(t,R0e),p=Kr(h);return l?A.createElement(A.Fragment,null,A.createElement(vx,{width:n,height:r}),A.createElement(gz,{otherAttributes:p,title:c,desc:f},i)):A.createElement(D0e,{className:s,style:o,width:n,height:r,responsive:a??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},A.createElement(gz,{otherAttributes:p,title:c,desc:f,ref:e},A.createElement(Vhe,null,i)))});function tE(){return tE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tE.apply(null,arguments)}var L0e={top:5,right:5,bottom:5,left:5},z0e={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:L0e,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Gp=A.forwardRef(function(e,n){var r,a=Un(e.categoricalChartProps,z0e),{chartName:i,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,categoricalChartProps:c}=e,f={chartName:i,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,eventEmitter:void 0};return A.createElement(d0e,{preloadedState:{options:f},reduxStoreName:(r=c.id)!==null&&r!==void 0?r:i},A.createElement($he,{chartData:c.data}),A.createElement(h0e,{layout:a.layout,margin:a.margin}),A.createElement(p0e,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),A.createElement(P0e,tE({},a,{ref:n})))}),F0e=["axis"],j0e=A.forwardRef((t,e)=>A.createElement(Gp,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:F0e,tooltipPayloadSearcher:Bp,categoricalChartProps:t,ref:e})),B0e=["axis","item"],U0e=A.forwardRef((t,e)=>A.createElement(Gp,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:B0e,tooltipPayloadSearcher:Bp,categoricalChartProps:t,ref:e})),V0e=["item"],W0e=A.forwardRef((t,e)=>A.createElement(Gp,{chartName:"ScatterChart",defaultTooltipEventType:"item",validateTooltipEventTypes:V0e,tooltipPayloadSearcher:Bp,categoricalChartProps:t,ref:e})),G0e=["axis"],H0e=A.forwardRef((t,e)=>A.createElement(Gp,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:G0e,tooltipPayloadSearcher:Bp,categoricalChartProps:t,ref:e})),q0e=["axis"],mW=A.forwardRef((t,e)=>A.createElement(Gp,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:q0e,tooltipPayloadSearcher:Bp,categoricalChartProps:t,ref:e}));const af=({children:t,codeSnippet:e,title:n,description:r})=>{const[a,i]=A.useState("preview");return O.jsxs("div",{className:"flex flex-col h-full animate-in fade-in duration-500",children:[O.jsxs("div",{className:"mb-6 md:mb-8 px-1",children:[O.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white mb-2 tracking-tight",children:n}),O.jsx("p",{className:"text-sm text-slate-400 max-w-2xl leading-relaxed",children:r})]}),O.jsxs("div",{className:"lg:hidden flex p-1 bg-slate-900 border border-slate-800 rounded-2xl mb-6",children:[O.jsxs("button",{onClick:()=>i("preview"),className:tn("flex-1 flex items-center justify-center gap-2 py-2.5 rounded-xl text-xs font-bold uppercase tracking-widest transition-all",a==="preview"?"bg-slate-800 text-emerald-500 shadow-lg":"text-slate-500"),children:[O.jsx(Xy,{size:14})," Vista Previa"]}),O.jsxs("button",{onClick:()=>i("code"),className:tn("flex-1 flex items-center justify-center gap-2 py-2.5 rounded-xl text-xs font-bold uppercase tracking-widest transition-all",a==="code"?"bg-slate-800 text-blue-400 shadow-lg":"text-slate-500"),children:[O.jsx(eY,{size:14})," Cdigo"]})]}),O.jsx("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-1 gap-6 pb-8",children:O.jsxs("div",{className:tn("flex flex-col bg-slate-900 rounded-[2rem] md:rounded-[2.5rem] border border-slate-800 shadow-2xl overflow-hidden min-h-[450px]",a!=="preview"&&"hidden lg:flex"),children:[O.jsx("div",{className:"bg-slate-800/30 px-6 py-4 border-b border-slate-800 flex items-center justify-between",children:O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx(p4,{size:14,className:"text-emerald-500"}),O.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Laboratorio Interactivo"})]})}),O.jsx("div",{className:"flex-1 p-5 md:p-8 overflow-auto",children:t})]})})]})},K0e=(t,e,n)=>{const r=t*-n.w1+e*n.w2+n.bias;return{decision:r>0?1:0,activation:r}},X0e=`export const runPerceptron = (precio, necesidad, weights) => {
  // Frmula fundamental de la neurona:
  // (Precio * Peso1) + (Necesidad * Peso2) + Sesgo
  const activation = (precio * -weights.w1) + (necesidad * weights.w2) + weights.bias;
  
  // Funcin de Activacin (Funcin Escaln)
  // Retorna 1 (Aprobado) si la suma es mayor a cero.
  const decision = activation > 0 ? 1 : 0; 
  return { decision, activation };
};`,Y0e=()=>{const[t,e]=A.useState(500),[n,r]=A.useState(50),[a,i]=A.useState({w1:.1,w2:.5,bias:20}),s=A.useMemo(()=>K0e(t,n,a),[t,n,a]),o=s.decision===1,l=A.useMemo(()=>{const c=[];for(let f=0;f<=1e3;f+=100){const h=(f*a.w1-a.bias)/a.w2;c.push({x:f,y:Math.max(-20,Math.min(120,h))})}return c},[a]);return O.jsx(af,{title:"Ep 1: Perceptrn (El Juez)",description:"Visualiza el espacio de decisin 2D. El perceptrn separa tus compras mediante una frontera lineal que t puedes manipular ajustando los pesos neuronales.",codeSnippet:X0e,children:O.jsxs("div",{className:"space-y-6 md:space-y-8",children:[O.jsxs("div",{className:"bg-slate-950 p-4 md:p-6 rounded-[2rem] border border-slate-800 shadow-2xl relative overflow-hidden",children:[O.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 pointer-events-none hidden md:block",children:O.jsx(_Y,{size:120})}),O.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 gap-4 relative z-10",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("div",{className:tn("w-10 h-10 md:w-12 md:h-12 rounded-xl md:rounded-2xl flex items-center justify-center transition-all duration-500",o?"bg-emerald-500 text-slate-950 shadow-[0_0_15px_rgba(16,185,129,0.3)]":"bg-rose-500 text-slate-950 shadow-[0_0_15px_rgba(244,63,94,0.3)]"),children:O.jsx(zY,{size:20,className:"md:size-6"})}),O.jsxs("div",{children:[O.jsx("h4",{className:"font-black text-white text-base md:text-lg leading-none mb-1 uppercase tracking-tighter",children:o?"APROBADA":"RECHAZADA"}),O.jsxs("span",{className:"text-[9px] text-slate-500 font-black uppercase tracking-widest",children:["Act: ",s.activation.toFixed(2)]})]})]}),O.jsx("div",{className:"w-full sm:w-auto bg-slate-900/50 px-3 py-1.5 rounded-lg border border-slate-800 backdrop-blur-sm",children:O.jsxs("p",{className:"text-[9px] font-mono text-slate-400 truncate",children:["(",t," * -",a.w1,") + (",n," * ",a.w2,") +"," ",a.bias]})})]}),O.jsx("div",{className:"h-[250px] md:h-72 w-full relative",children:O.jsx(Vd,{width:"100%",height:"100%",children:O.jsxs(mW,{margin:{top:10,right:10,bottom:10,left:-25},children:[O.jsx(nf,{strokeDasharray:"3 3",stroke:"#1e293b",vertical:!1,opacity:.1}),O.jsx(Qu,{type:"number",dataKey:"x",stroke:"#475569",fontSize:9,domain:[0,1e3],tickLine:!1,axisLine:!1}),O.jsx(Ju,{type:"number",dataKey:"y",stroke:"#475569",fontSize:9,domain:[0,100],tickLine:!1,axisLine:!1}),O.jsx(ap,{x:t,stroke:"#334155",strokeDasharray:"3 3"}),O.jsx(ap,{y:n,stroke:"#334155",strokeDasharray:"3 3"}),O.jsx(Kx,{data:l,type:"monotone",dataKey:"y",stroke:"#3b82f6",strokeWidth:2,strokeDasharray:"8 4",dot:!1,opacity:.4}),O.jsx(gu,{name:"Punto Actual",data:[{x:t,y:n}],children:O.jsx(Ou,{fill:o?"#10b981":"#f43f5e",stroke:"#ffffff",strokeWidth:2,className:"animate-pulse",style:{r:8}})})]})})})]}),O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-8",children:[O.jsxs("div",{className:"space-y-6 bg-slate-900/50 p-6 rounded-[1.5rem] border border-slate-800",children:[O.jsxs("h5",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2",children:[O.jsx(xp,{size:12,className:"text-emerald-500"})," Entradas (Inputs)"]}),O.jsxs("div",{className:"space-y-6",children:[O.jsxs("div",{className:"space-y-2",children:[O.jsxs("div",{className:"flex justify-between text-xs font-bold",children:[O.jsx("span",{className:"text-slate-400",children:"Precio"}),O.jsxs("span",{className:"text-white",children:["$",t]})]}),O.jsx("input",{type:"range",min:"0",max:"1000",value:t,onChange:c=>e(Number(c.target.value)),className:"w-full h-2 bg-slate-800 rounded-lg appearance-none accent-emerald-500"})]}),O.jsxs("div",{className:"space-y-2",children:[O.jsxs("div",{className:"flex justify-between text-xs font-bold",children:[O.jsx("span",{className:"text-slate-400",children:"Necesidad"}),O.jsxs("span",{className:"text-white",children:[n,"%"]})]}),O.jsx("input",{type:"range",min:"0",max:"100",value:n,onChange:c=>r(Number(c.target.value)),className:"w-full h-2 bg-slate-800 rounded-lg appearance-none accent-emerald-500"})]})]})]}),O.jsxs("div",{className:"space-y-4 bg-slate-950 border border-slate-800 p-6 rounded-[1.5rem]",children:[O.jsxs("h5",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2",children:[O.jsx(FE,{size:12,className:"text-blue-500"})," Pesos de la Neurona"]}),O.jsx("div",{className:"grid grid-cols-1 gap-2",children:[{label:"Peso Precio",key:"w1",step:.01,icon:m_},{label:"Peso Necesidad",key:"w2",step:.01,icon:m_},{label:"Sesgo (Bias)",key:"bias",step:1,icon:f4}].map(c=>O.jsxs("div",{className:"flex items-center justify-between p-2.5 bg-slate-900/50 rounded-xl border border-slate-800",children:[O.jsx("span",{className:"text-[10px] font-bold text-slate-400",children:c.label}),O.jsx("input",{type:"number",step:c.step,value:a[c.key],onChange:f=>i({...a,[c.key]:Number(f.target.value)}),className:"bg-slate-950 border border-slate-800 rounded px-2 py-1 text-white font-mono text-xs w-20 text-right focus:ring-1 focus:ring-emerald-500 outline-none"})]},c.key))})]})]}),O.jsxs("div",{className:"flex items-start gap-4 p-6 bg-blue-500/5 border border-blue-500/10 rounded-[2rem]",children:[O.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-500/10 flex items-center justify-center shrink-0",children:O.jsx(h4,{size:24,className:"text-blue-500"})}),O.jsxs("div",{className:"space-y-1",children:[O.jsx("h5",{className:"text-xs font-black text-white uppercase tracking-widest",children:"Aprende sobre la Frontera"}),O.jsxs("p",{className:"text-[11px] text-slate-400 leading-relaxed",children:["La lnea azul punteada es la ",O.jsx("strong",{children:"Frontera de Decisin"}),". Al mover los pesos, cambias el ngulo y la posicin de esta frontera. El perceptrn simplemente calcula si el punto actual est por encima o por debajo de esta lnea."]})]})]})]})})},gW=({isTraining:t})=>{const e=[3,5,4,1],n=200,r=360,a=6,i=r/(e.length-1);return O.jsxs("div",{className:"relative w-full h-[200px] bg-slate-950/50 rounded-2xl border border-slate-800/50 p-4 flex items-center justify-center overflow-hidden",children:[O.jsxs("svg",{viewBox:`0 0 ${r} ${n}`,preserveAspectRatio:"xMidYMid meet",className:"w-full h-full max-w-[400px]",children:[e.map((s,o)=>{if(o===e.length-1)return null;const l=e[o+1],c=o*i,f=(o+1)*i;return Array.from({length:s}).map((h,p)=>{const g=n/(s+1)*(p+1);return Array.from({length:l}).map((v,x)=>{const b=n/(l+1)*(x+1);return O.jsx("line",{x1:c,y1:g,x2:f,y2:b,stroke:t?"#10b981":"#1e293b",strokeWidth:t?1:.5,strokeOpacity:t?.4:.2,className:tn(t&&"animate-pulse")},`l-${o}-${p}-${x}`)})})}),e.map((s,o)=>{const l=o*i;return Array.from({length:s}).map((c,f)=>{const h=n/(s+1)*(f+1);return O.jsxs("g",{children:[O.jsx("circle",{cx:l,cy:h,r:a,fill:t?"#10b981":"#0f172a",stroke:t?"#34d399":"#334155",strokeWidth:2,className:tn("transition-all duration-500",t&&"shadow-[0_0_10px_rgba(16,185,129,0.5)]")}),t&&O.jsx("circle",{cx:l,cy:h,r:a+4,fill:"none",stroke:"#10b981",strokeWidth:1,className:"animate-ping opacity-20"})]},`n-${o}-${f}`)})})]}),O.jsxs("div",{className:"absolute bottom-2 left-4 right-4 flex justify-between text-[8px] font-black text-slate-600 uppercase tracking-widest pointer-events-none",children:[O.jsx("span",{children:"Input"}),O.jsx("span",{children:"H1"}),O.jsx("span",{children:"H2"}),O.jsx("span",{children:"Output"})]})]})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z0e=1e-7,Q0e=1e-4;class vW{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class EI{refCount(e){return oa("refCount")}incRef(e){return oa("incRef")}timerAvailable(){return!0}time(e){return oa("time")}read(e){return oa("read")}readSync(e){return oa("readSync")}readToGPU(e,n){return oa("readToGPU")}numDataIds(){return oa("numDataIds")}disposeData(e,n){return oa("disposeData")}write(e,n,r){return oa("write")}move(e,n,r,a,i){return oa("move")}createTensorFromGPUData(e,n,r){return oa("createTensorFromGPUData")}memory(){return oa("memory")}floatPrecision(){return oa("floatPrecision")}epsilon(){return this.floatPrecision()===32?Z0e:Q0e}dispose(){return oa("dispose")}}function oa(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J0e(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,nd(t,e,n)}function Mu(t,e,n){return Math.max(t,Math.min(e,n))}function NI(t){return t%2===0?t:t+1}function nd(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function eye(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function B(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function II(t,e,n=""){B(It(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function yW(t){B(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function ve(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function It(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Ed(t){return t%1===0}function nE(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function dd(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function yz(t,e=a=>0,n,r){return new Promise((a,i)=>{let s=0;const o=()=>{if(t()){a();return}s++;const l=e(s);if(n!=null&&s>=n){i();return}r!=null?r(o,l):setTimeout(o,l)};o()})}function xW(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const a=t.slice();return a[r]=e/n,a}function it(t,e){const n=e.length;return t=t==null?e.map((r,a)=>a):[].concat(t),B(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),B(t.every(r=>Ed(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function Il(t,e){const n=[],r=[],a=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||a?null:it(e,t).sort();let s=0;for(let o=0;o<t.length;++o){if(i!=null){if(i[s]===o&&t[o]!==1)throw new Error(`Can't squeeze axis ${o} since its dim '${t[o]}' is not 1`);(i[s]==null||i[s]>o)&&t[o]===1&&(n.push(t[o]),r.push(o)),i[s]<=o&&s++}t[o]!==1&&(n.push(t[o]),r.push(o))}return{newShape:n,keptDims:r}}function Sr(t,e){return gn(t,e)}function gn(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function tye(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function nye(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function bW(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function wy(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function rye(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function Hp(t){return typeof t=="string"||t instanceof String}function aye(t){return typeof t=="boolean"}function rE(t){return typeof t=="number"}function sf(t){return Array.isArray(t)?sf(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":rE(t)?"float32":Hp(t)?"string":aye(t)?"bool":"float32"}function aE(t){return!!(t&&t.constructor&&t.call&&t.apply)}function iE(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Ue(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function wW(t,e,n,r=!1){const a=new Array;if(e.length===1){const i=e[0]*(r?2:1);for(let s=0;s<i;s++)a[s]=n[t+s]}else{const i=e[0],s=e.slice(1),o=s.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<i;l++)a[l]=wW(t+l*o,s,n,r)}return a}function _i(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((a,i)=>a*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return wW(0,t,e,n)}function iye(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function AI(t,e){const n=Cr(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Cr(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function SW(t,e){const n=t.reduce((r,a)=>r*a,1);if(e==null||e==="float32")return _i(t,new Float32Array(n));if(e==="int32")return _i(t,new Int32Array(n));if(e==="bool")return _i(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function ko(t){t.forEach(e=>{B(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function ls(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let a=0;a<t.length-1;++a)r+=n[a]*t[a];return r}function of(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let a=0;a<r.length-1;++a)r[a]=Math.floor(t/n[a]),t-=r[a]*n[a];return r[r.length-1]=t,r}function TI(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xz="tfjsflags";class sye{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=oye,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const a=this.urlFlags[e];fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${a}.`),this.set(e,a)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(TI(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);xz in e&&e[xz].split(",").forEach(r=>{const[a,i]=r.split(":");this.urlFlags[a]=uye(a,i)})}}function oye(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(lye(e,r[0],r[1]),r.join("="))),e}function lye(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function uye(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function fe(){return CW}let CW=null;function cye(t){CW=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let D2;function kW(){if(D2==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");D2=t}return D2}function dye(){const t=kW();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function $I(t,e){const n=dye();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const Xx="Abs",qp="Acos",Kp="Acosh",lf="Add",OI="AddN",DI="All",RI="Any",Yx="ArgMax",Zx="ArgMin",Xp="Asin",Yp="Asinh",Zp="Atan",Qp="Atanh",Jp="Atan2",Qx="AvgPool",_I="AvgPoolGrad",Jx="AvgPool3D",MI="AvgPool3DGrad",eb="BatchMatMul",tb="BatchToSpaceND",PI="Bincount",LI="BitwiseAnd",fye="BroadcastTo",EW="BroadcastArgs",em="Cast",tm="Ceil",nm="ClipByValue",zI="Complex",nb="ComplexAbs",rb="Concat",ab="Conv2D",FI="Conv2DBackpropFilter",ib="Conv2DBackpropInput",sb="Conv3D",jI="Conv3DBackpropFilterV2",BI="Conv3DBackpropInputV2",rm="Cos",am="Cosh",UI="Cumprod",ob="Cumsum",VI="CropAndResize",WI="DenseBincount",GI="DepthToSpace",lb="DepthwiseConv2dNative",HI="DepthwiseConv2dNativeBackpropFilter",qI="DepthwiseConv2dNativeBackpropInput",NW="Diag",ub="Dilation2D",sE="Dilation2DBackpropInput",oE="Dilation2DBackpropFilter",hye="Draw",im="RealDiv",KI="Einsum",sm="Elu",XI="EluGrad",om="Erf",cb="Equal",lm="Exp",db="ExpandDims",um="Expm1",YI="FFT",ZI="Fill",QI="FlipLeftRight",cm="Floor",dm="FloorDiv",fb="FusedBatchNorm",hb="GatherV2",IW="GatherNd",pb="Greater",fm="GreaterEqual",hm="Identity",JI="IFFT",eA="Imag",pm="IsFinite",mm="IsInf",gm="IsNan",mb="LeakyRelu",gb="Less",vb="LessEqual",AW="LinSpace",vm="Log",ym="Log1p",yb="LogicalAnd",xb="LogicalNot",bb="LogicalOr",pye="LogSoftmax",wb="LRN",tA="LRNGrad",Sb="Max",xm="Maximum",Cb="MaxPool",nA="MaxPoolGrad",kb="MaxPool3D",rA="MaxPool3DGrad",TW="MaxPoolWithArgmax",Eb="Mean",Nb="Min",bm="Minimum",Ib="MirrorPad",wm="Mod",$W="Multinomial",Sm="Multiply",Ab="Neg",Tb="NotEqual",aA="NonMaxSuppressionV3",iA="NonMaxSuppressionV4",sA="NonMaxSuppressionV5",$b="OnesLike",Ob="OneHot",Db="Pack",Rb="PadV2",Cm="Pow",_b="Prelu",Mb="Prod",OW="RaggedGather",DW="RaggedRange",RW="RaggedTensorToTensor",oA="Range",lA="Real",km="Reciprocal",Em="Relu",Pb="Reshape",Lb="ResizeNearestNeighbor",uA="ResizeNearestNeighborGrad",zb="ResizeBilinear",cA="ResizeBilinearGrad",Nm="Relu6",Fb="Reverse",Im="Round",Am="Rsqrt",_W="ScatterNd",MW="TensorScatterUpdate",PW="SearchSorted",jb="Select",Tm="Selu",Bb="Slice",$m="Sin",Om="Sinh",Dm="Sign",Rm="Sigmoid",_m="Softplus",Mm="Sqrt",Ub="Sum",Vb="SpaceToBatchND",Wb="SplitV",Gb="Softmax",LW="SparseFillEmptyRows",zW="SparseReshape",FW="SparseSegmentMean",jW="SparseSegmentSum",BW="SparseToDense",Pm="SquaredDifference",dA="Square",fA="StaticRegexReplace",hA="StridedSlice",UW="StringNGrams",VW="StringSplit",WW="StringToHashBucketFast",Lm="Sub",zm="Tan",Fm="Tanh",jm="Tile",pA="TopK",mA="Transform",fd="Transpose",gA="Unique",Hb="Unpack",qb="UnsortedSegmentSum",Kb="ZerosLike",Bm="Step",mye="FromPixels",vA="RotateWithOffset",Sy="_FusedMatMul",Cy="FusedConv2D",GW="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $a(...t){fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(...t)}function gye(...t){fe().getBool("IS_TEST")||fe().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ky=$I("kernelRegistry",()=>new Map),lE=$I("gradRegistry",()=>new Map);function bz(t,e){const n=qW(t,e);return ky.get(n)}function wz(t){return lE.get(t)}function Sz(t){const e=ky.entries(),n=[];for(;;){const{done:r,value:a}=e.next();if(r)break;const[i,s]=a,[o]=i.split("_");o===t&&n.push(s)}return n}function HW(t){const{kernelName:e,backendName:n}=t,r=qW(e,n);ky.has(r)&&$a(`The kernel '${e}' for backend '${n}' is already registered`),ky.set(r,t)}function vye(t){const{kernelName:e}=t;lE.has(e)&&fe().getBool("DEBUG")&&$a(`Overriding the gradient for '${e}'`),lE.set(e,t)}function qW(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KW(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var R2,Cz;function yye(){if(Cz)return R2;Cz=1,R2=e;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function e(P,$,z){this.low=P|0,this.high=$|0,this.unsigned=!!z}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0});function n(P){return(P&&P.__isLong__)===!0}e.isLong=n;var r={},a={};function i(P,$){var z,W,H;return $?(P>>>=0,(H=0<=P&&P<256)&&(W=a[P],W)?W:(z=o(P,(P|0)<0?-1:0,!0),H&&(a[P]=z),z)):(P|=0,(H=-128<=P&&P<128)&&(W=r[P],W)?W:(z=o(P,P<0?-1:0,!1),H&&(r[P]=z),z))}e.fromInt=i;function s(P,$){if(isNaN(P))return $?S:w;if($){if(P<0)return S;if(P>=v)return R}else{if(P<=-x)return _;if(P+1>=x)return T}return P<0?s(-P,$).neg():o(P%g|0,P/g|0,$)}e.fromNumber=s;function o(P,$,z){return new e(P,$,z)}e.fromBits=o;var l=Math.pow;function c(P,$,z){if(P.length===0)throw Error("empty string");if(P==="NaN"||P==="Infinity"||P==="+Infinity"||P==="-Infinity")return w;if(typeof $=="number"?(z=$,$=!1):$=!!$,z=z||10,z<2||36<z)throw RangeError("radix");var W;if((W=P.indexOf("-"))>0)throw Error("interior hyphen");if(W===0)return c(P.substring(1),$,z).neg();for(var H=s(l(z,8)),G=w,F=0;F<P.length;F+=8){var V=Math.min(8,P.length-F),U=parseInt(P.substring(F,F+V),z);if(V<8){var Y=s(l(z,V));G=G.mul(Y).add(s(U))}else G=G.mul(H),G=G.add(s(U))}return G.unsigned=$,G}e.fromString=c;function f(P,$){return typeof P=="number"?s(P,$):typeof P=="string"?c(P,$):o(P.low,P.high,typeof $=="boolean"?$:P.unsigned)}e.fromValue=f;var h=65536,p=1<<24,g=h*h,v=g*g,x=v/2,b=i(p),w=i(0);e.ZERO=w;var S=i(0,!0);e.UZERO=S;var k=i(1);e.ONE=k;var N=i(1,!0);e.UONE=N;var I=i(-1);e.NEG_ONE=I;var T=o(-1,2147483647,!1);e.MAX_VALUE=T;var R=o(-1,-1,!0);e.MAX_UNSIGNED_VALUE=R;var _=o(0,-2147483648,!1);e.MIN_VALUE=_;var M=e.prototype;return M.toInt=function(){return this.unsigned?this.low>>>0:this.low},M.toNumber=function(){return this.unsigned?(this.high>>>0)*g+(this.low>>>0):this.high*g+(this.low>>>0)},M.toString=function($){if($=$||10,$<2||36<$)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(_)){var z=s($),W=this.div(z),H=W.mul(z).sub(this);return W.toString($)+H.toInt().toString($)}else return"-"+this.neg().toString($);for(var G=s(l($,6),this.unsigned),F=this,V="";;){var U=F.div(G),Y=F.sub(U.mul(G)).toInt()>>>0,oe=Y.toString($);if(F=U,F.isZero())return oe+V;for(;oe.length<6;)oe="0"+oe;V=""+oe+V}},M.getHighBits=function(){return this.high},M.getHighBitsUnsigned=function(){return this.high>>>0},M.getLowBits=function(){return this.low},M.getLowBitsUnsigned=function(){return this.low>>>0},M.getNumBitsAbs=function(){if(this.isNegative())return this.eq(_)?64:this.neg().getNumBitsAbs();for(var $=this.high!=0?this.high:this.low,z=31;z>0&&($&1<<z)==0;z--);return this.high!=0?z+33:z+1},M.isZero=function(){return this.high===0&&this.low===0},M.eqz=M.isZero,M.isNegative=function(){return!this.unsigned&&this.high<0},M.isPositive=function(){return this.unsigned||this.high>=0},M.isOdd=function(){return(this.low&1)===1},M.isEven=function(){return(this.low&1)===0},M.equals=function($){return n($)||($=f($)),this.unsigned!==$.unsigned&&this.high>>>31===1&&$.high>>>31===1?!1:this.high===$.high&&this.low===$.low},M.eq=M.equals,M.notEquals=function($){return!this.eq($)},M.neq=M.notEquals,M.ne=M.notEquals,M.lessThan=function($){return this.comp($)<0},M.lt=M.lessThan,M.lessThanOrEqual=function($){return this.comp($)<=0},M.lte=M.lessThanOrEqual,M.le=M.lessThanOrEqual,M.greaterThan=function($){return this.comp($)>0},M.gt=M.greaterThan,M.greaterThanOrEqual=function($){return this.comp($)>=0},M.gte=M.greaterThanOrEqual,M.ge=M.greaterThanOrEqual,M.compare=function($){if(n($)||($=f($)),this.eq($))return 0;var z=this.isNegative(),W=$.isNegative();return z&&!W?-1:!z&&W?1:this.unsigned?$.high>>>0>this.high>>>0||$.high===this.high&&$.low>>>0>this.low>>>0?-1:1:this.sub($).isNegative()?-1:1},M.comp=M.compare,M.negate=function(){return!this.unsigned&&this.eq(_)?_:this.not().add(k)},M.neg=M.negate,M.add=function($){n($)||($=f($));var z=this.high>>>16,W=this.high&65535,H=this.low>>>16,G=this.low&65535,F=$.high>>>16,V=$.high&65535,U=$.low>>>16,Y=$.low&65535,oe=0,j=0,q=0,Z=0;return Z+=G+Y,q+=Z>>>16,Z&=65535,q+=H+U,j+=q>>>16,q&=65535,j+=W+V,oe+=j>>>16,j&=65535,oe+=z+F,oe&=65535,o(q<<16|Z,oe<<16|j,this.unsigned)},M.subtract=function($){return n($)||($=f($)),this.add($.neg())},M.sub=M.subtract,M.multiply=function($){if(this.isZero())return w;if(n($)||($=f($)),t){var z=t.mul(this.low,this.high,$.low,$.high);return o(z,t.get_high(),this.unsigned)}if($.isZero())return w;if(this.eq(_))return $.isOdd()?_:w;if($.eq(_))return this.isOdd()?_:w;if(this.isNegative())return $.isNegative()?this.neg().mul($.neg()):this.neg().mul($).neg();if($.isNegative())return this.mul($.neg()).neg();if(this.lt(b)&&$.lt(b))return s(this.toNumber()*$.toNumber(),this.unsigned);var W=this.high>>>16,H=this.high&65535,G=this.low>>>16,F=this.low&65535,V=$.high>>>16,U=$.high&65535,Y=$.low>>>16,oe=$.low&65535,j=0,q=0,Z=0,se=0;return se+=F*oe,Z+=se>>>16,se&=65535,Z+=G*oe,q+=Z>>>16,Z&=65535,Z+=F*Y,q+=Z>>>16,Z&=65535,q+=H*oe,j+=q>>>16,q&=65535,q+=G*Y,j+=q>>>16,q&=65535,q+=F*U,j+=q>>>16,q&=65535,j+=W*oe+H*Y+G*U+F*V,j&=65535,o(Z<<16|se,j<<16|q,this.unsigned)},M.mul=M.multiply,M.divide=function($){if(n($)||($=f($)),$.isZero())throw Error("division by zero");if(t){if(!this.unsigned&&this.high===-2147483648&&$.low===-1&&$.high===-1)return this;var z=(this.unsigned?t.div_u:t.div_s)(this.low,this.high,$.low,$.high);return o(z,t.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?S:w;var W,H,G;if(this.unsigned){if($.unsigned||($=$.toUnsigned()),$.gt(this))return S;if($.gt(this.shru(1)))return N;G=S}else{if(this.eq(_)){if($.eq(k)||$.eq(I))return _;if($.eq(_))return k;var F=this.shr(1);return W=F.div($).shl(1),W.eq(w)?$.isNegative()?k:I:(H=this.sub($.mul(W)),G=W.add(H.div($)),G)}else if($.eq(_))return this.unsigned?S:w;if(this.isNegative())return $.isNegative()?this.neg().div($.neg()):this.neg().div($).neg();if($.isNegative())return this.div($.neg()).neg();G=w}for(H=this;H.gte($);){W=Math.max(1,Math.floor(H.toNumber()/$.toNumber()));for(var V=Math.ceil(Math.log(W)/Math.LN2),U=V<=48?1:l(2,V-48),Y=s(W),oe=Y.mul($);oe.isNegative()||oe.gt(H);)W-=U,Y=s(W,this.unsigned),oe=Y.mul($);Y.isZero()&&(Y=k),G=G.add(Y),H=H.sub(oe)}return G},M.div=M.divide,M.modulo=function($){if(n($)||($=f($)),t){var z=(this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,$.low,$.high);return o(z,t.get_high(),this.unsigned)}return this.sub(this.div($).mul($))},M.mod=M.modulo,M.rem=M.modulo,M.not=function(){return o(~this.low,~this.high,this.unsigned)},M.and=function($){return n($)||($=f($)),o(this.low&$.low,this.high&$.high,this.unsigned)},M.or=function($){return n($)||($=f($)),o(this.low|$.low,this.high|$.high,this.unsigned)},M.xor=function($){return n($)||($=f($)),o(this.low^$.low,this.high^$.high,this.unsigned)},M.shiftLeft=function($){return n($)&&($=$.toInt()),($&=63)===0?this:$<32?o(this.low<<$,this.high<<$|this.low>>>32-$,this.unsigned):o(0,this.low<<$-32,this.unsigned)},M.shl=M.shiftLeft,M.shiftRight=function($){return n($)&&($=$.toInt()),($&=63)===0?this:$<32?o(this.low>>>$|this.high<<32-$,this.high>>$,this.unsigned):o(this.high>>$-32,this.high>=0?0:-1,this.unsigned)},M.shr=M.shiftRight,M.shiftRightUnsigned=function($){if(n($)&&($=$.toInt()),$&=63,$===0)return this;var z=this.high;if($<32){var W=this.low;return o(W>>>$|z<<32-$,z>>>$,this.unsigned)}else return $===32?o(z,0,this.unsigned):o(z>>>$-32,0,this.unsigned)},M.shru=M.shiftRightUnsigned,M.shr_u=M.shiftRightUnsigned,M.toSigned=function(){return this.unsigned?o(this.low,this.high,!1):this},M.toUnsigned=function(){return this.unsigned?this:o(this.low,this.high,!0)},M.toBytes=function($){return $?this.toBytesLE():this.toBytesBE()},M.toBytesLE=function(){var $=this.high,z=this.low;return[z&255,z>>>8&255,z>>>16&255,z>>>24,$&255,$>>>8&255,$>>>16&255,$>>>24]},M.toBytesBE=function(){var $=this.high,z=this.low;return[$>>>24,$>>>16&255,$>>>8&255,$&255,z>>>24,z>>>16&255,z>>>8&255,z&255]},e.fromBytes=function($,z,W){return W?e.fromBytesLE($,z):e.fromBytesBE($,z)},e.fromBytesLE=function($,z){return new e($[0]|$[1]<<8|$[2]<<16|$[3]<<24,$[4]|$[5]<<8|$[6]<<16|$[7]<<24,z)},e.fromBytesBE=function($,z){return new e($[4]<<24|$[5]<<16|$[6]<<8|$[7],$[0]<<24|$[1]<<16|$[2]<<8|$[3],z)},R2}var XW=yye();const YW=Ui(XW),xye=s4({__proto__:null,default:YW},[XW]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uu=YW||xye;function Xb(t){return uu.fromString(t,!0,16)}const ZW=Xb("c3a5c85c97cb3127"),lu=Xb("b492b66fbe98f273"),Rr=Xb("9ae16a3b2f90404f");function uE(t){return t.xor(t.shru(47))}function QW(t,e,n){const r=t.slice(e,e+n);return uu.fromBytes(Array.from(r),!0,!0)}function Wt(t,e){return QW(t,e,8)}function kz(t,e){return QW(t,e,4)}function qn(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function ul(t,e,n=Xb("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let a=e.xor(r).mul(n);return a=a.xor(a.shru(47)),a=a.mul(n),a}function bye(t,e,n,r,a,i){a=a.add(t),i=qn(i.add(a).add(r),21);const s=a;return a=a.add(e),a=a.add(n),i=i.add(qn(a,44)),[a.add(r),i.add(s)]}function qv(t,e,n,r){return bye(Wt(t,e),Wt(t,e+8),Wt(t,e+16),Wt(t,e+24),n,r)}function wye(t,e=t.length){if(e>=8){const n=Rr.add(e*2),r=Wt(t,0).add(Rr),a=Wt(t,e-8),i=qn(a,37).mul(n).add(r),s=qn(r,25).add(a).mul(n);return ul(i,s,n)}if(e>=4){const n=Rr.add(e*2),r=kz(t,0);return ul(r.shl(3).add(e),kz(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],a=t[e-1],i=n+(r<<8),s=e+(a<<2);return uE(Rr.mul(i).xor(ZW.mul(s))).mul(Rr)}return Rr}function Sye(t,e=t.length){const n=Rr.add(e*2),r=Wt(t,0).mul(lu),a=Wt(t,8),i=Wt(t,e-8).mul(n),s=Wt(t,e-16).mul(Rr);return ul(qn(r.add(a),43).add(qn(i,30)).add(s),r.add(qn(a.add(Rr),18)).add(i),n)}function Cye(t,e=t.length){const n=Rr.add(e*2),r=Wt(t,0).mul(Rr),a=Wt(t,8),i=Wt(t,e-8).mul(n),s=Wt(t,e-16).mul(Rr),o=qn(r.add(a),43).add(qn(i,30)).add(s),l=ul(o,r.add(qn(a.add(Rr),18)).add(i),n),c=Wt(t,16).mul(n),f=Wt(t,24),h=o.add(Wt(t,e-32)).mul(n),p=l.add(Wt(t,e-24)).mul(n);return ul(qn(c.add(f),43).add(qn(h,30)).add(p),c.add(qn(f.add(r),18)).add(h),n)}function kye(t,e=t.length){const n=uu.fromNumber(81,!0);if(e<=32)return e<=16?wye(t,e):Sye(t,e);if(e<=64)return Cye(t,e);let r=n,a=n.mul(lu).add(113),i=uE(a.mul(Rr).add(113)).mul(Rr),s=[uu.UZERO,uu.UZERO],o=[uu.UZERO,uu.UZERO];r=r.mul(Rr).add(Wt(t,0));let l=0;const c=(e-1>>6)*64,f=c+(e-1&63)-63;do r=qn(r.add(a).add(s[0]).add(Wt(t,l+8)),37).mul(lu),a=qn(a.add(s[1]).add(Wt(t,l+48)),42).mul(lu),r=r.xor(o[1]),a=a.add(s[0]).add(Wt(t,l+40)),i=qn(i.add(o[0]),33).mul(lu),s=qv(t,l,s[1].mul(lu),r.add(o[0])),o=qv(t,l+32,i.add(o[1]),a.add(Wt(t,l+16))),[i,r]=[r,i],l+=64;while(l!==c);const h=lu.add(i.and(255).shl(1));return l=f,o[0]=o[0].add(e-1&63),s[0]=s[0].add(o[0]),o[0]=o[0].add(s[0]),r=qn(r.add(a).add(s[0]).add(Wt(t,l+8)),37).mul(h),a=qn(a.add(s[1]).add(Wt(t,l+48)),42).mul(h),r=r.xor(o[1].mul(9)),a=a.add(s[0].mul(9).add(Wt(t,l+40))),i=qn(i.add(o[0]),33).mul(h),s=qv(t,l,s[1].mul(h),r.add(o[0])),o=qv(t,l+32,i.add(o[1]),a.add(Wt(t,l+16))),[i,r]=[r,i],ul(ul(s[0],o[0],h).add(uE(a).mul(ZW)).add(i),ul(s[1],o[1],h).add(r),h)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Al(t,e){return e==="string"?cl(t):ec([t],e)}function Eye(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function ec(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Pu(t)),fe().getBool("DEBUG")&&tye(t,e),Eye(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Ur(){return fe().platform.now()}function cl(t,e="utf-8"){return e=e||"utf-8",fe().platform.encode(t,e)}function gl(t,e="utf-8"){return e=e||"utf-8",fe().platform.decode(t,e)}function hi(t){return fe().platform.isTypedArray!=null?fe().platform.isTypedArray(t):KW(t)}function Pu(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||TI(t)||t==null||hi(t)&&n)e.push(t);else if(Array.isArray(t)||hi(t))for(let r=0;r<t.length;++r)Pu(t[r],e,n);else{let r=-1;for(const a of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(a)&&(r=Math.max(r,Number(a)));for(let a=0;a<=r;a++)Pu(t[a],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nye{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new Aye)}profileKernel(e,n,r){let a;const i=()=>{a=r()};let s;const o=Ur();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(i);else{i();for(const c of a)c.dataSync();s=Promise.resolve({kernelMs:Ur()-o})}if(fe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<a.length;c++){const f=a[c];f.data().then(h=>{Iye(h,f.dtype,e)})}return{kernelName:e,outputs:a,inputs:n,timeMs:s.then(c=>c.kernelMs),extraInfo:s.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:a,inputs:i,extraInfo:s}=e;r.forEach(o=>{Promise.all([o.data(),a,s]).then(l=>{this.logger.logKernelProfile(n,o,l[0],l[1],i,l[2])})})}}function Iye(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const a=t[r];if(isNaN(a)||!isFinite(a))return console.warn(`Found ${a} in the result of '${n}'`),!0}return!1}class Aye{logKernelProfile(e,n,r,a,i,s){const o=typeof a=="number"?dd(`${a}ms`,9):a.error,l=dd(e,25),c=n.rank,f=n.size,h=dd(n.shape.toString(),14);let p="";for(const g in i){const v=i[g];if(v!=null){const x=v.shape||n.shape,b=x.length;p+=`${g}: ${b}D ${b>0?x:""} `}}console.log(`%c${l}	%c${o}	%c${c}D ${h}	%c${f}	%c${p}	%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tye(t,e,n){const r={},a={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const c=t[l],f=c.inputs;for(const h in f){const p=f[h];let g=!1;for(let v=0;v<e.length;v++)if(r[p.id]){c.outputs.forEach(x=>r[x.id]=!0),g=!0,a[c.id]=!0;break}if(g)break}}const i={};i[n.id]=!0;const s={};for(let l=t.length-1;l>=0;l--){const c=t[l],f=c.inputs;for(let h=0;h<c.outputs.length;h++)if(i[c.outputs[h].id]){for(const p in f)i[f[p].id]=!0,s[c.id]=!0;break}}const o=[];for(let l=0;l<t.length;l++){const c=t[l];if(a[c.id]&&s[c.id]){const f={};for(const p in c.inputs){const g=c.inputs[p];r[g.id]&&(f[p]=g)}const h=Object.assign({},c);h.inputs=f,h.outputs=c.outputs,o.push(h)}}return o}function $ye(t,e,n,r){for(let a=e.length-1;a>=0;a--){const i=e[a],s=[];if(i.outputs.forEach(l=>{const c=t[l.id];c!=null?s.push(c):s.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const o=i.gradient(s);for(const l in i.inputs){if(!(l in o))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(o)}.`);const c=n(()=>o[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const f=i.inputs[l];if(!It(c.shape,f.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${f.shape}'`);if(t[f.id]==null)t[f.id]=c;else{const h=t[f.id];t[f.id]=r(h,c),h.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ez=20,Ih=3,_2=7;function Oye(t,e,n,r){const a=Ue(e),i=Dye(t,e,n,a),s=e.length,o=p0(t,e,n,a,i),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${s}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(o.map(c=>"    "+c).join(`
`)),l.join(`
`)}function Dye(t,e,n,r){const a=ve(e),i=r[r.length-1],s=new Array(i).fill(0),o=e.length,l=n==="complex64"?_h(t):t;if(o>1)for(let c=0;c<a/i;c++){const f=c*i;for(let h=0;h<i;h++)s[h]=Math.max(s[h],Rh(l[f+h],0,n).length)}return s}function Rh(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(_2))} + ${parseFloat(t[1].toFixed(_2))}j`:Hp(t)?r=`'${t}'`:n==="bool"?r=JW(t):r=parseFloat(t.toFixed(_2)).toString(),dd(r,e)}function JW(t){return t===0?"false":"true"}function p0(t,e,n,r,a,i=!0){const s=n==="complex64"?2:1,o=e[0],l=e.length;if(l===0){if(n==="complex64"){const x=_h(t);return[Rh(x[0],0,n)]}return n==="bool"?[JW(t[0])]:[t[0].toString()]}if(l===1){if(o>Ez){const b=Ih*s;let w=Array.from(t.slice(0,b)),S=Array.from(t.slice((o-Ih)*s,o*s));return n==="complex64"&&(w=_h(w),S=_h(S)),["["+w.map((k,N)=>Rh(k,a[N],n)).join(", ")+", ..., "+S.map((k,N)=>Rh(k,a[o-Ih+N],n)).join(", ")+"]"]}return["["+(n==="complex64"?_h(t):Array.from(t)).map((b,w)=>Rh(b,a[w],n)).join(", ")+"]"]}const c=e.slice(1),f=r.slice(1),h=r[0]*s,p=[];if(o>Ez){for(let x=0;x<Ih;x++){const b=x*h,w=b+h;p.push(...p0(t.slice(b,w),c,n,f,a,!1))}p.push("...");for(let x=o-Ih;x<o;x++){const b=x*h,w=b+h;p.push(...p0(t.slice(b,w),c,n,f,a,x===o-1))}}else for(let x=0;x<o;x++){const b=x*h,w=b+h;p.push(...p0(t.slice(b,w),c,n,f,a,x===o-1))}const g=l===2?",":"";p[0]="["+(o>0?p[0]+g:"");for(let x=1;x<p.length-1;x++)p[x]=" "+p[x]+g;let v=`,
`;for(let x=2;x<l;x++)v+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(i?"":v),p}function _h(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class or{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=ve(e),r!=null){const a=r.length;B(a===this.size,()=>`Length of values '${a}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||gn(n,this.size),this.strides=Ue(e)}set(e,...n){n.length===0&&(n=[0]),B(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const a of e){if(a<0||a>=this.shape[n]){const i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let a=0;a<e.length-1;++a)r+=this.strides[a]*e[a];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return Ii().makeTensor(this.values,this.shape,this.dtype)}}let Ii=null,rd=null;function Rye(t){Ii=t}function _ye(t){rd=t}class Mn{constructor(e,n,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=ve(e),this.strides=Ue(e),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return rd.buffer(this.shape,this.dtype,e)}bufferSync(){return rd.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return _i(this.shape,e,this.dtype==="complex64")}arraySync(){return _i(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=Ii().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>gl(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Ii().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Ii().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>gl(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Ii().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Ii().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return rd.print(this,e)}clone(){return this.throwIfDisposed(),rd.clone(this)}toString(e=!1){const n=this.dataSync();return Oye(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),rd.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),Ii().makeVariable(this,e,n,r)}}Object.defineProperty(Mn,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function ge(){return $I("Tensor",()=>Mn)}ge();class Ey extends Mn{constructor(e,n,r,a){super(e.shape,e.dtype,e.dataId,a),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!It(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Ii().disposeTensor(this),this.dataId=e.dataId,Ii().incRef(this,null)}dispose(){Ii().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Ey,Symbol.hasInstance,{value:t=>t instanceof Mn&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Nz;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(Nz||(Nz={}));var cE;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(cE||(cE={}));var dE;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(dE||(dE={}));var fE;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(fE||(fE={}));var hE;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(hE||(hE={}));const Mye={float32:fE,int32:cE,bool:dE,complex64:hE};function pa(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return Mye[t][e]}function yA(t){return pa(t,"int32")}function e6(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function t6(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xn(t,e){if(t.dtype===e.dtype)return[t,e];const n=pa(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function n6(t){const e=[];return r6(t,e,new Set),e}function r6(t,e,n){if(t==null)return;if(t instanceof Mn){e.push(t);return}if(!Pye(t))return;const r=t;for(const a in r){const i=r[a];n.has(i)||(n.add(i),r6(i,e,n))}}function Pye(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M2(t){return t.kernelName!=null}class Iz{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Nd{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Iz}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?($a(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Nye(this.backendInstance),!0}setupRegisteredKernels(){Sz(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){Sz(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof EI)&&typeof r.then=="function"){const a=++this.pendingBackendInitId,i=r.then(s=>a<this.pendingBackendInitId?!1:(this.registry[e]=s,this.pendingBackendInit=null,!0)).catch(s=>(a<this.pendingBackendInitId||(this.pendingBackendInit=null,$a(`Initialization of backend ${e} failed`),$a(s.stack||s.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return $a(`Initialization of backend ${e} failed`),$a(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:a,asyncInit:i}=this.initializeBackend(r);if(i||a)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),a=r.backend,i=this.readSync(n),s=a.refCount(n);a.disposeData(n,!0),r.backend=e,e.move(n,i,r.shape,r.dtype,s),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let a;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(a),()=>(a=n(),a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),a))}scopedRun(e,n,r){e();try{const a=r();return n(),a}catch(a){throw n(),a}}nextTensorId(){return Nd.nextTensorId++}nextVariableId(){return Nd.nextVariableId++}clone(e){const n=te.runKernel(hm,{x:e}),r={x:e},a=s=>({x:()=>{const o="float32",l={x:s},c={dtype:o};return te.runKernel(em,l,c)}}),i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],a,i,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(bz(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const a=this.backend.numDataIds();let i=0;r.forEach(l=>{i+=l.dtype==="complex64"?3:1});const s=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=a-n-i-s;if(o>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${o} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const a=this.isTapeOn(),i=this.state.numBytes,s=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let o;this.backendName==null&&this.backend;let l;const c=M2(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(M2(e)){const{kernelName:v,inputs:x,attrs:b}=e;this.backendName==null&&this.backend;const w=bz(v,this.backendName);B(w!=null,()=>`Cannot find registered kernel '${v}' for backend '${this.backendName}'`),o=()=>{const S=this.backend.numDataIds();l=w.kernelFunc({inputs:x,attrs:b,backend:this.backend});const k=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(v,S,k);const N=k.map(I=>I.rank!=null?I:this.makeTensorFromTensorInfo(I));if(a){const I=this.getTensorsForGradient(v,x,N);r=this.saveTensorsForBackwardMode(I)}return N}}else{const{forwardFunc:v}=e,x=b=>{a&&(r=b.map(w=>this.keep(this.clone(w))))};o=()=>{const b=this.backend.numDataIds();l=this.tidy(()=>v(this.backend,x));const w=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,b,w),w}}const{inputs:f,attrs:h}=e,p=M2(e)?null:e.backwardsFunc;let g;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=o():(g=this.profiler.profileKernel(c,f,()=>o()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(g),n=g.outputs)}),a&&this.addTapeNode(c,f,n,p,r,h),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-s,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(f).map(v=>f[v]!=null?f[v].shape:null),outputShapes:n.map(v=>v.shape),kernelTimeMs:g.timeMs,extraInfo:g.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const a=wz(e);if(a!=null){const i=a.inputsToSave||[],s=a.outputsToSave||[];let o;a.saveAllInputs?(B(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),o=Object.keys(n).map(c=>n[c])):o=i.map(c=>n[c]);const l=r.filter((c,f)=>s[f]);return o.concat(l)}return[]}makeTensor(e,n,r,a){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;let i=e;r==="string"&&Hp(e[0])&&(i=e.map(l=>cl(l)));const s=a.write(i,n,r),o=new Mn(n,r,s,this.nextTensorId());if(this.trackTensor(o,a),r==="string"){const l=this.state.tensorInfo.get(s),c=rye(i);this.state.numBytes+=c-l.bytes,l.bytes=c}return o}makeTensorFromDataId(e,n,r,a){r=r||"float32";const i={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,a)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:a,dtype:i}=e,s=new Mn(a,i,r,this.nextTensorId());return this.trackTensor(s,n),s}makeVariable(e,n=!0,r,a){r=r||this.nextVariableId().toString(),a!=null&&a!==e.dtype&&(e=e.cast(a));const i=new Ey(e,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*wy(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof Ey||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*wy(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(a=>a.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const a of this.state.activeProfile.kernels)a.kernelTimeMs=await a.kernelTimeMs,a.extraInfo=await a.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,a,i,s){const o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:i},l=wz(e);l!=null&&(a=l.gradFunc),a!=null&&(o.gradient=c=>(c=c.map((f,h)=>{if(f==null){const p=r[h],g=Cr(p.size,p.dtype);return this.makeTensor(g,p.shape,p.dtype)}return f}),a(c.length>1?c:c[0],i,s))),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=n6(e),r=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const s=this.state.activeScope.track[i];!s.kept&&!r.has(s.id)&&s.dispose()}const a=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===a.id&&this.track(i)})}gradients(e,n,r,a=!1){if(B(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));B(i instanceof Mn,()=>"The result y returned by f() must be a tensor.");const s=Tye(this.state.activeTape,n,i);if(!a&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const o={};o[i.id]=r??Lye(i.shape),$ye(o,s,c=>this.tidy(c),zye);const l=n.map(c=>o[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const f of c.saved)f.dispose()}),this.state.activeTape=null),{value:i,grads:l}})}customGrad(e){return B(aE(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{B(n.every(o=>o instanceof Mn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const a={};n.forEach((o,l)=>{a[l]=o});const i=(o,l)=>(r=e(...n,l),B(r.value instanceof Mn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),B(aE(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),s=(o,l)=>{const c=r.gradFunc(o,l),f=Array.isArray(c)?c:[c];B(f.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),B(f.every(p=>p instanceof Mn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const h={};return f.forEach((p,g)=>{h[g]=()=>p}),h};return this.runKernelFunc({forwardFunc:i,backwardsFunc:s,inputs:a})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Ur(),r=await this.backend.time(e);return r.wallMs=Ur()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Iz;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Nd.nextTensorId=0;Nd.nextVariableId=0;function Lye(t){const e=AI(ve(t),"float32");return te.makeTensor(e,t,"float32")}function a6(){const t=kW();if(t._tfengine==null){const e=new sye(t);t._tfengine=new Nd(e)}return cye(t._tfengine.ENV),Rye(()=>t._tfengine),t._tfengine}const te=a6();function zye(t,e){const n={a:t,b:e};return te.runKernel(lf,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fye(){return typeof navigator<"u"&&navigator!=null}function i6(t){if(t||Fye()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function s6(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yr=fe();Yr.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Yr.registerFlag("IS_BROWSER",()=>s6());Yr.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Yr.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Yr.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Yr.registerFlag("PROD",()=>!1);Yr.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Yr.getBool("DEBUG"));Yr.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Yr.registerFlag("IS_TEST",()=>!1);Yr.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Yr.getBool("DEBUG"));Yr.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Yr.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Yr.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yb(t,e){let n=t;if(hi(t))return e==="string"?[]:[t.length];if(e6(t)){const a=t.channels||"RGBA";return[t.height,t.width*a.length]}else if(t6(t))return[t.buffer.size/(e==null?4:wy(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||hi(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&fe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&o6(t,r,[]),r}function o6(t,e,n){if(n=n||[],!Array.isArray(t)&&!hi(t)){B(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}B(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),B(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let a=0;a<t.length;++a)o6(t[a],r,n.concat(a))}function Az(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function K(t,e,n,r="numeric"){if(t instanceof ge())return Az(r,t.dtype,e,n),t;let a=sf(t);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),Az(r,a,e,n),t==null||!hi(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const i=Yb(t,a);!hi(t)&&!Array.isArray(t)&&(t=[t]);const o=a!=="string"?ec(t,a):Pu(t,[],!0);return te.makeTensor(o,i,a)}function l6(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((i,s)=>K(i,`${e}[${s}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jye="__op";function re(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+jye;const a=(...i)=>{te.startScope(n);try{const s=r(...i);return TI(s)&&console.error("Cannot return a Promise inside of tidy."),te.endScope(s),s}catch(s){throw te.endScope(null),s}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bye(t,e){const n=K(t,"real","complex"),r=K(e,"imag","complex");II(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const a={real:n,imag:r};return te.runKernel(zI,a)}const Id=re({complex_:Bye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zb(t,e,n,r){if(r==null)r=sf(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(t6(t)||e6(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return te.backend.createTensorFromGPUData(t,e||n,r)}if(!hi(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){ko(e);const a=ve(e),i=ve(n);B(a===i,()=>`Based on the provided shape, [${e}], the tensor should have ${a} values but has ${i}`);for(let s=0;s<n.length;++s){const o=n[s],l=s===n.length-1?o!==ve(e.slice(s)):!0;B(n[s]===e[s]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!hi(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?ec(t,r):Pu(t,[],!0),te.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u6(t,e,n){const r=Yb(t,n);return Zb(t,e,r,n)}class uf{static join(e){return new uf(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>hi(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const a=e[r];r!==e.length-1&&a.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const i=n+a.byteLength;this.shards.push({buffer:a,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const a=n-e,i=new ArrayBuffer(a),s=new Uint8Array(i);let o=0;for(let l=r;l<this.shards.length;l++){const c=this.shards[l],h=e+o-c.start,p=o,v=Math.min(n,c.end)-c.start,x=new Uint8Array(c.buffer,h,v-h);if(s.set(x,p),o+=x.length,n<c.end)break}return i}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(a){return e<a.start?-1:e>=a.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=Uye(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function Uye(t,e){let n=0,r=t.length;for(;n<=r;){const a=Math.floor((r-n)/2)+n,i=e(t[a]);if(i===0)return a;i<0?r=a:n=a+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qi(){return te}function Tz(){return te.memory()}function le(t,e){return te.tidy(t,e)}function lt(t){n6(t).forEach(n=>n.dispose())}function us(t){return te.keep(t)}function c6(t,e,n=1){return te.registerBackend(t,e,n)}function Vye(){return te.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $z=4;async function Oz(t,e){const n=[],r=[],a=Array.isArray(t)?t.map(s=>s.name):Object.keys(t);for(let s=0;s<a.length;++s){const o=a[s],l=Array.isArray(t)?t[s].tensor:t[o];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${o}': ${l.dtype}`);const c={name:o,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const f=new Promise(async h=>{const p=await l.bytes(),g=p.reduce((b,w)=>b+w.length,0)+$z*p.length,v=new Uint8Array(g);let x=0;for(let b=0;b<p.length;b++){const w=p[b],S=new Uint8Array(new Uint32Array([w.length]).buffer);v.set(S,x),x+=$z,v.set(w,x),x+=w.length}h(v)});r.push(f)}else r.push(l.data());e!=null&&(c.group=e),n.push(c)}const i=await Promise.all(r);return{data:Wye(i),specs:n}}function Wye(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});const r=new Uint8Array(e);let a=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),a),a+=i.byteLength}),r.buffer}const xA=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function Dz(t){return xA?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function Gye(t){if(xA)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,a=e.length;r<a;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function Hye(t){if(xA){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function qye(t){return uf.join(t)}function d6(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:Dz(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:Dz(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new uf(t.weightData).byteLength}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $r{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return $r.instance==null&&($r.instance=new $r),$r.instance}static registerSaveRouter(e){$r.getInstance().saveRouters.push(e)}static registerLoadRouter(e){$r.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return $r.getHandlers(e,"save")}static getLoadHandlers(e,n){return $r.getHandlers(e,"load",n)}static getHandlers(e,n,r){const a=[];return(n==="load"?$r.getInstance().loadRouters:$r.getInstance().saveRouters).forEach(s=>{const o=s(e,r);o!==null&&a.push(o)}),a}}const Kye=t=>$r.getSaveHandlers(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pE="tensorflowjs",mE=1,vu="models_store",il="model_info_store";function f6(){if(!fe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function gE(t){const e=t.result;e.createObjectStore(vu,{keyPath:"modelPath"}),e.createObjectStore(il,{keyPath:"modelPath"})}class Lu{constructor(e){if(this.indexedDB=f6(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,a)=>{const i=this.indexedDB.open(pE,mE);i.onupgradeneeded=()=>gE(i),i.onsuccess=()=>{const s=i.result;if(n==null){const o=s.transaction(vu,"readonly"),c=o.objectStore(vu).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return s.close(),a(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=f=>(s.close(),a(c.error)),o.oncomplete=()=>s.close()}else{n.weightData=uf.join(n.weightData);const o=d6(n),l=s.transaction(il,"readwrite");let c=l.objectStore(il),f;try{f=c.put({modelPath:this.modelPath,modelArtifactsInfo:o})}catch(p){return a(p)}let h;f.onsuccess=()=>{h=s.transaction(vu,"readwrite");const p=h.objectStore(vu);let g;try{g=p.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:o})}catch(v){return a(v)}g.onsuccess=()=>r({modelArtifactsInfo:o}),g.onerror=v=>{c=l.objectStore(il);const x=c.delete(this.modelPath);x.onsuccess=()=>(s.close(),a(g.error)),x.onerror=b=>(s.close(),a(g.error))}},f.onerror=p=>(s.close(),a(f.error)),l.oncomplete=()=>{h==null?s.close():h.oncomplete=()=>s.close()}}},i.onerror=s=>a(i.error)})}}Lu.URL_SCHEME="indexeddb://";const h6=t=>fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Lu.URL_SCHEME)?Xye(t.slice(Lu.URL_SCHEME.length)):null;$r.registerSaveRouter(h6);$r.registerLoadRouter(h6);function Xye(t){return new Lu(t)}function Yye(t){return t.startsWith(Lu.URL_SCHEME)?t.slice(Lu.URL_SCHEME.length):t}class Zye{constructor(){this.indexedDB=f6()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(pE,mE);r.onupgradeneeded=()=>gE(r),r.onsuccess=()=>{const a=r.result,i=a.transaction(il,"readonly"),o=i.objectStore(il).getAll();o.onsuccess=()=>{const l={};for(const c of o.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},o.onerror=l=>(a.close(),n(o.error)),i.oncomplete=()=>a.close()},r.onerror=a=>n(r.error)})}async removeModel(e){return e=Yye(e),new Promise((n,r)=>{const a=this.indexedDB.open(pE,mE);a.onupgradeneeded=()=>gE(a),a.onsuccess=()=>{const i=a.result,s=i.transaction(il,"readwrite"),o=s.objectStore(il),l=o.get(e);let c;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const f=o.delete(e),h=()=>{c=i.transaction(vu,"readwrite");const g=c.objectStore(vu).delete(e);g.onsuccess=()=>n(l.result.modelArtifactsInfo),g.onerror=v=>r(l.error)};f.onsuccess=h,f.onerror=p=>(h(),i.close(),r(l.error))}},l.onerror=f=>(i.close(),r(l.error)),s.oncomplete=()=>{c==null?i.close():c.oncomplete=()=>i.close()}},a.onerror=i=>r(a.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qs="/",ad="tensorflowjs_models",p6="info",Qye="model_topology",Jye="weight_specs",exe="weight_data",txe="model_metadata";function m6(t){return{info:[ad,t,p6].join(Qs),topology:[ad,t,Qye].join(Qs),weightSpecs:[ad,t,Jye].join(Qs),weightData:[ad,t,exe].join(Qs),modelMetadata:[ad,t,txe].join(Qs)}}function g6(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function nxe(t){const e=t.split(Qs);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Qs)}function rxe(t){return t.startsWith(zu.URL_SCHEME)?t.slice(zu.URL_SCHEME.length):t}class zu{constructor(e){if(!fe().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=m6(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),a=d6(e),i=uf.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Gye(i));const s={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(s)),{modelArtifactsInfo:a}}catch{throw g6(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${a.modelTopologyBytes}, weightSpecsBytes=${a.weightSpecsBytes}, weightDataBytes=${a.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const a=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(a==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=a;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const o=JSON.parse(i);n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,o.signature!=null&&(n.signature=o.signature),o.userDefinedMetadata!=null&&(n.userDefinedMetadata=o.userDefinedMetadata),o.modelInitializer!=null&&(n.modelInitializer=o.modelInitializer),o.initializerSignature!=null&&(n.initializerSignature=o.initializerSignature),o.trainingConfig!=null&&(n.trainingConfig=o.trainingConfig)}const s=this.LS.getItem(this.keys.weightData);if(s==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=Hye(s),n}}zu.URL_SCHEME="localstorage://";const v6=t=>fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(zu.URL_SCHEME)?axe(t.slice(zu.URL_SCHEME.length)):null;$r.registerSaveRouter(v6);$r.registerLoadRouter(v6);function axe(t){return new zu(t)}class ixe{constructor(){B(fe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),B(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=ad+Qs,r=Qs+p6;for(let a=0;a<this.LS.length;++a){const i=this.LS.key(a);if(i.startsWith(n)&&i.endsWith(r)){const s=nxe(i);e[s]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=rxe(e);const n=m6(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return g6(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rz="://";class Ji{constructor(){this.managers={}}static getInstance(){return Ji.instance==null&&(Ji.instance=new Ji),Ji.instance}static registerManager(e,n){B(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Rz)&&(e=e.slice(0,e.indexOf(Rz))),B(e.length>0,()=>"scheme must not be an empty string.");const r=Ji.getInstance();B(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Ji.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Ji.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sxe{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!fe().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const a=this.functionRefs[r.data.index];a(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return KW(e)}}if(fe().get("IS_BROWSER")){fe().setPlatform("browser",new sxe);try{Ji.registerManager(zu.URL_SCHEME,new ixe)}catch{}try{Ji.registerManager(Lu.URL_SCHEME,new Zye)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oxe={importFetch:()=>require("node-fetch")};let P2;class lxe{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return fe().global.fetch!=null?fe().global.fetch(e,n):(P2==null&&(P2=oxe.importFetch()),P2(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}fe().get("IS_NODE")&&!fe().get("IS_BROWSER")&&fe().setPlatform("node",new lxe);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function at(t,e="float32",n){return e=e||"float32",ko(t),new or(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uxe(t,e){const n=K(t,"x","cast");if(!nye(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},a={dtype:e};return te.runKernel(em,r,a)}const Oe=re({cast_:uxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cxe(t){const n={x:K(t,"x","clone","string_or_numeric")};return te.runKernel(hm,n)}const Cu=re({clone_:cxe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dxe(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */a6();const fxe={buffer:at,cast:Oe,clone:Cu,print:dxe};_ye(fxe);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hxe(t,e){let n=K(t,"a","add"),r=K(e,"b","add");[n,r]=xn(n,r);const a={a:n,b:r};return te.runKernel(lf,a)}const Ee=re({add_:hxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pxe(t,e){let n=K(t,"a","floorDiv"),r=K(e,"b","floorDiv");[n,r]=xn(n,r);const a={a:n,b:r};return te.runKernel(dm,a)}const y6=re({floorDiv_:pxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mxe(t,e){let n=K(t,"a","div"),r=K(e,"b","div");if([n,r]=xn(n,r),n.dtype==="int32"&&r.dtype==="int32")return y6(n,r);const a={a:n,b:r},i={};return te.runKernel(im,a,i)}const Ge=re({div_:mxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gxe(t,e){let n=K(t,"a","mul"),r=K(e,"b","mul");[n,r]=xn(n,r);const a={a:n,b:r};return te.runKernel(Sm,a)}const ee=re({mul_:gxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vxe(t){const e=K(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return te.runKernel(nb,n)}else{const n={x:e};return te.runKernel(Xx,n)}}const Or=re({abs_:vxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yxe(t){const n={x:K(t,"x","acos")};return te.runKernel(qp,n)}const xxe=re({acos_:yxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bxe(t){const n={x:K(t,"x","acosh")};return te.runKernel(Kp,n)}const wxe=re({acosh_:bxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sxe(t,e=null,n=!1){const a={x:K(t,"x","all","bool")},i={axis:e,keepDims:n};return te.runKernel(DI,a,i)}const x6=re({all_:Sxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cxe(t,e=null,n=!1){const a={x:K(t,"x","any","bool")},i={axis:e,keepDims:n};return te.runKernel(RI,a,i)}const vE=re({any_:Cxe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kxe(t,e=0){const r={x:K(t,"x","argMax")},a={axis:e};return te.runKernel(Yx,r,a)}const op=re({argMax_:kxe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Exe(t,e=0){const r={x:K(t,"x","argMin")},a={axis:e};return te.runKernel(Zx,r,a)}const Nxe=re({argMin_:Exe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ixe(t){const n={x:K(t,"x","asin")};return te.runKernel(Xp,n)}const Axe=re({asin_:Ixe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Txe(t){const n={x:K(t,"x","asinh")};return te.runKernel(Yp,n)}const $xe=re({asinh_:Txe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oxe(t){const n={x:K(t,"x","atan")};return te.runKernel(Zp,n)}const Dxe=re({atan_:Oxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rxe(t,e){let n=K(t,"a","atan2"),r=K(e,"b","atan2");[n,r]=xn(n,r);const a={a:n,b:r};return te.runKernel(Jp,a)}const _xe=re({atan2_:Rxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mxe(t){const n={x:K(t,"x","atanh")};return te.runKernel(Qp,n)}const Pxe=re({atanh_:Mxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Um(t,e,n,r,a="NHWC",i){const s=t[3],o=[...e,s],l=No(a);return cr(t,o,n,i,r,null,null,l)}function gi(t,e,n,r,a,i,s="channelsLast"){const[o,l]=lp(e);let c;if(s==="channelsLast")c=[o,l,t[3],t[3]];else if(s==="channelsFirst")c=[o,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${s}`);return cr(t,c,n,r,a,i,!1,s)}function Eo(t,e,n,r,a,i,s="NDHWC"){const[o,l,c]=yE(e);let f,h;if(s==="NDHWC")h="channelsLast",f=[o,l,c,t[4],t[4]];else if(s==="NCDHW")h="channelsFirst",f=[o,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${s}`);return Tl(t,f,n,r,a,!1,h,i)}function cr(t,e,n,r,a,i,s=!1,o="channelsLast"){let[l,c,f,h]=[-1,-1,-1,-1];if(o==="channelsLast")[l,c,f,h]=t;else if(o==="channelsFirst")[l,h,c,f]=t;else throw new Error(`Unknown dataFormat ${o}`);const[p,g,,v]=e,[x,b]=lp(n),[w,S]=lp(r),k=hd(p,w),N=hd(g,S),{padInfo:I,outHeight:T,outWidth:R}=Fxe(a,c,f,x,b,k,N,i,o),_=s?v*h:v;let M;return o==="channelsFirst"?M=[l,_,T,R]:o==="channelsLast"&&(M=[l,T,R,_]),{batchSize:l,dataFormat:o,inHeight:c,inWidth:f,inChannels:h,outHeight:T,outWidth:R,outChannels:_,padInfo:I,strideHeight:x,strideWidth:b,filterHeight:p,filterWidth:g,effectiveFilterHeight:k,effectiveFilterWidth:N,dilationHeight:w,dilationWidth:S,inShape:t,outShape:M,filterShape:e}}function Tl(t,e,n,r,a,i=!1,s="channelsLast",o){let[l,c,f,h,p]=[-1,-1,-1,-1,-1];if(s==="channelsLast")[l,c,f,h,p]=t;else if(s==="channelsFirst")[l,p,c,f,h]=t;else throw new Error(`Unknown dataFormat ${s}`);const[g,v,x,,b]=e,[w,S,k]=yE(n),[N,I,T]=yE(r),R=hd(g,N),_=hd(v,I),M=hd(x,T),{padInfo:P,outDepth:$,outHeight:z,outWidth:W}=jxe(a,c,f,h,w,S,k,R,_,M,o),H=i?b*p:b;let G;return s==="channelsFirst"?G=[l,H,$,z,W]:s==="channelsLast"&&(G=[l,$,z,W,H]),{batchSize:l,dataFormat:s,inDepth:c,inHeight:f,inWidth:h,inChannels:p,outDepth:$,outHeight:z,outWidth:W,outChannels:H,padInfo:P,strideDepth:w,strideHeight:S,strideWidth:k,filterDepth:g,filterHeight:v,filterWidth:x,effectiveFilterDepth:R,effectiveFilterHeight:_,effectiveFilterWidth:M,dilationDepth:N,dilationHeight:I,dilationWidth:T,inShape:t,outShape:G,filterShape:e}}function Lxe(t,e,n,r,a){r==null&&(r=bA(t,e,n));const i=t[0],s=t[1],o=up((i-e+2*r)/n+1,a),l=up((s-e+2*r)/n+1,a);return[o,l]}function zxe(t,e,n,r,a,i){a==null&&(a=bA(t,e[0],r[0]));const s=[0,0,0,n];for(let o=0;o<3;o++)t[o]+2*a>=e[o]&&(s[o]=up((t[o]-e[o]+2*a)/r[o]+1,i));return s}function bA(t,e,n,r=1){const a=hd(e,r);return Math.floor((t[0]*(n-1)-n+a)/2)}function lp(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function yE(t){return typeof t=="number"?[t,t,t]:t}function hd(t,e){return e<=1?t:t+(t-1)*(e-1)}function Fxe(t,e,n,r,a,i,s,o,l){let c,f,h;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const g=Lxe([e,n],i,r,t,o);f=g[0],h=g[1]}else if(t==="same"){f=Math.ceil(e/r),h=Math.ceil(n/a);const p=Math.max(0,(f-1)*r+i-e),g=Math.max(0,(h-1)*a+s-n),v=Math.floor(p/2),x=p-v,b=Math.floor(g/2),w=g-b;c={top:v,bottom:x,left:b,right:w,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},f=Math.ceil((e-i+1)/r),h=Math.ceil((n-s+1)/a);else if(typeof t=="object"){const p=l==="channelsLast"?t[1][0]:t[2][0],g=l==="channelsLast"?t[1][1]:t[2][1],v=l==="channelsLast"?t[2][0]:t[3][0],x=l==="channelsLast"?t[2][1]:t[3][1];c={top:p,bottom:g,left:v,right:x,type:p===0&&g===0&&v===0&&x===0?"VALID":"EXPLICIT"},f=up((e-i+p+g)/r+1,o),h=up((n-s+v+x)/a+1,o)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:f,outWidth:h}}function jxe(t,e,n,r,a,i,s,o,l,c,f){let h,p,g,v;if(t==="valid"&&(t=0),typeof t=="number"){h={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const b=zxe([e,n,r,1],[o,l,c],1,[a,i,s],t,f);p=b[0],g=b[1],v=b[2]}else if(t==="same"){p=Math.ceil(e/a),g=Math.ceil(n/i),v=Math.ceil(r/s);const x=(p-1)*a+o-e,b=(g-1)*i+l-n,w=(v-1)*s+c-r,S=Math.floor(x/2),k=x-S,N=Math.floor(b/2),I=b-N,T=Math.floor(w/2),R=w-T;h={top:N,bottom:I,left:T,right:R,front:S,back:k,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:h,outDepth:p,outHeight:g,outWidth:v}}function up(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Fu(t){const[e,n,r]=lp(t);return e===1&&n===1&&r===1}function Er(t,e){return Fu(t)||Fu(e)}function ju(t){return lp(t).every(e=>e>0)}function No(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Jr(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")B(Ed(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(a=>{B(Ed(a),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${a}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bxe(t,e){const r={x:K(t,"x","reshape","string_or_numeric")},a={shape:e};return te.runKernel(Pb,r,a)}const ne=re({reshape_:Bxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uxe(t,e,n,r,a){const i=K(t,"x","avgPool","float32"),s=1;B(Er(n,s),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);let o=i,l=!1;i.rank===3&&(l=!0,o=ne(i,[1,i.shape[0],i.shape[1],i.shape[2]])),B(o.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${o.rank}.`),Jr("avgPool",r,a);const c={x:o},f={filterSize:e,strides:n,pad:r,dimRoundingMode:a};let h=te.runKernel(Qx,c,f);return h=Oe(h,i.dtype),l?ne(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const wA=re({avgPool_:Uxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vxe(t,e,n,r,a,i="NDHWC"){const s=K(t,"x","avgPool3d","float32");let o=s,l=!1;s.rank===4&&(l=!0,o=ne(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),B(o.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`),B(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),B(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Jr("avgPool3d",r,a);const c={x:o},f={filterSize:e,strides:n,pad:r,dimRoundingMode:a,dataFormat:i};let h=te.runKernel(Jx,c,f);return h=Oe(h,o.dtype),l?ne(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const Wxe=re({avgPool3d_:Vxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gxe(t,e=0){B(t.length>=1,()=>"Pass at least one tensor to concat");const n=l6(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return Cu(n[0]);const r=n,a={axis:e};return te.runKernel(rb,r,a)}const qr=re({concat_:Gxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hxe(t,e,n=!1,r=!1){let a=K(t,"a","matMul"),i=K(e,"b","matMul");[a,i]=xn(a,i);const s={a,b:i},o={transposeA:n,transposeB:r};return te.runKernel(eb,s,o)}const St=re({matMul_:Hxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qxe(t){const n={x:K(t,"x","sigmoid","float32")};return te.runKernel(Rm,n)}const cf=re({sigmoid_:qxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kxe(t,e,n){const r=K(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const a={x:r},i={begin:e,size:n};return te.runKernel(Bb,a,i)}const Gt=re({slice_:Kxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xxe(t){const n={x:K(t,"x","tanh","float32")};return te.runKernel(Fm,n)}const Qb=re({tanh_:Xxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yxe(t,e,n){const r=K(t,"x","batchToSpaceND"),a=e.reduce((o,l)=>o*l);B(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),B(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),B(r.shape[0]%a===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${a}`);const i={x:r},s={blockShape:e,crops:n};return te.runKernel(tb,i,s)}const SA=re({batchToSpaceND_:Yxe});function Zxe(t){let e;return t.rank===0||t.rank===1?e=ne(t,[1,1,1,t.size]):t.rank===2?e=ne(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=ne(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qxe(t,e,n,r,a,i){i==null&&(i=.001);const s=K(t,"x","batchNorm"),o=K(e,"mean","batchNorm"),l=K(n,"variance","batchNorm");let c;a!=null&&(c=K(a,"scale","batchNorm"));let f;r!=null&&(f=K(r,"offset","batchNorm")),B(o.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),B(f==null||o.rank===f.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),B(c==null||o.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const p={x:Zxe(s),scale:c,offset:f,mean:o,variance:l},g={varianceEpsilon:i},v=te.runKernel(fb,p,g);return ne(v,s.shape)}const Jb=re({batchNorm_:Qxe});function Jxe(t,e,n,r,a,i){const s=K(t,"x","batchNorm"),o=K(e,"mean","batchNorm"),l=K(n,"variance","batchNorm");let c;a!=null&&(c=K(a,"scale","batchNorm"));let f;return r!=null&&(f=K(r,"offset","batchNorm")),B(s.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${s.rank}.`),B(o.rank===2||o.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${o.rank}.`),B(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&B(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),f!=null&&B(f.rank===2||f.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${f.rank}.`),Jb(s,o,l,f,c,i)}const ebe=re({batchNorm2d_:Jxe});function tbe(t,e,n,r,a,i){const s=K(t,"x","batchNorm"),o=K(e,"mean","batchNorm"),l=K(n,"variance","batchNorm");let c;a!=null&&(c=K(a,"scale","batchNorm"));let f;return r!=null&&(f=K(r,"offset","batchNorm")),B(s.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${s.rank}.`),B(o.rank===3||o.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${o.rank}.`),B(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&B(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),f!=null&&B(f.rank===3||f.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${f.rank}.`),Jb(s,o,l,f,c,i)}const nbe=re({batchNorm3d_:tbe});function rbe(t,e,n,r,a,i){const s=K(t,"x","batchNorm"),o=K(e,"mean","batchNorm"),l=K(n,"variance","batchNorm");let c;a!=null&&(c=K(a,"scale","batchNorm"));let f;return r!=null&&(f=K(r,"offset","batchNorm")),B(s.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${s.rank}.`),B(o.rank===4||o.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${o.rank}.`),B(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&B(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),f!=null&&B(f.rank===4||f.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${f.rank}.`),Jb(s,o,l,f,c,i)}const abe=re({batchNorm4d_:rbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ibe(t,e,n){const r=K(t,"x","bincount"),a=K(e,"weights","bincount");B(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),B(n>=0,()=>`size must be non-negative, but got ${n}.`),B(a.size===r.size||a.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${a.shape}.`);const i={x:r,weights:a},s={size:n};return te.runKernel(PI,i,s)}const sbe=re({bincount_:ibe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function obe(t,e){let n=K(t,"broadcastTo","x");const r=n.shape;if(ko(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=ne(n,c)}const a=n.shape,i=Array.from(e);for(let c=e.length-1;c>=0;c--)if(a[c]===e[c])i[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((c,f)=>c>1?f:-1).filter(c=>c>=0).length===0)return Cu(n);const o={x:n},l={reps:i};return te.runKernel(jm,o,l)}const Bh=re({broadcastTo_:obe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lbe(t){const n={x:K(t,"x","ceil","float32")};return te.runKernel(tm,n)}const ube=re({ceil_:lbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e1(t,e,n){ko(t),n=n||sf(e);const r={shape:t,value:e,dtype:n};return te.runKernel(ZI,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cbe(t,e,n){const r=K(t,"x","clipByValue");if(B(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return e1(r.shape,e,r.dtype);const a={x:r},i={clipValueMin:e,clipValueMax:n};return te.runKernel(nm,a,i)}const La=re({clipByValue_:cbe});function dbe(t){return qr(t,0)}const fbe=re({concat1d_:dbe});function hbe(t,e){return qr(t,e)}const pbe=re({concat2d_:hbe});function mbe(t,e){return qr(t,e)}const gbe=re({concat3d_:mbe});function vbe(t,e){return qr(t,e)}const ybe=re({concat4d_:vbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xbe(t,e,n,r,a="NHWC",i=[1,1],s){const o=K(t,"x","conv2d","float32"),l=K(e,"filter","conv2d","float32");let c=o,f=!1;o.rank===3&&(f=!0,c=ne(o,[1,o.shape[0],o.shape[1],o.shape[2]])),B(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),B(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Jr("conv2d",r,s);const h=a==="NHWC"?c.shape[3]:c.shape[1];B(h===l.shape[2],()=>`Error in conv2d: depth of input (${h}) must match input depth for filter ${l.shape[2]}.`),B(Er(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),B(ju(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),B(ju(n),()=>"Error in conv2D: Strides should be larger than 0.");const p={x:c,filter:l},g={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:s},v=te.runKernel(ab,p,g);return f?ne(v,[v.shape[1],v.shape[2],v.shape[3]]):v}const Bu=re({conv2d_:xbe});function bbe(t,e,n,r,a="NWC",i=1,s){const o=K(t,"x","conv1d"),l=K(e,"filter","conv1d");let c=o,f=!1;o.rank===2&&(f=!0,c=ne(o,[1,o.shape[0],o.shape[1]])),B(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),B(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Jr("conv1d",r,s),B(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),B(Er(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),B(ju(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),B(ju(n),()=>"Error in conv1D: Stride should be larger than 0."),B(a==="NWC",()=>`Error in conv1d: got dataFormat of ${a} but only NWC is currently supported.`);const h=ne(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=ne(c,[c.shape[0],1,c.shape[1],c.shape[2]]),b=Bu(p,h,[1,n],r,"NHWC",[1,i],s);return f?ne(b,[b.shape[2],b.shape[3]]):ne(b,[b.shape[0],b.shape[2],b.shape[3]])}const b6=re({conv1d_:bbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wbe(t,e,n,r,a,i="NHWC",s){B(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let o=t,l=e,c=!1;e.rank===3&&(c=!0,l=ne(e,[1,e.shape[0],e.shape[1],e.shape[2]]),o=[1,t[0],t[1],t[2]]),B(o.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${o.length}.`),B(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),B(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const f=i==="NHWC"?o[3]:o[1],h=i==="NHWC"?l.shape[3]:l.shape[1];B(f===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${f}) must match input depth for filter ${n.shape[2]}.`),B(h===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${h}) must match output depth for filter ${n.shape[3]}.`),Jr("conv2dDerInput",a,s);const p={dy:l,filter:n},g={strides:r,pad:a,dataFormat:i,dimRoundingMode:s,inputShape:o},v=te.runKernel(ib,p,g);return c?ne(v,[v.shape[1],v.shape[2],v.shape[3]]):v}const CA=re({conv2DBackpropInput_:wbe});function Sbe(t,e,n,r,a,i){const s=K(t,"x","conv2dTranspose"),o=K(e,"filter","conv2dTranspose");return CA(n,s,o,r,a,"NHWC",i)}const w6=re({conv2dTranspose_:Sbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cbe(t,e,n,r,a="NDHWC",i=[1,1,1]){const s=K(t,"x","conv3d"),o=K(e,"filter","conv3d");let l=s,c=!1;s.rank===4&&(c=!0,l=ne(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),B(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),B(o.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${o.rank}.`),B(l.shape[4]===o.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${o.shape[3]}.`),B(Er(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),B(a==="NDHWC",()=>`Error in conv3d: got dataFormat of ${a} but only NDHWC is currently supported.`),B(ju(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),B(ju(n),()=>"Error in conv3D: Strides should be larger than 0.");const f={x:l,filter:o},h={strides:n,pad:r,dataFormat:a,dilations:i},p=te.runKernel(sb,f,h);return c?ne(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const kbe=re({conv3d_:Cbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ebe(t,e,n,r,a){B(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,s=e,o=!1;e.rank===4&&(o=!0,s=ne(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);const l=i[4],c=s.shape[4];B(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),B(s.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${s.rank}`),B(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),B(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),B(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const f={dy:s,filter:n},h={pad:a,strides:r,inputShape:i},p=te.runKernel(BI,f,h);return o?ne(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const S6=re({conv3DBackpropInput_:Ebe});function Nbe(t,e,n,r,a){const i=K(t,"x","conv3dTranspose"),s=K(e,"filter","conv3dTranspose");return S6(n,i,s,r,a)}const Ibe=re({conv3dTranspose_:Nbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Abe(t){const n={x:K(t,"x","cos","float32")};return te.runKernel(rm,n)}const kA=re({cos_:Abe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tbe(t){const n={x:K(t,"x","cosh","float32")};return te.runKernel(am,n)}const C6=re({cosh_:Tbe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $be(t,e=0,n=!1,r=!1){const i={x:K(t,"x","cumprod")},s={axis:e,exclusive:n,reverse:r};return te.runKernel(UI,i,s)}const xE=re({cumprod_:$be});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Obe(t,e=0,n=!1,r=!1){const i={x:K(t,"x","cumsum")},s={axis:e,exclusive:n,reverse:r};return te.runKernel(ob,i,s)}const k6=re({cumsum_:Obe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dbe(t,e,n,r=!1){const a=K(t,"x","denseBincount"),i=K(e,"weights","denseBincount");B(a.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${a.dtype}`),B(a.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${a.rank}.`),B(n>=0,()=>`size must be non-negative, but got ${n}.`),B(i.size===a.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${a.shape}, weights shape: ${i.shape}.`);const s={x:a,weights:i},o={size:n,binaryOutput:r};return te.runKernel(WI,s,o)}const _z=re({denseBincount_:Dbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rbe(t,e,n="NHWC"){const r=K(t,"x","depthToSpace","float32"),a=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],s=n==="NHWC"?r.shape[3]:r.shape[1];B(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),B(a*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${e}  for depthToSpace with input shape
    ${r.shape}`),B(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),B(s%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${s} for depthToSpace with input shape ${r.shape}`);const o={x:r},l={blockSize:e,dataFormat:n};return te.runKernel(GI,o,l)}const _be=re({depthToSpace_:Rbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mbe(t,e,n,r,a="NHWC",i=[1,1],s){const o=K(t,"x","depthwiseConv2d","float32"),l=K(e,"filter","depthwiseConv2d","float32");let c=o,f=!1;o.rank===3&&(f=!0,c=ne(o,[1,o.shape[0],o.shape[1],o.shape[2]])),B(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),B(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const h=a==="NHWC"?c.shape[3]:c.shape[1];B(h===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${h}) must match the inChannels dimension in filter ${l.shape[2]}.`),Jr("depthwiseConv2d",r,s);const p={x:c,filter:l},g={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:s},v=te.runKernel(lb,p,g);return f?ne(v,[v.shape[1],v.shape[2],v.shape[3]]):v}const EA=re({depthwiseConv2d_:Mbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pbe(t,e,n,r,a=[1,1],i="NHWC"){const s=K(t,"x","dilation2d"),o=K(e,"filter","dilation2d");B(s.rank===3||s.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${s.rank}.`),B(o.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${o.rank}.`),B(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=s,c=!1;s.rank===3&&(l=ne(s,[1,s.shape[0],s.shape[1],s.shape[2]]),c=!0),B(l.shape[3]===o.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${o.shape[2]}`);const f={x:l,filter:o},h={strides:n,pad:r,dilations:a},p=te.runKernel(ub,f,h);return c?ne(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Lbe=re({dilation2d_:Pbe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ad(t,e){const n=t.length,r=[];for(let a=0;a<n;a++){const i=n-1-a,s=t[i]||1;(e[e.length-1-a]||1)>1&&s===1&&r.unshift(i)}return r}function Bn(t,e){const n=[];for(let r=0;r<e.length;r++){const a=t[t.length-r-1],i=e.length-r-1,s=e[i];(a==null||a===1&&s>1)&&n.unshift(i)}return n}function et(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let a=0;a<n;a++){let i=t[t.length-a-1];i==null&&(i=1);let s=e[e.length-a-1];if(s==null&&(s=1),i===1)r[n-a-1]=s;else if(s===1)r[n-a-1]=i;else if(i!==s){const o=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(o)}else r[n-a-1]=i}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zbe(t,e){let n=K(t,"a","equal","string_or_numeric"),r=K(e,"b","equal","string_or_numeric");[n,r]=xn(n,r),et(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(cb,a)}const ms=re({equal_:zbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fbe(t,e,n){const r=K(e,"a","where"),a=K(n,"b","where"),i=K(t,"condition","where","bool"),s=et(et(i.shape,r.shape),a.shape),o=Bh(i,s),l=Bh(r,s),c=Bh(a,s),f={condition:o,t:l,e:c};return te.runKernel(jb,f)}const Mr=re({where_:Fbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jbe(t){const n={x:K(t,"x","zerosLike")};return te.runKernel(Kb,n)}const mt=re({zerosLike_:jbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bbe(t,e){let n=K(t,"a","div"),r=K(e,"b","div");[n,r]=xn(n,r);const a=Ge(n,r),i=mt(a),s=ms(r,i);return Mr(s,i,a)}const Ube=re({divNoNan_:Bbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vbe(t,e){const n=K(t,"t1","dot"),r=K(e,"t2","dot");B((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const a=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(B(a===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${a} and ${i}.`),n.rank===1&&r.rank===1){const s=ne(n,[1,-1]),o=ne(r,[-1,1]),l=St(s,o);return ne(l,[])}else if(n.rank===1&&r.rank===2){const s=ne(n,[1,-1]),o=ne(r,[r.shape[0],r.shape[1]]),l=St(s,o);return ne(l,[l.size])}else if(n.rank===2&&r.rank===1){const s=ne(r,[-1,1]),o=St(n,s);return ne(o,[o.size])}else{const s=ne(r,[r.shape[0],r.shape[1]]);return St(n,s)}}const Wbe=re({dot_:Vbe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gbe(t,...e){const n=e.map((a,i)=>K(a,`tensors${i}`,"einsum")),r={equation:t};return te.runKernel(KI,n,r)}const Ah=re({einsum_:Gbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hbe(t){const n={x:K(t,"x","elu","float32")};return te.runKernel(sm,n)}const t1=re({elu_:Hbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qbe(t){let e=K(t,"x","erf");B(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Oe(e,"float32"));const n={x:e};return te.runKernel(om,n)}const E6=re({erf_:qbe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NA(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function N6(t,e,n){const r=t.length+e.length,a=[];let i=0,s=0;for(let o=0;o<r;o++)n.indexOf(o)===-1?a.push(t[i++]):a.push(e[s++]);return a}function er(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);const a=e.map(i=>t[i]);return[n,a]}function An(t,e){const n=e.map(r=>1);return N6(t,n,e)}function dr(t,e,n){B(NA(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function cn(t,e){if(NA(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function $l(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function wn(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kbe(t,e=null,n=!1){const a={x:K(t,"x","max")},i={reductionIndices:e,keepDims:n};return te.runKernel(Sb,a,i)}const Mi=re({max_:Kbe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xbe(t,e=null,n=!1){const a={x:K(t,"x","min")},i={axis:e,keepDims:n};return te.runKernel(Nb,a,i)}const Ny=re({min_:Xbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ybe(t,e){let n=K(t,"base","pow"),r=K(e,"exp","pow");[n,r]=xn(n,r);const a={a:n,b:r};return te.runKernel(Cm,a)}const Uu=re({pow_:Ybe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kt(t,e){if((hi(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&hi(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Zb(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zbe(t){const n={x:K(t,"x","sqrt","float32")};return te.runKernel(Mm,n)}const kr=re({sqrt_:Zbe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qbe(t){const e=K(t,"x","square"),n={};return te.runKernel("Square",{x:e},n)}const Xt=re({square_:Qbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jbe(t,e=null,n=!1){let r=K(t,"x","sum");r.dtype==="bool"&&(r=Oe(r,"int32"));const a={x:r},i={axis:e,keepDims:n};return te.runKernel(Ub,a,i)}const Ve=re({sum_:Jbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e1e(t,e="euclidean",n=null,r=!1){t=K(t,"x","norm");const a=I6(t,e,n);let i=a.shape;if(r){const s=it(n,t.shape);i=An(a.shape,s)}return ne(a,i)}function I6(t,e,n=null){if(t.rank===0)return Or(t);if(t.rank!==1&&n===null)return I6(ne(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Ve(Or(t),n);if(e===1/0)return Mi(Or(t),n);if(e===-1/0)return Ny(Or(t),n);if(e==="euclidean"||e===2)return kr(Ve(Uu(Or(t),kt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Mi(Ve(Or(t),n[0]),n[1]-1);if(e===1/0)return Mi(Ve(Or(t),n[1]),n[0]);if(e===-1/0)return Ny(Ve(Or(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return kr(Ve(Xt(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const n1=re({norm_:e1e});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t1e(t,e=null,n=!1){return n1(t,"euclidean",e,n)}const n1e=re({euclideanNorm_:t1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r1e(t){const n={x:K(t,"x","exp")};return te.runKernel(lm,n)}const gs=re({exp_:r1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a1e(t,e=0){const n=K(t,"x","expandDims","string_or_numeric");B(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},a={dim:e};return te.runKernel(db,r,a)}const Wr=re({expandDims_:a1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i1e(t){const n={x:K(t,"x","expm1")};return te.runKernel(um,n)}const s1e=re({expm1_:i1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o1e(t,e){const n=K(t,"x","tile","string_or_numeric");B(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},a={reps:e};return te.runKernel(jm,r,a)}const Di=re({tile_:o1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l1e(t,e,n,r="float32"){e==null&&(e=t);const a=at([t,e],r),i=t<=e?t:e;for(let o=0;o<i;++o)a.set(1,o,o);const s=ne(a.toTensor(),[t,e]);if(n==null)return s;if(n.length===1)return Di(Wr(s,0),[n[0],1,1]);if(n.length===2)return Di(Wr(Wr(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return Di(Wr(Wr(Wr(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const A6=re({eye_:l1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u1e(t){const n={x:K(t,"x","floor","float32")};return te.runKernel(cm,n)}const r1=re({floor_:u1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c1e(t,e,n=0,r=0){const a=K(t,"x","gather"),i=K(e,"indices","gather","int32"),s={x:a,indices:i},o={axis:n,batchDims:r};return te.runKernel(hb,s,o)}const IA=re({gather_:c1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d1e(t,e){let n=K(t,"a","greater","string_or_numeric"),r=K(e,"b","greater","string_or_numeric");[n,r]=xn(n,r),et(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(pb,a)}const Fa=re({greater_:d1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f1e(t,e){let n=K(t,"a","greaterEqual","string_or_numeric"),r=K(e,"b","greaterEqual","string_or_numeric");[n,r]=xn(n,r),et(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(fm,a)}const tc=re({greaterEqual_:f1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h1e(t){const n={input:K(t,"input","imag")};return te.runKernel(eA,n)}const AA=re({imag_:h1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p1e(t){const n={x:K(t,"x","isFinite")};return te.runKernel(pm,n)}const m1e=re({isFinite_:p1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g1e(t){const n={x:K(t,"x","isInf")};return te.runKernel(mm,n)}const v1e=re({isInf_:g1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y1e(t){const n={x:K(t,"x","isNaN")};return te.runKernel(gm,n)}const x1e=re({isNaN_:y1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b1e(t,e=.2){const r={x:K(t,"x","leakyRelu")},a={alpha:e};return te.runKernel(mb,r,a)}const TA=re({leakyRelu_:b1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w1e(t,e){let n=K(t,"a","less","string_or_numeric"),r=K(e,"b","less","string_or_numeric");[n,r]=xn(n,r),et(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(gb,a)}const Iy=re({less_:w1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S1e(t,e){let n=K(t,"a","lessEqual","string_or_numeric"),r=K(e,"b","lessEqual","string_or_numeric");[n,r]=xn(n,r),et(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(vb,a)}const df=re({lessEqual_:S1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C1e(t,e=5,n=1,r=1,a=.5){const i=K(t,"x","localResponseNormalization");B(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),B(Ed(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let s=i,o=!1;i.rank===3&&(o=!0,s=ne(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const l={x:s},c={depthRadius:e,bias:n,alpha:r,beta:a},f=te.runKernel(wb,l,c);return o?ne(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const k1e=re({localResponseNormalization_:C1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E1e(t){const n={x:K(t,"x","log","float32")};return te.runKernel(vm,n)}const vs=re({log_:E1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N1e(t){const n={x:K(t,"x","log1p")};return te.runKernel(ym,n)}const T6=re({log1p_:N1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I1e(t,e){B(aE(t),()=>"The f passed in variableGrads(f) must be a function"),B(e==null||Array.isArray(e)&&e.every(c=>c instanceof Ey),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const c in te.registeredVariables)e.push(te.registeredVariables[c])}const r=n?e.filter(c=>!c.trainable):null,a=e.length;e=e.filter(c=>c.trainable),B(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${a} variables is trainable.`);const i=!0,{value:s,grads:o}=te.gradients(t,e,null,i);B(o.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),B(s.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);const l={};return e.forEach((c,f)=>{o[f]!=null&&(l[c.name]=o[f])}),r!=null&&r.forEach(c=>l[c.name]=null),{value:s,grads:l}}function Td(t){return te.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A1e(t){const n={x:K(t,"x","neg")};return te.runKernel(Ab,n)}const vn=re({neg_:A1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T1e(t){const n={x:K(t,"x","softplus")};return te.runKernel(_m,n)}const Vm=re({softplus_:T1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $1e(t){const e=K(t,"x","logSigmoid");return Td(r=>({value:vn(Vm(vn(r))),gradFunc:s=>ee(s,cf(vn(r)))}))(e)}const O1e=re({logSigmoid_:$1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D1e(t,e){let n=K(t,"a","sub"),r=K(e,"b","sub");[n,r]=xn(n,r);const a={a:n,b:r};return te.runKernel(Lm,a)}const qe=re({sub_:D1e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R1e(t,e=-1){const n=K(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Td((a,i)=>{const o=Mi(a,e,!0),l=qe(a,o),c=qe(Oe(l,"float32"),vs(Ve(gs(l),e,!0)));return i([c]),{value:c,gradFunc:(h,p)=>{const[g]=p,v=!0,x=gs(g);return qe(h,ee(Ve(h,e,v),x))}}})(n)}const $6=re({logSoftmax_:R1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _1e(t,e=null,n=!1){const r=K(t,"x","logSumExp"),a=it(e,r.shape),i=Mi(r,a,!0),s=qe(r,i),o=gs(s),l=Ve(o,a),c=vs(l),f=Ee(ne(i,c.shape),c);if(n){const h=An(f.shape,a);return ne(f,h)}return f}const O6=re({logSumExp_:_1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M1e(t,e){const n=K(t,"a","logicalAnd","bool"),r=K(e,"b","logicalAnd","bool");et(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(yb,a)}const mo=re({logicalAnd_:M1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P1e(t){const n={x:K(t,"x","logicalNot","bool")};return te.runKernel(xb,n)}const $A=re({logicalNot_:P1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L1e(t,e){const n=K(t,"a","logicalOr","bool"),r=K(e,"b","logicalOr","bool");et(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(bb,a)}const D6=re({logicalOr_:L1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z1e(t,e){const n=K(t,"a","logicalXor","bool"),r=K(e,"b","logicalXor","bool");return et(n.shape,r.shape),mo(D6(t,e),$A(mo(t,e)))}const F1e=re({logicalXor_:z1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j1e(t,e,n,r,a){const i=K(t,"x","maxPool"),s=1;let o=i,l=!1;i.rank===3&&(l=!0,o=ne(i,[1,i.shape[0],i.shape[1],i.shape[2]])),B(o.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${o.rank}.`),B(Er(n,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),Jr("maxPool",r,a);const c={x:o},f={filterSize:e,strides:n,pad:r,dimRoundingMode:a},h=te.runKernel(Cb,c,f);return l?ne(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const OA=re({maxPool_:j1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B1e(t,e=[1,1,1],n,r,a,i="NDHWC"){const s=K(t,"x","maxPool3d");let o=s,l=!1;s.rank===4&&(l=!0,o=ne(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),B(o.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`),B(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),Jr("maxPool3d",r,a);const c={x:o},f={filterSize:e,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},h=te.runKernel(kb,c,f);return l?ne(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const U1e=re({maxPool3d_:B1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V1e(t,e){let n=K(t,"a","maximum"),r=K(e,"b","maximum");[n,r]=xn(n,r),n.dtype==="bool"&&(n=Oe(n,"int32"),r=Oe(r,"int32")),et(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(xm,a)}const Ol=re({maximum_:V1e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W1e(t,e=null,n=!1){const a={x:K(t,"x","mean")},i={axis:e,keepDims:n};return te.runKernel(Eb,a,i)}const In=re({mean_:W1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kn(t,e="float32"){if(ko(t),e==="complex64"){const r=Kn(t,"float32"),a=Kn(t,"float32");return Id(r,a)}const n=Cr(ve(t),e);return te.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dl(t,e="float32"){if(ko(t),e==="complex64"){const r=Dl(t,"float32"),a=Kn(t,"float32");return Id(r,a)}const n=AI(ve(t),e);return te.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G1e(t,e){let n=K(t,"a","minimum"),r=K(e,"b","minimum");[n,r]=xn(n,r),n.dtype==="bool"&&(n=Oe(n,"int32"),r=Oe(r,"int32")),et(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(bm,a)}const cp=re({minimum_:G1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H1e(t,e,n){B(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=K(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");B(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const a=n==="reflect"?1:0;for(let o=0;o<r.rank;o++)B(e[o].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),B(e[o][0]>=0&&e[o][0]<=r.shape[o]-a&&e[o][1]>=0&&e[o][1]<=r.shape[o]-a,()=>`Padding in dimension ${o} cannot be greater than or equal to ${r.shape[o]-a} or less than 0 for input of shape ${r.shape}`);const i={paddings:e,mode:n},s={x:r};return te.runKernel(Ib,s,i)}const q1e=re({mirrorPad_:H1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K1e(t,e){let n=K(t,"a","mod"),r=K(e,"b","mod");[n,r]=xn(n,r);const a={a:n,b:r};return te.runKernel(wm,a)}const X1e=re({mod_:K1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y1e(t,e=null,n=!1){t=K(t,"x","moments");const r=it(e,t.shape),a=In(t,r,n);let i=a.shape;n||(i=An(a.shape,r));const s=Xt(qe(Oe(t,"float32"),ne(a,i))),o=In(s,r,n);return{mean:a,variance:o}}const DA=re({moments_:Y1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z1e(t,e){let n=K(t,"a","notEqual","string_or_numeric"),r=K(e,"b","notEqual","string_or_numeric");[n,r]=xn(n,r),et(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(Tb,a)}const Ay=re({notEqual_:Z1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q1e(t,e,n=1,r=0,a="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const s={indices:K(t,"indices","oneHot","int32")},o={dtype:a,depth:e,onValue:n,offValue:r};return te.runKernel(Ob,s,o)}const R6=re({oneHot_:Q1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J1e(t){const n={x:K(t,"x","onesLike")};return te.runKernel($b,n)}const pi=re({onesLike_:J1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ewe(t,e,n=0){const r=K(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const a={paddings:e,constantValue:n},i={x:r};return te.runKernel(Rb,i,a)}const RA=re({pad_:ewe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function twe(t,e,n){const r=K(t,"x","spaceToBatchND");B(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),B(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),B(r.shape.reduce((s,o,l)=>l>0&&l<=e.length?s&&(o+n[l-1][0]+n[l-1][1])%e[l-1]===0:s,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const a={x:r},i={blockShape:e,paddings:n};return te.runKernel(Vb,a,i)}const _A=re({spaceToBatchND_:twe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nwe(t,e,n,r,a,i,s){a==null&&(a=[1,1]),i==null&&(i=1),r===0&&(r="valid");const o=K(t,"x","maxPool");let l=o,c=!1;o.rank===3&&(c=!0,l=ne(o,[1,o.shape[0],o.shape[1],o.shape[2]])),B(Er(i,a),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${a}'`);const f=gi(l.shape,e,i,a,r),h=[f.dilationHeight,f.dilationWidth];let p;r==="same"?p=awe([f.filterHeight,f.filterWidth],h):p=[[0,0],[0,0]];const g=h[0]===1&&h[1]===1,[v,x]=rwe([f.inHeight,f.inWidth],h,p),b=g?r:"valid",w=g?l:_A(l,h,v),k=(n==="avg"?()=>wA(w,e,i,b,s):()=>OA(w,e,i,b,s))(),N=g?k:SA(k,h,x);return c?ne(N,[N.shape[1],N.shape[2],N.shape[3]]):N}function rwe(t,e,n){const r=n.map(f=>f[0]),a=n.map(f=>f[1]),i=t.concat(r,a),s=e.map((f,h)=>(f-i[h]%f)%f),o=a.map((f,h)=>f+s[h]),l=e.map((f,h)=>[r[h],o[h]]),c=e.map((f,h)=>[0,s[h]]);return[l,c]}function awe(t,e){const r=t.map((s,o)=>s+(s-1)*(e[o]-1)).map(s=>s-1),a=r.map(s=>Math.floor(s/2)),i=r.map((s,o)=>s-a[o]);return r.map((s,o)=>[a[o],i[o]])}const iwe=re({pool_:nwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function swe(t,e){const n=K(t,"x","prelu"),r=K(e,"alpha","prelu"),a={x:n,alpha:r};return te.runKernel(_b,a)}const MA=re({prelu_:swe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function owe(t,e=null,n=!1){let r=K(t,"x","prod");r.dtype==="bool"&&(r=Oe(r,"int32"));const a={x:r},i={axis:e,keepDims:n};return te.runKernel(Mb,a,i)}const lwe=re({prod_:owe});var m0={exports:{}},uwe=m0.exports,Mz;function cwe(){return Mz||(Mz=1,(function(t){(function(e,n,r){function a(l){var c=this,f=o();c.next=function(){var h=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=h-(c.c=h|0)},c.c=1,c.s0=f(" "),c.s1=f(" "),c.s2=f(" "),c.s0-=f(l),c.s0<0&&(c.s0+=1),c.s1-=f(l),c.s1<0&&(c.s1+=1),c.s2-=f(l),c.s2<0&&(c.s2+=1),f=null}function i(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function s(l,c){var f=new a(l),h=c&&c.state,p=f.next;return p.int32=function(){return f.next()*4294967296|0},p.double=function(){return p()+(p()*2097152|0)*11102230246251565e-32},p.quick=p,h&&(typeof h=="object"&&i(h,f),p.state=function(){return i(f,{})}),p}function o(){var l=4022871197,c=function(f){f=String(f);for(var h=0;h<f.length;h++){l+=f.charCodeAt(h);var p=.02519603282416938*l;l=p>>>0,p-=l,p*=l,l=p>>>0,p-=l,l+=p*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=s:this.alea=s})(uwe,t)})(m0)),m0.exports}var g0={exports:{}},dwe=g0.exports,Pz;function fwe(){return Pz||(Pz=1,(function(t){(function(e,n,r){function a(o){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var h=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^h^h>>>8},o===(o|0)?l.x=o:c+=o;for(var f=0;f<c.length+64;f++)l.x^=c.charCodeAt(f)|0,l.next()}function i(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l}function s(o,l){var c=new a(o),f=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,v=(p+g)/(1<<21);while(v===0);return v},h.int32=c.next,h.quick=h,f&&(typeof f=="object"&&i(f,c),h.state=function(){return i(c,{})}),h}n&&n.exports?n.exports=s:this.xor128=s})(dwe,t)})(g0)),g0.exports}var v0={exports:{}},hwe=v0.exports,Lz;function pwe(){return Lz||(Lz=1,(function(t){(function(e,n,r){function a(o){var l=this,c="";l.next=function(){var h=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(h^h<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,o===(o|0)?l.x=o:c+=o;for(var f=0;f<c.length+64;f++)l.x^=c.charCodeAt(f)|0,f==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l.v=o.v,l.d=o.d,l}function s(o,l){var c=new a(o),f=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,v=(p+g)/(1<<21);while(v===0);return v},h.int32=c.next,h.quick=h,f&&(typeof f=="object"&&i(f,c),h.state=function(){return i(c,{})}),h}n&&n.exports?n.exports=s:this.xorwow=s})(hwe,t)})(v0)),v0.exports}var y0={exports:{}},mwe=y0.exports,zz;function gwe(){return zz||(zz=1,(function(t){(function(e,n,r){function a(o){var l=this;l.next=function(){var f=l.x,h=l.i,p,g;return p=f[h],p^=p>>>7,g=p^p<<24,p=f[h+1&7],g^=p^p>>>10,p=f[h+3&7],g^=p^p>>>3,p=f[h+4&7],g^=p^p<<7,p=f[h+7&7],p=p^p<<13,g^=p^p<<9,f[h]=g,l.i=h+1&7,g};function c(f,h){var p,g=[];if(h===(h|0))g[0]=h;else for(h=""+h,p=0;p<h.length;++p)g[p&7]=g[p&7]<<15^h.charCodeAt(p)+g[p+1&7]<<13;for(;g.length<8;)g.push(0);for(p=0;p<8&&g[p]===0;++p);for(p==8?g[7]=-1:g[p],f.x=g,f.i=0,p=256;p>0;--p)f.next()}c(l,o)}function i(o,l){return l.x=o.x.slice(),l.i=o.i,l}function s(o,l){o==null&&(o=+new Date);var c=new a(o),f=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,v=(p+g)/(1<<21);while(v===0);return v},h.int32=c.next,h.quick=h,f&&(f.x&&i(f,c),h.state=function(){return i(c,{})}),h}n&&n.exports?n.exports=s:this.xorshift7=s})(mwe,t)})(y0)),y0.exports}var x0={exports:{}},vwe=x0.exports,Fz;function ywe(){return Fz||(Fz=1,(function(t){(function(e,n,r){function a(o){var l=this;l.next=function(){var f=l.w,h=l.X,p=l.i,g,v;return l.w=f=f+1640531527|0,v=h[p+34&127],g=h[p=p+1&127],v^=v<<13,g^=g<<17,v^=v>>>15,g^=g>>>12,v=h[p]=v^g,l.i=p,v+(f^f>>>16)|0};function c(f,h){var p,g,v,x,b,w=[],S=128;for(h===(h|0)?(g=h,h=null):(h=h+"\0",g=0,S=Math.max(S,h.length)),v=0,x=-32;x<S;++x)h&&(g^=h.charCodeAt((x+32)%h.length)),x===0&&(b=g),g^=g<<10,g^=g>>>15,g^=g<<4,g^=g>>>13,x>=0&&(b=b+1640531527|0,p=w[x&127]^=g+b,v=p==0?v+1:0);for(v>=128&&(w[(h&&h.length||0)&127]=-1),v=127,x=512;x>0;--x)g=w[v+34&127],p=w[v=v+1&127],g^=g<<13,p^=p<<17,g^=g>>>15,p^=p>>>12,w[v]=g^p;f.w=b,f.X=w,f.i=v}c(l,o)}function i(o,l){return l.i=o.i,l.w=o.w,l.X=o.X.slice(),l}function s(o,l){o==null&&(o=+new Date);var c=new a(o),f=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,v=(p+g)/(1<<21);while(v===0);return v},h.int32=c.next,h.quick=h,f&&(f.X&&i(f,c),h.state=function(){return i(c,{})}),h}n&&n.exports?n.exports=s:this.xor4096=s})(vwe,t)})(x0)),x0.exports}var b0={exports:{}},xwe=b0.exports,jz;function bwe(){return jz||(jz=1,(function(t){(function(e,n,r){function a(o){var l=this,c="";l.next=function(){var h=l.b,p=l.c,g=l.d,v=l.a;return h=h<<25^h>>>7^p,p=p-g|0,g=g<<24^g>>>8^v,v=v-h|0,l.b=h=h<<20^h>>>12^p,l.c=p=p-g|0,l.d=g<<16^p>>>16^v,l.a=v-h|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,o===Math.floor(o)?(l.a=o/4294967296|0,l.b=o|0):c+=o;for(var f=0;f<c.length+20;f++)l.b^=c.charCodeAt(f)|0,l.next()}function i(o,l){return l.a=o.a,l.b=o.b,l.c=o.c,l.d=o.d,l}function s(o,l){var c=new a(o),f=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,v=(p+g)/(1<<21);while(v===0);return v},h.int32=c.next,h.quick=h,f&&(typeof f=="object"&&i(f,c),h.state=function(){return i(c,{})}),h}n&&n.exports?n.exports=s:this.tychei=s})(xwe,t)})(b0)),b0.exports}var w0={exports:{}};const wwe={},Swe=Object.freeze(Object.defineProperty({__proto__:null,default:wwe},Symbol.toStringTag,{value:"Module"})),Cwe=yX(Swe);var kwe=w0.exports,Bz;function Ewe(){return Bz||(Bz=1,(function(t){(function(e,n,r){var a=256,i=6,s=52,o="random",l=r.pow(a,i),c=r.pow(2,s),f=c*2,h=a-1,p;function g(N,I,T){var R=[];I=I==!0?{entropy:!0}:I||{};var _=w(b(I.entropy?[N,k(n)]:N??S(),3),R),M=new v(R),P=function(){for(var $=M.g(i),z=l,W=0;$<c;)$=($+W)*a,z*=a,W=M.g(1);for(;$>=f;)$/=2,z/=2,W>>>=1;return($+W)/z};return P.int32=function(){return M.g(4)|0},P.quick=function(){return M.g(4)/4294967296},P.double=P,w(k(M.S),n),(I.pass||T||function($,z,W,H){return H&&(H.S&&x(H,M),$.state=function(){return x(M,{})}),W?(r[o]=$,z):$})(P,_,"global"in I?I.global:this==r,I.state)}function v(N){var I,T=N.length,R=this,_=0,M=R.i=R.j=0,P=R.S=[];for(T||(N=[T++]);_<a;)P[_]=_++;for(_=0;_<a;_++)P[_]=P[M=h&M+N[_%T]+(I=P[_])],P[M]=I;(R.g=function($){for(var z,W=0,H=R.i,G=R.j,F=R.S;$--;)z=F[H=h&H+1],W=W*a+F[h&(F[H]=F[G=h&G+z])+(F[G]=z)];return R.i=H,R.j=G,W})(a)}function x(N,I){return I.i=N.i,I.j=N.j,I.S=N.S.slice(),I}function b(N,I){var T=[],R=typeof N,_;if(I&&R=="object")for(_ in N)try{T.push(b(N[_],I-1))}catch{}return T.length?T:R=="string"?N:N+"\0"}function w(N,I){for(var T=N+"",R,_=0;_<T.length;)I[h&_]=h&(R^=I[h&_]*19)+T.charCodeAt(_++);return k(I)}function S(){try{var N;return p&&(N=p.randomBytes)?N=N(a):(N=new Uint8Array(a),(e.crypto||e.msCrypto).getRandomValues(N)),k(N)}catch{var I=e.navigator,T=I&&I.plugins;return[+new Date,e,T,e.screen,k(n)]}}function k(N){return String.fromCharCode.apply(0,N)}if(w(r.random(),n),t.exports){t.exports=g;try{p=Cwe}catch{}}else r["seed"+o]=g})(typeof self<"u"?self:kwe,[],Math)})(w0)),w0.exports}var L2,Uz;function Nwe(){if(Uz)return L2;Uz=1;var t=cwe(),e=fwe(),n=pwe(),r=gwe(),a=ywe(),i=bwe(),s=Ewe();return s.alea=t,s.xor128=e,s.xorwow=n,s.xorshift7=r,s.xor4096=a,s.tychei=i,L2=s,L2}var PA=Nwe();/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _6{constructor(e,n,r,a,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const s=i||Math.random();this.random=PA.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){const a=this.nextVal;return this.nextVal=NaN,a}let e,n,r=!1;for(;!r;){let a,i,s;do a=2*this.random()-1,i=2*this.random()-1,s=a*a+i*i;while(s>=1||s===0);const o=Math.sqrt(-2*Math.log(s)/s);e=this.mean+this.stdDev*a*o,n=this.mean+this.stdDev*i*o,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class Iwe{constructor(e=0,n=1,r,a){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=PA.alea(a)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Awe(t,e=0,n=1,r,a){if(ko(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const i=new _6(e,n,r,!1,a),s=at(t,r);for(let o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}const Twe=re({randomNormal_:Awe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $we(t,e=0,n=1,r="float32",a){ko(t);const i=at(t,r),s=new Iwe(e,n,null,a);for(let o=0;o<i.values.length;o++)i.values[o]=s.nextValue();return i.toTensor()}const Wm=re({randomUniform_:$we});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dp(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const a={start:t,stop:e,step:n,dtype:r};return te.runKernel(oA,{},a)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Owe(t){const n={input:K(t,"input","real")};return te.runKernel(lA,n)}const Ty=re({real_:Owe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dwe(t){const n={x:K(t,"x","reciprocal")};return te.runKernel(km,n)}const Rwe=re({reciprocal_:Dwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _we(t){const n={x:K(t,"x","relu")};return te.runKernel(Em,n)}const nc=re({relu_:_we});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mwe(t){const n={x:K(t,"x","relu6")};return te.runKernel(Nm,n)}const M6=re({relu6_:Mwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pwe(t,e){const r={x:K(t,"x","reverse")},a={dims:e};return te.runKernel(Fb,r,a)}const Vu=re({reverse_:Pwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lwe(t){const n={x:K(t,"x","round")};return te.runKernel(Im,n)}const P6=re({round_:Lwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zwe(t){const n={x:K(t,"x","rsqrt","float32")};return te.runKernel(Am,n)}const L6=re({rsqrt_:zwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fwe(t){const n={x:K(t,"x","selu")};return te.runKernel(Tm,n)}const z6=re({selu_:Fwe});function jwe(t,e,n,r,a,i=[1,1],s="NHWC"){const o=K(t,"x","separableConv2d"),l=K(e,"depthwiseFilter","separableConv2d"),c=K(n,"pointwiseFilter","separableConv2d");let f=o,h=!1;if(o.rank===3&&(h=!0,f=ne(o,[1,o.shape[0],o.shape[1],o.shape[2]])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");B(f.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${f.rank}.`),B(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),B(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),B(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),B(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const p=l.shape[2],g=l.shape[3];B(c.shape[2]===p*g,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*g}, but got ${c.shape[2]}.`);const v=EA(f,l,r,a,s,i),b=Bu(v,c,1,"valid",s);return h?ne(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const F6=re({separableConv2d_:jwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bwe(t){const n={x:K(t,"x","sign")};return te.runKernel(Dm,n)}const Uwe=re({sign_:Bwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vwe(t){const n={x:K(t,"x","sin","float32")};return te.runKernel($m,n)}const j6=re({sin_:Vwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wwe(t){const n={x:K(t,"x","sinh")};return te.runKernel(Om,n)}const B6=re({sinh_:Wwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gwe(t,e,n){const r=K(t,"x","slice1d");return B(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Gt(r,[e],[n])}const LA=re({slice1d_:Gwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hwe(t,e,n){const r=K(t,"x","slice2d");return B(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Gt(r,e,n)}const U6=re({slice2d_:Hwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qwe(t,e,n){const r=K(t,"x","slice3d");return B(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Gt(r,e,n)}const zA=re({slice3d_:qwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kwe(t,e,n){const r=K(t,"x","slice4d");return B(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Gt(r,e,n)}const $y=re({slice4d_:Kwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xwe(t,e=-1){const n=K(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},a={dim:e};return te.runKernel(Gb,r,a)}const FA=re({softmax_:Xwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ywe(t){B(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return te.runKernel(YI,e)}const V6=re({fft_:Ywe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zwe(t){B(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return te.runKernel(JI,e)}const bE=re({ifft_:Zwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qwe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const a=ne(t,[n,e]);r=bE(a)}else{const a=[n,2*(e-1)],i=ne(Ty(t),[n,e]),s=ne(AA(t),[n,e]),o=Vu(Gt(i,[0,1],[n,e-2]),1),l=ee(Vu(Gt(s,[0,1],[n,e-2]),1),kt(-1)),c=qr([i,o],1),f=qr([s,l],1),h=ne(Id(c,f),[a[0],a[1]]);r=bE(h)}if(r=Ty(r),t.rank===3&&t.shape[0]!==0){const a=r,i=t.shape[0];r=ne(r,[i,r.shape[0]/i,r.shape[1]]),a.dispose()}return r}const Jwe=re({irfft_:Qwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eSe(t,e,n=0){const a={x:K(t,"x","split")},i={numOrSizeSplits:e,axis:n};return te.runKernel(Wb,a,i)}const _a=re({split_:eSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tSe(t,e){B(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let a;if(e!=null&&e<n){const v=t.shape.map(b=>0),x=t.shape.map(b=>b);x[t.shape.length-1]=e,a=Gt(t,v,x),n=e}else if(e!=null&&e>n){const v=t.shape.map(x=>x);v[t.shape.length-1]=e-n,a=qr([t,Kn(v)],t.shape.length-1),n=e}else a=t;const i=mt(a),s=ne(Id(a,i),[r,n]),o=V6(s),l=Math.floor(n/2)+1,c=Ty(o),f=AA(o),h=_a(c,[l,n-l],c.shape.length-1),p=_a(f,[l,n-l],f.shape.length-1),g=a.shape.slice();return g[a.shape.length-1]=l,ne(Id(h[0],p[0]),g)}const nSe=re({rfft_:tSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rSe(t,e){let n=K(t,"a","squaredDifference"),r=K(e,"b","squaredDifference");[n,r]=xn(n,r),et(n.shape,r.shape);const a={a:n,b:r},i={};return te.runKernel(Pm,a,i)}const aSe=re({squaredDifference_:rSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iSe(t,e){const n=K(t,"x","squeeze","string_or_numeric");return ne(n,Il(n.shape,e).newShape)}const Gm=re({squeeze_:iSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sSe(t,e=0){const n=l6(t,"tensors","stack","string_or_numeric");B(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&B(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,a={axis:e};return te.runKernel(Db,r,a)}const go=re({stack_:sSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oSe(t,e=0){const r={x:K(t,"x","step")},a={alpha:e};return te.runKernel(Bm,r,a)}const Hm=re({step_:oSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lSe(t,e,n,r,a=0,i=0,s=0,o=0,l=0){const f={x:K(t,"x","stridedSlice","string_or_numeric")},h={begin:e,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:s,newAxisMask:o,shrinkAxisMask:l};return te.runKernel(hA,f,h)}const uSe=re({stridedSlice_:lSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cSe(t){const n={x:K(t,"x","tan","float32")};return te.runKernel(zm,n)}const dSe=re({tan_:cSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fa(t,e){yW(t);const n=Yb(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Zb(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function is(t,e,n){if(yW(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=Yb(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Zb(t,e,r,n)}function W6(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,a=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${a}.`;if(n.rank<a)throw new Error(i+` update.rank < ${a}. `);if(t.length<r+(n.rank-a))throw new Error(i+` Output shape length < ${r+(n.rank-a)}`);if(n.rank!==a+t.length-r)throw new Error(i+` update.rank != ${a+t.length-r}`);for(let s=0;s<a;++s)if(n.shape[s]!==e.shape[s])throw new Error(i+` updates.shape[${s}] (${n.shape[s]}) != indices.shape[${s}] (${e.shape[s]}).`);for(let s=0;s<n.rank-a;++s)if(n.shape[s+a]!==t[s+r])throw new Error(i+` updates.shape[${s+a}] (${n.shape[s+a]}) != shape[${s+a}] (${t[s+a]})`)}function fSe(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}W6(n,e,t)}function rc(t,e,n){const r=e.shape.length,a=r>1?e.shape[r-1]:1,i=n.length;let s=1;for(let h=a;h<i;++h)s*=n[h];const o=a<1?1:a,l=ve(e.shape)/o,c=[...Ue(n.slice(0,a)),1],f=ve(n);return{sliceRank:a,numUpdates:l,sliceSize:s,strides:c,outputSize:f}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hSe(t,e=1,n=!0){const r=K(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const a=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>a)throw new Error(`'k' passed to topk() must be <= the last dimension (${a}) but got ${e}`);const i={x:r},s={k:e,sorted:n},[o,l]=te.runKernel(pA,i,s);return{values:o,indices:l}}const pSe=re({topk_:hSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mSe(t,e=0,n=1,r,a){if(ko(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const i=new _6(e,n,r,!0,a),s=at(t,r);for(let o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}const G6=re({truncatedNormal_:mSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gSe(t,e=0){const n=K(t,"x","unique","string_or_numeric");B(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},a={axis:e},[i,s]=te.runKernel(gA,r,a);return{values:i,indices:s}}const vSe=re({unique_:gSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ySe(t,e,n){const r=K(t,"x","unsortedSegmentSum"),a=K(e,"segmentIds","unsortedSegmentSum","int32");B(Ed(n),()=>"numSegments must be of dtype int");const i={x:r,segmentIds:a},s={numSegments:n};return te.runKernel(qb,i,s)}const H6=re({unsortedSegmentSum_:ySe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xSe(t,e=0){const n=K(t,"x","unstack","string_or_numeric");B(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},a={axis:e};return te.runKernel(Hb,r,a)}const Wu=re({unstack_:xSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bSe(t,e=!0,n,r){return te.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q6(t,e){const n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);const r=at(t,"int32"),a=at([n.length,t.length],"int32");for(let i=0;i<n.length;i++){const s=r.indexToLoc(n[i]),o=i*t.length;a.values.set(s,o)}return a.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wSe(t,e,n){const r=K(t,"x","transpose");if(e==null&&(e=r.shape.map((s,o)=>o).reverse()),B(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(s=>{B(s>=0&&s<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const a={x:r},i={perm:e};return r.dtype==="complex64"?le(()=>{let s=Ty(r),o=AA(r);return s=te.runKernel(fd,{x:s},i),o=te.runKernel(fd,{x:o},i),n&&(o=vn(o)),Id(s,o)}):te.runKernel(fd,a,i)}const pt=re({transpose_:wSe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SSe(t,e){if(e==null)return t.shape.slice();if(It(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CSe(t,e,n,r){const a=K(t,"x","dropout");if(B(a.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${a.dtype} tensor instead.`),B(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Mn?a.clone():a;const i=SSe(a,n),s=1-e,o=Ge(r1(Ee(Wm(i,0,1,"float32",r),s)),s);return ee(a,o)}const kSe=re({dropout_:CSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ESe(t,e,n,r,a,i="NHWC",s){let o=t;t.rank===3&&(o=ne(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=ne(e,[1,e.shape[0],e.shape[1],e.shape[2]])),B(o.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${o.shape}.`),B(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),B(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const c=i==="NHWC"?o.shape[3]:o.shape[1],f=i==="NHWC"?l.shape[3]:l.shape[1];B(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),B(f===n[3],()=>`Error in conv2dDerFilter: depth of dy (${f}) must match output depth for filter (${n[3]}).`),Jr("conv2dDerFilter",a,s);const h={x:o,dy:l},p={strides:r,pad:a,dataFormat:i,dimRoundingMode:s,filterShape:n};return te.runKernel(FI,h,p)}const jA=re({conv2DBackpropFilter_:ESe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BA(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return ee(t,Hm(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function UA(t,e){let n=e;const r=Bn(t.shape,e.shape);return r.length>0&&(n=Ve(n,r)),ne(n,t.shape)}function VA(t,e,n,r){if(e==="linear")return t;if(e==="relu")return nc(t);if(e==="elu")return t1(t);if(e==="relu6")return M6(t);if(e==="prelu")return MA(t,n);if(e==="leakyrelu")return TA(t,r);if(e==="sigmoid")return cf(t);throw new Error(`Unknown fused activation ${e}.`)}const WA=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NSe({x:t,filter:e,strides:n,pad:r,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:o,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:f}){if(l=l||"linear",WA(te.state.gradientDepth,l)===!1){B(a==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${a} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let T=Bu(t,e,n,r,a,i,s);return o!=null&&(T=Ee(T,o)),VA(T,l,c,f)}const h=K(t,"x","conv2d","float32"),p=K(e,"filter","conv2d","float32");let g=h,v=!1;h.rank===3&&(v=!0,g=ne(h,[1,h.shape[0],h.shape[1],h.shape[2]])),B(g.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${g.rank}.`),B(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),Jr("fused conv2d",r,s);const x=a==="NHWC"?g.shape[3]:g.shape[1];B(p.shape[2]===x,()=>`Error in conv2d: depth of input (${x}) must match input depth for filter ${p.shape[2]}.`),B(Er(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const b=cr(g.shape,p.shape,n,i,r,s);let w;o!=null&&(w=K(o,"bias","fused conv2d"),[w]=xn(w,h),a==="NHWC"?et(b.outShape,w.shape):(B(w.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${w.shape.length}.`),B(w.shape.length===0||w.shape[0]===b.outChannels||w.shape[0]===1,()=>`Error in fused conv2d: bias shape (${w.shape}) is not compatible with the number of output channels (${b.outChannels})`)));let S;if(c!=null){const T=c.shape;if(B(T.length<=1||T.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${T.length}.`),T.length===1)B(T[0]===1||T[0]===b.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${T}) is not compatible with the number of output channels (${b.outChannels}).`);else if(T.length===3)try{et(T,b.outShape)}catch{const _=`Error in fused conv2d: PReLU activation weights (${T}) is not compatible with the output shape of the conv2d (${b.outShape}).`;throw Error(_)}S=K(c,"prelu weights","fused conv2d")}const k=(T,R)=>{B(a==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${a} but only NHWC is currently supported.`);const[_,M,P,$]=R,z=BA(T,P,l);B(Fu(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const W=CA(M.shape,z,_,n,r),H=jA(M,z,_.shape,n,r),G=[W,H];if($!=null){const F=UA($,z);G.push(F)}return G},N={x:g,filter:p,bias:w,preluActivationWeights:S},I={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:s,activation:l,leakyreluAlpha:f};return o==null?Td((R,_,M)=>{let P=te.runKernel(Cy,N,I);return M([_,R,P]),v&&(P=ne(P,[P.shape[1],P.shape[2],P.shape[3]])),{value:P,gradFunc:k}})(g,p):Td((R,_,M,P)=>{let $=te.runKernel(Cy,N,I);return P([_,R,$,M]),v&&($=ne($,[$.shape[1],$.shape[2],$.shape[3]])),{value:$,gradFunc:k}})(g,p,w)}const ISe=re({fusedConv2d_:NSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ASe(t,e,n,r,a,i=[1,1],s){let o=t;t.rank===3&&(o=ne(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=ne(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:o,dy:l},f={strides:r,pad:a,dimRoundingMode:s,dilations:i,filterShape:n};return te.runKernel(HI,c,f)}const TSe=re({depthwiseConv2dNativeBackpropFilter_:ASe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Se(t,e,n,r,a,i=[1,1],s){let o=e,l=!1;e.rank===3&&(l=!0,o=ne(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:o,filter:n},f={strides:r,pad:a,dimRoundingMode:s,dilations:i,inputShape:t},h=te.runKernel(qI,c,f);return l?ne(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const OSe=re({depthwiseConv2dNativeBackpropInput_:$Se});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DSe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:a,activation:i="linear",preluActivationWeights:s,leakyreluAlpha:o=.2}){if(WA(te.state.gradientDepth,i)===!1){let $=St(t,e,n,r);return a!=null&&($=Ee($,a)),VA($,i,s,o)}let l=K(t,"a","fused matMul"),c=K(e,"b","fused matMul");[l,c]=xn(l,c);const f=n?l.shape[l.rank-2]:l.shape[l.rank-1],h=r?c.shape[c.rank-1]:c.shape[c.rank-2],p=n?l.shape[l.rank-1]:l.shape[l.rank-2],g=r?c.shape[c.rank-2]:c.shape[c.rank-1],v=l.shape.slice(0,-2),x=c.shape.slice(0,-2),b=ve(v),w=ve(x);B(f===h,()=>`Error in fused matMul: inner shapes (${f}) and (${h}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);const k=et(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,g]),N=n?ne(l,[b,f,p]):ne(l,[b,p,f]),I=r?ne(c,[w,g,h]):ne(c,[w,h,g]);let T;a!=null&&(T=K(a,"bias","fused matMul"),[T]=xn(T,l),et(k,T.shape));let R;s!=null&&(R=K(s,"prelu weights","fused matMul"));const _=($,z)=>{const[W,H,G,F]=z,V=BA(ne($,G.shape),G,i);let U,Y;if(!n&&!r?(U=St(V,H,!1,!0),Y=St(W,V,!0,!1)):!n&&r?(U=St(V,H,!1,!1),Y=St(V,W,!0,!1)):n&&!r?(U=St(H,V,!1,!0),Y=St(W,V,!1,!1)):(U=St(H,V,!0,!0),Y=St(V,W,!0,!0)),a!=null){const oe=UA(F,V);return[U,Y,oe]}else return[U,Y]},M={a:N,b:I,bias:T,preluActivationWeights:R},P={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:o};return a==null?Td((z,W,H)=>{const G=te.runKernel(Sy,M,P);return H([z,W,G]),{value:ne(G,k),gradFunc:_}})(N,I):Td((z,W,H,G)=>{const F=te.runKernel(Sy,M,P);return G([z,W,F,H]),{value:ne(F,k),gradFunc:_}})(N,I,T)}const Vz=re({fusedMatMul_:DSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RSe(t,e,n,r,a="bilinear",i=0){const s=K(t,"image","cropAndResize"),o=K(e,"boxes","cropAndResize","float32"),l=K(n,"boxInd","cropAndResize","int32"),c=o.shape[0];B(s.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${s.rank}.`),B(o.rank===2&&o.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${o.shape}.`),B(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${o.shape}.`),B(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),B(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),B(a==="bilinear"||a==="nearest",()=>`method must be bilinear or nearest, but was ${a}`);const f={image:s,boxes:o,boxInd:l},h={method:a,extrapolationValue:i,cropSize:r};return te.runKernel(VI,f,h)}const _Se=re({cropAndResize_:RSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MSe(t){const e=K(t,"image","flipLeftRight","float32");B(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return te.runKernel(QI,n,{})}const PSe=re({flipLeftRight_:MSe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LSe(t){const e=K(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];B(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),B(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const a=new Array(e.rank);return a.fill(1,0,n),a[n]=3,Di(e,a)}const zSe=re({grayscaleToRGB_:LSe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FSe(t){const e=K(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];B(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),B(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const a=e.dtype,i=Oe(e,"float32"),s=fa([.2989,.587,.114]);let o;switch(e.rank){case 2:o=Ah("ij,j->i",i,s);break;case 3:o=Ah("ijk,k->ij",i,s);break;case 4:o=Ah("ijkl,l->ijk",i,s);break;case 5:o=Ah("ijklm,m->ijkl",i,s);break;case 6:o=Ah("ijklmn,n->ijklm",i,s);break;default:throw new Error("Not a valid tensor rank.")}return o=Wr(o,-1),Oe(o,a)}const jSe=re({rgbToGrayscale_:FSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BSe(t,e,n=0,r=.5){const a=K(t,"image","rotateWithOffset","float32");B(a.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${a.rank}.`);const i={image:a},s={radians:e,fillValue:n,center:r};return te.runKernel(vA,i,s)}const USe=re({rotateWithOffset_:BSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ff(t,e,n,r,a,i){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),i==null&&(i=0);const s=t.shape[0];return n=Math.min(n,s),B(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),B(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),B(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),B(e.rank===1,()=>"scores must be a 1D tensor"),B(e.shape[0]===s,()=>`scores has incompatible shape with boxes. Expected ${s}, but was ${e.shape[0]}`),B(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VSe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY){const i=K(t,"boxes","nonMaxSuppression","float32"),s=K(e,"scores","nonMaxSuppression","float32"),o=ff(i,s,n,r,a);n=o.maxOutputSize,r=o.iouThreshold,a=o.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return te.runKernel(aA,{boxes:i,scores:s},l)}const WSe=re({nonMaxSuppression_:VSe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GSe(t,e,n){const r=HSe(t,e,n),a=r<0?-(r+1):r;t.splice(a,0,e)}function HSe(t,e,n){return KSe(t,e,n||qSe)}function qSe(t,e){return t>e?1:t<e?-1:0}function KSe(t,e,n){let r=0,a=t.length,i=0,s=!1;for(;r<a;){i=r+(a-r>>>1);const o=n(e,t[i]);o>0?r=i+1:(a=i,s=!o)}return s?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GA(t,e,n,r,a){return KA(t,e,n,r,a,0)}function HA(t,e,n,r,a,i){return KA(t,e,n,r,a,0,!1,i,!0)}function qA(t,e,n,r,a,i){return KA(t,e,n,r,a,i,!0)}function KA(t,e,n,r,a,i,s=!1,o=!1,l=!1){const c=[];for(let b=0;b<e.length;b++)e[b]>a&&c.push({score:e[b],boxIndex:b,suppressBeginIndex:0});c.sort(Wz);const f=i>0?-.5/i:0,h=[],p=[];for(;h.length<n&&c.length>0;){const b=c.pop(),{score:w,boxIndex:S,suppressBeginIndex:k}=b;if(w<a)break;let N=!1;for(let I=h.length-1;I>=k;--I){const T=XSe(t,S,h[I]);if(T>=r){N=!0;break}if(b.score=b.score*YSe(r,f,T),b.score<=a)break}b.suppressBeginIndex=h.length,N||(b.score===w?(h.push(S),p.push(b.score)):b.score>a&&GSe(c,b,Wz))}const g=h.length,v=n-g;o&&v>0&&(h.push(...new Array(v).fill(0)),p.push(...new Array(v).fill(0)));const x={selectedIndices:h};return s&&(x.selectedScores=p),l&&(x.validOutputs=g),x}function XSe(t,e,n){const r=t.subarray(e*4,e*4+4),a=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),f=Math.min(a[1],a[3]),h=Math.max(a[0],a[2]),p=Math.max(a[1],a[3]),g=(o-i)*(l-s),v=(h-c)*(p-f);if(g<=0||v<=0)return 0;const x=Math.max(i,c),b=Math.max(s,f),w=Math.min(o,h),S=Math.min(l,p),k=Math.max(w-x,0)*Math.max(S-b,0);return k/(g+v-k)}function YSe(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function Wz(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function ZSe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY){const i=K(t,"boxes","nonMaxSuppressionAsync"),s=K(e,"scores","nonMaxSuppressionAsync"),o=ff(i,s,n,r,a);n=o.maxOutputSize,r=o.iouThreshold,a=o.scoreThreshold;const l=await Promise.all([i.data(),s.data()]),c=l[0],f=l[1],{selectedIndices:h}=GA(c,f,n,r,a);return i!==t&&i.dispose(),s!==e&&s.dispose(),fa(h,"int32")}const QSe=ZSe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JSe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=0){const s=K(t,"boxes","nonMaxSuppression"),o=K(e,"scores","nonMaxSuppression"),l=ff(s,o,n,r,a,i);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,i=l.softNmsSigma;const c={boxes:s,scores:o},f={maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i},h=te.runKernel(sA,c,f);return{selectedIndices:h[0],selectedScores:h[1]}}const eCe=re({nonMaxSuppressionWithScore_:JSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function tCe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=0){const s=K(t,"boxes","nonMaxSuppressionAsync"),o=K(e,"scores","nonMaxSuppressionAsync"),l=ff(s,o,n,r,a,i);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,i=l.softNmsSigma;const c=await Promise.all([s.data(),o.data()]),f=c[0],h=c[1],{selectedIndices:p,selectedScores:g}=qA(f,h,n,r,a,i);return s!==t&&s.dispose(),o!==e&&o.dispose(),{selectedIndices:fa(p,"int32"),selectedScores:fa(g)}}const nCe=tCe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rCe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=!1){const s=K(t,"boxes","nonMaxSuppression"),o=K(e,"scores","nonMaxSuppression"),l=ff(s,o,n,r,a,null),c=l.maxOutputSize,f=l.iouThreshold,h=l.scoreThreshold,p={boxes:s,scores:o},g={maxOutputSize:c,iouThreshold:f,scoreThreshold:h,padToMaxOutputSize:i},v=te.runKernel(iA,p,g);return{selectedIndices:v[0],validOutputs:v[1]}}const aCe=re({nonMaxSuppressionPadded_:rCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function iCe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=!1){const s=K(t,"boxes","nonMaxSuppressionAsync"),o=K(e,"scores","nonMaxSuppressionAsync"),l=ff(s,o,n,r,a,null),c=l.maxOutputSize,f=l.iouThreshold,h=l.scoreThreshold,[p,g]=await Promise.all([s.data(),o.data()]),{selectedIndices:v,validOutputs:x}=HA(p,g,c,f,h,i);return s!==t&&s.dispose(),o!==e&&o.dispose(),{selectedIndices:fa(v,"int32"),validOutputs:kt(x,"int32")}}const sCe=iCe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oCe(t,e,n=!1,r=!1){const a=K(t,"images","resizeBilinear");B(a.rank===3||a.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${a.rank}.`),B(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),B(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=a,s=!1;a.rank===3&&(s=!0,i=ne(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const o={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},c=te.runKernel(zb,o,l);return s?ne(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const K6=re({resizeBilinear_:oCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lCe(t,e,n=!1,r=!1){const a=K(t,"images","resizeNearestNeighbor");B(a.rank===3||a.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${a.rank}.`),B(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),B(a.dtype==="float32"||a.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),B(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=a,s=!1;a.rank===3&&(s=!0,i=ne(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const o={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},c=te.runKernel(Lb,o,l);return s?ne(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const X6=re({resizeNearestNeighbor_:lCe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uCe(t,e="binary",n=!1,r=.5){const a=K(t,"image","threshold"),i=.2989,s=.587,o=.114,l=a.shape[0]*a.shape[1];let c=ee(fa([r]),255),f,h,p,g;if(B(a.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${a.rank}.`),B(a.shape[2]===3||a.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${a.shape[2]}.`),B(a.dtype==="int32"||a.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${a.dtype}.`),B(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),a.shape[2]===3){[f,h,p]=_a(a,[1,1,1],-1);const b=ee(f,i),w=ee(h,s),S=ee(p,o);g=Ee(Ee(b,w),S)}else g=t;if(e==="otsu"){const b=sbe(Oe(P6(g),"int32"),u6([]),256);c=cCe(b,l)}const v=n?df(g,c):Fa(g,c);return Oe(ee(v,255),"int32")}function cCe(t,e){let n=fa([-1]),r=fa([0]),a=fa([0]),i,s,o,l,c,f;for(let h=0;h<t.size-1;h++){i=Gt(t,0,h+1),s=Gt(t,h+1),c=Ge(Ve(i),e),f=Ge(Ve(s),e);const p=Ve(ee(i,dp(0,i.size)));o=Ge(p,Ve(i));const g=e1(s.shape,i.size),v=Ee(dp(0,s.size),g),x=ee(s,v);l=Ge(Ve(x),Ve(s));const b=qe(o,l),w=qe(o,l),S=ee(c,f);a=ee(ee(S,b),w);const k=Fa(a,r);r=Mr(k,a,r),n=Mr(k,fa([h]),n)}return n}const dCe=re({threshold_:uCe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fCe(t,e,n="nearest",r="constant",a=0,i){const s=K(t,"image","transform","float32"),o=K(e,"transforms","transform","float32");B(s.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${s.rank}.`),B(o.rank===2&&(o.shape[0]===s.shape[0]||o.shape[0]===1)&&o.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),B(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);const l={image:s,transforms:o},c={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return te.runKernel(mA,l,c)}const hCe=re({transform_:fCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pCe(t,e,n){const r=K(t,"a","bandPart");B(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const a=r.shape,[i,s]=r.shape.slice(-2);let o,l;typeof e=="number"?(B(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),B(e<=i,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`),o=K(e<0?i:e,"numLower","bandPart")):(B(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),o=Mr(Iy(e,0),i,cp(e,i))),typeof n=="number"?(B(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),B(n<=s,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${s}).`),l=K(n<0?s:n,"numUpper","bandPart")):(B(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=Mr(Iy(n,0),s,cp(n,s)));const c=ne(dp(0,i,1,"int32"),[-1,1]),f=dp(0,s,1,"int32"),h=qe(c,f),p=mo(df(h,o),tc(h,vn(l))),g=Kn([i,s],r.dtype);return ne(go(Wu(ne(r,[-1,i,s])).map(v=>Mr(p,v,g))),a)}const mCe=re({bandPart_:pCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gCe(t){let e;if(Array.isArray(t)){e=!1,B(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const a=t[0].shape[0];for(let i=1;i<t.length;++i)B(t[i].shape[0]===a,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${a})`)}else e=!0,t=_a(t,t.shape[0],0).map(a=>Gm(a,[0]));B(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let a=0;a<t.length;++a)n.push(te.tidy(()=>{let i=r[a];if(a>0)for(let s=0;s<a;++s){const o=ee(Ve(ee(n[s],i)),n[s]);i=qe(i,o)}return Ge(i,n1(i,"euclidean"))}));return e?go(n,0):n}const vCe=re({gramSchmidt_:gCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yCe(t,e=!1){if(B(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return Gz(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),r=Wu(ne(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),a=[],i=[];r.forEach(l=>{const[c,f]=Gz(l,e);a.push(c),i.push(f)});const s=ne(go(a,0),t.shape),o=ne(go(i,0),t.shape);return[s,o]}}function Gz(t,e=!1){return te.tidy(()=>{B(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let a=A6(n),i=Cu(t);const s=is([[1]],[1,1]);let o=Cu(s);const l=n>=r?r:n;for(let c=0;c<l;++c){const f=i,h=o,p=a;[o,i,a]=te.tidy(()=>{const g=Gt(i,[c,c],[n-c,1]),v=n1(g),x=Gt(i,[c,c],[1,1]),b=Mr(Fa(x,0),is([[-1]]),is([[1]])),w=qe(x,ee(b,v)),S=Ge(g,w);S.shape[0]===1?o=Cu(s):o=qr([s,Gt(S,[1,0],[S.shape[0]-1,S.shape[1]])],0);const k=vn(Ge(St(b,w),v)),N=Gt(i,[c,0],[n-c,r]),I=ee(k,o),T=pt(o);if(c===0)i=qe(N,St(I,St(T,N)));else{const M=qe(N,St(I,St(T,N)));i=qr([Gt(i,[0,0],[c,r]),M],0)}const R=pt(I),_=Gt(a,[0,c],[n,a.shape[1]-c]);if(c===0)a=qe(_,St(St(_,o),R));else{const M=qe(_,St(St(_,o),R));a=qr([Gt(a,[0,0],[n,c]),M],1)}return[o,i,a]}),lt([f,h,p])}return!e&&n>r&&(a=Gt(a,[0,0],[n,r]),i=Gt(i,[0,0],[r,r])),[a,i]})}const xCe=re({qr_:yCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const to={flipLeftRight:PSe,grayscaleToRGB:zSe,resizeNearestNeighbor:X6,resizeBilinear:K6,rgbToGrayscale:jSe,rotateWithOffset:USe,cropAndResize:_Se,nonMaxSuppression:WSe,nonMaxSuppressionAsync:QSe,nonMaxSuppressionWithScore:eCe,nonMaxSuppressionWithScoreAsync:nCe,nonMaxSuppressionPadded:aCe,nonMaxSuppressionPaddedAsync:sCe,threshold:dCe,transform:hCe},bCe={bandPart:mCe,gramSchmidt:vCe,qr:xCe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wCe=new Map,SCe=new Map;class hf{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class ai{constructor(){this.classNameMap={}}static getMap(){return ai.instance==null&&(ai.instance=new ai),ai.instance}static register(e){ai.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function ke(t,e,n){B(t.className!=null,()=>"Class being registered does not have the static className property defined."),B(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),B(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,a=e+">"+r;return ai.register(t),wCe.set(a,t),SCe.set(t,a),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rl extends hf{minimize(e,n=!1,r){const{value:a,grads:i}=this.computeGradients(e,r);if(r!=null){const s=r.map(o=>({name:o.name,tensor:i[o.name]}));this.applyGradients(s)}else this.applyGradients(i);return lt(i),n?a:(a.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return I1e(e,n)}dispose(){this.iterations_!=null&&lt(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:kt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Rl,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Y6 extends Rl{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=te.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,a)=>{const i=te.registeredVariables[r],s=!1;this.accumulatedGrads[a]==null&&(this.accumulatedGrads[a]={originalName:`${r}/accum_grad`,variable:le(()=>mt(i).variable(s))}),this.accumulatedUpdates[a]==null&&(this.accumulatedUpdates[a]={originalName:`${r}/accum_var`,variable:le(()=>mt(i).variable(s))});const o=Array.isArray(e)?e[a].tensor:e[r];if(o==null)return;const l=this.accumulatedGrads[a].variable,c=this.accumulatedUpdates[a].variable;le(()=>{const f=Ee(ee(l,this.rho),ee(Xt(o),1-this.rho)),h=ee(Ge(kr(Ee(c,this.epsilon)),kr(Ee(l,this.epsilon))),o),p=Ee(ee(c,this.rho),ee(Xt(h),1-this.rho));l.assign(f),c.assign(p);const g=Ee(ee(h,-this.learningRate),i);i.assign(g)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(lt(this.accumulatedGrads.map(e=>e.variable)),lt(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Z6 extends Rl{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,a)=>{const i=te.registeredVariables[r];this.accumulatedGrads[a]==null&&(this.accumulatedGrads[a]={originalName:`${r}/accumulator`,variable:le(()=>e1(i.shape,this.initialAccumulatorValue).variable(!1))});const s=Array.isArray(e)?e[a].tensor:e[r];if(s==null)return;const o=this.accumulatedGrads[a].variable;le(()=>{const l=Ee(o,Xt(s));o.assign(l);const c=Ee(ee(Ge(s,kr(Ee(l,te.backend.epsilon()))),-this.learningRate),i);i.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&lt(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Q6 extends Rl{static get className(){return"Adam"}constructor(e,n,r,a=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=a,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],le(()=>{this.accBeta1=kt(n).variable(),this.accBeta2=kt(r).variable()}),a==null&&(this.epsilon=te.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);le(()=>{const r=qe(1,this.accBeta1),a=qe(1,this.accBeta2);n.forEach((i,s)=>{const o=te.registeredVariables[i],l=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:le(()=>mt(o).variable(l))}),this.accumulatedSecondMoment[s]==null&&(this.accumulatedSecondMoment[s]={originalName:`${i}/v`,variable:le(()=>mt(o).variable(l))});const c=Array.isArray(e)?e[s].tensor:e[i];if(c==null)return;const f=this.accumulatedFirstMoment[s].variable,h=this.accumulatedSecondMoment[s].variable,p=Ee(ee(f,this.beta1),ee(c,1-this.beta1)),g=Ee(ee(h,this.beta2),ee(Xt(c),1-this.beta2)),v=Ge(p,r),x=Ge(g,a);f.assign(p),h.assign(g);const b=Ee(ee(Ge(v,Ee(kr(x),this.epsilon)),-this.learningRate),o);o.assign(b)}),this.accBeta1.assign(ee(this.accBeta1,this.beta1)),this.accBeta2.assign(ee(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&lt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&lt(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),le(()=>{this.accBeta1.assign(Uu(this.beta1,this.iterations_+1)),this.accBeta2.assign(Uu(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J6 extends Rl{static get className(){return"Adamax"}constructor(e,n,r,a=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=a,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],le(()=>{this.iteration=kt(0).variable(),this.accBeta1=kt(n).variable()}),a==null&&(this.epsilon=te.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);le(()=>{const r=qe(1,this.accBeta1),a=Ge(-this.learningRate,Ee(ee(this.iteration,this.decay),1));n.forEach((i,s)=>{const o=te.registeredVariables[i],l=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:mt(o).variable(l)}),this.accumulatedWeightedInfNorm[s]==null&&(this.accumulatedWeightedInfNorm[s]={originalName:`${i}/v`,variable:mt(o).variable(l)});const c=Array.isArray(e)?e[s].tensor:e[i];if(c==null)return;const f=this.accumulatedFirstMoment[s].variable,h=this.accumulatedWeightedInfNorm[s].variable,p=Ee(ee(f,this.beta1),ee(c,1-this.beta1)),g=ee(h,this.beta2),v=Or(c),x=Ol(g,v);f.assign(p),h.assign(x);const b=Ee(ee(Ge(a,r),Ge(p,Ee(x,this.epsilon))),o);o.assign(b)}),this.iteration.assign(Ee(this.iteration,1)),this.accBeta1.assign(ee(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&lt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&lt(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XA extends Rl{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,a)=>{const i=Array.isArray(e)?e[a].tensor:e[r];if(i==null)return;const s=te.registeredVariables[r];le(()=>{const o=Ee(ee(this.c,i),s);s.assign(o)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=us(kt(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eG extends XA{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=kt(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,a)=>{const i=te.registeredVariables[r];this.accumulations[a]==null&&(this.accumulations[a]={originalName:`${r}/momentum`,variable:le(()=>mt(i).variable(!1))});const s=this.accumulations[a].variable,o=Array.isArray(e)?e[a].tensor:e[r];o!=null&&le(()=>{let l;const c=Ee(ee(this.m,s),o);this.useNesterov?l=Ee(ee(this.c,Ee(o,ee(c,this.m))),i):l=Ee(ee(this.c,c),i),s.assign(c),i.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&lt(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tG extends Rl{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,a=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=a,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,a==null&&(this.epsilon=te.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,a)=>{const i=te.registeredVariables[r],s=!1;this.accumulatedMeanSquares[a]==null&&(this.accumulatedMeanSquares[a]={originalName:`${r}/rms`,variable:le(()=>mt(i).variable(s))}),this.accumulatedMoments[a]==null&&(this.accumulatedMoments[a]={originalName:`${r}/momentum`,variable:le(()=>mt(i).variable(s))}),this.accumulatedMeanGrads[a]==null&&this.centered&&(this.accumulatedMeanGrads[a]={originalName:`${r}/mg`,variable:le(()=>mt(i).variable(s))});const o=Array.isArray(e)?e[a].tensor:e[r];if(o==null)return;const l=this.accumulatedMeanSquares[a].variable,c=this.accumulatedMoments[a].variable;le(()=>{const f=Ee(ee(l,this.decay),ee(Xt(o),1-this.decay));if(this.centered){const h=this.accumulatedMeanGrads[a].variable,p=Ee(ee(h,this.decay),ee(o,1-this.decay)),g=Ge(ee(o,this.learningRate),kr(qe(f,Ee(Xt(p),this.epsilon)))),v=Ee(ee(c,this.momentum),g);l.assign(f),h.assign(p),c.assign(v);const x=qe(i,v);i.assign(x)}else{const h=Ee(ee(l,this.decay),ee(Xt(o),1-this.decay)),p=Ee(ee(c,this.momentum),Ge(ee(o,this.learningRate),kr(Ee(h,this.epsilon))));l.assign(h),c.assign(p);const g=qe(i,p);i.assign(g)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&lt(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&lt(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&lt(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CCe=[Y6,Z6,Q6,J6,eG,tG,XA];function kCe(){for(const t of CCe)ke(t)}function YA(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(ve(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const a=e.shape,i=a[a.length-1];let s=1;for(let h=0;h<a.length-1;++h)s*=a[h];const o=t.shape,l=a.slice();l.pop();let c=1;for(let h=i;h<n;++h)c*=o[h],l.push(o[h]);const f=[...Ue(t.shape).map(h=>h/c),1].slice(0,i);return[l,s,c,f]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wE=-2,ECe=-1;function ZA(t,e,n){const r=t.shape.length;B(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),B(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let a=0;a<r;++a)B(e[a]+n[a]<=t.shape[a],()=>`Error in slice${r}D: begin[${a}] + size[${a}] (${e[a]+n[a]}) would overflow input.shape[${a}] (${t.shape[a]})`)}function NCe(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function QA(t,e,n){const r=[];for(let a=0;a<t.length;a++)r[a]=Math.ceil((e[a]-t[a])/n[a]);return r}function nG(t,e,n,r){const a=[...t];for(let i=a.length;i<r.length;i++)a.push(1);for(let i=0;i<n;i++)i===0?a[e]=1:(a.splice(e,0,1),a.pop());return a}function rG(t,e,n){return n<=t?n:n-(e-1)}function aG(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function ICe(t,e,n,r,a,i,s,o,l){const c=t.length;let f=new Array(c),h=new Array(c),p=new Array(c);if(e.length&&n>0){const g=e[0],v=n+1;f=iG(s,g,v,r,t),h=sG(o,g,v,a,t),p=nG(i,g,v,t)}else for(let g=0;g<c;g++)f[g]=lG(s,r,i,t,g,l),h[g]=uG(o,a,i,t,g,l),p[g]=oG(i,g,l);return{begin:f,end:h,strides:p}}function iG(t,e,n,r,a){const i=[...a],s=aG(n,e);for(let o=0;o<i.length;o++)if(s.indexOf(o)>-1)i[o]=0;else{const l=rG(e,n,o);let c=r[l];t&1<<l&&(c=0),i[o]=c}return i}function sG(t,e,n,r,a){const i=[...a],s=aG(n,e);for(let o=0;o<i.length;o++)if(s.indexOf(o)>-1)i[o]=Number.MAX_SAFE_INTEGER;else{const l=rG(e,n,o);let c=r[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),i[o]=c}for(let o=0;o<i.length;o++){const l=a[o];i[o]<0&&(i[o]+=l),i[o]=Mu(0,i[o],a[o])}return i}function oG(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function lG(t,e,n,r,a,i){let s=e[a];const o=n[a]||1;(t&1<<a||i&1<<a||s==null)&&(o>0?s=Number.MIN_SAFE_INTEGER:s=Number.MAX_SAFE_INTEGER);const l=r[a];return s<0&&(s+=l),s=Mu(0,s,l-1),s}function uG(t,e,n,r,a,i){let s=e[a];const o=n[a]||1;(t&1<<a||i&1<<a||s==null)&&(o>0?s=Number.MAX_SAFE_INTEGER:s=Number.MIN_SAFE_INTEGER);const l=r[a];return s<0&&(s+=l),o>0?s=Mu(0,s,l):s=Mu(-1,s,l-1),s}function JA(t,e,n){let r=n.length;for(let a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(let a=r+1;a<n.length;a++)if(e[a]>0||n[a]!==t[a])return!1;return!0}function eT(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function a1(t,e,n){let r;const a=t.shape.length;typeof e=="number"?r=[e,...new Array(a-1).fill(0)]:e.length<a?r=e.concat(new Array(a-e.length).fill(0)):r=e.slice(),r.forEach(s=>{B(s!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(a).fill(-1):typeof n=="number"?i=[n,...new Array(a-1).fill(-1)]:n.length<a?i=n.concat(new Array(a-n.length).fill(-1)):i=n,i=i.map((s,o)=>s>=0?s:(B(s===-1,()=>`Negative size values should be exactly -1 but got ${s} for the slice() size at index ${o}.`),t.shape[o]-r[o])),[r,i]}function tT(t,e,n,r,a,i,s,o,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,s!=null&&(s&s-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let f=!1;const h={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:a,endMask:i,ellipsisMask:s,newAxisMask:o,shrinkAxisMask:l};for(let k=0;k<h.dims;k++)f&&(1<<k&o)!==0&&h.numAddAxisAfterEllipsis++,1<<k&s&&(f=!0);f||(h.ellipsisMask|=1<<h.dims,h.dims++);const p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};ACe(h,p);let g=!0,v=!0,x=!0;const b=[],w=[];for(let k=0;k<t.length;++k){if(p.strides[k]===0)throw Error(`strides[${k}] must be non-zero`);const N=!!(p.shrinkAxisMask&1<<k),I=t[k];if(I===-1){b.push(N?1:-1);continue}const T=[p.beginMask&1<<k,p.endMask&1<<k],R=[p.strides[k]>0?0:-1,p.strides[k]>0?I:I-1];if(N&&p.strides[k]<=0)throw Error("only stride 1 allowed on non-range indexing.");x=x&&p.strides[k]===1;const _=!!(p.beginMask&1<<k&&p.endMask&1<<k);if(p.beginValid&&p.endValid){if(N){const z=p.begin[k]<0?I+p.begin[k]:p.begin[k];if(p.begin[k]=z,p.end[k]=p.begin[k]+1,z<0||z>=I)throw Error(`slice index ${p.begin[k]} of dimension ${k} out of bounds.`)}else p.begin[k]=Hz(p.begin[k],0,p.strides[k],I,T,R),p.end[k]=Hz(p.end[k],1,p.strides[k],I,T,R);const $=p.strides[k]===1&&p.begin[k]===0&&p.end[k]===I;g=g&&$,v=v&&(k===0&&p.strides[k]===1||$)}else g=g&&p.strides[k]===1&&_,v=v&&(k===0&&p.strides[k]===1||_);let M,P=!1;if(p.beginValid&&p.endValid?(M=p.end[k]-p.begin[k],P=!0):N?(M=1,P=!0):_&&I>=0&&(p.strides[k]<0?M=-I:M=I,P=!0),P){let $;M===0||M<0!=p.strides[k]<0?$=0:$=Math.trunc(M/p.strides[k])+(M%p.strides[k]!==0?1:0),b.push($)}else b.push(-1)}for(let k=0;k<p.finalShapeGatherIndices.length;++k){const N=p.finalShapeGatherIndices[k];N>=0?w.push(b[N]):N===wE&&w.push(1)}return{finalShapeSparse:w.filter((k,N)=>p.finalShapeGatherIndices[N]!==wE),finalShape:w,isIdentity:g,sliceDim0:v,isSimpleSlice:x,begin:p.begin,end:p.end,strides:p.strides}}function ACe(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const a=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<a;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(wE),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(ECe),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function Hz(t,e,n,r,a,i){if(a[e])return n>0?i[e]:i[e+1&1];{const s=t<0?r+t:t;return s<i[0]?i[0]:s>i[1]?i[1]:s}}const TCe=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:ZA,computeFlatOffset:eT,computeOutShape:QA,getNormalizedAxes:ICe,isSliceContinous:JA,maskToAxes:NCe,parseSliceParams:a1,sliceInfo:tT,startForAxis:lG,startIndicesWithElidedDims:iG,stopForAxis:uG,stopIndicesWithElidedDims:sG,stridesForAxis:oG,stridesWithElidedDims:nG},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Ce{static sgd(e){return new XA(e)}static momentum(e,n,r=!1){return new eG(e,n,r)}static rmsprop(e,n=.9,r=0,a=null,i=!1){return new tG(e,n,r,a,i)}static adam(e=.001,n=.9,r=.999,a=null){return new Q6(e,n,r,a)}static adadelta(e=.001,n=.95,r=null){return new Y6(e,n,r)}static adamax(e=.002,n=.9,r=.999,a=null,i=0){return new J6(e,n,r,a,i)}static adagrad(e,n=.1){return new Z6(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tl=$Ce;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OCe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function cG(){return new Promise(t=>OCe(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nT(t,e){const n=t[0].length;t.forEach((a,i)=>{B(a.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),B(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((a,i)=>{for(let s=0;s<n;s++)B(s===e||a[s]===r[s],()=>`Error in concat${n}D: Shape of tensors[${i}] (${a}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function cs(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ai;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(Ai||(Ai={}));function dG(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let a=1;a<n.length;++a){const i=n[a],s=r[r.length-n.length+a],o=r[s];if(i>=0)if(o>=0){if(o!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${a+t}] = ${i} but shape[${a+t}] = ${o}`)}else r[s]=i}return r}function fG(t){const e={FIRST_DIM_SIZE:Ai.FIRST_DIM_SIZE,VALUE_ROWIDS:Ai.VALUE_ROWIDS,ROW_LENGTHS:Ai.ROW_LENGTHS,ROW_SPLITS:Ai.ROW_SPLITS,ROW_LIMITS:Ai.ROW_LIMITS,ROW_STARTS:Ai.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function hG(t){return t.length===0?0:t[0]===Ai.FIRST_DIM_SIZE?t.length-1:t.length}function pG(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let a=0;a<Math.min(n,r-1);++a){const i=t[a],s=e[a+1];if(i>=0&&s>=0&&i!==1&&i!==s)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${a-t.length}] = ${i} but ragged tensor input.flatValues.shape[${a-t.length}] = ${s}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rT=30;function i1(t){return t<=rT?t:iE(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aT(t,e,n){const r=n*(typeof t=="number"?t:t[0]),a=e*(typeof t=="number"?t:t[1]);return[r,a]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qm(t,e,n,r=!0){let a=[];if(r)a=a.concat(e.slice(0)),a.push(t[0]/n),a=a.concat(t.slice(1));else{a=a.concat(t[0]);const i=e.length;for(let s=0;s<i;++s)a=a.concat([t[s+1]/e[s],e[s]]);a=a.concat(t.slice(i+1))}return a}function Km(t,e,n=!0){const r=[];if(n){r.push(e);for(let a=e+1;a<t;++a)a<=2*e?(r.push(a),r.push(a-(e+1))):r.push(a)}else{const a=[],i=[];for(let s=1;s<t;++s)s>=e*2+1||s%2===1?i.push(s):a.push(s);r.push(...a),r.push(0),r.push(...i)}return r}function Xm(t,e,n,r=!0){const a=[];r?a.push(t[0]/n):a.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?a.push(e[i-1]*t[i]):a.push(t[i]/e[i-1]):a.push(t[i]);return a}function iT(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function sT(t,e,n){const r=t.slice(0,1);for(let a=0;a<n;++a)r.push(t[a+1]-e[a][0]-e[a][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s1=1.7580993408473768,o1=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oT=.3275911,lT=.254829592,uT=-.284496736,cT=1.421413741,dT=-1.453152027,fT=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vo(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function mG(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function gG(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let a=0;a<t.length;a+=4)n[Math.floor(a/4)]=t[a],r[Math.floor(a/4)]=t[a+1];return{real:n,imag:r}}function vG(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let a=2;a<t.length;a+=4)n[Math.floor(a/4)]=t[a],r[Math.floor(a/4)]=t[a+1];return{real:n,imag:r}}function hT(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function yG(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function xG(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let a=0;a<Math.ceil(t/2);a++){const i=(e?2:-2)*Math.PI*(a/t);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function bG(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),a=Math.cos(r),i=Math.sin(r);return{real:a,imag:i}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z2="->",DCe=/->/g,qz=",",Kz="...";function pT(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(DCe,"").length)/z2.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${z2}").`);const[r,a]=t.split(z2);B(r.indexOf(Kz)===-1,()=>`The ellipsis notation ("${Kz}") is not supported yet.`);const i=r.split(qz),s=i.length;if(e!==s)throw new Error(`Expected ${s} input tensors, received ${e}`);if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const o=[];for(let p=0;p<a.length;++p){const g=a[p];if(!i.some(v=>v.indexOf(g)!==-1))throw new Error(`Output subscripts contain the label ${g} not present in the input subscripts.`);o.indexOf(g)===-1&&o.push(g)}for(let p=0;p<r.length;++p){const g=r[p];o.indexOf(g)===-1&&g!==qz&&o.push(g)}const l=new Array(i.length);for(let p=0;p<s;++p){if(new Set(i[p].split("")).size!==i[p].length)throw new Error(`Found duplicate axes in input component ${i[p]}. Support for duplicate axes in input is not implemented yet.`);l[p]=[];for(let g=0;g<i[p].length;++g)l[p].push(o.indexOf(i[p][g]))}const c=o.length,f=a.length,h=[];for(let p=f;p<c;++p)h.push(p);return{allDims:o,summedDims:h,idDims:l}}function mT(t,e){let n=new Array(t);n.fill(-1);for(let a=0;a<e.length;++a)n[e[a]]=a;const r=[];for(let a=0;a<t;++a)n[a]===-1&&r.push(a);return n=n.filter(a=>a!==-1),{permutationIndices:n,expandDims:r}}function gT(t,e,n){const r=new Array(t);for(let a=0;a<n.length;++a){const i=n[a].shape;for(let s=0;s<e[a].length;++s)r[e[a][s]]===void 0?r[e[a][s]]=i[s]:B(r[e[a][s]]===i[s],()=>`Expected dimension ${r[e[a][s]]} at axis ${s} of input shaped ${JSON.stringify(i)}, but got dimension ${i[s]}`)}}function vT(t,e){const n=t,r=[];let a=0;t.length===0&&n.push(-1),a=t.length+1;for(let s=0;s<a;++s)r.push([]);const i=[];for(let s=0;s<n.length;++s){const o=n[s],l=RCe(e,o);for(const c of l)i.indexOf(c)===-1&&(r[s].push(c),i.push(c))}return{path:n,steps:r}}function yT(t){return t.every((e,n)=>e===n)}function RCe(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function xT(t,e,n=0){let r=[];if(typeof e=="number")B(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const a=e.reduce((s,o)=>(o===-1&&(s+=1),s),0);B(a<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(i!==-1){const s=e.reduce((o,l)=>l>0?o+l:o);e[i]=t.shape[n]-s}B(t.shape[n]===e.reduce((s,o)=>s+o),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wG(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function SG(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function CG(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kG(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function EG(t,e){return`size ${t} must be non-negative, not ${e}`}function NG(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function IG(t,e){const n=ve(t),r=ve(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function AG(t,e){const n=ve(t),r=ve(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SE(){return"segment ids must be >= 0"}function TG(){return"segment ids are not increasing"}function $G(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function OG(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DG(t,e){let n=!1,r;for(t<=rT?(r=t,n=!0):r=iE(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=iE(t,r+1);return r}function RG(t,e,n){const r=[],a=t.length;for(let i=0;i<a;i++)i!==e?r.push(t[i]):r.push(n);return r}function bT(t,e,n,r){const a=e.shape.length,i=t.shape.length;if(r!==0&&(r<-a||r>a))throw new Error(`Expect batchDims in the range of [-${a}, ${a}], but got ${r}`);if(r<0&&(r+=a),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let h=0;h<r;++h)if(t.shape[h]!==e.shape[h])throw new Error(`x.shape[${h}]: ${t.shape[h]} should be equal to indices.shape[${h}]: ${e.shape[h]}.`);const s=t.shape[n],o=[];let l=1,c=1,f=1;for(let h=0;h<r;++h)o.push(t.shape[h]),l*=t.shape[h];for(let h=r;h<n;h++)o.push(t.shape[h]),c*=t.shape[h];for(let h=r;h<a;h++)o.push(e.shape[h]);for(let h=n+1;h<i;h++)o.push(t.shape[h]),f*=t.shape[h];return{batchSize:l,sliceSize:f,outerSize:c,dimSize:s,outputShape:o}}const _Ce=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:bT,computeOutShape:RG,segOpComputeOptimalWindowSize:DG},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yo(t){try{return t.map(e=>gl(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function _G(t){return t.map(e=>cl(e))}const MCe=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:lT,ERF_A2:uT,ERF_A3:cT,ERF_A4:dT,ERF_A5:fT,ERF_P:oT,PARALLELIZE_THRESHOLD:rT,get RowPartitionType(){return Ai},SELU_SCALE:o1,SELU_SCALEALPHA:s1,applyActivation:VA,assertAndGetBroadcastShape:et,assertAxesAreInnerMostDims:dr,assertParamsConsistent:nT,assignToTypedArray:yG,axesAreInnerMostDims:NA,calculateShapes:rc,checkEinsumDimSizes:gT,checkPadOnDimRoundingMode:Jr,combineLocations:N6,combineRaggedTensorToTensorShapes:dG,complexWithEvenIndex:gG,complexWithOddIndex:vG,computeConv2DInfo:cr,computeConv3DInfo:Tl,computeDefaultPad:bA,computeDilation2DInfo:Um,computeOptimalWindowSize:i1,computeOutAndReduceShapes:er,computeOutShape:cs,computePool2DInfo:gi,computePool3DInfo:Eo,convertConv2DDataFormat:No,decodeEinsumEquation:pT,eitherStridesOrDilationsAreOne:Er,expandShapeToKeepDim:An,exponent:bG,exponents:xG,fromStringArrayToUint8:_G,fromUint8ToStringArray:yo,getAxesPermutation:cn,getBroadcastDims:Ad,getComplexWithIndex:hT,getEinsumComputePath:vT,getEinsumPermutation:mT,getFusedBiasGradient:UA,getFusedDyActivation:BA,getImageCenter:aT,getInnerMostAxes:wn,getPermuted:Km,getRaggedRank:hG,getReductionAxes:Bn,getReshaped:qm,getReshapedPermuted:Xm,getRowPartitionTypesHelper:fG,getSliceBeginCoords:iT,getSliceSize:sT,getSparseFillEmptyRowsIndicesDenseShapeMismatch:wG,getSparseFillEmptyRowsNegativeIndexErrorMessage:SG,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:CG,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:NG,getSparseReshapeInputOutputMismatchErrorMessage:AG,getSparseReshapeInputOutputMultipleErrorMessage:IG,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:kG,getSparseReshapeNegativeOutputDimErrorMessage:EG,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:OG,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:SE,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:TG,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:$G,getUndoAxesPermutation:$l,isIdentityPermutation:yT,log:gye,mergeRealAndImagArrays:vo,prepareAndValidate:YA,prepareSplitSize:xT,segment_util:_Ce,shouldFuse:WA,slice_util:TCe,splitRealAndImagArrays:mG,stridesOrDilationsArePositive:ju,tupleValuesAreOne:Fu,upcastType:pa,validateDefaultValueShape:pG,validateInput:fSe,validateUpdateShape:W6,warn:$a},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */kCe();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MG={kernelName:Xx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ee(t,Hm(Oe(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PCe={kernelName:qp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Xt(Oe(n,"float32")),a=kr(qe(kt(1),r));return vn(Ge(t,a))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LCe={kernelName:Kp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=kr(qe(Xt(Oe(n,"float32")),1));return Ge(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zCe={kernelName:lf,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=et(n.shape,r.shape);return{a:()=>{let o=t;const l=Bn(n.shape,a);return l.length>0&&(o=Ve(o,l)),ne(o,n.shape)},b:()=>{let o=t;const l=Bn(r.shape,a);return l.length>0&&(o=Ve(o,l)),ne(o,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FCe={kernelName:OI,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,a)=>{n[a]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jCe={kernelName:Yx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>mt(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BCe={kernelName:Zx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>mt(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UCe={kernelName:Xp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ge(t,kr(qe(kt(1),Xt(Oe(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VCe={kernelName:Yp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=kr(Ee(kt(1),Xt(Oe(n,"float32"))));return Ge(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WCe={kernelName:Jp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=et(n.shape,r.shape);return{a:()=>{const o=Ee(Xt(n),Xt(r));let l=ee(t,Ge(r,o));const c=Bn(n.shape,a);return c.length>0&&(l=Ve(l,c)),ne(l,n.shape)},b:()=>{const o=Ee(Xt(n),Xt(r));let l=vn(ee(t,Ge(n,o)));const c=Bn(r.shape,a);return c.length>0&&(l=Ve(l,c)),ne(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GCe={kernelName:Zp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ge(t,Ee(Xt(Oe(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HCe={kernelName:Qp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ge(t,qe(kt(1),Xt(Oe(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qCe(t,e,n,r,a,i){const s=K(t,"dy","avgPool3dGrad"),o=K(e,"input","avgPool3dGrad");let l=s,c=o,f=!1;o.rank===4&&(f=!0,l=ne(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),c=ne(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),B(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),B(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),Jr("avgPool3dGrad",a,i);const h={dy:l,input:c},p={filterSize:n,strides:r,pad:a,dimRoundingMode:i},g=te.runKernel(MI,h,p);return f?ne(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const KCe=re({avgPool3dGrad_:qCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XCe={kernelName:Jx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:a,strides:i,pad:s,dimRoundingMode:o}=n;return{x:()=>KCe(t,r,a,i,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YCe(t,e,n,r,a){const i=K(t,"dy","avgPoolGrad"),s=K(e,"input","avgPoolGrad");B(s.rank===i.rank,()=>`Rank of input (${s.rank}) does not match rank of dy (${i.rank})`);let o=s,l=i,c=!1;s.rank===3&&(c=!0,o=ne(s,[1,s.shape[0],s.shape[1],s.shape[2]]),l=ne(i,[1,i.shape[0],i.shape[1],i.shape[2]])),B(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),B(o.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${o.rank}.`);const f={dy:l,input:o},h={filterSize:n,strides:r,pad:a},p=te.runKernel(_I,f,h);return c?ne(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const ZCe=re({avgPoolGrad_:YCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QCe={kernelName:Qx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:a,strides:i,pad:s}=n;return{x:()=>ZCe(t,r,a,i,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JCe={kernelName:eb,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,a]=e,{transposeA:i,transposeB:s}=n;return!i&&!s?{a:()=>St(t,a,!1,!0),b:()=>St(r,t,!0,!1)}:!i&&s?{a:()=>St(t,a,!1,!1),b:()=>St(t,r,!0,!1)}:i&&!s?{a:()=>St(a,t,!1,!0),b:()=>St(r,t,!1,!1)}:{a:()=>St(a,t,!0,!0),b:()=>St(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e2e={kernelName:tb,gradFunc:(t,e,n)=>{const{blockShape:r,crops:a}=n;return{x:()=>_A(t,r,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t2e={kernelName:fye,gradFunc:(t,e,n)=>{const r=n,a=r.inputShape,i=r.shape,s=Array.from(i);for(let l=a.length-1;l>=0;l--)if(a[l]===i[l])s[l]=1;else if(a[l]!==1)throw new Error(`broadcastTo(): [${a}] cannot be broadcast to [${i}].`);const o=[];for(let l=0;l<s.length;l++)s[l]>1&&o.push(l);return{x:()=>Ve(t,o,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n2e={kernelName:em,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r2e={kernelName:tm,gradFunc:t=>({x:()=>mt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a2e={kernelName:nm,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:a,clipValueMax:i}=n;return{x:()=>Mr(mo(tc(r,a),df(r,i)),t,mt(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i2e={kernelName:nb,inputsToSave:["x"],gradFunc:MG.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s2e={kernelName:rb,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:a}=n,i=it(a,e[0].shape)[0],s=r.map(l=>l[i]);return _a(t,s,i).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o2e={kernelName:ab,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,a]=e,{dilations:i,strides:s,pad:o,dataFormat:l}=n;return B(Fu(i),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`),{x:()=>CA(r.shape,t,a,s,o,l),filter:()=>jA(r,t,a.shape,s,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l2e={kernelName:ib,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,a]=e,{strides:i,pad:s,dataFormat:o,dimRoundingMode:l}=n;return{dy:()=>Bu(t,a,i,s,o,1,l),filter:()=>jA(t,r,a.shape,i,s,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u2e(t,e,n,r,a){let i=t;t.rank===4&&(i=ne(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let s=e;s.rank===4&&(s=ne(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),B(i.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${i.shape}.`),B(s.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${s.shape}.`),B(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),B(i.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${i.shape[4]}) must match input depth in filter (${n[3]}.`),B(s.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${s.shape[4]}) must match output depth for filter (${n[4]}).`);const o={x:i,dy:s},l={strides:r,pad:a,filterShape:n};return te.runKernel(jI,o,l)}const c2e=re({conv3DBackpropFilter_:u2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d2e={kernelName:sb,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:a,pad:i}=n;B(Fu(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[s,o]=e;return{x:()=>S6(s.shape,t,o,a,i),filter:()=>c2e(s,t,o.shape,a,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f2e={kernelName:rm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ee(vn(j6(Oe(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h2e={kernelName:am,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ee(B6(Oe(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p2e={kernelName:ob,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:a,exclusive:i,reverse:s}=n;return{x:()=>{const o=cn([a],r.rank);let l=k6(t,a,i,!s);return o!=null&&(l=pt(l,o)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m2e={kernelName:lb,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:a,pad:i,dimRoundingMode:s}=n,o=r??[1,1];B(Fu(o),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);const[l,c]=e;return B(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),B(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),B(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),B(Er(a,o),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${a} and dilations '${o}'.`),Jr("depthwiseConv2d",i,s),{x:()=>OSe(l.shape,t,c,a,i,o,s),filter:()=>TSe(l,t,c.shape,a,i,o,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g2e={kernelName:ub,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,a]=e,i={x:r,filter:a,dy:t},s={x:r,filter:a,dy:t};return{x:()=>te.runKernel(sE,i,n),filter:()=>te.runKernel(oE,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v2e={kernelName:sm,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>te.runKernel(XI,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y2e={kernelName:om,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=ee(gs(vn(Xt(n))),2/Math.sqrt(Math.PI));return{x:()=>ee(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x2e={kernelName:lm,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ee(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b2e={kernelName:db,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>ne(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w2e={kernelName:um,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ee(t,gs(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S2e={kernelName:cm,gradFunc:t=>({x:()=>mt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C2e={kernelName:dm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=et(n.shape,r.shape);return{a:()=>{const o=Ge(t,Oe(r,"float32")),l=Bn(n.shape,a);return l.length>0?ne(Ve(o,l),n.shape):o},b:()=>{let o=ee(t,Oe(n,"float32"));const l=Bn(r.shape,a);l.length>0&&(o=ne(Ve(o,l),r.shape));const c=Xt(r);return vn(Ge(o,Oe(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k2e={kernelName:fb,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[a,i,s,o]=e,l=o??kt(1),c=Bn(i.shape,a.shape),f=[];if(i.rank===1){for(let N=0;N<a.shape.length-1;++N)f.push(a.shape[N]);f.push(1)}const h=qe(a,i),p=ee(t,l),g=L6(Ee(s,kt(r))),v=ee(ee(ee(g,g),g),kt(-.5));return{x:()=>i.rank===1?ne(ee(ee(t,Di(ne(g,[1,1,1,i.shape[0]]),f)),l),a.shape):ne(ee(ee(t,g),l),a.shape),mean:()=>{let N=ee(ee(g,kt(-1)),p);return i.rank===1&&(N=Ve(N,c)),ne(N,i.shape)},variance:()=>{let N=ee(ee(v,h),p);return i.rank===1&&(N=Ve(N,c)),ne(N,i.shape)},scale:()=>{const N=ee(h,g);let I=ee(t,N);return i.rank===1&&(I=Ve(I,c)),ne(I,i.shape)},offset:()=>{let N=t;return i.rank===1&&(N=Ve(N,c)),ne(N,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E2e={kernelName:hb,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,a]=e,{axis:i,batchDims:s}=n,o=it(i,r.shape)[0],l=(c,f,h)=>()=>{const p=c.shape,g=f.size,v=p.slice(0,o),x=v.length,b=p.slice(i,p.length).slice(1),w=b.length,S=Xz(0,x),k=Xz(x+1,x+1+w),N=Yz([v,[g],b]),I=ne(h,N),T=ne(f,[g]),R=Yz([[x],S,k]),_=pt(I,R);let M=H6(_,T,c.shape[o]);const P=$l(R);return M=pt(M,P),M};if(s===1){const c=r.shape[0],f=r.split(c,0);return{x:()=>go(f.map((g,v)=>l(g,a.slice(v,1),t.slice(v,1))())).reshape(r.shape),indices:()=>a}}else return{x:l(r,a,t),indices:()=>a}}};function Xz(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function Yz(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N2e={kernelName:fm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>mt(n),b:()=>mt(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I2e={kernelName:hm,gradFunc:t=>({x:()=>Oe(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A2e={kernelName:pm,gradFunc:t=>({x:()=>mt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T2e={kernelName:mm,gradFunc:t=>({x:()=>mt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $2e={kernelName:gm,gradFunc:t=>({x:()=>mt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O2e={kernelName:mb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:a}=n,i=Fa(r,0);return{x:()=>Mr(i,t,ee(t,a))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D2e={kernelName:ym,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ge(t,Ee(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R2e={kernelName:vm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ge(t,Oe(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _2e={kernelName:pye,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:a}=n;return{logits:()=>{const s=gs(r);return qe(t,ee(Ve(t,a,!0),s))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M2e(t,e,n,r=5,a=1,i=1,s=.5){const o={x:t,y:e,dy:n},l={depthRadius:r,bias:a,alpha:i,beta:s};return te.runKernel(tA,o,l)}const P2e=re({localResponseNormalizationBackprop_:M2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L2e={kernelName:wb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,a]=e,{depthRadius:i,bias:s,alpha:o,beta:l}=n;return{x:()=>P2e(r,a,t,i,s,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PG(t,e,n,r){return e.rank<n.rank&&(e=ne(e,An(e.shape,r))),t.rank<n.rank&&(t=ne(t,An(t.shape,r))),{x:()=>ee(t,Oe(ms(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zz={kernelName:Sb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:a}=r,i=e[0],s=e[1],o=it(a,i.shape),l=PG(t,s,i,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z2e={kernelName:xm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>ee(t,Oe(tc(n,r),"float32")),b:()=>ee(t,Oe(Iy(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F2e(t,e,n,r,a,i,s){const o=K(t,"dy","maxPool3dGrad"),l=K(e,"input","maxPool3dGrad"),c=K(n,"output","maxPool3dGrad");let f=o,h=l,p=c,g=!1;l.rank===4&&(g=!0,f=ne(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),h=ne(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),p=ne(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),B(f.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${f.rank}.`),B(h.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${h.rank}.`),B(p.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${p.rank}.`),Jr("maxPool3dGrad",i,s);const v={dy:f,input:h,output:p},x={filterSize:r,strides:a,pad:i,dimRoundingMode:s},b=te.runKernel(rA,v,x);return g?ne(b,[b.shape[1],b.shape[2],b.shape[3],b.shape[4]]):b}const j2e=re({maxPool3dGrad_:F2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B2e={kernelName:kb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,a]=e,{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=n;return{x:()=>j2e(t,r,a,i,s,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U2e(t,e,n,r,a,i,s){const o=K(t,"dy","maxPoolGrad"),l=K(e,"input","maxPoolGrad"),c=K(n,"output","maxPoolGrad");B(l.rank===o.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${o.rank})`),B(o.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${o.rank}.`),B(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Jr("maxPoolGrad",i,s);const f={dy:o,input:l,output:c},h={filterSize:r,strides:a,pad:i,dimRoundingMode:s};return te.runKernel(nA,f,h)}const V2e=re({maxPoolGrad_:U2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W2e={kernelName:Cb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,a]=e,{filterSize:i,strides:s,pad:o}=n;return{x:()=>V2e(t,r,a,i,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G2e={kernelName:Eb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:a}=n,i=it(a,r.shape),o=er(r.shape,i)[1],l=ve(o);return{x:()=>{const f=r.shape.slice();i.forEach(g=>{f[g]=1});const h=ne(t,f);return Ge(ee(h,Dl(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H2e={kernelName:Nb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:a}=r,[i,s]=e,o=it(a,i.shape),l=PG(t,s,i,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q2e={kernelName:bm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>ee(t,Oe(df(n,r),"float32")),b:()=>ee(t,Oe(Fa(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K2e={kernelName:Ib,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:a}=n,i=a.map(s=>s[0]);return{x:()=>Gt(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X2e={kernelName:wm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=et(n.shape,r.shape);return{a:()=>{const o=Bn(n.shape,a);return o.length>0?ne(Ve(t,o),n.shape):t},b:()=>{const o=ee(t,vn(r1(Ge(n,r)))),l=Bn(r.shape,a);return l.length>0?ne(Ve(o,l),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y2e={kernelName:Sm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=et(n.shape,r.shape);return{a:()=>{const o=ee(t,Oe(r,"float32")),l=Bn(n.shape,a);return l.length>0?ne(Ve(o,l),n.shape):o},b:()=>{const o=ee(t,Oe(n,"float32")),l=Bn(r.shape,a);return l.length>0?ne(Ve(o,l),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z2e={kernelName:Ab,gradFunc:t=>({x:()=>vn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q2e={kernelName:Ob,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>Kn(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J2e={kernelName:$b,gradFunc:t=>({x:()=>mt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eke={kernelName:Db,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return Wu(t,r).map(i=>()=>i)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qz={kernelName:Rb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:a}=n,i=a.map(s=>s[0]);return{x:()=>Gt(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tke={kernelName:Cm,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,a]=e,i=n,s=r,o=et(i.shape,s.shape);return{a:()=>{const f=Oe(s,"float32");let h=ee(t,ee(f,Uu(i,qe(f,kt(1)))));const p=Bn(i.shape,o);return p.length>0&&(h=Ve(h,p)),ne(h,i.shape)},b:()=>{const f=Fa(i,0),h=Mr(f,vs(i),mt(i));let p=ee(t,ee(a,h));const g=Bn(s.shape,o);return g.length>0&&(p=Ve(p,g)),ne(p,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nke={kernelName:_b,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,a=Fa(n,0);return{x:()=>Mr(a,t,ee(t,r)),alpha:()=>{let i=Mr(a,mt(t),ee(t,n));const s=Bn(r.shape,t.shape);return s.length>0&&(i=Ve(i,s)),ne(i,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rke(t,e,n){const r=t.shape.slice();r[n]=1;const a=ne(e,r),i=xE(t,n,!0,!1),s=xE(t,n,!0,!0),o=ee(i,s);return ee(a,o)}function ake(t,e,n){const r=t.shape.length,a=r-n.length,i=cn(n,r);let s=t;i!=null&&(s=pt(t,i));const o=s.shape.slice(),c=o.splice(r-n.length,n.length).reduce((p,g)=>p*g,1);o.push(c);const f=s.reshape(o);let h=rke(f,e,a);if(h=h.reshape(s.shape),i!=null){const p=$l(i);h=pt(h,p)}return h}const ike={kernelName:Mb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:a}=n;let i=[];return a==null?i=r.shape.map((s,o)=>o):typeof a=="number"?i=[a]:i=a,{x:()=>ake(r,t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ske={kernelName:im,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=et(n.shape,r.shape);return{a:()=>{const o=Ge(t,Oe(r,"float32")),l=Bn(n.shape,a);return l.length>0?ne(Ve(o,l),n.shape):o},b:()=>{let o=ee(t,Oe(n,"float32"));const l=Bn(r.shape,a);l.length>0&&(o=ne(Ve(o,l),r.shape));const c=Xt(r);return vn(Ge(o,Oe(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oke={kernelName:km,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ge(t,vn(Xt(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lke={kernelName:Nm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=ee(df(n,6),Hm(n));return{x:()=>ee(t,Oe(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uke={kernelName:Em,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ee(t,Oe(Hm(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cke={kernelName:Pb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dke={kernelName:zb,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,a={dy:t,images:r};return{images:()=>te.runKernel(cA,a,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fke={kernelName:Lb,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,a={dy:t,images:r};return{images:()=>te.runKernel(uA,a,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hke={kernelName:Fb,gradFunc:(t,e,n)=>{const{dims:r}=n,a=it(r,t.shape);return{x:()=>Vu(t,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pke={kernelName:Im,gradFunc:t=>({x:()=>mt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mke={kernelName:Am,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>vn(Ge(t,ee(Uu(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gke={kernelName:jb,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Oe(mt(n),"float32"),t:()=>ee(t,Oe(n,t.dtype)),e:()=>ee(t,Oe($A(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vke={kernelName:Tm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Fa(n,kt(0)),a=kt(s1),i=kt(o1),s=ee(t,i),o=ee(ee(t,a),gs(Oe(n,"float32")));return Mr(r,s,o)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yke={kernelName:Rm,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ee(t,ee(n,qe(kt(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xke={kernelName:Dm,gradFunc:t=>({x:()=>mt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bke={kernelName:$m,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ee(kA(Oe(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wke={kernelName:Om,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ee(C6(Oe(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ske={kernelName:Bb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:a,size:i}=n,s=r.shape,[o,l]=a1(r,a,i),c=[];for(let f=0;f<t.rank;f++)c.push([o[f],s[f]-o[f]-l[f]]);return{x:()=>RA(t,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cke={kernelName:Gb,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:a}=n,i=!0,s=ee(t,r);return{logits:()=>qe(s,ee(Ve(s,[a],i),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kke={kernelName:_m,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ee(t,cf(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jz={kernelName:Vb,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:a}=n;return{x:()=>SA(t,r,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eF={kernelName:Wb,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>qr(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eke={kernelName:Mm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ge(t,ee(kr(Oe(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nke={kernelName:dA,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ee(t,ee(Oe(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ike={kernelName:Pm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=kt(2);return{a:()=>ee(t,ee(a,qe(n,r))),b:()=>ee(t,ee(a,qe(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ake={kernelName:Bm,gradFunc:t=>({x:()=>mt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tke={kernelName:Lm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=et(n.shape,r.shape);return{a:()=>{let o=t;const l=Bn(n.shape,a);return l.length>0&&(o=Ve(o,l)),ne(o,n.shape)},b:()=>{let o=t;const l=Bn(r.shape,a);return l.length>0&&(o=Ve(o,l)),ne(vn(o),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ke={kernelName:Ub,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,a=r.shape.slice(),{axis:i}=n;it(i,r.shape).forEach(c=>{a[c]=1});const o=ne(t,a),l=ee(o,Dl(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oke={kernelName:zm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ge(t,Xt(kA(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dke={kernelName:Fm,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ee(qe(kt(1),Xt(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rke={kernelName:jm,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:a}=n;return{x:()=>{let s=mt(r);if(r.rank===1)for(let o=0;o<a[0];++o)s=Ee(s,Gt(t,[o*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let o=0;o<a[0];++o)for(let l=0;l<a[1];++l)s=Ee(s,Gt(t,[o*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let o=0;o<a[0];++o)for(let l=0;l<a[1];++l)for(let c=0;c<a[2];++c)s=Ee(s,Gt(t,[o*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let o=0;o<a[0];++o)for(let l=0;l<a[1];++l)for(let c=0;c<a[2];++c)for(let f=0;f<a[3];++f)s=Ee(s,Gt(t,[o*r.shape[0],l*r.shape[1],c*r.shape[2],f*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return s}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ke={kernelName:fd,gradFunc:(t,e,n)=>{const r=n,{perm:a}=r,i=$l(a);return{x:()=>pt(t,i)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mke={kernelName:Hb,gradFunc:(t,e,n)=>{const r=n,{axis:a}=r;return{value:()=>go(t,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pke={kernelName:qb,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Lke(t,n)}}};function Lke(t,e){const n=Ol(e,mt(e)),r=IA(t,n);let a=tc(e,kt(0,"int32"));const i=r.rank-a.rank;for(let o=0;o<i;++o)a=Wr(a,o+1);a=mo(a,Dl(r.shape,"bool"));const s=mt(r);return Mr(a,r,s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zke={kernelName:Kb,gradFunc:t=>({x:()=>mt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fke=[MG,PCe,LCe,zCe,FCe,jCe,BCe,UCe,VCe,WCe,GCe,HCe,XCe,QCe,JCe,e2e,t2e,n2e,r2e,a2e,i2e,s2e,l2e,o2e,d2e,f2e,h2e,p2e,m2e,g2e,ske,v2e,y2e,x2e,b2e,w2e,C2e,S2e,k2e,E2e,N2e,I2e,A2e,T2e,$2e,O2e,D2e,R2e,_2e,L2e,Zz,Zz,z2e,B2e,W2e,G2e,H2e,q2e,K2e,X2e,Y2e,Z2e,Q2e,J2e,eke,Qz,Qz,tke,nke,ike,oke,lke,uke,cke,dke,fke,hke,pke,mke,gke,vke,yke,xke,bke,wke,Ske,Cke,kke,Jz,Jz,eF,eF,Eke,Ike,Nke,Ake,Tke,$ke,Oke,Dke,Rke,_ke,Mke,Pke,zke];for(const t of Fke)vye(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.abs=function(){return this.throwIfDisposed(),Or(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.acos=function(){return this.throwIfDisposed(),xxe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.acosh=function(){return this.throwIfDisposed(),wxe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.add=function(t){return this.throwIfDisposed(),Ee(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.all=function(t,e){return this.throwIfDisposed(),x6(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.any=function(t,e){return this.throwIfDisposed(),vE(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.argMax=function(t){return this.throwIfDisposed(),op(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.argMin=function(t){return this.throwIfDisposed(),Nxe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.asScalar=function(){return this.throwIfDisposed(),B(this.size===1,()=>"The array must have only 1 element."),ne(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.asType=function(t){return this.throwIfDisposed(),Oe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.as1D=function(){return this.throwIfDisposed(),ne(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.as2D=function(t,e){return this.throwIfDisposed(),ne(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),ne(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),ne(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.as5D=function(t,e,n,r,a){return this.throwIfDisposed(),ne(this,[t,e,n,r,a])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.asin=function(){return this.throwIfDisposed(),Axe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.asinh=function(){return this.throwIfDisposed(),$xe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.atan=function(){return this.throwIfDisposed(),Dxe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.atan2=function(t){return this.throwIfDisposed(),_xe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.atanh=function(){return this.throwIfDisposed(),Pxe(this)};ge().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),wA(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),SA(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.batchNorm=function(t,e,n,r,a){return this.throwIfDisposed(),Jb(this,t,e,n,r,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.broadcastTo=function(t){return this.throwIfDisposed(),Bh(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.cast=function(t){return this.throwIfDisposed(),Oe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.ceil=function(){return this.throwIfDisposed(),ube(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),La(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof Mn&&(t=[t]),qr([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.conv1d=function(t,e,n,r,a,i){return this.throwIfDisposed(),b6(this,t,e,n,r,a,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.conv2dTranspose=function(t,e,n,r,a){return this.throwIfDisposed(),w6(this,t,e,n,r,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.conv2d=function(t,e,n,r,a,i){return this.throwIfDisposed(),Bu(this,t,e,n,r,a,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.cos=function(){return this.throwIfDisposed(),kA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.cosh=function(){return this.throwIfDisposed(),C6(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),xE(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),k6(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),_be(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.depthwiseConv2d=function(t,e,n,r,a,i){return this.throwIfDisposed(),EA(this,t,e,n,r,a,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.dilation2d=function(t,e,n,r,a){return this.throwIfDisposed(),Lbe(this,t,e,n,r,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.divNoNan=function(t){return this.throwIfDisposed(),Ube(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.div=function(t){return this.throwIfDisposed(),Ge(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.dot=function(t){return this.throwIfDisposed(),Wbe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.elu=function(){return this.throwIfDisposed(),t1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.equal=function(t){return this.throwIfDisposed(),ms(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.erf=function(){return this.throwIfDisposed(),E6(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),n1e(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.exp=function(){return this.throwIfDisposed(),gs(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.expandDims=function(t){return this.throwIfDisposed(),Wr(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.expm1=function(){return this.throwIfDisposed(),s1e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.fft=function(){return this.throwIfDisposed(),V6(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.flatten=function(){return this.throwIfDisposed(),ne(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.floor=function(){return this.throwIfDisposed(),r1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.floorDiv=function(t){return this.throwIfDisposed(),y6(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.gather=function(t,e,n){return this.throwIfDisposed(),IA(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.greaterEqual=function(t){return this.throwIfDisposed(),tc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.greater=function(t){return this.throwIfDisposed(),Fa(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.ifft=function(){return this.throwIfDisposed(),bE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.irfft=function(){return this.throwIfDisposed(),Jwe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.isFinite=function(){return this.throwIfDisposed(),m1e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.isInf=function(){return this.throwIfDisposed(),v1e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.isNaN=function(){return this.throwIfDisposed(),x1e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.leakyRelu=function(t){return this.throwIfDisposed(),TA(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.lessEqual=function(t){return this.throwIfDisposed(),df(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.less=function(t){return this.throwIfDisposed(),Iy(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),k1e(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.logSigmoid=function(){return this.throwIfDisposed(),O1e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.logSoftmax=function(t){return this.throwIfDisposed(),$6(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),O6(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.log=function(){return this.throwIfDisposed(),vs(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.log1p=function(){return this.throwIfDisposed(),T6(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.logicalAnd=function(t){return this.throwIfDisposed(),mo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.logicalNot=function(){return this.throwIfDisposed(),$A(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.logicalOr=function(t){return this.throwIfDisposed(),D6(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.logicalXor=function(t){return this.throwIfDisposed(),F1e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),St(this,t,e,n)};ge().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),OA(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.max=function(t,e){return this.throwIfDisposed(),Mi(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.maximum=function(t){return this.throwIfDisposed(),Ol(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.mean=function(t,e){return this.throwIfDisposed(),In(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.min=function(t,e){return this.throwIfDisposed(),Ny(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.minimum=function(t){return this.throwIfDisposed(),cp(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),q1e(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.mod=function(t){return this.throwIfDisposed(),X1e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.mul=function(t){return this.throwIfDisposed(),ee(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.neg=function(){return this.throwIfDisposed(),vn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.norm=function(t,e,n){return this.throwIfDisposed(),n1(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.notEqual=function(t){return this.throwIfDisposed(),Ay(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),R6(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.onesLike=function(){return this.throwIfDisposed(),pi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.pad=function(t,e){return this.throwIfDisposed(),RA(this,t,e)};ge().prototype.pool=function(t,e,n,r,a,i){return this.throwIfDisposed(),iwe(this,t,e,n,r,a,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.pow=function(t){return this.throwIfDisposed(),Uu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.prelu=function(t){return this.throwIfDisposed(),MA(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.prod=function(t,e){return this.throwIfDisposed(),lwe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.reciprocal=function(){return this.throwIfDisposed(),Rwe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.relu=function(){return this.throwIfDisposed(),nc(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.relu6=function(){return this.throwIfDisposed(),M6(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.reshapeAs=function(t){return this.throwIfDisposed(),ne(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.reshape=function(t){return this.throwIfDisposed(),ne(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),K6(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),X6(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.reverse=function(t){return this.throwIfDisposed(),Vu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.rfft=function(){return this.throwIfDisposed(),nSe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.round=function(){return this.throwIfDisposed(),P6(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.rsqrt=function(){return this.throwIfDisposed(),L6(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.selu=function(){return this.throwIfDisposed(),z6(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.separableConv2d=function(t,e,n,r,a,i){return this.throwIfDisposed(),F6(this,t,e,n,r,a,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.sigmoid=function(){return this.throwIfDisposed(),cf(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.sign=function(){return this.throwIfDisposed(),Uwe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.sin=function(){return this.throwIfDisposed(),j6(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.sinh=function(){return this.throwIfDisposed(),B6(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.slice=function(t,e){return this.throwIfDisposed(),Gt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.softmax=function(t){return this.throwIfDisposed(),FA(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.softplus=function(){return this.throwIfDisposed(),Vm(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),_A(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.split=function(t,e){return this.throwIfDisposed(),_a(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.sqrt=function(){return this.throwIfDisposed(),kr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.square=function(){return this.throwIfDisposed(),Xt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.squaredDifference=function(t){return this.throwIfDisposed(),aSe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.squeeze=function(t){return this.throwIfDisposed(),Gm(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof Mn?[this,t]:[this,...t];return go(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.step=function(t){return this.throwIfDisposed(),Hm(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.stridedSlice=function(t,e,n,r,a,i,s,o){return this.throwIfDisposed(),uSe(this,t,e,n,r,a,i,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.sub=function(t){return this.throwIfDisposed(),qe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.sum=function(t,e){return this.throwIfDisposed(),Ve(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.tan=function(){return this.throwIfDisposed(),dSe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.tanh=function(){return this.throwIfDisposed(),Qb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.tile=function(t){return this.throwIfDisposed(),Di(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.toBool=function(){return this.throwIfDisposed(),Oe(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.toFloat=function(){return this.throwIfDisposed(),Oe(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.toInt=function(){return this.throwIfDisposed(),Oe(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.topk=function(t,e){return this.throwIfDisposed(),pSe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.transpose=function(t){return this.throwIfDisposed(),pt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.unique=function(t){return this.throwIfDisposed(),vSe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),H6(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.unstack=function(t){return this.throwIfDisposed(),Wu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.where=function(t,e){return this.throwIfDisposed(),Mr(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.zerosLike=function(){return this.throwIfDisposed(),mt(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ts extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ts.prototype)}}class si extends Error{constructor(e){super(e),Object.setPrototypeOf(this,si.prototype)}}class Q extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Q.prototype)}}class nt extends Error{constructor(e){super(e),Object.setPrototypeOf(this,nt.prototype)}}class wT extends Error{constructor(e){super(e),Object.setPrototypeOf(this,wT.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class LG{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Gu(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function ns(t,e){if(!t)throw new wT(e)}function tF(t,e){let n=0;for(const r of t)r===e&&n++;return n}function Gr(t){return t.length===1?t[0]:t}function Ot(t){return Array.isArray(t)?t:[t]}function Xs(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function cu(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let ei={};function ST(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function CE(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>CE(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:CE(r))}}}function Ym(t,e={},n={},r="object",a=!1){if(typeof t=="string"){const i=t;let s;if(i in n)s=n[i];else if(i in ei)s=ei[i];else if(s=e[i],s==null)throw new Q(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return s}else{const i=t;if(i.className==null||i.config==null)throw new Q(`${r}: Improper config format: ${JSON.stringify(i)}.
'className' and 'config' must set.`);const s=i.className;let o,l;if(s in n?[o,l]=n[s]:s in ei?[o,l]=ei.className:s in e&&([o,l]=e[s]),o==null)throw new Q(`Unknown ${r}: ${s}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const c={};for(const g of Object.keys(ei))c[g]=ei[g];for(const g of Object.keys(n))c[g]=n[g];const f=i.config;f.customObjects=c;const h=Object.assign({},ei);for(const g of Object.keys(n))ei[g]=n[g];CE(i.config);const p=l(o,i.config,n,a);return ei=Object.assign({},h),p}else{const c=Object.assign({},ei);for(const h of Object.keys(n))ei[h]=n[h];const f=new o(i.config);return ei=Object.assign({},c),f}}}function jke(t,e){return t<e?-1:t>e?1:0}function Kv(t,e){return-1*jke(t,e)}function dl(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function Bke(t){if(t==null)throw new Q(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function ac(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new Q(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function CT(t,e,n=0,r=1/0){return ns(n>=0),ns(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(a=>typeof a===e)}function Xn(t,e){Array.isArray(t)?(B(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>Xn(n,`element ${r+1} of ${e}`))):B(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${zG(t)}.`)}function zG(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>zG(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function Uke(t,e,n){let r=n!=null?n():Ur(),a;return(...s)=>{const o=n!=null?n():Ur();return o-r<e||(r=o,a=t(...s)),a}}function FG(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Vke=0;function jG(){return Vke++}const Xv={};function l1(t=""){return t in Xv||(Xv[t]=0),Xv[t]+=1,t+Xv[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Wke=["channelsFirst","channelsLast"],Gke=["nearest","bilinear"],Hke=["valid","same","causal"],qke=["max","avg"],Kke=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Jc=new Map;function Sn(t){ac(Wke,"DataFormat",t)}function Xke(t){ac(Gke,"InterpolationFormat",t)}function ja(t){ac(Hke,"PaddingMode",t)}function BG(t){ac(qke,"PoolMode",t)}const Uh=[],nF="/";function ku(t,e){Uh.push(t);try{const n=e();return Uh.pop(),n}catch(n){throw Uh.pop(),n}}function Yke(){return Uh.length===0?"":Uh.join(nF)+nF}function UG(t){if(!WG(t))throw new Error("Not a valid tensor name: '"+t+"'");return Yke()+t}function VG(t){if(!WG(t))throw new Error("Not a valid tensor name: '"+t+"'");Jc.has(t)||Jc.set(t,0);const e=Jc.get(t);if(Jc.set(t,Jc.get(t)+1),e>0){const n=`${t}_${e}`;return Jc.set(n,1),n}else return t}const Zke=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function WG(t){return!!t.match(Zke)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Qke(t){return t===parseInt(t.toString(),10)}function fl(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let a=e;a<n;++a)r*=t[a];return r}function $d(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function vl(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function Fi(t,e){if(e<t)throw new Q(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let F2;function Pn(){return F2==null&&(F2=Vye().epsilon()),F2}function ji(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ds(t,e){return Oe(t,e)}function Zm(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),ne(t,n)}function Jke(t,e){return le(()=>{if(t.shape.length!==2)throw new Q(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=Zm(t,1);return kE(n,[1,e,1])})}function eEe(t){const e=[fl(t.shape)];return ne(t,e)}function tEe(t){if(t.rank<=1)throw new Q(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],fl(t.shape,1)];return ne(t,e)}function Eu(t,e,n){return le(()=>{switch(t.rank){case 1:return LA(t,e,n);case 2:return U6(t,[e,0],[n,t.shape[1]]);case 3:return zA(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return $y(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Gt(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Gt(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new Q(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function j2(t,e,n){return le(()=>{switch(t.rank){case 1:return LA(t,e,n);case 2:return U6(t,[0,e],[t.shape[0],n]);case 3:return zA(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return $y(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new Q(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function Yv(t,e,n,r){return le(()=>{switch(t.rank){case 1:return LA(t,e,n);case 2:switch(r){case 1:return Eu(t,e,n);case 2:return j2(t,e,n);default:throw new Q(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Eu(t,e,n);case 2:return zA(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return j2(t,e,n);default:throw new Q(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Eu(t,e,n);case 2:return $y(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return $y(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return j2(t,e,n);default:throw new Q(`The axis is not within the rank of the tensor ${r}`)}default:throw new Q(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function kT(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),qr(t,e)}function rF(t,e){switch(t.rank){case 1:return fbe([t,e]);case 2:return pbe([t,e],0);case 3:return gbe([t,e],0);case 4:return ybe([t,e],0);default:throw new Q(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function kE(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new Q(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return Di(t,e)}function u1(t,e=0,n=1,r,a){return Twe(t,e,n,r,a)}function fs(t,e,n,r){if(t.rank<2||e.rank<2)throw new nt(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const a=t.shape.slice(-1)[0],i=e.shape.slice(-2)[0];if(a!==i)throw new nt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return Vz({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?EE(t.rank,r,ji()):null,activation:n});{const a=t.shape.slice(),i=a.pop();t=ne(t,[-1,i]);const s=e.shape.slice(),o=s.pop(),l=s.pop(),c=[...s,o],f=Array.from({length:e.rank},(v,x)=>x===0?e.rank-2:x<=e.rank-2?x-1:x);e=ne(pt(e,f),[l,-1]);const h=[...a,...c];return ne(Vz({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?EE(t.rank,r,ji()):null,activation:n}),h)}}function GG(t,e,n){return le(()=>(Array.isArray(e)?e=fa(e,"int32"):e=Oe(e,"int32"),IA(t,e,n)))}function Qm(t){return ee(t,t)}function EE(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new Q(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?ne(e,[1,r[0],1,1,1]):ne(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?ne(e,[1,1,1,1,r[0]]):ne(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?ne(e,[1,r[0],1,1]):ne(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?ne(e,[1,1,1,r[0]]):ne(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?ne(e,[1,r[0],1]):ne(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?ne(e,[1,1,r[0]]):ne(e,[1].concat(r))}else if(t<3)return e;throw new Q(`Unsupported input rank by biasAdd: ${e.rank}`)}function Wi(t,e,n){return le(()=>(n==null&&(n=ji()),Sn(n),Ee(t,EE(t.rank,e,n))))}function nEe(t,e=1){if(e!==1)throw new nt(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return t1(t)}function rEe(t){return le(()=>Ge(t,Ee(Or(t),1)))}function HG(t,e,n,r){return le(()=>kSe(t,e,n,r))}function aEe(t){return le(()=>{const e=Ee(.5,ee(.2,t));return La(e,0,1)})}function Jm(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const iEe=["fanIn","fanOut","fanAvg"],sEe=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function oEe(t){ac(iEe,"FanMode",t)}function lEe(t){ac(sEe,"Distribution",t)}class vi extends hf{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class qG extends vi{apply(e,n){return Kn(e,n)}}qG.className="Zeros";ke(qG);class ET extends vi{apply(e,n){return Dl(e,n)}}ET.className="Ones";ke(ET);class KG extends vi{constructor(e){if(super(),typeof e!="object")throw new Q(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new Q(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return le(()=>ee(kt(this.value),Dl(e,n)))}getConfig(){return{value:this.value}}}KG.className="Constant";ke(KG);class XG extends vi{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return Wm(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}XG.className="RandomUniform";ke(XG);class YG extends vi{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new nt(`randomNormal does not support dType ${n}.`);return u1(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}YG.className="RandomNormal";ke(YG);class ZG extends vi{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new nt(`truncatedNormal does not support dType ${n}.`);return G6(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}ZG.className="TruncatedNormal";ke(ZG);class QG extends vi{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return le(()=>{if(e.length!==2||e[0]!==e[1])throw new Q("Identity matrix initializer can only be used for 2D square matrices.");return ee(this.gain,A6(e[0]))})}getConfig(){return{gain:this.gain}}}QG.className="Identity";ke(QG);function uEe(t,e="channelsLast"){let n,r;if(Sn(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const a=fl(t,2);n=t[1]*a,r=t[0]*a}else if(e==="channelsLast"){const a=fl(t,0,t.length-2);n=t[t.length-2]*a,r=t[t.length-1]*a}}else{const a=fl(t);n=Math.sqrt(a),r=Math.sqrt(a)}return[n,r]}class ma extends vi{constructor(e){if(super(),e.scale<0)throw new Q(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,oEe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,lEe(this.distribution),this.seed=e.seed}apply(e,n){const r=uEe(e),a=r[0],i=r[1];let s=this.scale;if(this.mode==="fanIn"?s/=Math.max(1,a):this.mode==="fanOut"?s/=Math.max(1,i):s/=Math.max(1,(a+i)/2),this.distribution==="normal"){const o=Math.sqrt(s);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new nt(`${this.getClassName()} does not support dType ${n}.`);return G6(e,0,o,n,this.seed)}else{const o=Math.sqrt(3*s);return Wm(e,-o,o,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}ma.className="VarianceScaling";ke(ma);class NT extends ma{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ma.className}}NT.className="GlorotUniform";ke(NT);class IT extends ma{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ma.className}}IT.className="GlorotNormal";ke(IT);class AT extends ma{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ma.className}}AT.className="HeNormal";ke(AT);class TT extends ma{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ma.className}}TT.className="HeUniform";ke(TT);class $T extends ma{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ma.className}}$T.className="LeCunNormal";ke($T);class OT extends ma{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ma.className}}OT.className="LeCunUniform";ke(OT);class JG extends vi{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return le(()=>{if(e.length<2)throw new nt("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=ve(e.slice(0,-1)),a=e[e.length-1],i=r*a;i>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${i}) elements: Slowness may result.`);const s=[Math.max(a,r),Math.min(a,r)],o=u1(s,0,1,n,this.seed),l=bCe.qr(o,!1);let c=l[0];const h=l[1].flatten().stridedSlice([0],[Math.min(a,r)*Math.min(a,r)],[Math.min(a,r)+1]);return c=ee(c,h.sign()),r<a&&(c=c.transpose()),ee(kt(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}JG.className="Orthogonal";ke(JG);const aF={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function iF(t,e={}){return Ym(t,ai.getMap().classNameMap,e,"initializer")}function ln(t){return ST(t)}function nn(t){if(typeof t=="string"){const e=t in aF?aF[t]:t;if(e==="GlorotNormal")return new IT;if(e==="GlorotUniform")return new NT;if(e==="HeNormal")return new AT;if(e==="HeUniform")return new TT;if(e==="LeCunNormal")return new $T;if(e==="LeCunUniform")return new OT;{const n={};return n.className=e,n.config={},iF(n)}}else return t instanceof vi?t:iF(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function NE(t){return Array.isArray(t)&&Array.isArray(t[0])}function Oy(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function Ke(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new Q(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function yt(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new Q(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Dy(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,a)=>r*a);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const sF="Variable";class cEe{constructor(e,n="float32",r=sF,a=!0,i=null){this.dtype=n??"float32",this.shape=e.shape,this.id=jG(),r=r??sF,this.originalName=UG(r),this.name=VG(this.originalName),this.trainable_=a,this.constraint=i,this.val=bSe(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),dEe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function dEe(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function IE(t){return t.map(e=>e.read())}function DT(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ln{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class ys{constructor(e,n,r,a,i,s,o){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=i,this.outputTensorIndex=o,this.id=jG(),s!=null&&(this.originalName=UG(s),this.name=VG(this.originalName)),this.rank=n.length}}let fEe=0;class c1{constructor(e,n){this.callArgs=n,this.id=fEe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let hEe=0;class st extends hf{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=hEe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=Xs(r)+"_"+l1(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let i=null;e.batchSize!=null&&(i=e.batchSize),r=[i].concat(e.inputShape)}this.batchInputShape=r;let a=e.dtype;a==null&&(a=e.inputDType),a==null&&(a="float32"),this.dtype=a}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new si(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new Q(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Gr(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Gr(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new ts(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new ts(`Layer ${this.name} is not connected, no input to return.`);return Gr(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new ts(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new ts(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Gr(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=Ot(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=Ot(this.inputSpec);if(n.length!==r.length)throw new Q(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let a=0;a<n.length;a++){const i=n[a],s=r[a];if(s==null)continue;const o=i.rank;if(s.ndim!=null&&o!==s.ndim)throw new Q(`Input ${a} is incompatible with layer ${this.name}: expected ndim=${s.ndim}, found ndim=${o}`);if(s.maxNDim!=null&&o>s.maxNDim)throw new Q(`Input ${a} is incompatible with layer ${this.name}: expected max_ndim=${s.maxNDim}, found ndim=${o}`);if(s.minNDim!=null&&o<s.minNDim)throw new Q(`Input ${a} is incompatible with layer ${this.name}: expected min_ndim=${s.minNDim}, found ndim=${o}.`);if(s.dtype!=null&&i.dtype!==s.dtype)throw new Q(`Input ${a} is incompatible with layer ${this.name} : expected dtype=${s.dtype}, found dtype=${i.dtype}.`);if(s.axes){const l=i.shape;for(const c in s.axes){const f=Number(c),h=s.axes[c],p=f>=0?l[f]:l[l.length+f];if(h!=null&&[h,null].indexOf(p)===-1)throw new Q(`Input ${a} is incompatible with layer ${this.name}: expected axis ${f} of input shape to have value ${h} but got shape ${l}.`)}}if(s.shape!=null)for(let l=0;l<s.shape.length;++l){const c=s.shape[l],f=i.shape[l];if(c!=null&&f!=null&&c!==f)throw new Q(`Input ${a} is incompatible with layer ${this.name}: expected shape=${s.shape}, found shape=${i.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=Ot(e),a=gEe(e),i=vEe(e);if(a===i)throw new Q("Arguments to apply() must be all SymbolicTensors or all Tensors");return ku(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const s=[];for(const o of Ot(e))s.push(o.shape);this.build(Gr(s)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let s=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,s);const o=Ot(s),l=[];for(let c of o)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(s=Gr(l),this.activityRegularizer!=null)throw new nt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return s}else{const s=pEe(e),o=this.computeOutputShape(s);let l;const c=mEe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?s[0]:s),o!=null&&o.length>0&&Array.isArray(o[0])?l=o.map((f,h)=>new ys(c,f,this,Ot(e),n,this.name,h)):l=new ys(c,o,this,Ot(e),n,this.name),this.addInboundNode(e,l,null,null,s,o,n),this._refCount++,this.activityRegularizer!=null)throw new nt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,a)=>{r!=null&&e[a]!=null&&e[a]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new ts(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new ts(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new si(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Dy(this.weights)}build(e){this.built=!0}getWeights(e=!1){return IE(e?this.trainableWeights:this.weights)}setWeights(e){le(()=>{const n=this.weights;if(n.length!==e.length)throw new Q(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],a=IE(n);for(let i=0;i<a.length;++i){const s=a[i],o=n[i],l=e[i];if(!It(s.shape,l.shape))throw new Q(`Layer weight shape ${s.shape} not compatible with provided weight shape ${l.shape}`);r.push([o,l])}DT(r)})}addWeight(e,n,r,a,i,s,o,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new Q(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(a=l!=null?l():nn("zeros"));const c=a.apply(n,r),f=new cEe(c,r,e,s,o);return c.dispose(),i!=null&&this.addLoss(()=>i.apply(f.read())),s==null&&(s=!0),s?this._trainableWeights.push(f):this._nonTrainableWeights.push(f),f}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=Ot(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const a=this.computeMask(e,r),i=Ot(n),s=Ot(a);if(i.length!==s.length)throw new Error(`${this.name} outputs ${i.length} tensors but ${i.length} masks for those tensors`);for(let o=0;o<i.length;o++)i[o].kerasMask=s[o]}addInboundNode(e,n,r,a,i,s,o=null){const l=Ot(e);n=Ot(n),r=Ot(r),a=Ot(a),i=Oy(i),s=Oy(s);const c=[],f=[],h=[];for(const p of l)c.push(p.sourceLayer),f.push(p.nodeIndex),h.push(p.tensorIndex);new c1({outboundLayer:this,inboundLayers:c,nodeIndices:f,tensorIndices:h,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:a,inputShapes:i,outputShapes:s},o);for(let p=0;p<n.length;p++)n[p].sourceLayer=this,n[p].nodeIndex=this.inboundNodes.length-1,n[p].tensorIndex=p}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function pEe(t){t=Ot(t);const e=[];for(const n of t)e.push(n.shape);return Gr(e)}function mEe(t){return"float32"}function e8(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const a=[];for(let i=0;i<r.inboundLayers.length;i++){const s=r.inputTensors[i],o=r.inboundLayers[i],l=r.nodeIndices[i],c=e8(s,o,l);for(const f of c)a.indexOf(f)===-1&&a.push(f)}return a}}}function gEe(t){let e=!0;for(const n of Ot(t))if(!(n instanceof ys)){e=!1;break}return e}function vEe(t){let e=!0;for(const n of Ot(t))if(n instanceof ys){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class eg extends st{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:l1("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new Q("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new Q("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new Q("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const a=new ys(this.dtype,this.batchInputShape,this,[],{},this.name);a.nodeIndex=0,a.tensorIndex=0,new c1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[a],outputTensors:[a],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new Q(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}eg.className="InputLayer";ke(eg);function yEe(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new Q("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new eg({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function xEe(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return Oe(e,t.dtype)}catch{throw new Q(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class sl{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof sl)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=xEe(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new Q(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof ys){if(this.id2Value[e.id]==null)throw new Q(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new Q(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof ys){if(this.id2Value[e.id]==null)throw new Q(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new Q(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&lt(this.id2Mask)}}const Ry=new LG,_y=new LG;function bEe(t){Ry!=null&&Ry.setMaxEntries(t),_y!=null&&_y.setMaxEntries(t)}function Mh(t,e,n,r){const a=n==null?!1:n.training,i=Array.isArray(t),s=i?t:[t],o=s.map(v=>v.name),l=[],c=e.names();for(const v of o)c.indexOf(v)!==-1?l.push(e.getValue(v)):l.push(null);const f=o.join(",")+"|"+e.names().sort().join(",");let h=Ry.get(f),p;if(h==null){const v=wEe(s,e);h=v.sorted,p=v.recipientCounts,Ry.put(f,h),_y.put(f,p)}p={},a||Object.assign(p,_y.get(f));const g=new sl(e);for(let v=0;v<h.length;++v){const x=h[v],b=x.sourceLayer;if(b instanceof eg)continue;const w=[],S=[],k=[];let N=!1;for(const M of x.inputs){const P=g.getValue(M),$=g.getMask(M);w.push(P),S.push($),$!=null&&(N=!0),a||(p[M.name]--,p[M.name]===0&&!e.hasKey(M)&&o.indexOf(M.name)===-1&&!P.isDisposed&&M.sourceLayer.stateful!==!0&&k.push(P))}N&&(n=n||{},n.mask=S[0]);const I=Ot(b.apply(w,n));let T=null;b.supportsMasking&&(T=b.computeMask(w,S));const R=CEe(x),_=Array.isArray(R)?R:[R];for(let M=0;M<_.length;++M){g.hasKey(_[M])||g.add(_[M],I[M],Array.isArray(T)?T[0]:T);const P=o.indexOf(_[M].name);P!==-1&&(l[P]=I[M])}a||lt(k)}return g.disposeMasks(),i?l:l[0]}function wEe(t,e){B(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const a=oF(t[0],e);n=a.sorted,r=a.recipientMap}else{const a=new Set;for(const i of t){const{sorted:s,recipientMap:o}=oF(i,e);for(const l of s)a.has(l.name)||(n.push(l),a.add(l.name));for(const l in o)r[l]==null&&(r[l]=new Set),o[l].forEach(c=>r[l].add(c))}}return{sorted:n,recipientCounts:SEe(r)}}function SEe(t){const e={};for(const n in t)e[n]=t[n].size;return e}function oF(t,e){const n=new Set,r=[],a={};for(const o of e.names())n.add(o);const i=[],s=[];for(i.push(t);i.length>0;){const o=i[i.length-1];if(n.has(o.name)){i.pop();continue}const l=s[s.length-1]===i.length-1;if(o.inputs.length===0||l)i.pop(),r.push(o),n.add(o.name),l&&s.pop();else{s.push(i.length-1);for(const c of o.inputs)a[c.name]==null&&(a[c.name]=new Set),a[c.name].add(o.name),!n.has(c.name)&&i.push(c)}}return{sorted:r,recipientMap:a}}function CEe(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const a of t.sourceLayer.inboundNodes[r].outputTensors)if(a.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kEe=fe();kEe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,bEe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function RT(t,e){return le(()=>kr(Ve(ee(t,t),e,!0)))}class tg extends hf{getConfig(){return{}}}class t8 extends tg{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return le(()=>{const n=RT(e,this.axis),r=La(n,0,this.maxValue);return ee(e,Ge(r,Ee(Pn(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}t8.className="MaxNorm";ke(t8);class n8 extends tg{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return le(()=>Ge(e,Ee(Pn(),RT(e,this.axis))))}getConfig(){return{axis:this.axis}}}n8.className="UnitNorm";ke(n8);class r8 extends tg{apply(e){return nc(e)}}r8.className="NonNeg";ke(r8);class a8 extends tg{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return le(()=>{const n=RT(e,this.axis),r=Ee(ee(this.rate,La(n,this.minValue,this.maxValue)),ee(1-this.rate,n));return ee(e,Ge(r,Ee(Pn(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}a8.className="MinMaxNorm";ke(a8);const lF={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Fn(t){return ST(t)}function uF(t,e={}){return Ym(t,ai.getMap().classNameMap,e,"constraint")}function jn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in lF?lF[t]:t,config:{}};return uF(n)}else return t instanceof tg?t:uF(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function ru(t){if(t==null)return;const e=[],n=[],r=[];for(const a in t){const i=t[a];if(typeof i!="number"){const s=i;e.push(s.data()),n.push(a),r.push(s)}}if(e.length>0){const a=await Promise.all(e);for(let i=0;i<a.length;++i)t[n[i]]=a[i][0];lt(r)}}function i8(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var cF;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(cF||(cF={}));const EEe=125;class fp{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class NEe{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class IEe extends fp{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const a in n){const i=n[a];if(typeof i=="number")this.totals.hasOwnProperty(a)||(this.totals[a]=0),this.totals[a]=this.totals[a]+i*r;else{let s;a in this.totals?s=this.totals[a]:this.totals[a]=0;const o=le(()=>Ee(this.totals[a],ee(i,r)));this.totals[a]=o,s!=null&&s.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:le(()=>{const a=ee(Ge(1,this.seen),this.totals[r]);n[r]=a,this.totals[r].dispose(),us(n[r])}))}}class AEe extends fp{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const i in this.history){const s=this.history[i];for(let o=0;o<s.length;++o)if(typeof s[o]!="number"){const l=s[o];e.push(l.data()),n.push(i),r.push(o)}}const a=await Promise.all(e);for(let i=0;i<a.length;++i)this.history[n[i]][r[i]].dispose(),this.history[n[i]][r[i]]=a[i][0]}}class TEe extends fp{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||cG,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=EEe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");rE(this.yieldEvery)&&(this.maybeWait=Uke(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const a=[];this.yield!=null&&(await ru(r),a.push(this.yield(e,n,r))),a.push(this.nextFrameFunc()),await Promise.all(a)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await ru(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await ru(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await ru(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await ru(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):rE(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await ru(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await ru(e),await this.trainEnd(e))}}function s8(t,e){return t==null&&(t={}),t instanceof fp?[t]:Array.isArray(t)&&t[0]instanceof fp?t:Ot(t).map(r=>new TEe(r,e))}class ri{constructor(){}static registerCallbackConstructor(e,n){B(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),ri.checkForDuplicate(n),ri.constructors[e]==null&&(ri.constructors[e]=[]),ri.constructors[e].push(n)}static checkForDuplicate(e){for(const n in ri.constructors)ri.constructors[+n].forEach(a=>{if(a===e)throw new Q("Duplicate callback constructor.")})}static clear(){ri.constructors={}}static createCallbacks(e){const n=[];for(const r in ri.constructors){const a=+r;e>=a&&n.push(...ri.constructors[a])}return n.map(r=>new r)}}ri.constructors={};function o8(t,e,n,r,a,i,s,o,l){const c=new AEe,f=[new IEe,...ri.createCallbacks(e)];t!=null&&f.push(...t),f.push(c);const h=new NEe(f);return h.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:s,verbose:e,doValidation:o,metrics:l}),{callbackList:h,history:c}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function io(t,e={},n=!1){return Ym(t,ai.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function My(t,e){return le(()=>{t.dtype!=="float32"&&(t=Oe(t,"float32"));const n=Ve(Qm(t),e,!0),r=e1(n.shape,Pn()),a=kr(Ol(n,r));return Ge(t,a)})}function d1(t,e){return le(()=>In(Qm(qe(e,t)),-1))}function _T(t,e){return le(()=>In(Or(qe(e,t)),-1))}function MT(t,e){return le(()=>{const n=qe(t,e),r=La(Or(t),Pn(),Number.MAX_VALUE),a=Or(Ge(n,r));return ee(100,In(a,-1))})}function $Ee(t,e){return le(()=>{const n=La(e,Pn(),Number.MAX_VALUE),r=vs(Ee(1,n)),a=La(t,Pn(),Number.MAX_VALUE),i=vs(Ee(1,a));return In(Qm(qe(r,i)),-1)})}function OEe(t,e){return le(()=>{const n=Ol(0,qe(1,ee(t,e)));return In(Qm(n),-1)})}function DEe(t,e){return le(()=>{const n=Ol(0,qe(1,ee(t,e)));return In(n,-1)})}function REe(t,e){return le(()=>{const n=Ve(ee(t,e),-1),r=Mi(ee(qe(1,t),e),-1);return Ol(0,Ee(1,qe(r,n)))})}function _Ee(t,e){return le(()=>{const n=Math.log(2),r=qe(e,t),a=qe(Ee(r,Vm(ee(-2,r))),n);return In(a,-1)})}function hp(t,e,n=!1){return le(()=>{if(n)e=FA(e);else{const r=Ve(e,e.shape.length-1,!0);e=Ge(e,r)}return e=La(e,Pn(),1-Pn()),vn(Ve(ee(Oe(t,"float32"),vs(e)),e.shape.length-1))})}function Py(t,e,n=!1){return le(()=>{const r=Oe(r1(eEe(t)),"int32");e=La(e,Pn(),1-Pn());const a=e.shape,i=ne(R6(r,a[a.length-1]),a);return hp(i,e,n)})}function MEe(t,e){if(!It(t.shape,e.shape))throw new Q(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return le(()=>{const n=nc(e),r=vn(Or(e));return Ee(qe(n,ee(e,t)),T6(gs(r)))})}function f1(t,e){return le(()=>{let n;return n=La(e,Pn(),1-Pn()),n=vs(Ge(n,qe(1,n))),In(MEe(t,n),-1)})}function PEe(t,e){return le(()=>{const n=La(t,Pn(),1),r=La(e,Pn(),1);return Ve(ee(t,vs(Ge(n,r))),-1)})}function LEe(t,e){return le(()=>{const n=vs(Ee(Pn(),e));return In(qe(e,ee(t,n)),-1)})}function l8(t,e){return le(()=>{const n=My(t,-1),r=My(e,-1),a=ee(n,r);return vn(Ve(a,-1))})}const Ly={meanSquaredError:d1,meanAbsoluteError:_T,meanAbsolutePercentageError:MT,meanSquaredLogarithmicError:$Ee,squaredHinge:OEe,hinge:DEe,categoricalHinge:REe,logcosh:_Ee,categoricalCrossentropy:hp,sparseCategoricalCrossentropy:Py,binaryCrossentropy:f1,kullbackLeiblerDivergence:PEe,poisson:LEe,cosineProximity:l8};function B2(t){if(typeof t=="string"){if(t in Ly)return Ly[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new Q(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function u8(t,e){return le(()=>{const n=ee(.5,pi(e)),r=ds(Fa(e,n),t.dtype);return In(ms(t,r),-1)})}function c8(t,e){return le(()=>ds(ms(op(t,-1),op(e,-1)),"float32"))}function zEe(t,e){return le(()=>Oe(Ve(mo(ms(t,1),ms(e,1))),"float32"))}function FEe(t,e){return le(()=>Oe(Ve(mo(ms(t,0),ms(e,1))),"float32"))}function jEe(t,e){return le(()=>{const n=zEe(t,e),r=FEe(t,e),a=Ee(n,r);return Oe(Mr(Fa(a,0),Ge(n,a),0),"float32")})}function BEe(t,e){return f1(t,e)}function UEe(t,e){return t.rank===e.rank&&(t=Gm(t,[t.rank-1])),e=op(e,-1),e.dtype!==t.dtype&&(e=Oe(e,t.dtype)),Oe(ms(t,e),"float32")}const VEe=d1,WEe=d1,GEe=_T,HEe=_T,qEe=MT,KEe=MT,d8=hp,XEe=l8,f8=Py,zy={binaryAccuracy:u8,categoricalAccuracy:c8,precision:jEe,categoricalCrossentropy:d8,sparseCategoricalCrossentropy:f8,mse:VEe,MSE:WEe,mae:GEe,MAE:HEe,mape:qEe,MAPE:KEe,cosine:XEe};function YEe(t){if(typeof t=="string"&&t in zy)return zy[t];if(typeof t!="string"&&t!=null)return t;throw new Q(`Unknown metric ${t}`)}function Zv(t){if(ns(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(Ly))if(Ly[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(zy))if(zy[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ZEe(t){const e={Adagrad:()=>tl.adagrad(.01),Adadelta:()=>tl.adadelta(1,.95,Pn()),Adam:()=>tl.adam(.001,.9,.999,Pn()),Adamax:()=>tl.adamax(.002,.9,.999,Pn(),0),RMSProp:()=>tl.rmsprop(.001,.9,0,Pn()),SGD:()=>tl.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new Q(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const dF=1*1024*1024;function fF(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!AE(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>dF&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${dF}.`)}}function AE(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!AE(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!AE(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function QEe(t,e,n,r=console.log){const a=eNe(t),i=["Layer (type)","Input Shape","Output shape","Param #"];a?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(f=>Math.floor(e*f)));let s;if(!a){i.push("Receives inputs"),s=[];for(const f in t.nodesByDepth)s.push(...t.nodesByDepth[f])}r("_".repeat(e)),Fy(i,n,r),r("=".repeat(e));const o=t.layers;for(let f=0;f<o.length;++f)a?tNe(o[f],n,r):nNe(o[f],n,s,r),r((f===o.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=JEe(t),c=Dy(t.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(e))}function JEe(t){let e;return t.collectedTrainableWeights!=null?e=Dy(t.collectedTrainableWeights):e=Dy(t.trainableWeights),e}function eNe(t){let e=!0;const n=[],r=[];for(const a in t.nodesByDepth)n.push(t.nodesByDepth[a]);for(const a of n){if(a.length>1||a.length===1&&a[0].inboundLayers.length>1){e=!1;break}r.push(...a)}if(e)for(const a of t.layers){let i=!1;for(const s of a.inboundNodes)if(r.indexOf(s)!==-1)if(i){e=!1;break}else i=!0;if(!e)break}return e}function Fy(t,e,n=console.log){let r="";for(let a=0;a<t.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r+=t[a],r=r.slice(0,e[a]),r+=" ".repeat(e[a]-r.length);n(r)}function tNe(t,e,n){let r,a;try{a=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{a="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const i=t.name,s=t.getClassName(),o=[`${i} (${s})`,a,r,t.countParams().toString()];Fy(o,e,n)}function nNe(t,e,n,r){let a,i;try{i=t.inboundNodes.map(h=>JSON.stringify(h.inputShapes)).join(",")}catch{i="multiple"}try{a=JSON.stringify(t.outputShape)}catch{a="multiple"}const s=[];for(const h of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(h)===-1))for(let p=0;p<h.inboundLayers.length;++p){const g=h.inboundLayers[p].name,v=h.nodeIndices[p],x=h.tensorIndices[p];s.push(`${g}[${v}][${x}]`)}const o=t.name,l=t.getClassName(),c=s.length===0?"":s[0],f=[`${o} (${l})`,i,a,t.countParams().toString(),c];Fy(f,e,r);for(let h=1;h<s.length;++h)Fy(["","","","",s[h]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function h8(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function TE(t,e){if(t===null)return null;if(typeof t=="string")return cu(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let a=0;a<r;++a){const i=t[a];h8(e,a,i)?n.push(i):n.push(TE(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const a=t[r];if(r==="name"&&typeof a=="string")n[r]=a;else{const i=cu(r);n[i]=TE(a,i)}}return n}}function $E(t,e){if(t==null)return null;if(typeof t=="string")return Xs(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let a=0;a<r;++a){const i=t[a];h8(e,a,i)?n.push(i):n.push($E(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const a=t[r],i=Xs(r);(r==="name"||r==="className")&&typeof a=="string"?n[i]=a:n[i]=$E(a,r)}return n}}/** @license See the LICENSE file. */const p8="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const rNe=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class Ni extends st{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const S=this.getClassName().toLowerCase();this.name=l1(S)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],dl(this.inputs).length!==this.inputs.length)throw new Q(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(S=>S.name)}`);dl(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(S=>S.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const S of this.outputs){const k=S.sourceLayer,N=S.nodeIndex,I=S.tensorIndex;this.outputLayers.push(k),this.outputLayersNodeIndices.push(N),this.outputLayersTensorIndices.push(I)}for(const S of this.inputs){const k=S.sourceLayer,N=S.nodeIndex,I=S.tensorIndex;ns(N===0,"input layer has >1 nodes"),ns(I===0,"input layer has >1 tensors"),this.inputLayers.push(k),this.inputLayersNodeIndices.push(N),this.inputLayersTensorIndices.push(I)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let S=0;S<this.inputLayers.length;S++){const k=this.inputLayers[S];if(!(k instanceof eg))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${S} (0-based) originates from layer type ${k.getClassName()}.`);this.inputNames.push(k.name),this.feedInputShapes.push(k.batchInputShape),this.feedInputNames.push(k.name)}for(const S of this.outputLayers)this.outputNames.push(S.name);this.internalInputShapes=this.inputs.map(S=>S.shape),this.internalOutputShapes=this.outputs.map(S=>S.shape);const n={},r={},a={},i={},s={},o=[],l=(S,k,N,I,T,R)=>{(I==null||T==null||R==null)&&(I=S.sourceLayer,T=S.nodeIndex,R=S.tensorIndex);const _=I.inboundNodes[T];if(N.indexOf(_)!==-1)throw new si(`The tensor ${S.name} at layer "${I.name}" is part of a cycle.`);if(k.indexOf(_)!==-1)return;this.containerNodes.add(Ni.nodeKey(I,T)),I.id in s||(s[I.id]=Object.keys(s).length),N.indexOf(_)===-1&&N.push(_);const M=_.inboundLayers.length;for(let P=0;P<M;P++){const $=_.inputTensors[P],z=_.inboundLayers[P],W=_.nodeIndices[P],H=_.tensorIndices[P];l($,k,N,z,W,H)}for(k.push(_);N.indexOf(_)>=0;)N.splice(N.indexOf(_),1);o.push(_)},c=[],f=[];for(const S of this.outputs)l(S,c,f);const h=o.slice().reverse();for(const S of h){r[S.id]=S,S.id in n||(n[S.id]=0);let k=n[S.id];const N=a[S.outboundLayer.id]==null?0:a[S.outboundLayer.id];k=Math.max(k,N),a[S.outboundLayer.id]=k,i[S.outboundLayer.id]=S.outboundLayer,n[S.id]=k;for(let I=0;I<S.inboundLayers.length;I++){const T=S.inboundLayers[I],R=S.nodeIndices[I],_=T.inboundNodes[R],M=n[_.id]==null?0:n[_.id];n[_.id]=Math.max(k+1,M),r[_.id]=_}}const p={};for(const S in n){const k=n[S];k in p||(p[k]=[]),p[k].push(r[S])}const g={};for(const S in a){const k=a[S];k in g||(g[k]=[]),g[k].push(i[S])}let v=Object.keys(g).map(S=>parseInt(S,10)).sort(Kv);this.layers=[];for(const S of v){const k=g[S];k.sort((N,I)=>{const T=s[N.id],R=s[I.id];return T<R?-1:T>R?1:0});for(const N of k)N instanceof Ni&&this.internalContainerRefs.push(N),this.layers.push(N)}this.layersByDepth=g,v=Object.keys(p).map(S=>parseInt(S,10)).sort(Kv);const x=this.inputs.slice(),b=[];for(const S of v)for(const k of p[S]){const N=k.outboundLayer;if(N!=null){for(const I of k.inputTensors)if(x.indexOf(I)===-1)throw new si(`Graph disconnected: cannot obtain value for tensor ${I} at layer "${N.name}". The following previous layers were accessed without issue: ${b}`);for(const I of k.outputTensors)x.push(I);b.push(N.name)}}this.nodesByDepth=p;const w=this.layers.map(S=>S.name);for(const S of w){const k=w.filter(N=>N===S).length;if(k!==1)throw new si(`The name "${S}" is used ${k} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(w))}this.outboundNodes=[],this.inboundNodes=[],new c1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(S=>null),outputMasks:this.outputs.map(S=>null),inputShapes:this.inputs.map(S=>S.shape),outputShapes:this.outputs.map(S=>S.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new Q("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let a=0;const i=rNe(e);i&&this.parseWeights(e);for(const o of this.layers)for(const[l,c]of o.weights.entries()){const f=i?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[f]!=null)throw new Q(`Duplicate weight name: ${f}`);r[f]=c,a++}const s=[];for(const o in e){let l=o;if(r[o]==null){const c=o.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)s.push([r[l],e[o]]);else if(n)throw new Q(`Provided weight data has no target variable: ${o}`);delete r[l]}if(n){const o=[];for(const l in r)o.push(l);if(o.length>0)throw new Q(`${o.length} of ${a} weights are not set: ${o}`)}DT(s)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),a=["vars","layer_checkpoint_dependencies"],i=r.map(s=>s.startsWith("_")?s.slice(1):s).filter(s=>!a.includes(s)).join("/");i!==n&&(e[i]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${p8}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=$E(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return le(()=>{e=Ot(e);const r=new sl;for(let a=0;a<this.inputs.length;++a)r.add(this.inputs[a],e[a]);return Mh(this.outputs,r,n)})}computeMask(e,n){return le(()=>{e=Ot(e);let r;return n==null?r=Gu(null,e.length):r=Ot(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=Oy(e);if(n.length!==this.inputLayers.length)throw new Q(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let o=0;o<n.length;o++){const l=this.inputLayers[o],c=n[o],f=l.name+"_0_0";r[f]=c}const a=Object.keys(this.nodesByDepth).map(o=>parseInt(o,10)).sort(Kv);if(a.length>1)for(const o of a){const l=this.nodesByDepth[o];for(const c of l){const f=c.outboundLayer;if(this.inputLayers.map(x=>x.id).indexOf(f.id)!==-1)continue;const h=[];for(let x=0;x<c.inboundLayers.length;x++){const b=c.inboundLayers[x],w=c.nodeIndices[x],S=c.tensorIndices[x],k=`${b.name}_${w}_${S}`,N=r[k];h.push(N)}const p=f.computeOutputShape(Gr(h)),g=Oy(p),v=f.inboundNodes.indexOf(c);for(let x=0;x<g.length;x++){const b=`${f.name}_${v}_${x}`;r[b]=g[x]}}}const i=[],s=[];for(let o=0;o<this.outputLayers.length;o++){const l=this.outputLayers[o],c=this.outputLayersNodeIndices[o],f=this.outputLayersTensorIndices[o],h=`${l.name}_${c}_${f}`;s.push(h)}for(let o=0;o<s.length;o++){const l=s[o];ns(l in r),i.push(r[l])}return Gr(i)}runInternalGraph(e,n){n==null&&(n=Gu(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],f=e[l],h=n[l];r[c.id]=[f,h]}const a=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(Kv);for(const l of a){const c=this.nodesByDepth[l];for(const f of c){const h=f.outboundLayer,p=f.inputTensors,g=f.outputTensors,v=new Array;for(const x of p)x.id in r&&v.push(r[x.id]);if(v.length===p.length){let x={},b,w,S,k;if(f.callArgs!=null&&(x=f.callArgs),v.length===1){const[N,I]=v[0];x.mask==null&&(x.mask=I),S=Ot(h.call(N,x)),k=Ot(h.computeMask(N,I)),b=[N],w=[I]}else b=v.map(N=>N[0]),w=v.map(N=>N[1]),x.mask==null&&(x.mask=w),S=Ot(h.call(b,x)),k=Ot(h.computeMask(b,w));if(h.activityRegularizer)throw new nt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let N=0;N<g.length;++N){const I=g[N],T=S[N],R=k[N];r[I.id]=[T,R]}}}}const i=[],s=[],o=[];for(const l of this.outputs){ns(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[c,f]=r[l.id];o.push(c.shape),i.push(c),s.push(f)}return[i,s,o]}buildNodeConversionMap(e){const n={};let r;for(const a of this.layers){r=a instanceof Ni?1:0;for(let i=0;i<a.inboundNodes.length;i++){const s=Ni.nodeKey(a,i);this.containerNodes.has(s)&&(n[s]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new Q("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new Q(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new Q(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return le(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const a=Ni.nodeKey(n,r);this.containerNodes.has(a)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const s of this.layers){const o=s.getClassName(),l=s.getConfig(),c=[];for(let h=0;h<s.inboundNodes.length;h++){const p=s.inboundNodes[h],g=Ni.nodeKey(s,h);let v={};if(this.containerNodes.has(g)){if(p.callArgs)try{JSON.stringify(p.callArgs),v=p.callArgs}catch{console.warn(`Layer ${s.name} was passed non-serializable keyword arguments: ${p.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),v={}}if(p.inboundLayers.length>0){const x=[];for(let b=0;b<p.inboundLayers.length;b++){const w=p.inboundLayers[b],S=p.nodeIndices[b],k=p.tensorIndices[b],N=Ni.nodeKey(w,S);let I=n[N];I==null&&(I=0),x.push([w.name,I,k,v])}c.push(x)}}}const f={};f.name=s.name,f.className=o,f.config=l,f.inboundNodes=c,r.push(f)}e.layers=r;const a=[];for(let s=0;s<this.inputLayers.length;s++){const o=this.inputLayers[s],l=this.inputLayersNodeIndices[s],c=Ni.nodeKey(o,l);if(!this.containerNodes.has(c))continue;let f=n[c];f==null&&(f=0);const h=this.inputLayersTensorIndices[s];a.push([o.name,f,h])}e.inputLayers=a;const i=[];for(let s=0;s<this.outputLayers.length;s++){const o=this.outputLayers[s],l=this.outputLayersNodeIndices[s],c=Ni.nodeKey(o,l);if(!this.containerNodes.has(c))continue;let f=n[c];f==null&&(f=0);const h=this.outputLayersTensorIndices[s];i.push([o.name,f,h])}return e.outputLayers=i,e}static fromConfig(e,n,r={},a=!1){const i={},s={};function o(b,w){b.name in s?s[b.name].push(w):s[b.name]=[w]}function l(b,w){const S=[];let k;for(const N of w){const I=N[0],T=N[1],R=N[2];if(k=N[3]==null?{}:N[3],!(I in i)){o(b,w);return}const _=i[I];if(_.inboundNodes.length<=T){o(b,w);return}const M=_.inboundNodes[T];S.push(M.outputTensors[R])}S.length>0&&b.apply(Gr(S),k)}function c(b){const w=b.name,S=io(b,n.customObjects!=null?n.customObjects:{});S.setFastWeightInitDuringBuild(a),i[w]=S,b.inboundNodes.forEach(N=>{if(!(N instanceof Array))throw new Q(`Corrupted configuration, expected array for nodeData: ${N}`);o(S,N)})}const f=n.name,h=n.layers;for(const b of h)c(b);for(;!Bke(s);)for(const b of h){const w=i[b.name];if(w.name in s){const S=s[w.name];delete s[w.name];for(const k of S)l(w,k)}}const p=[],g=[],v=n.inputLayers;for(const b of v){const w=b[0],S=b[1],k=b[2];ns(w in i);const I=i[w].inboundNodes[S].outputTensors;p.push(I[k])}const x=n.outputLayers;for(const b of x){const w=b[0],S=b[1],k=b[2];ns(w in i);const I=i[w].inboundNodes[S].outputTensors;g.push(I[k])}return new e({inputs:p,outputs:g,name:f})}get stateful(){if(this._stateful)throw new Q("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){le(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function aNe(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(a=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const a=[];return e.forEach(i=>{i in t?a.push(t[i]):a.push(null)}),a}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function m8(t,e){return aNe(t,e,"classWeight")}async function g8(t,e,n,r){if(n!=null){const a=le(()=>{if(t.shape.length===1)return Cu(t);if(t.shape.length===2){if(t.shape[1]>1)return op(t,1);if(t.shape[1]===1)return ne(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),i=Array.from(await a.data());lt(a);const s=[];return i.forEach(o=>{if(n[o]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${o} exists in the data but not in classWeight`);s.push(n[o])}),fa(s,"float32")}else return null}function iNe(t,e){return ee(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const sNe=32;function v8(t,e){let n,r;const a=e;n=a.xs,r=a.ys,B(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const i=hF("input",t.inputNames,n),s=hF("output",t.outputNames,r),o=i[0].shape[0];B(i.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${i.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),B(s.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${s.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<i.length;l++)B(i[l].shape[0]===o,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${i[l].shape[0]}; expected  ${o} based on input ${t.inputNames[0]}.`);for(let l=0;l<s.length;l++)B(s[l].shape[0]===o,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${s[l].shape[0]}; expected  ${o} based on input ${t.inputNames[0]}.`);return{xs:i,ys:s}}function hF(t,e,n){if(n instanceof Mn)return[n];if(Array.isArray(n))return B(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const a of e){if(n[a]==null)throw new Q(`The feature data generated by the dataset lacks the required ${t} key '${a}'.`);r.push(n[a])}return r}}function oNe(t){if(t.length===3)throw new nt("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function lNe(t,e,n){const r=n.batchesPerEpoch!=null;if(B(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),B(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),B(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),B(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),B(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const a=n.validationData!=null;let i,s;if(a)if(pF(n.validationData))B(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const b=oNe(n.validationData);i=b.xs,s=b.ys}const o=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let c;a?c=l.slice().concat(l.map(b=>"val_"+b)):c=l.slice();const f=s8(n.callbacks,n.yieldEvery),h=n.verbose==null?1:n.verbose,{callbackList:p,history:g}=o8(f,h,n.epochs,null,null,uNe(e,n),null,a,c);p.setModel(t),t.history=g,await p.onTrainBegin(),t.stopTraining_=!1;let v=n.initialEpoch==null?0:n.initialEpoch,x=await e.iterator();for(;v<n.epochs;){const b={};await p.onEpochBegin(v);let w=0,S=0;for(r||(x=await e.iterator());!r||w<n.batchesPerEpoch;){const k=await x.next();if(r&&k.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${w} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(k.value!=null){const{xs:N,ys:I}=v8(t,k.value),T={};T.batch=S,T.size=N[0].shape[0],await p.onBatchBegin(S,T);const R=[];if(n.classWeight!=null){const P=m8(n.classWeight,t.outputNames);for(let $=0;$<P.length;++$)R.push(await g8(I[$],null,P[$]))}const _=N.concat(I).concat(R),M=o(_);lt(_);for(let P=0;P<l.length;++P){const $=l[P],z=M[P];T[$]=z,us(z)}await p.onBatchEnd(S,T),i8(T),S++,w++}if(r?w>=n.batchesPerEpoch:k.done){if(a){let N;pF(n.validationData)?N=Ot(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):N=Ot(t.evaluate(i,s,{batchSize:n.validationBatchSize==null?sNe:n.validationBatchSize,verbose:0}));for(let I=0;I<t.metricsNames.length;++I)b[`val_${t.metricsNames[I]}`]=N[I]}break}if(t.stopTraining_)break}if(await p.onEpochEnd(v,b),v++,t.stopTraining_)break}return await p.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function uNe(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function pF(t){return typeof t.iterator=="function"}function cNe(t){return typeof t.next=="function"}async function dNe(t,e,n){n=n||{};const r=n.batches!=null,a=t.testFunction;let i=[];if(n.verbose>0)throw new nt("Verbose mode is not implemented yet.");B(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const s=cNe(e)?e:await e.iterator();let o=0,l=0;for(;!r||l<n.batches;){const c=await s.next();if(i=le(()=>{if(c.value){const{xs:f,ys:h}=v8(t,c.value),p=f.concat(h),g=le(()=>a(p));if(lt(p),l===0)for(let x=0;x<g.length;++x)i.push(kt(0));const v=p[0].shape[0];for(let x=0;x<g.length;++x){const b=g[x],w=i[x];i[x]=le(()=>Ee(i[x],ee(v,b))),l>0&&lt(w)}lt(g),o+=v,++l}return i}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<i.length;++c){const f=i[c];i[c]=Ge(i[c],o),lt(f)}return Gr(i)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function U2(t){B(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function Th(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>Eu(r,e,n-e)):Eu(t,e,n-e)}function OE(t,e){return le(()=>t==null?null:Array.isArray(t)?t.map(n=>OE(n,e)):GG(t,e.dtype==="int32"?e:Oe(e,"int32")))}function V2(t,e){const n=[];let r=0,a=null;for(;r<t;)a=r+e,a>=t&&(a=t),n.push([r,a]),r=a;return n}function y8(t){const e=[];t instanceof Mn&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(Zm(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Ei(t,e){if(t==null)return;const n=[];if(e instanceof Mn)n.push(e.id);else if(Array.isArray(e))e.forEach(a=>n.push(a.id));else if(e!=null)for(const a in e){const i=e[a];n.push(i.id)}const r=[];if(t instanceof Mn)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(a=>{n.indexOf(a.id)===-1&&r.push(a)});else if(t!=null)for(const a in t){const i=t[a];n.indexOf(i.id)===-1&&r.push(i)}r.forEach(a=>{a.isDisposed||a.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function fNe(t){return t instanceof Mn}function DE(t){return Array.isArray(t)}function mF(t){return!fNe(t)&&!DE(t)}function gF(t,e,n,r=!0,a=""){if(e==null||e.length===0){if(t!=null){let s=!1;if(DE(t)&&t.length>0)s=!0;else if(mF(t)){for(const o in t)if(t.hasOwnProperty(o)){s=!0;break}}else s=!0;if(s)throw new Q(`Error when checking model ${a} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(s=>null);let i;if(mF(t)){t=t,i=[];for(const s of e){if(t[s]==null)throw new Q(`No data provided for "${s}". Need data for each key in: ${e}`);i.push(t[s])}}else if(DE(t)){if(t=t,t.length!==e.length)throw new Q(`Error when checking model ${a}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);i=t}else{if(t=t,e.length>1)throw new Q(`The model ${a} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);i=[t]}if(i=y8(i),n!=null)for(let s=0;s<e.length;++s){if(n[s]==null)continue;const o=i[s];if(o.shape.length!==n[s].length)throw new Q(`Error when checking ${a}: expected ${e[s]} to have ${n[s].length} dimension(s). but got array with shape ${o.shape}`);for(let l=0;l<n[s].length;++l){if(l===0&&!r)continue;const c=o.shape[l],f=n[s][l];if(f!=null&&f>=0&&c!==f)throw new Q(`${a} expected a batch of elements where each example has shape [${n[s].slice(1,n[s].length)}] (i.e.,tensor shape [*,${n[s].slice(1,n[s].length)}]) but the ${a} received an input with ${o.shape[0]} examples, each with shape [${o.shape.slice(1,o.shape.length)}] (tensor shape [${o.shape}])`)}}return i}function hNe(t,e,n){const r=dl(t.map(i=>i.shape[0]));r.sort();const a=dl(e.map(i=>i.shape[0]));if(a.sort(),r.length>1)throw new Q(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(i=>i.shape))}`);if(a.length>1)throw new Q(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(i=>i.shape))}`);if(r.length>0&&a.length>0&&!It(r,a))throw new Q(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${a[0]} target sample(s).`)}function pNe(t,e,n){const r=[d1,f1,hp];for(let a=0;a<t.length;++a){const i=t[a],s=e[a],o=n[a];if(s!=null){if(s===hp&&i.shape[i.shape.length-1]===1)throw new Q(`You are passing a target array of shape ${i.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(s)!==-1){const l=i.shape.slice(1),c=o.slice(1);for(let f=0;f<l.length;++f){const h=l[f],p=c[f];if(p!=null&&h!==p)throw new Q(`A target Tensor with shape ${i.shape} was passed for an output of shape ${o}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function vF(t,e,n,r=!0,a=""){let i;if(Array.isArray(t)){if(t.length!==e.length)throw new Q(`Error when checking model ${a}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);i=t}else{if(e.length>1)throw new Q(`The model expects ${e.length} ${a} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);i=[t]}if(n!=null)for(let s=0;s<e.length;++s){if(n[s]==null)continue;const o=i[s];if(o.shape.length!==n[s].length)throw new Q(`Error when checking ${a}: expected ${e[s]} to have ${n[s].length} dimension(s), but got array with shape ${JSON.stringify(o.shape)}`);for(let l=0;l<n[s].length;++l){if(l===0&&!r)continue;const c=o.shape[l],f=n[s][l];if(f!=null&&f!==c)throw new Q(`Error when checking ${a}: expected ${e[s]} to have shape ${JSON.stringify(n[s])} but got array with shape ${JSON.stringify(o.shape)}.`)}}}function mNe(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const a of e){let i=n.hasOwnProperty(a)?n[a]:[];Array.isArray(i)||(i=[i]),r.push(i)}return r}}const gNe="layers-model";class pd extends Ni{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new Q("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");QEe(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=ZEe(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Rl))throw new Q("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const s in e.loss)if(this.outputNames.indexOf(s)===-1)throw new Q(`Unknown entry in loss dictionary: "${s}". Only expected the following keys: ${this.outputNames}`);for(const s of this.outputNames)e.loss[s]==null&&console.warn(`Output "${s}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${s} during training`),n.push(B2(e.loss[s]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new Q(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(o=>B2(o))}else{const s=B2(e.loss);this.outputs.forEach(o=>{n.push(s)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let s=0;s<this.outputs.length;++s){const o=this.internalOutputShapes[s],l=this.outputNames[s];this.feedOutputNames.push(l),this.feedOutputShapes.push(o),this.feedLossFns.push(this.lossFunctions[s])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],ku("loss",()=>{for(let s=0;s<this.outputs.length;++s){if(r.indexOf(s)!==-1)continue;const o=this.lossFunctions[s];this.outputs.length>1&&(this.metricsTensors.push([o,s]),this.metricsNames.push(this.outputNames[s]+"_loss"))}});const a=mNe(e.metrics,this.outputNames),i=(s,o,l)=>{this.outputNames.length>1&&(o=this.outputNames[s]+"_"+o),this.metricsNames.push(o),this.metricsTensors.push([l,s])};ku("metric",()=>{for(let s=0;s<this.outputs.length;++s){if(r.indexOf(s)!==-1)continue;const o=a[s];(c=>{let h,p,g;for(const v of c){if(typeof v=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(v)!==-1){const b=this.internalOutputShapes[s];b[b.length-1]===1||this.lossFunctions[s]===f1?["accuracy","acc"].indexOf(v)!==-1?p=u8:["crossentropy","ce"].indexOf(v)!==-1&&(p=BEe):this.lossFunctions[s]===Py?["accuracy","acc"].indexOf(v)!==-1?p=UEe:["crossentropy","ce"].indexOf(v)!==-1&&(p=f8):["accuracy","acc"].indexOf(v)!==-1?p=c8:["crossentropy","ce"].indexOf(v)!==-1&&(p=d8);let w;["accuracy","acc"].indexOf(v)!==-1?w="acc":["crossentropy","ce"].indexOf(v)!==-1&&(w="ce"),g=p,h=""+w}else g=YEe(v),h=""+Zv(v);let x;ku(h,()=>{x=g}),i(s,h,x)}})(o)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const a=r.batchSize==null?32:r.batchSize;U2(a);const s=this.standardizeUserDataXY(e,n,!0,a);try{const o=s[0].concat(s[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,o,a,r.verbose,r.steps);return Gr(c)}finally{Ei(s[0],e),Ei(s[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),dNe(this,e,n)}checkNumSamples(e,n,r,a="steps"){let i;if(r!=null){if(i=null,n!=null)throw new Q(`If ${a} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?i=e[0].shape[0]:i=e.shape[0];else throw new Q(`Either the input data should have a defined shape, or ${a} shoud be specified.`);return i}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new Q("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),a=r?n:[n],i=this.retrieveSymbolicTensors(a),s=new sl;if(e instanceof Mn&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new Q(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)s.add(this.inputs[l],e[l])}else for(const l of this.inputs){const c=e[l.name];if(c==null)throw new Q(`No value is provided for the model's input ${l.name}`);s.add(l,c)}const o=Mh(i,s);return r?o:o[0]}retrieveSymbolicTensors(e){const n=Gu(null,e.length);let r=e.length;for(const a of this.layers){const i=Array.isArray(a.output)?a.output:[a.output],s=i.map(o=>o.name);for(let o=0;o<e.length;++o){const l=s.indexOf(e[o]);if(l!==-1&&(n[o]=i[l],r--),r===0)break}if(r===0)break}if(r>0){const a=[];throw n.forEach((i,s)=>{i==null&&a.push(e[s])}),new Q(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(a)}`)}return n}predictLoop(e,n=32,r=!1){return le(()=>{const a=this.checkNumSamples(e);if(r)throw new nt("Verbose predictLoop() is not implemented yet.");const i=V2(a,n),s=this.outputs.map(o=>[]);for(let o=0;o<i.length;++o)le(()=>{const c=i[o][0],f=i[o][1],h=Th(e,c,f),p=[];if(Array.isArray(h))for(let v=0;v<h.length;++v)p.push({key:this.inputs[v],value:h[v]});else p.push({key:this.inputs[0],value:h});const g=new sl(p);return Mh(this.outputs,g)}).forEach((c,f)=>s[f].push(c));return Gr(s.map(o=>qr(o,0)))})}predict(e,n={}){const r=y8(e);vF(r,this.inputNames,this.feedInputShapes,!1);try{const a=n.batchSize==null?32:n.batchSize;return U2(a),this.predictLoop(r,a)}finally{Ei(r,e)}}predictOnBatch(e){vF(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,a){if(this.optimizer_==null)throw new si("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const i=[];for(let s=0;s<this.feedOutputShapes.length;++s){const o=this.feedOutputShapes[s];this.feedLossFns[s]===Py?i.push(o.slice(0,o.length-1).concat([1])):i.push(o)}if(e=gF(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=gF(n,this.feedOutputNames,i,!1,"target"),hNe(e,n),pNe(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&a!=null&&a>0&&e[0].shape[0]%a!==0)throw new Q(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${a}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,a,i=!0,s){const[o,l]=this.standardizeUserDataXY(e,n,i,s);if(r!=null)throw new Error("sample weight is not supported yet.");let c=null;if(a!=null){const f=m8(a,this.outputNames);c=[];for(let h=0;h<f.length;++h)c.push(await g8(l[h],null,f[h]))}return[o,l,c]}testLoop(e,n,r,a=0,i){return le(()=>{const s=this.checkNumSamples(n,r,i,"steps"),o=[];if(a>0)throw new nt("Verbose mode is not implemented yet.");if(i!=null)throw new nt("steps mode in testLoop() is not implemented yet");{const l=V2(s,r),c=fa(Fi(0,s));for(let f=0;f<l.length;++f){const h=l[f][0],p=l[f][1],g=Eu(c,h,p-h),v=OE(n,g),x=e(v);if(f===0)for(let b=0;b<x.length;++b)o.push(kt(0));for(let b=0;b<x.length;++b){const w=x[b];o[b]=Ee(o[b],ee(p-h,w))}}for(let f=0;f<o.length;++f)o[f]=Ge(o[f],s)}return o})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const a=e[r];let i=a;if(tF(e,a)>1){const s=tF(e.slice(0,r),a);i+=`_${s}`}n.push(i)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),s=[],o=()=>{const h=[];for(let x=0;x<this.inputs.length;++x)h.push({key:this.inputs[x],value:r[x]});const p=new sl(h),g=Mh(this.outputs,p,{training:!0});let v;for(let x=0;x<this.lossFunctions.length;++x){const b=this.lossFunctions[x];let w=b(a[x],g[x]);i[x]!=null&&(w=iNe(w,i[x]));const S=In(w);n.push(S),x===0?v=w:v=Ee(v,w)}for(let x=0;x<this.metricsTensors.length;++x){let b;if(this.outputs.length>1&&x<this.outputs.length)b=n[x];else{const w=this.metricsTensors[x][0],S=this.metricsTensors[x][1];b=In(w(a[S],g[S]))}us(b),s.push(b)}return v=In(v),this.calculateLosses().forEach(x=>{v=Ee(v,x)}),v},l=this.collectedTrainableWeights.map(h=>h.read());return[this.optimizer_.minimize(o,!0,l)].concat(s)}}makeTestFunction(){this.testFunction=e=>le(()=>{const n=[];let r;const a=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=[];for(let c=0;c<this.inputs.length;++c)s.push({key:this.inputs[c],value:a[c]});const o=new sl(s),l=Mh(this.outputs,o);for(let c=0;c<this.lossFunctions.length;++c){const f=this.lossFunctions[c],h=In(f(i[c],l[c]));c===0?r=h:r=Ee(r,h),n.push(r)}for(let c=0;c<this.metricsTensors.length;++c){const f=this.metricsTensors[c][0],h=this.metricsTensors[c][1],p=In(f(i[h],l[h]));n.push(p)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let a,i,s,o,l,c,f,h,p;try{const g=r.batchSize==null?32:r.batchSize;U2(g);const x=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,g);a=x[0],i=x[1],p=x[2];let b=!1,w;if(r.validationData!=null&&r.validationData.length>0){if(b=!0,r.validationData.length===2)l=r.validationData[0],c=r.validationData[1];else throw r.validationData.length===3?new nt("validationData including sample weights is not supported yet."):new Q(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const P=await this.standardizeUserData(l,c,null,null,!0,g);f=P[0],h=P[1],w=f.concat(h)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){b=!0;const M=Math.floor(a[0].shape[0]*(1-r.validationSplit)),P=a[0].shape[0];f=Th(a,M,P),s=a,a=Th(a,0,M),h=Th(i,M,P),o=i,i=Th(i,0,M),w=f.concat(h)}else r.validationSteps!=null&&(b=!0);const S=a.concat(i).concat(p);this.checkTrainableWeightsConsistency();const k=this.makeTrainFunction(),N=this.getDedupedMetricsNames();let I,T;b?(this.makeTestFunction(),I=this.testFunction,T=N.slice().concat(N.map(M=>"val_"+M))):(I=null,w=[],T=N.slice());const R=s8(r.callbacks,r.yieldEvery);return await this.fitLoop(k,S,N,g,r.epochs,r.verbose,R,I,w,r.shuffle,T,r.initialEpoch,null,null)}finally{this.isTraining=!1,Ei(a,e),Ei(i,n),Ei(s,e),Ei(o,n),Ei(f,l),Ei(h,c),p!=null&&lt(p)}}async fitLoop(e,n,r,a,i,s,o,l,c,f,h,p,g,v){a==null&&(a=32),i==null&&(i=1),f==null&&(f=!0),p==null&&(p=0);let x=!1;if(l!=null&&c!=null&&(x=!0),v!=null&&(x=!0,g==null))throw new Q("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const b=this.checkNumSamples(n,a,g,"steps_per_epoch");let w;b!=null&&(w=Fi(0,b)),s==null&&(s=1);const{callbackList:S,history:k}=o8(o,s,i,p,b,g,a,x,h);S.setModel(this),this.history=k,await S.onTrainBegin(),this.stopTraining_=!1;for(let N=p;N<i;++N){await S.onEpochBegin(N);const I={};if(g!=null)throw new nt("stepsPerEpoch mode is not implemented yet.");{if(f==="batch")throw new nt("batch shuffling is not implemneted yet");f&&J0e(w);const T=fa(w),R=V2(b,a);for(let _=0;_<R.length;++_){const M={};if(await S.onBatchBegin(_,M),le(()=>{const P=R[_][0],$=R[_][1],z=Eu(T,P,$-P);M.batch=_,M.size=$-P;const W=OE(n,z),H=e(W);for(let G=0;G<r.length;++G){const F=r[G],V=H[G];M[F]=V,us(V)}if(_===R.length-1&&x){const G=this.testLoop(l,c,a);for(let F=0;F<r.length;++F){const V=r[F],U=G[F];us(U),I["val_"+V]=U}}}),await S.onBatchEnd(_,M),i8(M),this.stopTraining_)break}T.dispose()}if(await S.onEpochEnd(N,I),this.stopTraining_)break}return await S.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return lNe(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),a=r[0],i=r[1],o=this.makeTrainFunction()(a.concat(i)),l=[];for(const c of o){const f=await c.data();l.push(f[0])}return lt(o),Ei(r[0],e),Ei(r[1],n),Gr(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,a=r?this.trainableWeights:this.weights,i=this.getWeights(r);for(let s=0;s<a.length;++s)r&&!a[s].trainable||n.push({name:a[s].originalName,tensor:i[s]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=Tz().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-Tz().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Xs(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>Xs(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const a of n)if(typeof r[a]=="string")e[a]=Xs(r[a]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Xs(Zv(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Xs(Zv(e)));{const e={};for(const n in this.metrics)e[n]=Xs(Zv(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=TE(e.optimizer_config),r=io(n);let a;if(typeof e.loss=="string")a=cu(e.loss);else if(Array.isArray(e.loss))a=e.loss.map(s=>cu(s));else if(e.loss!=null){a={};for(const s in e.loss)a[s]=cu(e.loss[s])}let i;if(Array.isArray(e.metrics))i=e.metrics.map(s=>cu(s));else if(e.metrics!=null){i={};for(const s in e.metrics)i[s]=cu(e.metrics[s])}this.compile({loss:a,metrics:i,optimizer:r})}async save(e,n){if(typeof e=="string"){const c=Kye(e);if(c.length===0)throw new Q(`Cannot find any save handlers for URL '${e}'`);if(c.length>1)throw new Q(`Found more than one (${c.length}) save handlers for URL '${e}'`);e=c[0]}if(e.save==null)throw new Q("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await Oz(this.getNamedWeights(n)),o={modelTopology:this.toJSON(null,!1),format:gNe,generatedBy:`TensorFlow.js tfjs-layers v${p8}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){o.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:f,specs:h}=await Oz(await this.optimizer.getWeights(),c);r.specs.push(...h),r.data=qye([r.data,f])}return this.userDefinedMetadata!=null&&(fF(this.userDefinedMetadata,this.name,!0),o.userDefinedMetadata=this.userDefinedMetadata),o.weightData=r.data,o.weightSpecs=r.specs,e.save(o)}setUserDefinedMetadata(e){fF(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}pd.className="Model";ke(pd);class x8 extends pd{}x8.className="Functional";ke(x8);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Od extends pd{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:l1("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new Q(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof Od||e instanceof pd;let r;if(n){if(r=e,r.outputs.length!==1)throw new Q("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new Q("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new Q("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const a=yEe({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new Q(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new Q("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=e8(this.outputs[0])}this.inboundNodes=[],new c1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Gu(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(a=>a.shape),outputShapes:this.outputs[0].shape})}else{const a=e.apply(this.outputs[0]);if(Array.isArray(a))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[a],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(yt(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new pd({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new si("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new si("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new si("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new si("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},a=!1){let i,s={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new Q("Legacy serialization format not supported yet.");i=n}else B(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),i=n.layers,delete n.layers,s=n;const o=new e(s);if(!(o instanceof Od))throw new nt(`Sequential.fromConfig called on non-Sequential input: ${o}`);for(const l of i){const f=io(l,void 0,a);a&&f.setFastWeightInitDuringBuild(!0),o.add(f)}return o}set stopTraining(e){if(this.model==null)throw new Q("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new Q("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}Od.className="Sequential";ke(Od);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function b8(t){return new Od(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Nr=class extends hf{getConfig(){return{}}};class w8 extends Nr{apply(e,n=1){return nEe(e,n)}}w8.className="elu";ke(w8);class S8 extends Nr{apply(e){return z6(e)}}S8.className="selu";ke(S8);class C8 extends Nr{apply(e){return nc(e)}}C8.className="relu";ke(C8);class k8 extends Nr{apply(e){return le(()=>cp(6,nc(e)))}}k8.className="relu6";ke(k8);class E8 extends Nr{apply(e){return e}}E8.className="linear";ke(E8);class N8 extends Nr{apply(e){return cf(e)}}N8.className="sigmoid";ke(N8);class I8 extends Nr{apply(e){return aEe(e)}}I8.className="hardSigmoid";ke(I8);class A8 extends Nr{apply(e){return Vm(e)}}A8.className="softplus";ke(A8);class T8 extends Nr{apply(e){return rEe(e)}}T8.className="softsign";ke(T8);class $8 extends Nr{apply(e){return Qb(e)}}$8.className="tanh";ke($8);let PT=class extends Nr{apply(e,n=-1){return FA(e,n)}};PT.className="softmax";ke(PT);class O8 extends Nr{apply(e,n=-1){return $6(e,n)}}O8.className="logSoftmax";ke(O8);class D8 extends Nr{apply(e){return le(()=>le(()=>{const n=Math.sqrt(2),r=ee(.5,Ee(1,E6(Ge(e,n))));return ee(e,r)}))}}D8.className="gelu";ke(D8);class R8 extends Nr{apply(e){return le(()=>ee(.5,ee(e,Ee(1,Qb(ee(kr(Ge(2,Math.PI)),Ee(e,ee(.044715,Uu(e,3)))))))))}}R8.className="gelu_new";ke(R8);class _8 extends Nr{apply(e){return le(()=>ee(e,Qb(Vm(e))))}}_8.className="mish";ke(_8);class M8 extends Nr{apply(e,n=1){return le(()=>ee(cf(ee(e,n)),e))}}M8.className="swish";ke(M8);function yl(t){return t.getClassName()}function W2(t,e={}){return Ym(t,ai.getMap().classNameMap,e,"activation")}function xl(t){if(t==null){const e={};return e.className="linear",e.config={},W2(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},W2(e)}else return t instanceof Nr?t:W2(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function vNe(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class P8 extends hf{}class L8 extends P8{constructor(e){super(),vNe(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return le(()=>{let n=Kn([1]);return this.hasL1&&(n=Ee(n,Ve(ee(this.l1,Or(e))))),this.hasL2&&(n=Ee(n,Ve(ee(this.l2,Qm(e))))),ne(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}L8.className="L1L2";ke(L8);const yF={l1l2:"L1L2"};function Ut(t){return ST(t)}function xF(t,e={}){return Ym(t,ai.getMap().classNameMap,e,"regularizer")}function rn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in yF?yF[t]:t,config:{}};return xF(n)}else return t instanceof P8?t:xF(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class z8 extends st{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=Ke(e);let r=nc(e);return this.maxValue!=null&&(r=La(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}z8.className="ReLU";ke(z8);class F8 extends st{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Ke(e);return TA(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}F8.className="LeakyReLU";ke(F8);class j8 extends st{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=nn(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=rn(e.alphaRegularizer),this.alphaConstraint=jn(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new Q(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=yt(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const a of this.sharedAxes)n[a-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let a=1;a<e.length;++a)r[a]=e[a];this.inputSpec=[new Ln({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=Ke(e),MA(e,this.alpha.read())}getConfig(){const e={alphaInitializer:ln(this.alphaInitializer),alphaRegularizer:Ut(this.alphaRegularizer),alphaConstraint:Fn(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}j8.className="PReLU";ke(j8);let B8=class extends st{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new nt(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Ke(e);return t1(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};B8.className="ELU";ke(B8);class U8 extends st{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=Ke(e);return ee(r,Oe(Fa(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}U8.className="ThresholdedReLU";ke(U8);class V8 extends st{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new PT().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return le(()=>{let r=Ke(e);const a=n.mask;if(a!=null){const i=ee(qe(Dl(r.shape),Oe(a,r.dtype)),kt(-1e9));r=Ee(r,i)}return this.axis instanceof Array?this.axis.length>1?gs(qe(r,O6(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}V8.className="Softmax";ke(V8);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function md(t,e,n){if(typeof t=="number")return Gu(t,e);if(t.length!==e)throw new Q(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const a=t[r];if(!Qke(a))throw new Q(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${a}`)}return t}function Pi(t,e,n,r,a=1){if(t==null)return t;const i=e+(e-1)*(a-1);let s;return n==="same"?s=t:s=t-i+1,Math.floor((s+r-1)/r)}function rs(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+vl([n-e,0]);else if(r==="same")t=t*e;else throw new Q(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function LT(t,e){return le(()=>(Sn(e),e==="channelsFirst"?pt(t,[0,2,3,1]):t))}function W8(t,e){return le(()=>(Sn(e),e==="channelsFirst"?pt(t,[0,2,3,4,1]):t))}function yNe(t,e,n,r=1,a="valid",i,s=1){return le(()=>{if(i==null&&(i=ji()),Sn(i),t.shape.length!==3)throw new Q(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new Q(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new Q(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(i==="channelsFirst"&&(t=pt(t,[0,2,1])),a==="causal")throw new nt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=b6(t,e,r,a==="same"?"same":"valid","NWC",s);return n!=null&&(o=Wi(o,n)),o})}function bF(t,e,n,r=[1,1],a="valid",i,s,o=null){return le(()=>{if(i==null&&(i=ji()),Sn(i),t.rank!==3&&t.rank!==4)throw new Q(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new Q(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=LT(t,i);if(a==="causal")throw new nt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=ISe({x:l,filter:e,strides:r,pad:a==="same"?"same":"valid",dilations:s,dataFormat:"NHWC",bias:n,activation:o}),i==="channelsFirst"&&(l=pt(l,[0,3,1,2])),l})}function xNe(t,e,n,r=[1,1,1],a="valid",i,s){return le(()=>{if(i==null&&(i=ji()),Sn(i),t.rank!==4&&t.rank!==5)throw new Q(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new Q(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let o=W8(t,i);if(a==="causal")throw new nt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=kbe(o,e,r,a==="same"?"same":"valid","NDHWC",s),n!=null&&(o=Wi(o,n)),i==="channelsFirst"&&(o=pt(o,[0,4,1,2,3])),o})}class h1 extends st{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",h1.verifyArgs(n),this.rank=e,Xn(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new nt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=md(n.kernelSize,e,"kernelSize"),this.strides=md(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,ja(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Sn(this.dataFormat),this.activation=xl(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=nn(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=jn(n.biasConstraint),this.biasRegularizer=rn(n.biasRegularizer),this.activityRegularizer=rn(n.activityRegularizer),this.dilationRate=md(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new Q(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new Q(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new Q(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(ns("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!CT(e.kernelSize,"number",1,3))throw new Q(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:yl(this.activation),useBias:this.useBias,biasInitializer:ln(this.biasInitializer),biasRegularizer:Ut(this.biasRegularizer),activityRegularizer:Ut(this.activityRegularizer),biasConstraint:Fn(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class pf extends h1{constructor(e,n){super(e,n),this.kernel=null,pf.verifyArgs(n),this.filters=n.filters,Xn(this.filters,"filters"),this.kernelInitializer=nn(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=jn(n.kernelConstraint),this.kernelRegularizer=rn(n.kernelRegularizer)}build(e){e=yt(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new Q(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],a=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return le(()=>{e=Ke(e);let r;const a=this.bias==null?null:this.bias.read(),i=FG(this.activation.getClassName());if(i!=null&&this.rank===2)r=bF(e,this.kernel.read(),a,this.strides,this.padding,this.dataFormat,this.dilationRate,i);else{if(this.rank===1)r=yNe(e,this.kernel.read(),a,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=bF(e,this.kernel.read(),a,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=xNe(e,this.kernel.read(),a,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new nt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=yt(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let i=0;i<r.length;++i){const s=Pi(r[i],this.kernelSize[i],this.padding,this.strides[i],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[i]);n.push(s)}let a=[e[0]];return this.dataFormat==="channelsLast"?(a=a.concat(n),a.push(this.filters)):(a.push(this.filters),a=a.concat(n)),a}getConfig(){const e={filters:this.filters,kernelInitializer:ln(this.kernelInitializer),kernelRegularizer:Ut(this.kernelRegularizer),kernelConstraint:Fn(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new Q(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class ng extends pf{constructor(e){super(2,e),ng.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!CT(e.kernelSize,"number",1,2))throw new Q(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}ng.className="Conv2D";ke(ng);class rg extends pf{constructor(e){super(3,e),rg.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new Q(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}rg.className="Conv3D";ke(rg);class G8 extends ng{constructor(e){if(super(e),this.inputSpec=[new Ln({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new Q(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=yt(e),e.length!==4)throw new Q("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new Q("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],a=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Ln({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return le(()=>{let r=Ke(e);if(r.shape.length!==4)throw new Q(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const a=r.shape,i=a[0];let s,o;this.dataFormat==="channelsFirst"?(s=2,o=3):(s=1,o=2);const l=a[s],c=a[o],f=this.kernelSize[0],h=this.kernelSize[1],p=this.strides[0],g=this.strides[1],v=rs(l,p,f,this.padding),x=rs(c,g,h,this.padding),b=[i,v,x,this.filters];this.dataFormat!=="channelsLast"&&(r=pt(r,[0,2,3,1]));let w=w6(r,this.kernel.read(),b,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(w=pt(w,[0,3,1,2])),this.bias!=null&&(w=Wi(w,this.bias.read(),this.dataFormat)),this.activation!=null&&(w=this.activation.apply(w)),w})}computeOutputShape(e){e=yt(e);const n=e.slice();let r,a,i;this.dataFormat==="channelsFirst"?(r=1,a=2,i=3):(r=3,a=1,i=2);const s=this.kernelSize[0],o=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return n[r]=this.filters,n[a]=rs(n[a],l,s,this.padding),n[i]=rs(n[i],c,o,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}G8.className="Conv2DTranspose";ke(G8);class H8 extends rg{constructor(e){if(super(e),this.inputSpec=[new Ln({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new Q(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=yt(e),e.length!==5)throw new Q("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new Q("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],a=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Ln({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return le(()=>{let r=Ke(e);if(r.shape.length!==5)throw new Q(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const a=r.shape,i=a[0];let s,o,l;this.dataFormat==="channelsFirst"?(l=2,s=3,o=4):(l=1,s=2,o=3);const c=a[l],f=a[s],h=a[o],p=this.kernelSize[0],g=this.kernelSize[1],v=this.kernelSize[2],x=this.strides[0],b=this.strides[1],w=this.strides[2],S=rs(c,x,p,this.padding),k=rs(f,b,g,this.padding),N=rs(h,w,v,this.padding),I=[i,S,k,N,this.filters];this.dataFormat!=="channelsLast"&&(r=pt(r,[0,2,3,4,1]));let T=Ibe(r,this.kernel.read(),I,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(T=pt(T,[0,4,1,2,3])),this.bias!==null&&(T=Wi(T,this.bias.read(),this.dataFormat)),this.activation!==null&&(T=this.activation.apply(T)),T})}computeOutputShape(e){e=yt(e);const n=e.slice();let r,a,i,s;this.dataFormat==="channelsFirst"?(r=1,a=2,i=3,s=4):(r=4,a=1,i=2,s=3);const o=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],f=this.strides[0],h=this.strides[1],p=this.strides[2];return n[r]=this.filters,n[a]=rs(n[a],f,o,this.padding),n[i]=rs(n[i],h,l,this.padding),n[s]=rs(n[s],p,c,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}H8.className="Conv3DTranspose";ke(H8);class q8 extends pf{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new Q("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new Q("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new Q(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=nn(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=rn(n.depthwiseRegularizer),this.depthwiseConstraint=jn(n.depthwiseConstraint),this.pointwiseInitializer=nn(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=rn(n.pointwiseRegularizer),this.pointwiseConstraint=jn(n.pointwiseConstraint)}build(e){if(e=yt(e),e.length<this.rank+2)throw new Q(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new Q(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],a=this.kernelSize.concat([r,this.depthMultiplier]),i=[];for(let o=0;o<this.rank;++o)i.push(1);i.push(r*this.depthMultiplier,this.filters);const s=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",a,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,s,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,s,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,s,this.biasConstraint):this.bias=null,this.inputSpec=[new Ln({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return le(()=>{e=Ke(e);let r;if(this.rank===1)throw new nt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=pt(e,[0,2,3,1])),r=F6(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Wi(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=pt(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=ln(this.depthwiseInitializer),e.pointwiseInitializer=ln(this.pointwiseInitializer),e.depthwiseRegularizer=Ut(this.depthwiseRegularizer),e.pointwiseRegularizer=Ut(this.pointwiseRegularizer),e.depthwiseConstraint=Fn(this.depthwiseConstraint),e.pointwiseConstraint=Fn(this.pointwiseConstraint),e}}q8.className="SeparableConv";class K8 extends q8{constructor(e){super(2,e)}}K8.className="SeparableConv2D";ke(K8);class p1 extends pf{constructor(e){super(1,e),p1.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!CT(e.kernelSize,"number",1,1))throw new Q(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}p1.className="Conv1D";ke(p1);class X8 extends st{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return le(()=>{if(e=Ke(e),this.dataFormat==="channelsLast"){const r=Yv(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Yv(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=Yv(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Yv(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}X8.className="Cropping2D";ke(X8);class Y8 extends st{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Sn(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,Xke(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return le(()=>{let r=Ke(e);const a=r.shape;if(this.dataFormat==="channelsFirst"){r=pt(r,[0,2,3,1]);const i=this.size[0]*a[2],s=this.size[1]*a[3],o=this.interpolation==="nearest"?to.resizeNearestNeighbor(r,[i,s]):to.resizeBilinear(r,[i,s]);return pt(o,[0,3,1,2])}else{const i=this.size[0]*a[1],s=this.size[1]*a[2];return this.interpolation==="nearest"?to.resizeNearestNeighbor(r,[i,s]):to.resizeBilinear(r,[i,s])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}Y8.className="UpSampling2D";ke(Y8);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function bNe(t,e,n=[1,1],r="valid",a,i){return le(()=>{a==null&&(a=ji()),Sn(a);let s=LT(t,a);if(t.rank!==4)throw new Q(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new Q(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return s=EA(s,e,n,r==="same"?"same":"valid","NHWC",i),a==="channelsFirst"&&(s=pt(s,[0,3,1,2])),s})}class Z8 extends h1{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=nn(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=jn(e.depthwiseConstraint),this.depthwiseRegularizer=rn(e.depthwiseRegularizer)}build(e){if(e=yt(e),e.length<4)throw new Q(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new Q(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],a=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",a,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return le(()=>{e=Ke(e);let r=bNe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Wi(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=yt(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],a=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=Pi(n,this.kernelSize[0],this.padding,this.strides[0]),s=Pi(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],a,i,s]:[e[0],i,s,a]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=ln(this.depthwiseInitializer),e.depthwiseRegularizer=Ut(this.depthwiseRegularizer),e.depthwiseConstraint=Fn(this.depthwiseRegularizer),e}}Z8.className="DepthwiseConv2D";ke(Z8);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Q8(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new Q("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function a(i){return i==null||Array.isArray(i)?i:[i]}return e=a(e),n=a(n),{inputs:t,initialState:e,constants:n}}function J8(t,e,n,r=!1,a,i,s=!1,o=!1){return le(()=>{const l=e.shape.length;if(l<3)throw new Q(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(Fi(2,l));e=pt(e,c),s&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),a!=null&&(a=Oe(Oe(a,"bool"),"float32"),a.rank===l-1&&(a=Wr(a,-1)),a=pt(a,c)),r&&(e=Vu(e,0),a!=null&&(a=Vu(a,0)));const f=[];let h,p=n;const g=e.shape[0],v=Wu(e);let x;a!=null&&(x=Wu(a));for(let w=0;w<g;++w){const S=v[w],k=le(()=>t(S,p));if(a==null)h=k[0],p=k[1];else{const N=le(()=>{const I=x[w],T=qe(pi(I),I),R=Ee(ee(k[0],I),ee(p[0],T)),_=p.map((M,P)=>Ee(ee(k[1][P],I),ee(M,T)));return{output:R,newStates:_}});h=N.output,p=N.newStates}o&&f.push(h)}let b;return o&&(b=go(f,1)),[h,b,p]})}class _l extends st{constructor(e){super(e);let n;if(e.cell==null)throw new Q("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new jT({cells:e.cell}):n=e.cell,n.stateSize==null)throw new Q("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Ln({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Fi(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){NE(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let a;if(this.returnSequences?a=[e[0],e[1],r]:a=[e[0],r],this.returnState){const i=[];for(const s of n)i.push([e[0],s]);return[a].concat(i)}else return a}computeMask(e,n){return le(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const a=this.states.map(i=>null);return[r].concat(a)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new nt("Constants support is not implemented in RNN yet.");NE(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new Ln({shape:[n,null,...r]});const a=[e[0]].concat(e.slice(2));this.cell.build(a);let i;if(Array.isArray(this.cell.stateSize)?i=this.cell.stateSize:i=[this.cell.stateSize],this.stateSpec!=null){if(!It(this.stateSpec.map(s=>s.shape[s.shape.length-1]),i))throw new Q(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=i.map(s=>new Ln({shape:[null,s]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){le(()=>{if(!this.stateful)throw new ts("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new Q("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(a=>Kn([r,a])):this.states_=[Kn([r,this.cell.stateSize])];else if(e==null)lt(this.states_),this.keptStates!=null&&(lt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(a=>Kn([r,a])):this.states_[0]=Kn([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Q(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):lt(this.states_);for(let a=0;a<this.states_.length;++a){const i=e[a],s=Array.isArray(this.cell.stateSize)?this.cell.stateSize[a]:this.cell.stateSize,o=[r,s];if(!It(i.shape,o))throw new Q(`State ${a} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${i.shape}`);this.states_[a]=i}}this.states_=this.states_.map(a=>us(a.clone()))})}apply(e,n){let r=n==null?null:n.initialState,a=n==null?null:n.constants;n==null&&(n={});const i=Q8(e,r,a,this.numConstants);e=i.inputs,r=i.initialState,a=i.constants;let s=[],o=[];if(r!=null){n.initialState=r,s=s.concat(r),this.stateSpec=[];for(const c of r)this.stateSpec.push(new Ln({shape:c.shape}));o=o.concat(this.stateSpec)}if(a!=null&&(n.constants=a,s=s.concat(a),this.numConstants=a.length),s[0]instanceof ys){const c=[e].concat(s),f=this.inputSpec.concat(o),h=this.inputSpec;this.inputSpec=f;const p=super.apply(c,n);return this.inputSpec=h,p}else return super.apply(e,n)}call(e,n){return le(()=>{const r=n==null?null:n.mask,a=n==null?null:n.training;let i=n==null?null:n.initialState;e=Ke(e),i==null&&(this.stateful?i=this.states_:i=this.getInitialState(e));const s=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==s)throw new Q(`RNN Layer has ${s} state(s) but was passed ${i.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const o={training:a},c=J8((v,x)=>{const b=this.cell.call([v].concat(x),o);return[b[0],b.slice(1)]},e,i,this.goBackwards,r,null,this.unroll,this.returnSequences),f=c[0],h=c[1],p=c[2];this.stateful&&this.resetStates(p,a);const g=this.returnSequences?h:f;return this.returnState?[g].concat(p):g})}getInitialState(e){return le(()=>{let n=Kn(e.shape);return n=Ve(n,[1,2]),n=Zm(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?kE(n,[1,r]):n):this.cell.stateSize>1?[kE(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===_l.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const a=n.cell,i=io(a,r);return new e(Object.assign(n,{cell:i}))}}_l.className="RNN";ke(_l);class m1 extends st{}class zT extends m1{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Xn(this.units,"units"),this.activation=xl(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=nn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=nn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=nn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=rn(e.kernelRegularizer),this.recurrentRegularizer=rn(e.recurrentRegularizer),this.biasRegularizer=rn(e.biasRegularizer),this.kernelConstraint=jn(e.kernelConstraint),this.recurrentConstraint=jn(e.recurrentConstraint),this.biasConstraint=jn(e.biasConstraint),this.dropout=$d([1,vl([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=$d([1,vl([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=yt(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return le(()=>{if(e=e,e.length!==2)throw new Q(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const a=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=bl({ones:()=>pi(e),rate:this.dropout,training:a,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=bl({ones:()=>pi(r),rate:this.recurrentDropout,training:a,dropoutFunc:this.dropoutFunc}));let i;const s=this.dropoutMask,o=this.recurrentDropoutMask;s!=null?i=fs(ee(e,s),this.kernel.read()):i=fs(e,this.kernel.read()),this.bias!=null&&(i=Wi(i,this.bias.read())),o!=null&&(r=ee(r,o));let l=Ee(i,fs(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:yl(this.activation),useBias:this.useBias,kernelInitializer:ln(this.kernelInitializer),recurrentInitializer:ln(this.recurrentInitializer),biasInitializer:ln(this.biasInitializer),kernelRegularizer:Ut(this.kernelRegularizer),recurrentRegularizer:Ut(this.recurrentRegularizer),biasRegularizer:Ut(this.biasRegularizer),activityRegularizer:Ut(this.activityRegularizer),kernelConstraint:Fn(this.kernelConstraint),recurrentConstraint:Fn(this.recurrentConstraint),biasConstraint:Fn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}zT.className="SimpleRNNCell";ke(zT);class eH extends _l{constructor(e){e.cell=new zT(e),super(e)}call(e,n){return le(()=>{this.cell.dropoutMask!=null&&(lt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(lt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,a=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:a,initialState:i})})}static fromConfig(e,n){return new e(n)}}eH.className="SimpleRNN";ke(eH);class FT extends m1{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new Q("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Xn(this.units,"units"),this.activation=xl(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=xl(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=nn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=nn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=nn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=rn(e.kernelRegularizer),this.recurrentRegularizer=rn(e.recurrentRegularizer),this.biasRegularizer=rn(e.biasRegularizer),this.kernelConstraint=jn(e.kernelConstraint),this.recurrentConstraint=jn(e.recurrentConstraint),this.biasConstraint=jn(e.biasConstraint),this.dropout=$d([1,vl([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=$d([1,vl([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=yt(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return le(()=>{if(e=e,e.length!==2)throw new Q(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let a=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=bl({ones:()=>pi(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=bl({ones:()=>pi(a),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,s=this.recurrentDropoutMask;let o,l,c;0<this.dropout&&this.dropout<1&&(e=ee(e,i[0]));let f=fs(e,this.kernel.read());this.useBias&&(f=Wi(f,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(a=ee(a,s[0]));const h=this.recurrentKernel.read(),[p,g]=_a(h,[2*this.units,this.units],h.rank-1),v=fs(a,p),[x,b,w]=_a(f,3,f.rank-1),[S,k]=_a(v,2,v.rank-1);o=this.recurrentActivation.apply(Ee(x,S)),l=this.recurrentActivation.apply(Ee(b,k));const N=fs(ee(l,a),g);c=this.activation.apply(Ee(w,N));const I=Ee(ee(o,a),ee(Ee(1,vn(o)),c));return[I,I]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:yl(this.activation),recurrentActivation:yl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:ln(this.kernelInitializer),recurrentInitializer:ln(this.recurrentInitializer),biasInitializer:ln(this.biasInitializer),kernelRegularizer:Ut(this.kernelRegularizer),recurrentRegularizer:Ut(this.recurrentRegularizer),biasRegularizer:Ut(this.biasRegularizer),activityRegularizer:Ut(this.activityRegularizer),kernelConstraint:Fn(this.kernelConstraint),recurrentConstraint:Fn(this.recurrentConstraint),biasConstraint:Fn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}FT.className="GRUCell";ke(FT);class tH extends _l{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new FT(e),super(e)}call(e,n){return le(()=>{this.cell.dropoutMask!=null&&(lt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(lt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,a=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:a,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}tH.className="GRU";ke(tH);class g1 extends m1{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Xn(this.units,"units"),this.activation=xl(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=xl(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=nn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=nn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=nn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=rn(e.kernelRegularizer),this.recurrentRegularizer=rn(e.recurrentRegularizer),this.biasRegularizer=rn(e.biasRegularizer),this.kernelConstraint=jn(e.kernelConstraint),this.recurrentConstraint=jn(e.recurrentConstraint),this.biasConstraint=jn(e.biasConstraint),this.dropout=$d([1,vl([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=$d([1,vl([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=yt(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let a;if(this.useBias){if(this.unitForgetBias){const i=this.biasInitializer,s=this.units;a=new(n=class extends vi{apply(l,c){const f=i.apply([s]),h=new ET().apply([s]),p=i.apply([s*2]);return rF(rF(f,h),p)}},n.className="CustomInit",n)}else a=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,a,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return le(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new Q(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let a=e[1];const i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=bl({ones:()=>pi(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=bl({ones:()=>pi(a),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,o=this.recurrentDropoutMask;let l,c,f,h;0<this.dropout&&this.dropout<1&&(e=ee(e,s[0]));let p=fs(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(a=ee(a,o[0])),p=Ee(p,fs(a,this.recurrentKernel.read())),this.useBias&&(p=Wi(p,this.bias.read()));const[g,v,x,b]=_a(p,4,p.rank-1);l=this.recurrentActivation.apply(g),c=this.recurrentActivation.apply(v),f=Ee(ee(c,i),ee(l,this.activation.apply(x))),h=this.recurrentActivation.apply(b);const w=ee(h,this.activation.apply(f));return[w,w,f]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:yl(this.activation),recurrentActivation:yl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:ln(this.kernelInitializer),recurrentInitializer:ln(this.recurrentInitializer),biasInitializer:ln(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Ut(this.kernelRegularizer),recurrentRegularizer:Ut(this.recurrentRegularizer),biasRegularizer:Ut(this.biasRegularizer),activityRegularizer:Ut(this.activityRegularizer),kernelConstraint:Fn(this.kernelConstraint),recurrentConstraint:Fn(this.recurrentConstraint),biasConstraint:Fn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}g1.className="LSTMCell";ke(g1);class nH extends _l{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new g1(e),super(e)}call(e,n){return le(()=>{this.cell.dropoutMask!=null&&(lt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(lt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,a=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:a,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}nH.className="LSTM";ke(nH);class jT extends m1{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return le(()=>{e=e;let r=e.slice(1);const a=[];for(const o of this.cells.slice().reverse())Array.isArray(o.stateSize)?a.push(r.splice(0,o.stateSize.length)):a.push(r.splice(0,1));a.reverse();const i=[];let s;for(let o=0;o<this.cells.length;++o){const l=this.cells[o];r=a[o],o===0?s=[e[0]].concat(r):s=[s[0]].concat(r),s=l.call(s,n),i.push(s.slice(1))}r=[];for(const o of i.slice().reverse())r.push(...o);return[s[0]].concat(r)})}build(e){NE(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,a)=>{ku(`RNNCell_${a}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=i=>({className:i.getClassName(),config:i.getConfig()}),a={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),a)}static fromConfig(e,n,r={}){const a=[];for(const i of n.cells)a.push(io(i,r));return new e({cells:a})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return IE(e)}setWeights(e){const n=[];for(const r of this.cells){const a=r.weights.length,i=e.splice(a);for(let s=0;s<r.weights.length;++s)n.push([r.weights[s],i[s]])}DT(n)}}jT.className="StackedRNNCells";ke(jT);function bl(t){const{ones:e,rate:n,training:r=!1,count:a=1,dropoutFunc:i}=t,s=()=>i!=null?i(e(),n):HG(e(),n),o=()=>Jm(s,e,r);return!a||a<=1?us(o().clone()):Array(a).fill(void 0).map(o).map(c=>us(c.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var wNe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n};class rH extends _l{constructor(e){if(e.unroll)throw new nt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new nt("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Ln({ndim:5})]}call(e,n){return le(()=>{if(this.cell.dropoutMask!=null&&(lt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(lt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new Q("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,a=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:a,initialState:i})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return le(()=>{const{stateSize:n}=this.cell,r=e.shape,a=this.computeSingleOutputShape(r),i=[a[0],...a.slice(2)],s=Kn(i);return Array.isArray(n)?Array(n.length).fill(s):[s]})}resetStates(e,n=!1){le(()=>{if(!this.stateful)throw new ts("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,a=this.computeSingleOutputShape(r),i=[a[0],...a.slice(2)];if(r[0]==null)throw new Q("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Kn(i)):this.states_=[Kn(i)];else if(e==null)lt(this.states_),this.keptStates!=null&&(lt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Kn(i)):this.states_[0]=Kn(i);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Q(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):lt(this.states_);for(let o=0;o<this.states_.length;++o){const l=e[o],c=i;if(!It(l.shape,c))throw new Q(`State ${o} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${l.shape}`);this.states_[o]=l}}this.states_=this.states_.map(o=>us(o.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:a,padding:i,strides:s,dilationRate:o}=this.cell,l=n==="channelsFirst",c=e[l?3:2],f=e[l?4:3],h=Pi(c,a[0],i,s[0],o[0]),p=Pi(f,a[1],i,s[1],o[1]);return[...e.slice(0,2),...l?[r,h,p]:[h,p,r]]}}rH.className="ConvRNN2D";class BT extends g1{constructor(e){const{filters:n,kernelSize:r,strides:a,padding:i,dataFormat:s,dilationRate:o}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,Xn(this.filters,"filters"),this.kernelSize=md(r,2,"kernelSize"),this.kernelSize.forEach(l=>Xn(l,"kernelSize")),this.strides=md(a||1,2,"strides"),this.strides.forEach(l=>Xn(l,"strides")),this.padding=i||"valid",ja(this.padding),this.dataFormat=s||"channelsLast",Sn(this.dataFormat),this.dilationRate=md(o||1,2,"dilationRate"),this.dilationRate.forEach(l=>Xn(l,"dilationRate"))}build(e){var n;e=yt(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new Q(`The channel dimension of the input should be defined. Found ${e[r]}`);const a=e[r],i=4,s=this.kernelSize.concat([a,this.filters*i]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const o=this.kernelSize.concat([this.filters,this.filters*i]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,f=this.filters;l=new(n=class extends vi{apply(p,g){const v=c.apply([f]),x=Dl([f]),b=c.apply([f*2]);return kT([v,x,b])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*i],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return le(()=>{if(e.length!==3)throw new Q(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,a=e[0],i=e[1],s=e[2],o=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=bl({ones:()=>pi(a),rate:this.dropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(oe,j,q)=>!j||!j[q]?oe:ee(j[q],oe);let f=c(a,l,0),h=c(a,l,1),p=c(a,l,2),g=c(a,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=bl({ones:()=>pi(i),rate:this.recurrentDropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const v=this.recurrentDropoutMask;let x=c(i,v,0),b=c(i,v,1),w=c(i,v,2),S=c(i,v,3);const k=3,[N,I,T,R]=_a(this.kernel.read(),o,k),[_,M,P,$]=this.useBias?_a(this.bias.read(),o):[null,null,null,null];f=this.inputConv(f,N,_,this.padding),h=this.inputConv(h,I,M,this.padding),p=this.inputConv(p,T,P,this.padding),g=this.inputConv(g,R,$,this.padding);const[z,W,H,G]=_a(this.recurrentKernel.read(),o,k);x=this.recurrentConv(x,z),b=this.recurrentConv(b,W),w=this.recurrentConv(w,H),S=this.recurrentConv(S,G);const F=this.recurrentActivation.apply(Ee(f,x)),V=this.recurrentActivation.apply(Ee(h,b)),U=Ee(ee(V,s),ee(F,this.activation.apply(Ee(p,w)))),Y=ee(this.recurrentActivation.apply(Ee(g,S)),this.activation.apply(U));return[Y,Y,U]})}getConfig(){const e=super.getConfig(),{units:n}=e,r=wNe(e,["units"]),a={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},r),a)}inputConv(e,n,r,a){const i=Bu(e,n,this.strides,a||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Wi(i,r,this.dataFormat):i}recurrentConv(e,n){return Bu(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}BT.className="ConvLSTM2DCell";ke(BT);class aH extends rH{constructor(e){const n=new BT(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}aH.className="ConvLSTM2D";ke(aH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class UT extends st{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let a=0;a<this.noiseShape.length;++a)r.push(this.noiseShape[a]==null?n[a]:this.noiseShape[a]);return r}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=Ke(e);if(0<this.rate&&this.rate<1){const a=n.training==null?!1:n.training,i=this.getNoiseShape(r);return Jm(()=>HG(r,this.rate,i,this.seed),()=>r,a)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}UT.className="Dropout";ke(UT);class iH extends UT{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}iH.className="SpatialDropout1D";ke(iH);class VT extends st{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,Xn(this.units,"units"),this.activation=xl(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=nn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=nn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=jn(e.kernelConstraint),this.biasConstraint=jn(e.biasConstraint),this.kernelRegularizer=rn(e.kernelRegularizer),this.biasRegularizer=rn(e.biasRegularizer),this.activityRegularizer=rn(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=yt(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=yt(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=Ke(e),a=FG(this.activation.getClassName());let i;return a!=null?i=fs(r,this.kernel.read(),a,this.bias?this.bias.read():null):(i=fs(r,this.kernel.read()),this.bias!=null&&(i=Wi(i,this.bias.read())),this.activation!=null&&(i=this.activation.apply(i))),i})}getConfig(){const e={units:this.units,activation:yl(this.activation),useBias:this.useBias,kernelInitializer:ln(this.kernelInitializer),biasInitializer:ln(this.biasInitializer),kernelRegularizer:Ut(this.kernelRegularizer),biasRegularizer:Ut(this.biasRegularizer),activityRegularizer:Ut(this.activityRegularizer),kernelConstraint:Fn(this.kernelConstraint),biasConstraint:Fn(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}VT.className="Dense";ke(VT);class sH extends st{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=yt(e);for(const n of e.slice(1))if(n==null)throw new Q(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],fl(e,1)]}call(e,n){return le(()=>{this.invokeCallHook(e,n);let r=Ke(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const a=[0];for(let i=2;i<r.rank;++i)a.push(i);a.push(1),r=pt(r,a)}return tEe(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}sH.className="Flatten";ke(sH);class oH extends st{constructor(e){super(e),this.supportsMasking=!0,this.activation=xl(e.activation)}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=Ke(e);return this.activation.apply(r)})}getConfig(){const e={activation:yl(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}oH.className="Activation";ke(oH);class lH extends st{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return le(()=>(e=Ke(e),Jke(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}lH.className="RepeatVector";ke(lH);class uH extends st{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",a=n.slice();let i=1,s=null;for(let l=0;l<a.length;++l){const c=a[l];if(this.isUnknown(c))if(s===null)s=l;else throw new Q("Can only specifiy one unknown dimension.");else i*=c}const o=fl(e);if(s!==null){if(i===0||o%i!==0)throw new Q(r);a[s]=o/i}else if(o!==i)throw new Q(r);return a}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=Ke(e),a=r.shape,i=a.slice(0,1).concat(this.fixUnknownDimension(a.slice(1),this.targetShape));return ne(r,i)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}uH.className="Reshape";ke(uH);class cH extends st{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=Fi(1,e.dims.length+1);if(!It(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Ln({ndim:this.dims.length+1})]}computeOutputShape(e){e=yt(e);const n=e.slice();return this.dims.forEach((r,a)=>{n[a+1]=e[r]}),n}call(e,n){return pt(Ke(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}cH.className="Permute";ke(cH);class dH extends st{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=Ke(e);return vE(Ay(r,this.maskValue),-1)}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=Ke(e),s=vE(Ay(r,this.maskValue),-1,!0);return ee(r,Oe(s,r.dtype))})}}dH.className="Masking";ke(dH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class fH extends st{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(Ot(e.inputLength))}this.inputDim=e.inputDim,Xn(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Xn(this.outputDim,"outputDim"),this.embeddingsInitializer=nn(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=rn(e.embeddingsRegularizer),this.activityRegularizer=rn(e.activityRegularizer),this.embeddingsConstraint=jn(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return le(()=>this.maskZero?(e=Ke(e),Ay(e,mt(e))):null)}computeOutputShape(e){if(e=yt(e),this.inputLength==null)return[...e,this.outputDim];const n=Ot(this.inputLength);if(n.length!==e.length-1)throw new Q(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let a=0;a<n.length;++a){const i=n[a],s=e[a+1];if(i!=null&&s!=null&&i!==s)throw new Q(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);i==null&&(n[r]=s),r++}}return[e[0],...n,this.outputDim]}call(e,n){return le(()=>{this.invokeCallHook(e,n);let r=Ke(e);r.dtype!=="int32"&&(r=ds(r,"int32"));const a=GG(this.embeddings.read(),ne(r,[r.size]));return ne(a,yt(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:ln(this.embeddingsInitializer),embeddingsRegularizer:Ut(this.embeddingsRegularizer),activityRegularizer:Ut(this.activityRegularizer),embeddingsConstraint:Fn(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}fH.className="Embedding";ke(fH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ic extends st{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new nt}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let a=0;a<n.length;++a){const i=e[e.length-n.length+a],s=n[a];if(i==null||s==null||i<0||s<0)r.push(null);else if(i===1)r.push(s);else if(s===1)r.push(i);else{if(i!==s)throw new Q("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(i)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[yt(e)]),e=e,e.length<2)throw new Q(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const i of e)i!=null&&i[0]!==null&&n.push(i[0]);if(n=dl(n),n.length>1)throw new Q(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let i=1;i<e.length;++i){const s=e[i]==null?null:e[i].slice(1);r=this.computeElementwiseOpOutputShape(r,s)}const a=e.map(i=>i.length);e.indexOf(null)===-1&&dl(a).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return le(()=>{if(e=e,this.reshapeRequired){const r=[],a=e.map(i=>i.rank);if(a.indexOf(null)===-1){const i=vl(a);for(let s of e){const o=s.rank;for(let l=0;l<i-o;++l)s=Zm(s,1);r.push(s)}return this.mergeFunction(r)}else{let i=!1;for(const l of e){const c=l.rank;if(c==null){const f=l.shape,h=f[0],p=f.slice(1).concat([h]);let g=ne(l,[h].concat(fl(f.slice(1))));g=pt(g,[1,0]),g=ne(g,p),r.push(g),i=!0}else if(c>1){const f=Fi(1,c).concat([0]);r.push(pt(l,f)),i=!0}else r.push(l)}let s=this.mergeFunction(r);const o=s.rank;if(i){if(o==null){const l=s.shape,c=l.length,f=l[c-1],h=[f].concat(l.slice(0,l.length-1));s=ne(pt(ne(s,[-1,f]),[1,0]),h)}else if(o>1){const l=[o-1].concat(Fi(0,o-1));s=pt(s,l)}}return s}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let a=1;a<e.length;++a){const i=e[a]==null?null:e[a].slice(1);n=this.computeElementwiseOpOutputShape(n,i)}let r=[];for(const a of e)a!=null&&a[0]!==null&&r.push(a[0]);return r=dl(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return le(()=>{if(n==null)return null;if(!Array.isArray(n))throw new Q("`mask` should be an Array");if(!Array.isArray(e))throw new Q("`inputs` should be an Array");if(n.length!==e.length)throw new Q(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(a=>a==null))return null;n=n.map(a=>a==null?a:Wr(a,0));let r=n[0];for(let a=1;a<n.length-1;++a)r=mo(r,n[a]);return r})}}class hH extends ic{constructor(e){super(e)}mergeFunction(e){return le(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Ee(n,e[r]);return n})}}hH.className="Add";ke(hH);class pH extends ic{constructor(e){super(e)}mergeFunction(e){return le(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=ee(n,e[r]);return n})}}pH.className="Multiply";ke(pH);class mH extends ic{constructor(e){super(e)}mergeFunction(e){return le(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Ee(n,e[r]);return ee(1/e.length,n)})}}mH.className="Average";ke(mH);class gH extends ic{constructor(e){super(e)}mergeFunction(e){return le(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Ol(n,e[r]);return n})}}gH.className="Maximum";ke(gH);class vH extends ic{constructor(e){super(e)}mergeFunction(e){return le(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=cp(n,e[r]);return n})}}vH.className="Minimum";ke(vH);class yH extends ic{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new Q("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const a of e)if(a!=null){n=!1;break}if(n)return;const r=[];for(let a=0;a<e.length;++a){const i=e[a].slice();i.splice(this.axis,1);let s=!1;for(const o of r)if(It(o,i)){s=!0;break}s||r.push(i)}if(r.length>1)throw new Q("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return le(()=>kT(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new Q("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis;for(const i of n.slice(1)){if(r[a]==null||i[a]==null){r[a]=null;break}r[a]+=i[a]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new Q("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new Q("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new Q(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return le(()=>{let r=!0;if(n.forEach(s=>{if(s!=null){r=!1;return}}),r)return null;const a=[];for(let s=0;s<e.length;++s)n[s]==null?a.push(Oe(pi(e[s]),"bool")):n[s].rank<e[s].rank?a.push(Wr(n[s],-1)):a.push(n[s]);const i=qr(a,this.axis);return x6(i,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}yH.className="Concatenate";ke(yH);function $h(t,e){for(;t<0;)t+=e;return t}function SNe(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new nt("batchDot is not implemented for tensors of 4D or higher rank yet");if(B(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),B(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new nt("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,a=e.shape.length;n==null&&(n=[r-1,a-2]);const i=n;return le(()=>{let s;if(r>a){s=r-a;const l=[];for(let c=0;c<s;++c)l.push(1);e=ne(e,e.shape.concat(l))}else if(a>r){s=a-r;const l=[];for(let c=0;c<s;++c)l.push(1);t=ne(t,t.shape.concat(l))}else s=0;let o;if(t.shape.length===2&&e.shape.length===2)i[0]===i[1]?o=Ve(ee(t,e),i[0]):o=Ve(ee(pt(t,[1,0]),e),i[1]);else{const l=i[0]!==t.shape.length-1,c=i[1]===e.shape.length-1;o=St(t,e,l,c)}if(s>0){let l;r>a?l=r+a-3:l=r-1;const c=[];for(let f=l;f<l+s;++f)c.push(f);o=Gm(o,c)}return o.shape.length===1&&(o=Wr(o,1)),o})}class xH extends ic{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){B(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new nt("Dot layer does not support tensors of 4D or higher rank yet.");const a=this.interpretAxes(n,r);if(n[a[0]]!==r[a[1]])throw new Q(`Dimension incompatibility: ${n[a[0]]} !== ${r[a[1]]}`)}mergeFunction(e){if(e.length!==2)throw new Q(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],a;return Array.isArray(this.axes)?a=this.axes.map((i,s)=>$h(i,e[s].shape.length)):a=[$h(this.axes,n.shape.length),$h(this.axes,r.shape.length)],this.normalize&&(n=My(n,a[0]),r=My(r,a[1])),SNe(n,r,a)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[$h(this.axes,e.length),$h(this.axes,n.length)],r}computeOutputShape(e){B(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new nt("Dot layer does not support tensors of 4D or higher rank yet.");const a=this.interpretAxes(n,r);n.splice(a[0],1),r.splice(a[1],1),r.splice(0,1);const i=n.concat(r);return i.length===1&&i.push(1),i}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}xH.className="Dot";ke(xH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class bH extends st{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=Ke(e);return Jm(()=>Ee(u1(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}bH.className="GaussianNoise";ke(bH);class wH extends st{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=Ke(e);return this.rate>0&&this.rate<1?Jm(()=>{const i=Math.sqrt(this.rate/(1-this.rate));return ee(r,u1(r.shape,1,i))},()=>r,n.training||!1):r})}}wH.className="GaussianDropout";ke(wH);class SH extends st{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Ke(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return le(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return Jm(()=>{const i=Ke(e),o=-1.6732632423543772*1.0507009873554805;let l=tc(Wm(r),this.rate);l=ds(l,"float32");const c=((1-this.rate)*(1+this.rate*o**2))**-.5,f=-c*o*this.rate,h=Ee(ee(i,l),ee(Ee(l,-1),o));return Ee(ee(h,c),f)},()=>Ke(e),n.training||!1)}return e})}}SH.className="AlphaDropout";ke(SH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pp(t,e,n,r,a,i=.001){let s;if(t.rank===2)s=ebe(t,e,n,r,a,i);else if(t.rank===3)s=nbe(t,e,n,r,a,i);else if(t.rank===4)s=abe(t,e,n,r,a,i);else throw new nt(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return s}function CNe(t,e,n,r,a=.001){return le(()=>{const i=DA(t,r),s=i.mean,o=i.variance;return[pp(t,s,o,n,e,a),s,o]})}function kNe(t,e,n,r,a=.001){return le(()=>{const i=DA(t,r),s=i.mean,o=i.variance,l=[];for(const v of Fi(0,t.rank))r.indexOf(v)!==-1?l.push(1):l.push(t.shape[v]);const c=ne(s,l),f=ne(o,l),h=e==null?null:ne(e,l),p=n==null?null:ne(n,l);return[pp(t,c,f,p,h,a),s,o]})}function ENe(t,e,n,r,a=.001){return It(r.slice().sort(),Fi(0,t.rank-1))?CNe(t,e,n,r,a):kNe(t,e,n,r,a)}class CH extends st{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=nn(e.betaInitializer||"zeros"),this.gammaInitializer=nn(e.gammaInitializer||"ones"),this.movingMeanInitializer=nn(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=nn(e.movingVarianceInitializer||"ones"),this.betaConstraint=jn(e.betaConstraint),this.gammaConstraint=jn(e.gammaConstraint),this.betaRegularizer=rn(e.betaRegularizer),this.gammaRegularizer=rn(e.gammaRegularizer)}build(e){e=yt(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new Q(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Ln({ndim:e.length,axes:{[n]:r}})];const a=[r];this.scale&&(this.gamma=this.addWeight("gamma",a,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",a,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",a,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",a,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return le(()=>{const r=n.training==null?!1:n.training,a=Ke(e),i=a.shape,s=i.length,o=Fi(0,s),l=this.axis>=0?this.axis:this.axis+s;o.splice(l,1);const c=Gu(1,s);c[l]=i[l];const f=o.slice();f.sort();const h=!It(f,Fi(0,s).slice(0,s-1)),p=()=>{if(h){const S=ne(this.movingMean.read(),c),k=ne(this.movingVariance.read(),c),N=this.center?ne(this.beta.read(),c):null,I=this.scale?ne(this.gamma.read(),c):null;return pp(a,S,k,N,I,this.epsilon)}else return pp(a,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return p();const[g,v,x]=ENe(a,this.gamma.read(),this.beta.read(),o,this.epsilon),b=(S,k,N)=>{le(()=>{const I=1-N,T=S.read(),R=ee(qe(T,k),I);S.write(qe(T,R))})};return(()=>{b(this.movingMean,v,this.momentum),b(this.movingVariance,x,this.momentum)})(),g})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:ln(this.betaInitializer),gammaInitializer:ln(this.gammaInitializer),movingMeanInitializer:ln(this.movingMeanInitializer),movingVarianceInitializer:ln(this.movingVarianceInitializer),betaRegularizer:Ut(this.betaRegularizer),gammaRegularizer:Ut(this.gammaRegularizer),betaConstraint:Fn(this.betaConstraint),gammaConstraint:Fn(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}CH.className="BatchNormalization";ke(CH);class kH extends st{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=nn(e.betaInitializer||"zeros"),this.gammaInitializer=nn(e.gammaInitializer||"ones"),this.betaRegularizer=rn(e.betaRegularizer),this.gammaRegularizer=rn(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=yt(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=n);for(const i of this.axis)if(i<0||i>=n)throw new Error(`Invalid axis: ${i}`);if(this.axis.length!==dl(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(i=>e[i]),a=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,a):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,a):this.beta=null,this.built=!0}call(e,n){const r=Ke(e),a=r.shape,i=a.length;return le(()=>{let{mean:o,variance:l}=DA(r,this.axis,!0);const c=Gu(1,i);for(const x of this.axis)c[x]=a[x];const f=x=>x!=null&&x.shape.length!==i?ne(x,c):x;let h=this.scale?f(this.gamma.read()):null,p=this.center?f(this.beta.read()):null;const g=[],v=[];for(let x=0;x<i;++x)this.axis.indexOf(x)!==-1?(g.push(a[x]),v.push(1)):(g.push(1),v.push(a[x]));return o=Di(o,g),l=Di(l,g),h!=null&&(h=Di(h,v)),p!=null&&(p=Di(p,v)),pp(r,o,l,p,h,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:ln(this.betaInitializer),gammaInitializer:ln(this.gammaInitializer),betaRegularizer:Ut(this.betaRegularizer),gammaRegularizer:Ut(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}kH.className="LayerNormalization";ke(kH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function NNe(t,e,n){return le(()=>{if(t.rank!==4)throw new Q(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new Q("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=ji()),n!=="channelsLast"&&n!=="channelsFirst")throw new Q(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],RA(t,r)})}class EH extends st{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?ji():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new Q(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new Q(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new Q(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new Ln({ndim:4})]}computeOutputShape(e){e=yt(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return le(()=>NNe(Ke(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}EH.className="ZeroPadding2D";ke(EH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function v1(t,e,n,r,a,i){return le(()=>{Sn(a),BG(i),ja(r),n==null&&(n=[1,1]),r==null&&(r="valid"),a==null&&(a=ji()),i==null&&(i="max"),t=LT(t,a);let s;const o=r==="same"?"same":"valid";return i==="max"?s=OA(t,e,n,o):s=wA(t,e,n,o),a==="channelsFirst"&&(s=pt(s,[0,3,1,2])),s})}function NH(t,e,n,r,a,i){return le(()=>{Sn(a),BG(i),ja(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),a==null&&(a=ji()),i==null&&(i="max"),t=W8(t,a);let s;const o=r==="same"?"same":"valid";return i==="max"?s=U1e(t,e,n,o):s=Wxe(t,e,n,o),a==="channelsFirst"&&(s=pt(s,[0,4,1,2,3])),s})}class IH extends st{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new Q(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(Xn(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new Q(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);Xn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,ja(this.padding),this.inputSpec=[new Ln({ndim:3})]}computeOutputShape(e){e=yt(e);const n=Pi(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return le(()=>{this.invokeCallHook(e,n),e=Zm(Ke(e),2);const r=this.poolingFunction(Ke(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Gm(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class AH extends IH{constructor(e){super(e)}poolingFunction(e,n,r,a,i){return Sn(i),ja(a),v1(e,n,r,a,i,"max")}}AH.className="MaxPooling1D";ke(AH);class TH extends IH{constructor(e){super(e)}poolingFunction(e,n,r,a,i){return Sn(i),ja(a),v1(e,n,r,a,i,"avg")}}TH.className="AveragePooling1D";ke(TH);class $H extends st{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new Q(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Xn(this.poolSize,"poolSize"),Xn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Sn(this.dataFormat),ja(this.padding),this.inputSpec=[new Ln({ndim:4})]}computeOutputShape(e){e=yt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=Pi(n,this.poolSize[0],this.padding,this.strides[0]),r=Pi(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return le(()=>(this.invokeCallHook(e,n),this.poolingFunction(Ke(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class OH extends $H{constructor(e){super(e)}poolingFunction(e,n,r,a,i){return Sn(i),ja(a),v1(e,n,r,a,i,"max")}}OH.className="MaxPooling2D";ke(OH);class DH extends $H{constructor(e){super(e)}poolingFunction(e,n,r,a,i){return Sn(i),ja(a),v1(e,n,r,a,i,"avg")}}DH.className="AveragePooling2D";ke(DH);class RH extends st{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new Q(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Xn(this.poolSize,"poolSize"),Xn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Sn(this.dataFormat),ja(this.padding),this.inputSpec=[new Ln({ndim:5})]}computeOutputShape(e){e=yt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],a=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=Pi(n,this.poolSize[0],this.padding,this.strides[0]),r=Pi(r,this.poolSize[1],this.padding,this.strides[1]),a=Pi(a,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,a]:[e[0],n,r,a,e[4]]}call(e,n){return le(()=>(this.invokeCallHook(e,n),this.poolingFunction(Ke(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class _H extends RH{constructor(e){super(e)}poolingFunction(e,n,r,a,i){return Sn(i),ja(a),NH(e,n,r,a,i,"max")}}_H.className="MaxPooling3D";ke(_H);class MH extends RH{constructor(e){super(e)}poolingFunction(e,n,r,a,i){return Sn(i),ja(a),NH(e,n,r,a,i,"avg")}}MH.className="AveragePooling3D";ke(MH);class PH extends st{constructor(e){super(e),this.inputSpec=[new Ln({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new nt}}class LH extends PH{constructor(e){super(e||{})}call(e,n){return le(()=>{const r=Ke(e);return In(r,1)})}}LH.className="GlobalAveragePooling1D";ke(LH);class zH extends PH{constructor(e){super(e||{})}call(e,n){return le(()=>{const r=Ke(e);return Mi(r,1)})}}zH.className="GlobalMaxPooling1D";ke(zH);class FH extends st{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Sn(this.dataFormat),this.inputSpec=[new Ln({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new nt}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class jH extends FH{call(e,n){return le(()=>{const r=Ke(e);return this.dataFormat==="channelsLast"?In(r,[1,2]):In(r,[2,3])})}}jH.className="GlobalAveragePooling2D";ke(jH);class BH extends FH{call(e,n){return le(()=>{const r=Ke(e);return this.dataFormat==="channelsLast"?Mi(r,[1,2]):Mi(r,[2,3])})}}BH.className="GlobalMaxPooling2D";ke(BH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class UH extends st{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const a=n.layer,i=io(a,r);delete n.layer;const s={layer:i};return Object.assign(s,n),new e(s)}}class VH extends UH{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=yt(e),e.length<3)throw new Q(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=yt(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),a=e[1];return[r[0],a].concat(r.slice(1))}call(e,n){return le(()=>(e=Ke(e),J8((s,o)=>[Ke(this.layer.call(s,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}VH.className="TimeDistributed";ke(VH);function INe(t){ac(Kke,"BidirectionalMergeMode",t)}const ANe="concat";class WH extends UH{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=io(r),n.goBackwards=n.goBackwards!==!0;const a={};if(a.className=e.layer.getClassName(),a.config=n,this.backwardLayer=io(a),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?ANe:e.mergeMode,INe(this.mergeMode),e.weights)throw new nt("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,a,i;return this.returnState&&(i=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,a=[r]):this.mergeMode==null?a=[r,r.slice()]:a=[r],this.returnState?this.mergeMode==null?a.concat(i).concat(i.slice()):[r].concat(i).concat(i.slice()):Gr(a)}apply(e,n){let r=n==null?null:n.initialState,a=n==null?null:n.constants;n==null&&(n={});const i=Q8(e,r,a,this.numConstants);if(e=i.inputs,r=i.initialState,a=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&a==null)return super.apply(e,n);const s=[],o=[];if(r!=null){const c=r.length;if(c%2>0)throw new Q("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,s.push(...r);const f=r.map(h=>new Ln({shape:h.shape}));this.forwardLayer.stateSpec=f.slice(0,c/2),this.backwardLayer.stateSpec=f.slice(c/2),o.push(...f)}if(a!=null)throw new nt("Support for constants in Bidirectional layers is not implemented yet.");const l=s[0]instanceof ys;for(const c of s)if(c instanceof ys!==l)throw new Q("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[e].concat(s),f=this.inputSpec.concat(o),h=this.inputSpec;this.inputSpec=f;const p=super.apply(c,n);return this.inputSpec=h,p}else return super.apply(e,n)}call(e,n){return le(()=>{const r=n.initialState;let a,i;if(r==null)a=this.forwardLayer.call(e,n),i=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),c=r.slice(r.length/2);a=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),i=this.backwardLayer.call(e,Object.assign(n,{initialState:c}))}let s;this.returnState&&(Array.isArray(a)&&(s=a.slice(1).concat(i.slice(1))),a=a[0],i=i[0]),this.returnSequences&&(i=Vu(i,1));let o;return this.mergeMode==="concat"?o=kT([a,i]):this.mergeMode==="sum"?o=Ee(a,i):this.mergeMode==="ave"?o=ee(.5,Ee(a,i)):this.mergeMode==="mul"?o=ee(a,i):this.mergeMode==null&&(o=[a,i]),this.returnState?this.mergeMode==null?o.concat(s):[o].concat(s):o})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){ku(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),ku(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const i=this.forwardLayer.states.map(s=>null);return Array.isArray(r)?r.concat(i).concat(i):[r].concat(i).concat(i)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=io(n.layer);if(delete n.layer,n.numConstants!=null)throw new nt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const a=n;return a.layer=r,new e(a)}}WH.className="Bidirectional";ke(WH);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class GH extends st{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return le(()=>(e=Ke(e),e.dtype!=="float32"&&(e=ds(e,"float32")),Ee(ee(e,this.scale),this.offset)))}}GH.className="Rescaling";ke(GH);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:TNe,cropAndResize:$Ne}=to;class HH extends st{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,a,i,s,o,l){return le(()=>{let c,f=!1;const h=n/s,p=r/o,g=(a+n)/s,v=(i+r)/o,x=[h,p,g,v],b=[];e.rank===3?(f=!0,c=go([e])):c=e;for(let I=0;I<c.shape[0];I++)b.push(x);const w=u6(b,[b.length,4]),S=dp(0,b.length,1,"int32"),N=$Ne(c,w,S,[a,i],"nearest");return ds(f?Ke(Wu(N)):N,l)})}upsize(e,n,r,a){return le(()=>{const i=TNe(e,[n,r]);return ds(i,a)})}call(e,n){return le(()=>{const r=Ke(e),a=r.dtype,i=r.shape,s=i[i.length-3],o=i[i.length-2];let l=0;s!==this.height&&(l=Math.floor((s-this.height)/2));let c=0;return o!==this.width&&(c=Math.floor((o-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(r,l,c,this.height,this.width,s,o,a):this.upsize(e,this.height,this.width,a)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=yt(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}HH.className="CenterCrop";ke(HH);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ONe(t,e,n,r){let a=Ke(t);if(a.dtype!=="int32"&&(a=ds(a,"int32")),e==="int")return a;const i=a.shape;if(a.rank===0&&(a=Wr(a,-1)),e==="oneHot"&&a.shape[a.shape.length-1]!==1&&(a=Wr(a,-1)),a.rank>2)throw new Q(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${i} which would result in output rank ${a.rank}.`);const s=["multiHot","oneHot"].includes(e),o=a;let l;if(typeof r<"u"&&e==="count"?l=_z(o,r,n,s):l=_z(o,[],n,s),e!=="tfIdf")return l;if(r)return ee(l,r);throw new Q("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class qH extends st{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=yt(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return le(()=>{e=Ke(e),e.dtype!=="int32"&&(e=ds(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new Q(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=Ke(n.countWeights)}const a=Mi(e),i=Ny(e),s=Fa(this.numTokens,a).bufferSync().get(0),o=tc(i,0).bufferSync().get(0);if(!(s&&o))throw new Q(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return ONe(e,this.outputMode,this.numTokens,r)})}}qH.className="CategoryEncoding";ke(qH);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const DNe=["bilinear","nearest"],wF=new Set(DNe);class KH extends st{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(wF.has(e.interpolation))this.interpolation=e.interpolation;else throw new Q(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=yt(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return le(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return to.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return to.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...wF]} are supported`)})}}KH.className="Resizing";ke(KH);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class XH{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}XH.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class YH extends st{constructor(e){super(e),this.randomGenerator=new XH(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}YH.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const RNe=["bilinear","nearest"],SF=new Set(RNe);class ZH extends YH{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new Q(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new Q(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new Q(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(SF.has(r))this.interpolation=r;else throw new Q(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=yt(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return le(()=>{const r=Ke(e);this.imgHeight=r.shape[r.shape.length-3];const a=r.shape[r.shape.length-2];this.widthFactor=Wm([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let i=this.widthFactor.dataSync()[0]*a;i=Math.round(i);const s=[this.imgHeight,i];switch(this.interpolation){case"bilinear":return to.resizeBilinear(e,s);case"nearest":return to.resizeNearestNeighbor(e,s);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...SF]} are supported`)}})}}ZH.className="RandomWidth";ke(ZH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gd(t){return new VT(t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ne=fe();_Ne.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var CF;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(CF||(CF={}));var kF;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(kF||(kF={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var EF;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(EF||(EF={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Me(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&B(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MNe=q6;class y1 extends EI{nextDataId(){return y1.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new vW(this,Qi())}write(e,n,r){this.firstUse&&(this.firstUse=!1,fe().get("IS_NODE")&&$a(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const a={id:this.nextDataId()};return this.data.set(a,{values:e,dtype:r,refCount:1}),a}makeTensorInfo(e,n,r){let a;if(n==="string"&&r!=null&&r.length>0&&Hp(r[0])){const i=r.map(s=>cl(s));a=this.write(i,e,n)}else a=this.write(r,e,n);return{dataId:a,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,a,i){this.data.set(e,{values:n,dtype:a,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const a=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return vo(a,i)}return iye(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(a=>gl(a));return at(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return at(e.shape,e.dtype,n)}makeOutput(e,n,r){return Qi().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Ur();return e(),{kernelMs:Ur()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Me([e],"where");const n=this.readSync(e.dataId);return MNe(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}y1.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QH(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const PNe=t=>{const{x:e}=t.inputs,n=t.backend;Me(e,"abs");let r=new Float32Array(ve(e.shape));const a=n.data.get(e.dataId).values;return r=QH(a),n.makeOutput(r,e.shape,e.dtype)},LNe={kernelName:Xx,backendName:"cpu",kernelFunc:PNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cn(t){return(e,n,r,a,i)=>{const s=et(e,n),o=s.length,l=Ue(s),c=ve(s),f=Sr(i,c),h=e.length,p=n.length,g=Ue(e),v=Ue(n),x=Ad(e,s),b=Ad(n,s);if(x.length+b.length===0)for(let w=0;w<f.length;++w)f[w]=t(r[w%r.length],a[w%a.length]);else for(let w=0;w<f.length;++w){const S=of(w,o,l),k=S.slice(-h);x.forEach(R=>k[R]=0);const N=ls(k,h,g),I=S.slice(-p);b.forEach(R=>I[R]=0);const T=ls(I,p,v);f[w]=t(r[N],a[T])}return[f,s]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function la(t){const{inputs:e,backend:n}=t,{real:r,imag:a}=e,i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,o=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(o.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",s)},o}const zNe={kernelName:zI,backendName:"cpu",kernelFunc:la};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jy(t,e,n="float32"){if(n==="complex64"){const a=jy(t,e,"float32"),i=jy(t,e,"float32");return la({inputs:{real:a,imag:i},backend:t})}const r=Cr(ve(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xs(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const FNe={kernelName:hm,backendName:"cpu",kernelFunc:xs};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hu(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}const jNe={kernelName:lA,backendName:"cpu",kernelFunc:Hu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JH(t,e,n,r){if(r==="int32"){const a=Int32Array.from(t);return[e,"int32",a]}if(r==="bool"){const a=ec([0],n),[i,s]=Cn((o,l)=>o!==l?1:0)(e,[],t,a,"bool");return[s,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function wl(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dtype:i}=r;if(i==="complex64"){if(a.dtype==="complex64")return xs({inputs:{x:a},backend:n});const f=jy(n,a.shape,a.dtype),h=wl({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),p=la({inputs:{real:h,imag:f},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}if(a.dtype==="complex64"){const f=Hu({inputs:{input:a},backend:n}),h=wl({inputs:{x:f},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(f),h}if(!bW(a.dtype,i)){const f=xs({inputs:{x:a},backend:n});return{dataId:f.dataId,shape:f.shape,dtype:i}}const s=n.data.get(a.dataId).values,[o,l,c]=JH(s,a.shape,a.dtype,i);return n.makeTensorInfo(o,l,c)}const BNe={kernelName:em,backendName:"cpu",kernelFunc:wl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vn(t,e,n,r){return n==null?({inputs:a,backend:i})=>{const{a:s,b:o}=a,l=i;Me([s,o],t);const c=l.data.get(s.dataId).values,f=l.data.get(o.dataId).values,h=s.dtype==="string"?yo(c):c,p=s.dtype==="string"?yo(f):f,g=r||s.dtype,[v,x]=e(s.shape,o.shape,h,p,g);return l.makeTensorInfo(x,g,v)}:({inputs:a,backend:i})=>{const{a:s,b:o}=a,l=i;if(s.dtype==="complex64"||o.dtype==="complex64"){const c=wl({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),f=l.data.get(c.dataId),h=f.complexTensorInfos.real,p=f.complexTensorInfos.imag,g=l.data.get(h.dataId).values,v=l.data.get(p.dataId).values,x=wl({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),b=l.data.get(x.dataId),w=b.complexTensorInfos.real,S=b.complexTensorInfos.imag,k=l.data.get(w.dataId).values,N=l.data.get(S.dataId).values,[I,T,R]=n(s.shape,o.shape,g,v,k,N),_=l.makeTensorInfo(R,"float32",I),M=l.makeTensorInfo(R,"float32",T),P=la({inputs:{real:_,imag:M},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(x),l.disposeIntermediateTensorInfo(_),l.disposeIntermediateTensorInfo(M),P}else{const c=l.data.get(s.dataId).values,f=l.data.get(o.dataId).values,h=r||s.dtype,[p,g]=e(s.shape,o.shape,c,f,h);return l.makeTensorInfo(g,h,p)}}}function WT(t){return(e,n,r,a,i,s)=>{const o=et(e,n),l=ve(o),c=o.length,f=Ue(o),h=Sr("float32",l),p=Sr("float32",l),g=Ad(e,o),v=Ad(n,o),x=vo(r,a),b=vo(i,s),w=e.length,S=Ue(e),k=n.length,N=Ue(n);if(g.length+v.length===0)for(let I=0;I<h.length;I++){const T=I%x.length,R=I%b.length,_=t(x[T*2],x[T*2+1],b[R*2],b[R*2+1]);h[I]=_.real,p[I]=_.imag}else for(let I=0;I<h.length;I++){const T=of(I,c,f),R=T.slice(-w);g.forEach(z=>R[z]=0);const _=ls(R,w,S),M=T.slice(-k);v.forEach(z=>M[z]=0);const P=ls(M,k,N),$=t(x[_*2],x[_*2+1],b[P*2],b[P*2+1]);h[I]=$.real,p[I]=$.imag}return[h,p,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eq=Cn(((t,e)=>t+e)),UNe=WT(((t,e,n,r)=>({real:t+n,imag:e+r}))),Dd=Vn(lf,eq,UNe),VNe={kernelName:lf,backendName:"cpu",kernelFunc:Dd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GT(t,e,n,r,a){const i=ve(r),s=Cr(a,n);for(let o=0;o<t.length;o++){const l=t[o];if(l<0)throw new Error("Input x must be non-negative!");l>=a||(i>0?s[l]+=e[o]:s[l]+=1)}return s}function tq(t,e,n,r=!1){const a=t.shape[0],i=t.shape[1],s=at([a,n],e.dtype);for(let o=0;o<a;o++)for(let l=0;l<i;l++){const c=t.get(o,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?s.set(1,o,c):e.size>0?s.set(s.get(o,c)+e.get(o,l),o,c):s.set(s.get(o,c)+1,o,c))}return s}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nq=Cn(((t,e)=>t&e)),WNe=Vn(LI,nq),GNe={kernelName:LI,backendName:"cpu",kernelFunc:WNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ns(t){return(e,n,r)=>{const a=gn(n,e.length);for(let i=0;i<e.length;++i)a[i]=t(e[i],r);return a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rt(t,e,n){const r=Ns(e);return Ml(t,r,n)}function Ml(t,e,n){return({inputs:r,attrs:a,backend:i})=>{const{x:s}=r;Me(s,t);const o=i,l=o.data.get(s.dataId).values;let c;if(s.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=yo(l)}else c=l;const f=n||s.dtype,h=e(c,f,a);return o.makeTensorInfo(s.shape,f,h)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rq=Ns(t=>Math.ceil(t)),HNe=Ml(tm,rq),qNe={kernelName:tm,backendName:"cpu",kernelFunc:HNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aq(t,e,n,r){const a=gn(n,ve(e));if(r&&n!=="string"){let i=0;t.forEach(s=>{const o=ve(s.shape);a.set(s.vals,i),i+=o})}else{let i=0;t.forEach(s=>{const o=n==="string"?yo(s.vals):s.vals;let l=0;for(let c=0;c<s.shape[0];++c){const f=c*e[1]+i;for(let h=0;h<s.shape[1];++h)a[f+h]=o[l++]}i+=s.shape[1]})}return a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iq=Cn((t,e)=>t===e?1:0),sq=Vn(cb,iq,null,"bool"),KNe={kernelName:cb,backendName:"cpu",kernelFunc:sq};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oq=Ns(t=>Math.exp(t)),lq=Ml(lm,oq,"float32"),XNe={kernelName:lm,backendName:"cpu",kernelFunc:lq};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uq=Ns(t=>Math.expm1(t)),YNe=Ml(um,uq),ZNe={kernelName:um,backendName:"cpu",kernelFunc:YNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cq=Ns(t=>Math.floor(t)),QNe=Ml(cm,cq),JNe={kernelName:cm,backendName:"cpu",kernelFunc:QNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dq=Cn((t,e)=>Math.floor(t/e)),eIe=Vn(dm,dq,null,"int32"),tIe={kernelName:dm,backendName:"cpu",kernelFunc:eIe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fq(t,e,n,r,a,i,s,o,l){const c=at([r,i],n);for(let f=0;f<r;f++){const h=[];let p=0;for(let g=0;g<a;g++){const v=t[f*a+g];p+=v*s[g],h.push(v)}if(p<0||p>=l/i)throw new Error(`Invalid indices: ${h} does not index into ${o}`);for(let g=0;g<i;g++)c.values[f*i+g]=e.get(...e.indexToLoc(p*i+g))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hq(t,e,n){const r=at(n,t.dtype);for(let a=0;a<r.size;++a){const s=r.indexToLoc(a).slice(),o=s[0],l=s[2],c=e.locToIndex([o,l]);s[2]=e.values[c];const f=t.locToIndex(s);0<=f&&f<t.values.length&&(r.values[a]=t.values[f])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pq=Cn((t,e)=>t>e?1:0),nIe=Vn(pb,pq,null,"bool"),rIe={kernelName:pb,backendName:"cpu",kernelFunc:nIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mq=Cn((t,e)=>t>=e?1:0),aIe=Vn(fm,mq,null,"bool"),iIe={kernelName:fm,backendName:"cpu",kernelFunc:aIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gq=Cn((t,e)=>t<e?1:0),sIe=Vn(gb,gq,null,"bool"),oIe={kernelName:gb,backendName:"cpu",kernelFunc:sIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vq=Cn((t,e)=>t<=e?1:0),lIe=Vn(vb,vq,null,"bool"),uIe={kernelName:vb,backendName:"cpu",kernelFunc:lIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yq(t,e,n){const r=(e-t)/(n-1),a=Cr(n,"float32");a[0]=t;for(let i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xq=Ns(t=>Math.log(t)),cIe=Ml(vm,xq),dIe={kernelName:vm,backendName:"cpu",kernelFunc:cIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bq(t,e,n,r){const a=Sr(r,ve(n));for(let i=0;i<a.length;++i){const s=i*e;let o=t[s];for(let l=0;l<e;++l){const c=t[s+l];(Number.isNaN(c)||c>o)&&(o=c)}a[i]=o}return a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wq=Cn(((t,e)=>Math.max(t,e))),fIe=Vn(xm,wq),hIe={kernelName:xm,backendName:"cpu",kernelFunc:fIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sq=Cn(((t,e)=>Math.min(t,e))),pIe=Vn(bm,Sq),mIe={kernelName:bm,backendName:"cpu",kernelFunc:pIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HT=Cn(((t,e)=>t*e)),gIe=WT(((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n}))),x1=Vn(Sm,HT,gIe),vIe={kernelName:Sm,backendName:"cpu",kernelFunc:x1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cq(t,e,n){const r=Al(-1,n);return HT([],e,r,t,n)}function yIe(t){const{inputs:e,backend:n}=t,{x:r}=e;Me(r,"neg");const a=n.data.get(r.dataId).values,[i,s]=Cq(a,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,i)}const xIe={kernelName:Ab,backendName:"cpu",kernelFunc:yIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kq=Cn(((t,e)=>t!==e?1:0)),bIe=Vn(Tb,kq,null,"bool"),wIe={kernelName:Tb,backendName:"cpu",kernelFunc:bIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qT(t,e,n,r,a){const i=e.length,s=ve(e),o=Ue(e),l=Ue(a),c=Sr(n,ve(a));for(let f=0;f<s;++f){const h=of(f,i,o),p=new Array(h.length);for(let v=0;v<p.length;v++)p[v]=h[r[v]];const g=ls(p,i,l);c[g]=t[f]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zr(t){const{inputs:e,attrs:n,backend:r}=t,{x:a}=e,{perm:i}=n;Me(a,"transpose");const s=a.shape.length,o=new Array(s);for(let h=0;h<o.length;h++)o[h]=a.shape[i[h]];const l=r.data.get(a.dataId).values,c=qT(l,a.shape,a.dtype,i,o);return{dataId:r.write(c,o,a.dtype),shape:o,dtype:a.dtype}}const SIe={kernelName:fd,backendName:"cpu",kernelFunc:Zr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eq(t,e,n,r){const[a,i]=er(t,r),s=pa(e,"int32"),o=Cr(ve(a),s),l=ve(i);for(let c=0;c<o.length;++c){const f=c*l;let h=1;for(let p=0;p<l;++p)h*=n[f+p];o[c]=h}return{outVals:o,outShape:a,outDtype:s}}function CIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r;Me(a,"prod");const o=a.shape.length,l=it(i,a.shape),c=cn(l,o);let f=l,h=a;const p=[];c!=null&&(h=Zr({inputs:{x:a},backend:n,attrs:{perm:c}}),p.push(h),f=wn(f.length,o));const g=n.data.get(h.dataId).values,{outVals:v,outShape:x,outDtype:b}=Eq(h.shape,h.dtype,g,f);let w=x;return s&&(w=An(x,l)),p.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.makeTensorInfo(w,b,v)}const kIe={kernelName:Mb,backendName:"cpu",kernelFunc:CIe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EIe(t,e,n){t.forEach((r,a)=>{if(r<0||r>=n){const i=of(a,e.length,Ue(e)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${n})`)}})}function NIe(t,e){for(let n=0;n<t.length;++n){const r=t[n],a=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function IIe(t,e,n,r){const a=[];let i=0;const s=e.length-1+n.length,o=new Array(s).fill(null).map(()=>[0]);NIe(n,r);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const f=e[c+1];for(let h=1;h<l+1;++h)o[c].push(h*f)}for(let c=0;c<t.length;++c){let f=t[c],h=t[c]+1;for(let p=0;p<n.length;++p){const g=n[p],v=p+e.length-1;if(v>=0){const x=o[v],b=x[x.length-1]-g[f];for(let w=f;w<h;++w)o[v].push(g[w+1]+b)}f=g[f],h=g[h]}h!==f&&(a.push([f,h]),i+=h-f)}return{outSplits:o,valueSlices:a,numValues:i}}function AIe(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,a=gn("int32",r);e.push(a),t[n].forEach((i,s)=>a[s]=i)}return e}function NF(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function TIe(t,e,n,r,a,i){const s=NF(e,2)[1],o=NF(i,2)[1];let l=0;for(const c of n)for(let f=c[0];f<c[1];++f){for(let h=0;h<r;++h)a[l*o+h]=t[f*s+h];++l}}function $Ie(t,e,n,r,a){const i=e.slice();i[0]=a;const s=gn(n,ve(i)),o=t.length,l=o===0?0:o/e[0];return TIe(t,e,r,l,s,i),[s,i]}function Nq(t,e,n,r,a,i,s,o){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(EIe(i,s,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:f,valueSlices:h,numValues:p}=IIe(i,s,t,c),g=AIe(f),v=$Ie(n,r,a,h,p);return[g,v[0],v[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IF=2147483647;function Iq(t,e,n,r,a,i,s){if(e.length>1)throw new Error("starts must be a scalar or vector");if(a.length>1)throw new Error("limits must be a scalar or vector");if(s.length>1)throw new Error("deltas must be a scalar or vector");const o=e.length===0,l=a.length===0,c=s.length===0,f=[];o||f.push(e[0]),l||f.push(a[0]),c||f.push(s[0]);for(let b=1;b<f.length;++b)if(f[b]!==f[b-1])throw new Error("starts, limits, and deltas must have the same shape");const h=f.length===0?1:f[0],p=gn("int32",h+1);p[0]=0;for(let b=0;b<h;++b){const w=o?t[0]:t[b],S=l?r[0]:r[b],k=c?i[0]:i[b];if(k===0)throw new Error("Requires delta != 0");let N;if(k>0&&S<w||k<0&&S>w)N=0;else if(N=Math.ceil(Math.abs((S-w)/k)),N>IF)throw new Error(`Requires ((limit - start) / delta) <= ${IF}`);p[b+1]=p[b]+N}const g=p[h],v=gn(n,g);let x=0;for(let b=0;b<h;++b){const w=p[b+1]-p[b];let S=o?t[0]:t[b];const k=c?i[0]:i[b];for(let N=0;N<w;++N)v[x++]=S,S+=k}return[p,v]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ti=Ai;class By{constructor(e,n,r,a,i,s,o,l,c,f){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=a,this.valuesDType=i,this.defaultValue=s,this.defaultValueShape=o,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=fG(f),this.raggedRank=hG(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===ti.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===ti.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case ti.VALUE_ROWIDS:return By.getMaxWidthValueRowID(n);case ti.ROW_SPLITS:return By.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${ti[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let a=0;a<n-1;++a){const i=e[a+1]-e[a];i>r&&(r=i)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,a=e[0],i=0;for(let s=1;s<n;++s){const o=e[s];o!==a&&(a=o,i=Math.max(s-r,i),r=s)}return Math.max(n-r,i)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return TF(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;pG(r,n);const a=this.tensorShapeFromTensor(this.shape,this.shapeShape),s=dG(this.raggedRank,a,n);s[0]<0&&(s[0]=e);for(let o=1;o<=this.raggedRank;++o)s[o]<0&&(s[o]=this.getMaxWidth(o));return s}calculateFirstParentOutputIndex(e,n,r){const a=Math.min(e,r),i=[];let s=0;for(let o=0;o<a;++o,s+=n)i.push(s);for(let o=a;o<e;++o)i.push(-1);return B(i.length===e,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(e,n,r,a){const i=e.length,s=[];for(let o=0;o<i-1;++o){const l=e[o+1]-e[o];let c=Math.min(a,l),f=n[o];f===-1&&(c=0);for(let h=0;h<c;++h)s.push(f),f+=r;for(let h=0;h<l-c;++h)s.push(-1)}if(i>0&&s.length!==e[i-1])throw new Error("Invalid row split size.");return s}calculateOutputIndexValueRowID(e,n,r,a){const i=e.length,s=[];if(i===0)return[];let o=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let c=n[l];s.push(c);for(let f=1;f<i;++f){const h=e[f];if(h===l)c>=0&&(++o,o<a?c+=r:c=-1);else{if(o=0,l=h,h>=n.length)throw new Error(`Got nextValueRowId=${h} which is not less than ${n.length}`);c=n[h]}s.push(c)}if(s.length!==e.length)throw new Error("Invalid row ids.");return s}calculateOutputIndex(e,n,r,a){const i=this.getRowPartitionTensor(e),s=this.getRowPartitionTypeByDimension(e);switch(s){case ti.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,r,a);case ti.ROW_SPLITS:if(i.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(i,n,r,a);default:throw new Error(`Unsupported partition type: ${ti[s]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case ti.FIRST_DIM_SIZE:return e[0];case ti.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case ti.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${ti[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),a=new Array(this.raggedRank+1);a[a.length-1]=1;for(let l=a.length-2;l>=0;--l)a[l]=a[l+1]*r[l+1];const i=TF(r,!1),s=gn(this.valuesDType,ve(i));if(a[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,a[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,a[c],r[c]);this.setOutput(this.raggedRank,l,s,i)}return[i,s]}setOutput(e,n,r,a){if(r.length===0)return;const i=this.values,s=r;let o=a.slice();o=o.slice(e+1);const l=ve(o),c=n.length;let f=this.defaultValue;if(f.length!==l&&f.length!==1){const v=this.defaultValueShape;le(()=>{const x=ne(f,v);f=Bh(x,o).dataSync()})}let h=0,p=0,g=0;for(let v=0;v<=c;++v){let x=v<c?n[v]:-1;if(x===g){++g;continue}if(p<g){const b=i.subarray(h*l),w=s.subarray(p*l),S=(g-p)*l;AF(w,b,S)}if(v>=c){const b=r.length;x=Math.floor(b/l)}if(x>g)if(this.defaultValue.length===1)s.subarray(g*l,x*l).fill(this.defaultValue[0]),g=x;else for(;x>g;){const b=s.slice(g*l);AF(b,f,l),++g}x<0?(h=v+1,p=g):(h=v,p=g,g=p+1)}}}function AF(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function TF(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function Aq(t,e,n,r,a,i,s,o,l,c){return new By(t,e,n,r,a,i,s,o,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tq(t,e,n,r){const a=t===e,i=t<e&&n<0,s=e<t&&n>1;if(a||i||s)return Cr(0,r);const o=Math.abs(Math.ceil((e-t)/n)),l=Cr(o,r);e<t&&n===1&&(n=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $q=Ns(t=>1/Math.sqrt(t)),OIe=Ml(Am,$q),DIe={kernelName:Am,backendName:"cpu",kernelFunc:OIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yu(t,e,n,r,a,i,s,o,l,c){const f=[r/a,a],h=t.values,p=e.values;if(r===0)return at(n,e.dtype);const g=l instanceof or?l:at(f,e.dtype);typeof l=="string"||typeof l=="number"?g.values.fill(l):typeof l=="boolean"&&g.values.fill(+l);for(let v=0;v<i;v++){const x=[];let b=0;for(let w=0;w<s;w++){const S=h[v*s+w];x.push(S),b+=S*o[w]}if(b<0||b>=r/a)throw new Error(`Invalid indices: ${x} does not index into ${n}`);for(let w=0;w<a;w++)c?g.values[b*a+w]+=p[v*a+w]:g.values[b*a+w]=e.rank===0?p[0]:p[v*a+w]}return g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RIe=Ns(t=>1/(1+Math.exp(-t))),Oq=Rt(Rm,t=>1/(1+Math.exp(-t))),_Ie={kernelName:Rm,backendName:"cpu",kernelFunc:Oq};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dq(t,e,n,r,a){const i=JA(r,e,n),s=ve(n),o=Ue(r);if(i){const h=eT(e,o);return a==="string"?t.slice(h,h+s):t.subarray(h,h+s)}const l=a==="string"?yo(t):t,c=at(r,a,l),f=at(n,a);for(let h=0;h<f.size;++h){const p=f.indexToLoc(h),g=p.map((v,x)=>v+e[x]);f.set(c.get(...g),...p)}return a==="string"?_G(f.values):f.values}function qu(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,size:s}=r;Me(a,"slice");const[o,l]=a1(a,i,s);ZA(a,o,l);const c=n.data.get(a.dataId).values,f=Dq(c,o,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,f)}const MIe={kernelName:Bb,backendName:"cpu",kernelFunc:qu};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rq(t,e,n,r,a,i,s){const o=e[0],l=i[0],c=new Array(l),f=new Array(o),h=e[1];if(l===0){if(o!==0)throw new Error(wG(o));const b=gn(n,0),w=gn(a,0);return[b,[0,h],w,c,f]}let p=!0,g=0;const v=new Array(l).fill(0);for(let b=0;b<o;++b){const w=t[b*h];if(w<0)throw new Error(SG(b,w));if(w>=l)throw new Error(CG(b,w,l));++v[w],p=p&&w>=g,g=w}let x=!0;for(let b=0;b<l;++b){const w=v[b]===0;c[b]=w,x=x&&!w,v[b]=Math.max(v[b],1),b>0&&(v[b]+=v[b-1])}if(x&&p){const b=t,w=r;for(let S=0;S<o;++S)f[S]=S;return[b,[o,h],w,c,f]}else{const b=v[l-1],w=gn(n,b*h),S=gn(a,b),k=new Array(l).fill(0);for(let N=0;N<o;++N){const I=t[N*h],T=k[I],R=(I===0?0:v[I-1])+T;k[I]++;for(let _=0;_<h;++_)w[R*h+_]=t[N*h+_];S[R]=r[N],f[N]=R}for(let N=0;N<l;++N)if(k[N]===0){const T=N===0?0:v[N-1];w[T*h+0]=N;for(let R=1;R<h;++R)w[T*h+R]=0;S[T]=s}return[w,[b,h],S,c,f]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _q(t,e,n,r,a){const i=ve(r),s=e[0],o=a.length,l=[];let c=1,f=-1;for(let b=0;b<o;++b){const w=a[b];if(w===-1){if(f!==-1)throw new Error(kG(f,b));f=b,l.push(1)}else{if(w<0)throw new Error(EG(b,w));c*=w,l.push(w)}}if(f!==-1){if(c<=0)throw new Error(NG());const b=Math.trunc(i/c);if(c*b!==i)throw new Error(IG(r,l));l[f]=b}if(ve(l)!==i)throw new Error(AG(r,l));const p=r.length,g=[];if(p>0){g[p-1]=1;for(let b=p-2;b>=0;--b)g[b]=g[b+1]*r[b+1]}const v=[];if(o>0){v[o-1]=1;for(let b=o-2;b>=0;--b)v[b]=v[b+1]*l[b+1]}const x=gn(n,s*o);for(let b=0;b<s;++b){let w=0;for(let S=0;S<p;++S)w+=t[b*p+S]*g[S];for(let S=0;S<o;++S)x[b*o+S]=Math.trunc(w/v[S]),w%=v[S]}return[x,[s,o],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KT(t,e,n,r,a,i=!1,s=0){const o=r.length,l=[e[0],t.length/e[0]],c=l[1],h=o>0?a[o-1]+1:0;if(h<0)throw new Error(SE());const p=e.slice();p[0]=h;const g=p.reduce((k,N)=>k*N,1),v=gn(n,g);if(o===0)return h>0&&v.fill(s),[v,p];if(h<=0)throw new Error(SE());let x=0,b=1,w=0,S=a[x];for(;;){let k=0;if(b<o){if(k=a[b],S===k){++b;continue}if(S>=k)throw new Error(TG())}if(S<0||S>=h)throw new Error($G(S,h));S>w&&v.fill(s,w*c,S*c);for(let N=x;N<b;++N){const I=r[N];if(I<0||I>=l[0])throw new Error(OG(N,r[N],l[0]));for(let T=0;T<c;T++)v[S*c+T]+=t[I*c+T]}if(i)for(let N=0;N<c;N++)v[S*c+N]/=b-x;if(x=b,++b,w=S+1,S=k,b>o)break}return w<h&&v.fill(s,w*c,h*c),[v,p]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PIe=Ns(t=>Math.sqrt(t)),LIe=Rt(Mm,t=>Math.sqrt(t)),zIe={kernelName:Mm,backendName:"cpu",kernelFunc:LIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mq=Cn(((t,e)=>{const n=t-e;return n*n})),FIe=Vn(Pm,Mq),jIe={kernelName:Pm,backendName:"cpu",kernelFunc:FIe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pq=Ns((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:a}=e;return t.replace(new RegExp(n,r?"g":""),a)}),BIe=Ml(fA,Pq),UIe={kernelName:fA,backendName:"cpu",kernelFunc:BIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lq(t,e,n,r){const a=at(t,e.dtype);for(let i=0;i<a.size;i++){const s=a.indexToLoc(i),o=new Array(s.length);for(let l=0;l<o.length;l++)o[l]=s[l]*n[l]+r[l];a.set(e.get(...o),...s)}return a}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VIe{constructor(e,n,r,a,i,s){this.separator=cl(e),this.nGramWidths=n,this.leftPad=cl(r),this.rightPad=cl(a),this.padWidth=i,this.preserveShort=s}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,a,i,s){for(let o=0;o<i;++o){const l=this.getPadWidth(s),c=Math.max(0,l-o),f=Math.max(0,l-(i-(o+1))),h=s-(c+f),p=n+(c>0?0:o-l);let g=0;g+=c*this.leftPad.length;for(let S=0;S<h;++S)g+=e[p+S].length;g+=f*this.rightPad.length;const v=c+f+h-1;g+=v*this.separator.length,r[a+o]=new Uint8Array(g);const x=r[a+o];let b=0;const w=S=>S.forEach(k=>x[b++]=k);for(let S=0;S<c;++S)w(this.leftPad),w(this.separator);for(let S=0;S<h-1;++S)w(e[p+S]),w(this.separator);if(h>0){w(e[p+h-1]);for(let S=0;S<f;++S)w(this.separator),w(this.rightPad)}else{for(let S=0;S<f-1;++S)w(this.rightPad),w(this.separator);w(this.rightPad)}}}compute(e,n){const r=e.length,a=n.length;if(a>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<a;++c){let f=n[c]>=l;if(f=f&&n[c]<=r,!f)throw new Error(`Invalid split value ${n[c]}, must be in [${l}, ${r}]`);l=n[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const i=a-1,s=gn("int32",a);if(r===0||a===0){const l=new Array(r);for(let c=0;c<=i;++c)s[c]=0;return[l,s]}s[0]=0;for(let l=1;l<=i;++l){const c=n[l]-n[l-1];let f=0;this.nGramWidths.forEach(h=>{f+=this.getNumNGrams(c,h)}),this.preserveShort&&c>0&&f===0&&(f=1),s[l]=s[l-1]+f}const o=new Array(s[i]);for(let l=0;l<i;++l){const c=n[l];let f=s[l];if(this.nGramWidths.forEach(h=>{const p=n[l+1]-n[l],g=this.getNumNGrams(p,h);this.createNGrams(e,c,o,f,g,h),f+=g}),this.preserveShort&&f===s[l]){const h=n[l+1]-n[l];if(h===0)continue;const p=h+2*this.padWidth;this.createNGrams(e,c,o,f,1,p)}}return[o,s]}}function zq(t,e,n,r,a,i,s,o){return new VIe(n,r,a,i,s,o).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WIe(t,e,n,r){if(!t.length)return;if(e.length===0){for(let i=0;i<t.length;++i)r.push(t.subarray(i,i+1));return}if(e.length===1){const i=e[0];let s=t.indexOf(i);for(;s!==-1;){const o=t.subarray(0,s);(!n||o.length!==0)&&r.push(o),t=t.subarray(s+1),s=t.indexOf(i)}(!n||t.length!==0)&&r.push(t);return}let a=0;for(let i=0;i<t.length+1;i++)if(i===t.length||e.indexOf(t[i])!==-1){const s=t.subarray(a,i);(!n||s.length!==0)&&r.push(s),a=i+1}}function Fq(t,e,n){const r=t.length,a=[];let i=0,s=0;const o=new Array(r);for(let p=0;p<r;++p){const g=a.length;WIe(t[p],e,n,a);const v=a.length-g;o[p]=v,i+=v,s=Math.max(s,v)}const l=gn("int32",i*2),c=new Array(i),f=[r,s];let h=0;for(let p=0;p<r;++p)for(let g=0;g<o[p];++g)l[h*2]=p,l[h*2+1]=g,c[h]=a[h],++h;return[l,c,f]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jq(t,e){const n=gn("int32",t.length);for(let r=0;r<t.length;++r)n[r]=kye(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bq=Cn(((t,e)=>t-e)),GIe=WT(((t,e,n,r)=>({real:t-n,imag:e-r}))),XT=Vn(Lm,Bq,GIe),HIe={kernelName:Lm,backendName:"cpu",kernelFunc:XT};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uq(t,e){const n=new Array(t.rank);for(let a=0;a<n.length;a++)n[a]=t.shape[a]*e[a];const r=at(n,t.dtype);for(let a=0;a<r.values.length;++a){const i=r.indexToLoc(a),s=new Array(t.rank);for(let l=0;l<s.length;l++)s[l]=i[l]%t.shape[l];const o=t.locToIndex(s);r.values[a]=t.values[o]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ph=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function Vq(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const o=r-n+1,l=e-n+1,c=Math.log(o),f=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*f*(o-f)/o)*Math.sign(l-o/2),p=Math.max(n,Math.floor(e-l*f/o+h)),g=Math.min(r,Math.floor(e+(o-l)*f/o+h));Vq(t,e,p,g)}const a=t[e];let i=n,s=r;for(nd(t,n,e),Ph(t[r],a)>0&&nd(t,n,r);i<s;){for(nd(t,i,s),i++,s--;Ph(t[i],a)<0;)i=i+1;for(;Ph(t[s],a)>0;)s=s-1}Ph(t[n],a)===0?nd(t,n,s):(s=s+1,nd(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}}function Wq(t,e,n,r,a){const i=e[e.length-1],[s,o]=[t.length/i,i],l=Sr(n,s*r),c=Sr("int32",s*r);for(let h=0;h<s;h++){const p=h*o,g=t.subarray(p,p+o);let v=new Array(g.length);g.forEach((S,k)=>v[k]={value:S,index:k}),r<v.length&&(Vq(v,r),v=v.slice(0,r)),a&&v.sort(Ph);const x=h*r,b=l.subarray(x,x+r),w=c.subarray(x,x+r);for(let S=0;S<r;S++)b[S]=v[S].value,w[S]=v[S].index}const f=e.slice();return f[f.length-1]=r,[at(f,n,l),at(f,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gq(t,e,n,r){const a=it(e,n)[0],i=[1,n[0],1];for(let v=0;v<a;v++)i[0]*=n[v];i[1]=n[a];for(let v=a+1;v<n.length;v++)i[2]*=n[v];const s=new Map,o=new Int32Array(n[a]),l=new or(i,r,t),c=[],f=i[0]===1&&i[2]===1;for(let v=0;v<n[a];v++){let x;if(f)x=t[v].toString();else{const w=[];for(let S=0;S<i[0];S++)for(let k=0;k<i[2];k++)w.push(l.get(S,v,k));x=w.join(",")}const b=s.get(x);if(b!=null)o[v]=b;else{const w=s.size;s.set(x,w),o[v]=w,c.push(v)}}const h=i.slice();h[1]=s.size;const p=new or(h,r);c.forEach((v,x)=>{for(let b=0;b<i[0];b++)for(let w=0;w<i[2];w++)p.set(l.get(b,v,w),b,x,w)});const g=n.slice();return g[a]=h[1],{outputValues:p.values,outputShape:g,indices:o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qIe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:eq,bincountImpl:GT,bincountReduceImpl:tq,bitwiseAndImpl:nq,castImpl:JH,ceilImpl:rq,concatImpl:aq,equalImpl:iq,expImpl:oq,expm1Impl:uq,floorDivImpl:dq,floorImpl:cq,gatherNdImpl:fq,gatherV2Impl:hq,greaterEqualImpl:mq,greaterImpl:pq,lessEqualImpl:vq,lessImpl:gq,linSpaceImpl:yq,logImpl:xq,maxImpl:bq,maximumImpl:wq,minimumImpl:Sq,multiplyImpl:HT,negImpl:Cq,notEqualImpl:kq,prodImpl:Eq,raggedGatherImpl:Nq,raggedRangeImpl:Iq,raggedTensorToTensorImpl:Aq,rangeImpl:Tq,rsqrtImpl:$q,scatterImpl:yu,sigmoidImpl:RIe,simpleAbsImpl:QH,sliceImpl:Dq,sparseFillEmptyRowsImpl:Rq,sparseReshapeImpl:_q,sparseSegmentReductionImpl:KT,sqrtImpl:PIe,squaredDifferenceImpl:Mq,staticRegexReplaceImpl:Pq,stridedSliceImpl:Lq,stringNGramsImpl:zq,stringSplitImpl:Fq,stringToHashBucketFastImpl:jq,subImpl:Bq,tileImpl:Uq,topKImpl:Wq,transposeImpl:qT,uniqueImpl:Gq},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */c6("cpu",()=>new y1,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hq=Rt(sm,t=>t>=0?t:Math.exp(t)-1),KIe={kernelName:sm,backendName:"cpu",kernelFunc:Hq};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qq(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{alpha:i}=r;Me([a],"leakyRelu");const s=ve(a.shape),o=n.data.get(a.dataId).values,l=Sr("float32",s);for(let c=0;c<o.length;c++)l[c]=o[c]<0?i*o[c]:o[c];return n.makeTensorInfo(a.shape,"float32",l)}const XIe={kernelName:mb,backendName:"cpu",kernelFunc:qq};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YIe=Cn((t,e)=>t<0?e*t:t);function Kq(t){const{inputs:e,backend:n}=t,{x:r,alpha:a}=e;Me([r,a],"prelu");const i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,[o,l]=YIe(r.shape,a.shape,i,s,"float32");return n.makeTensorInfo(l,"float32",o)}const ZIe={kernelName:_b,backendName:"cpu",kernelFunc:Kq};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xq=Rt(Em,t=>Math.max(0,t)),QIe={kernelName:Em,backendName:"cpu",kernelFunc:Xq};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yq=Rt(Nm,t=>Math.min(Math.max(0,t),6)),JIe={kernelName:Nm,backendName:"cpu",kernelFunc:Yq};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uy(t,e,n,r,a){if(n==="linear")return xs({inputs:{x:e},backend:t});if(n==="relu")return Xq({inputs:{x:e},backend:t});if(n==="elu")return Hq({inputs:{x:e},backend:t});if(n==="relu6")return Yq({inputs:{x:e},backend:t});if(n==="prelu")return Kq({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return qq({inputs:{x:e},backend:t,attrs:{alpha:a}});if(n==="sigmoid")return Oq({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qt(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{shape:i}=r,s=ve(a.shape),o=xW(i,s),l=ve(o);B(s===l,()=>`The new shape (${o}) has ${l} elements and the old shape (${a.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`),n.incRef(a.dataId);const c=n.data.get(a.dataId);if(c.complexTensorInfos!=null){const f=c.complexTensorInfos.real,h=c.complexTensorInfos.imag;f.shape=o,h.shape=o}return{dataId:a.dataId,shape:o,dtype:a.dtype}}const eAe={kernelName:Pb,backendName:"cpu",kernelFunc:qt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zq(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i}=e,{transposeA:s,transposeB:o}=r;Me([a,i],"matMul");const l=a.shape.length,c=i.shape.length,f=s?a.shape[l-2]:a.shape[l-1],h=o?i.shape[c-1]:i.shape[c-2],p=s?a.shape[l-1]:a.shape[l-2],g=o?i.shape[c-2]:i.shape[c-1],v=a.shape.slice(0,-2),x=i.shape.slice(0,-2),b=ve(v),w=ve(x),k=et(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([p,g]);B(f===h,()=>`Error in matMul: inner shapes (${f}) and (${h}) of Tensors with shapes ${a.shape} and ${i.shape} and transposeA=${s} and transposeB=${o} must match.`);const N=s?[b,f,p]:[b,p,f],I=o?[w,g,h]:[w,h,g],T=qt({inputs:{x:a},backend:n,attrs:{shape:N}}),R=qt({inputs:{x:i},backend:n,attrs:{shape:I}}),_=s?T.shape[1]:T.shape[2],M=s?T.shape[2]:T.shape[1],P=o?R.shape[1]:R.shape[2],$=Math.max(b,w),z=n.data.get(T.dataId).values,W=n.data.get(R.dataId).values,H=Ue(T.shape),G=Ue(R.shape),[F,V,U]=s?[H[0],1,H[1]]:[H[0],H[1],1],[Y,oe,j]=o?[1,G[1],G[0]]:[G[1],1,G[0]],q=M*P,Z=at([$,M,P],T.dtype),se=Z.values,pe=n.blockSize;for(let Se=0;Se<$;Se++){const be=Se%b,Te=Se%w;for(let ae=0;ae<M;ae+=pe){const Ne=Math.min(ae+pe,M);for(let Ie=0;Ie<P;Ie+=pe){const ye=Math.min(Ie+pe,P);for(let Ze=0;Ze<_;Ze+=pe){const Be=Math.min(Ze+pe,_);for(let Qe=ae;Qe<Ne;Qe++)for(let Ye=Ie;Ye<ye;Ye++){let vt=0;for(let At=Ze;At<Be;At++){const ya=z[be*F+Qe*V+At*U],dn=W[At*Y+Ye*oe+Te*j];vt+=ya*dn}se[Se*q+(Qe*P+Ye)]+=vt}}}}}return n.disposeIntermediateTensorInfo(T),n.disposeIntermediateTensorInfo(R),n.makeTensorInfo(k,Z.dtype,Z.values)}const tAe={kernelName:eb,backendName:"cpu",kernelFunc:Zq};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nAe(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i,bias:s,preluActivationWeights:o}=e,{transposeA:l,transposeB:c,activation:f,leakyreluAlpha:h}=r;let p,g,v;const x=[];p=Zq({inputs:{a,b:i},attrs:{transposeA:l,transposeB:c},backend:n}),s&&(g=Dd({inputs:{a:p,b:s},backend:n}),x.push(p),p=g),f&&(v=Uy(n,p,f,o,h),x.push(p),p=v);for(const w of x)n.disposeIntermediateTensorInfo(w);return p}const rAe={kernelName:Sy,backendName:"cpu",kernelFunc:nAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aAe=Rt(qp,t=>Math.acos(t)),iAe={kernelName:qp,backendName:"cpu",kernelFunc:aAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sAe=Rt(Kp,t=>Math.acosh(t)),oAe={kernelName:Kp,backendName:"cpu",kernelFunc:sAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lAe(t){const{inputs:e,backend:n}=t,r=e;Me(e,"addN");const a=r.map(o=>n.data.get(o.dataId).values),i=at(r[0].shape,r[0].dtype),s=i.values;for(let o=0;o<r.length;o++){const l=a[o];for(let c=0;c<s.length;c++)s[c]+=l[c]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}const uAe={kernelName:OI,backendName:"cpu",kernelFunc:lAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r;Me(a,"all");const o=it(i,a.shape);let l=o;const c=cn(l,a.shape.length);let f=a;c!=null&&(f=Zr({inputs:{x:a},backend:n,attrs:{perm:c}}),l=wn(l.length,a.shape.length)),dr("all",l,f.shape.length);const[h,p]=er(f.shape,l),g=ve(p),v=Cr(ve(h),f.dtype),x=n.data.get(f.dataId).values;for(let w=0;w<v.length;++w){const S=w*g;let k=x[S];for(let N=0;N<g;++N){const I=x[S+N];k=k&&I}v[w]=k}c!=null&&n.disposeIntermediateTensorInfo(f);const b=n.makeTensorInfo(h,f.dtype,v);if(s){const w=An(h,o),S=qt({inputs:{x:b},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(b),S}return b}const dAe={kernelName:DI,backendName:"cpu",kernelFunc:cAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r;Me(a,"any");const o=it(i,a.shape);let l=o;const c=cn(l,a.shape.length);let f=a;c!=null&&(f=Zr({inputs:{x:a},backend:n,attrs:{perm:c}}),l=wn(l.length,a.shape.length)),dr("any",l,f.shape.length);const[h,p]=er(f.shape,l),g=ve(p),v=Cr(ve(h),f.dtype),x=n.data.get(f.dataId).values;for(let w=0;w<v.length;++w){const S=w*g;let k=x[S];for(let N=0;N<g;++N){const I=x[S+N];k=k||I}v[w]=k}c!=null&&n.disposeIntermediateTensorInfo(f);const b=n.makeTensorInfo(h,f.dtype,v);if(s){const w=An(h,o),S=qt({inputs:{x:b},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(b),S}return b}const hAe={kernelName:RI,backendName:"cpu",kernelFunc:fAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;Me(a,"argMax");let s=it(i,a.shape);const o=cn(s,a.shape.length);let l=a;const c=[];o!=null&&(l=Zr({inputs:{x:a},backend:n,attrs:{perm:o}}),c.push(l),s=wn(s.length,l.shape.length)),s=[s[0]],dr("argMax",s,l.shape.length);const[f,h]=er(l.shape,s),p=ve(f),g=Cr(p,"int32"),v=ve(h),x=n.data.get(l.dataId).values;for(let b=0;b<g.length;++b){const w=b*v;let S=x[w],k=0;for(let N=0;N<v;++N){const I=x[w+N];I>S&&(S=I,k=N)}g[b]=k}return c.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(f,"int32",g)}const mAe={kernelName:Yx,backendName:"cpu",kernelFunc:pAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;Me(a,"argMin");let s=it(i,a.shape);const o=cn(s,a.shape.length);let l=a;const c=[];o!=null&&(l=Zr({inputs:{x:a},backend:n,attrs:{perm:o}}),c.push(l),s=wn(s.length,l.shape.length)),s=[s[0]],dr("argMin",s,l.shape.length);const[f,h]=er(l.shape,s),p=ve(f),g=Cr(p,"int32"),v=ve(h),x=n.data.get(l.dataId).values;for(let b=0;b<g.length;++b){const w=b*v;let S=x[w],k=0;for(let N=0;N<v;++N){const I=x[w+N];I<S&&(S=I,k=N)}g[b]=k}return c.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(f,"int32",g)}const vAe={kernelName:Zx,backendName:"cpu",kernelFunc:gAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yAe=Rt(Xp,t=>Math.asin(t)),xAe={kernelName:Xp,backendName:"cpu",kernelFunc:yAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bAe=Rt(Yp,t=>Math.asinh(t)),wAe={kernelName:Yp,backendName:"cpu",kernelFunc:bAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SAe=Rt(Zp,t=>Math.atan(t)),CAe={kernelName:Zp,backendName:"cpu",kernelFunc:SAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kAe=Cn((t,e)=>Math.atan2(t,e)),EAe=Vn(Jp,kAe),NAe={kernelName:Jp,backendName:"cpu",kernelFunc:EAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IAe=Rt(Qp,t=>Math.atanh(t)),AAe={kernelName:Qp,backendName:"cpu",kernelFunc:IAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YT(t,e,n,r,a,i){const s=a.strideHeight,o=a.strideWidth,l=a.dilationHeight,c=a.dilationWidth,f=a.effectiveFilterHeight,h=a.effectiveFilterWidth,p=a.padInfo.top,g=a.padInfo.left,v=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=at(a.outShape,n),b=x.values,w=a.outShape[1]*a.outShape[2]*a.outShape[3],S=a.outShape[2]*a.outShape[3],k=a.outShape[3];for(let N=0;N<a.batchSize;++N){const I=N*w,T=N*r[0];for(let R=0;R<a.inChannels;++R)for(let _=0;_<a.outHeight;++_){const M=_*s-p,P=Math.max(0,M),$=Math.min(a.inHeight,f+M),z=I+_*S;for(let W=0;W<a.outWidth;++W){const H=W*o-g,G=Math.max(0,H),F=Math.min(a.inWidth,h+H);let V=v,U=0,Y=0;for(let j=P;j<$;j+=l){const q=T+j*r[1];for(let Z=G;Z<F;Z+=c){const se=q+Z*r[2],pe=t[se+R];i==="max"&&pe>V?V=pe:i==="avg"&&(U+=pe,Y++)}if(isNaN(V))break}const oe=z+W*k+R;b[oe]=i==="avg"?U/Y:V}}}return x}function Qq(t,e,n,r,a=!1,i=!1){const s=at(r.outShape,"int32"),o=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,f=r.dilationWidth,h=r.effectiveFilterHeight,p=r.effectiveFilterWidth,g=r.padInfo.top,v=r.padInfo.left,x=at(e,n,t);for(let b=0;b<r.batchSize;++b)for(let w=0;w<r.inChannels;++w)for(let S=0;S<r.outHeight;++S){const k=S*o-g;let N=k;for(;N<0;)N+=c;const I=Math.min(r.inHeight,h+k);for(let T=0;T<r.outWidth;++T){const R=T*l-v;let _=R;for(;_<0;)_+=f;const M=Math.min(r.inWidth,p+R);let P=Number.NEGATIVE_INFINITY,$=-1;for(let z=N;z<I;z+=c){const W=z-k;for(let H=_;H<M;H+=f){const G=H-R,F=x.get(b,z,H,w);F>P&&(P=F,a?$=i?((b*r.inHeight+z)*r.inWidth+H)*r.inChannels+w:(z*r.inWidth+H)*r.inChannels+w:$=W*p+G)}}s.set($,b,S,T,w)}}return s}function Jq(t,e,n,r,a,i){const s=a.strideDepth,o=a.strideHeight,l=a.strideWidth,c=a.dilationDepth,f=a.dilationHeight,h=a.dilationWidth,p=a.effectiveFilterDepth,g=a.effectiveFilterHeight,v=a.effectiveFilterWidth,x=a.padInfo.front,b=a.padInfo.top,w=a.padInfo.left,S=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,k=at(a.outShape,n),N=k.values,I=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],T=a.outShape[2]*a.outShape[3]*a.outShape[4],R=a.outShape[3]*a.outShape[4],_=a.outShape[4];for(let M=0;M<a.batchSize;++M){const P=M*I,$=M*r[0];for(let z=0;z<a.inChannels;++z)for(let W=0;W<a.outDepth;++W){const H=W*s-x;let G=H;for(;G<0;)G+=c;const F=Math.min(a.inDepth,p+H),V=P+W*T;for(let U=0;U<a.outHeight;++U){const Y=U*o-b;let oe=Y;for(;oe<0;)oe+=f;const j=Math.min(a.inHeight,g+Y),q=V+U*R;for(let Z=0;Z<a.outWidth;++Z){const se=Z*l-w;let pe=se;for(;pe<0;)pe+=h;const Se=Math.min(a.inWidth,v+se),be=q+Z*_;let Te=S,ae=0,Ne=0;for(let ye=G;ye<F;ye+=c){const Ze=$+ye*r[1];for(let Be=oe;Be<j;Be+=f){const Qe=Ze+Be*r[2];for(let Ye=pe;Ye<Se;Ye+=h){const vt=Qe+Ye*r[3],At=t[vt+z];if(i==="max"&&At>Te?Te=At:i==="avg"&&(ae+=At,Ne++),isNaN(Te))break}if(isNaN(Te))break}if(isNaN(Te))break}const Ie=be+z;N[Ie]=i==="avg"?ae/Math.max(Ne,1):Te}}}}return k}function TAe(t,e){const n=at(e.outShape,"int32"),r=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,o=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,f=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=e.padInfo.front,g=e.padInfo.top,v=e.padInfo.left;for(let x=0;x<e.batchSize;++x)for(let b=0;b<e.inChannels;++b)for(let w=0;w<e.outDepth;++w){const S=w*r-p;let k=S;for(;k<0;)k+=s;const N=Math.min(e.inDepth,c+S);for(let I=0;I<e.outHeight;++I){const T=I*a-g;let R=T;for(;R<0;)R+=o;const _=Math.min(e.inHeight,f+T);for(let M=0;M<e.outWidth;++M){const P=M*i-v;let $=P;for(;$<0;)$+=l;const z=Math.min(e.inWidth,h+P);let W=Number.NEGATIVE_INFINITY,H=-1;for(let G=k;G<N;G+=s){const F=G-S;for(let V=R;V<_;V+=o){const U=V-T;for(let Y=$;Y<z;Y+=l){const oe=Y-P,j=t.get(x,G,V,Y,b);j>=W&&(W=j,H=F*f*h+U*f+oe)}}}n.set(H,x,w,I,M,b)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ae(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;Me(a,"avgPool");const{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=r,c=1;B(Er(s,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const f=gi(a.shape,i,s,c,o,l);let h;if(f.filterWidth===1&&f.filterHeight===1&&It(f.inShape,f.outShape))h=xs({inputs:{x:a},backend:n});else{const p=n.data.get(a.dataId).values,g=Ue(a.shape),v=YT(p,a.shape,a.dtype,g,f,"avg");h=n.makeTensorInfo(f.outShape,a.dtype,v.values)}return h}const OAe={kernelName:Qx,backendName:"cpu",kernelFunc:$Ae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:s,pad:o,dimRoundingMode:l,dataFormat:c}=r;Me(a,"avgPool3d");const f=Eo(a.shape,i,s,1,o,l,c),h=n.data.get(a.dataId).values,p=Jq(h,a.shape,a.dtype,Ue(a.shape),f,"avg");return n.makeTensorInfo(p.shape,"float32",p.values)}const RAe={kernelName:Jx,backendName:"cpu",kernelFunc:DAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ae(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,{filterSize:s,strides:o,pad:l,dimRoundingMode:c}=r;Me([a,i],"avgPool3DGrad");const f=Eo(i.shape,s,o,1,l,c),h=f.strideDepth,p=f.strideHeight,g=f.strideWidth,v=f.filterDepth,x=f.filterHeight,b=f.filterWidth,w=f.dilationDepth,S=f.dilationHeight,k=f.dilationWidth,N=f.effectiveFilterDepth,I=f.effectiveFilterHeight,T=f.effectiveFilterWidth,R=N-1-f.padInfo.front,_=T-1-f.padInfo.left,M=I-1-f.padInfo.top,P=at(i.shape,"float32"),$=1/(v*x*b),z=n.bufferSync(a);for(let W=0;W<f.batchSize;++W)for(let H=0;H<f.inChannels;++H)for(let G=0;G<f.inDepth;++G)for(let F=0;F<f.inHeight;++F)for(let V=0;V<f.inWidth;++V){const U=G-R,Y=F-M,oe=V-_;let j=0;for(let q=0;q<N;q+=w){const Z=(U+q)/h;if(!(Z<0||Z>=f.outDepth||Math.floor(Z)!==Z))for(let se=0;se<I;se+=S){const pe=(Y+se)/p;if(!(pe<0||pe>=f.outHeight||Math.floor(pe)!==pe))for(let Se=0;Se<T;Se+=k){const be=(oe+Se)/g;if(be<0||be>=f.outWidth||Math.floor(be)!==be)continue;const Te=z.get(W,Z,pe,be,H);j+=Te}}}P.set(j*$,W,G,F,V,H)}return n.makeTensorInfo(P.shape,P.dtype,P.values)}const MAe={kernelName:MI,backendName:"cpu",kernelFunc:_Ae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PAe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,s=i;Me([a,i],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=r,f=gi(s.shape,o,l,1,c),h=f.strideHeight,p=f.strideWidth,g=f.filterHeight,v=f.filterWidth,x=f.dilationHeight,b=f.dilationWidth,w=f.effectiveFilterHeight,S=f.effectiveFilterWidth,k=S-1-f.padInfo.left,N=w-1-f.padInfo.top,I=at(s.shape,"float32"),T=1/(g*v),R=n.data.get(a.dataId).values,_=at(a.shape,"float32",R);for(let M=0;M<f.batchSize;++M)for(let P=0;P<f.inChannels;++P)for(let $=0;$<f.inHeight;++$)for(let z=0;z<f.inWidth;++z){const W=$-N,H=z-k;let G=0;for(let F=0;F<w;F+=x){const V=(W+F)/h;if(!(V<0||V>=f.outHeight||Math.floor(V)!==V))for(let U=0;U<S;U+=b){const Y=(H+U)/p;if(Y<0||Y>=f.outWidth||Math.floor(Y)!==Y)continue;const oe=_.get(M,V,Y,P);G+=oe}}I.set(G*T,M,$,z,P)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const LAe={kernelName:_I,backendName:"cpu",kernelFunc:PAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,scale:i,offset:s,mean:o,variance:l}=e;B(o.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),B(s==null||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),B(i==null||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Me([a,o,l,i,s],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);const f=n.data.get(a.dataId).values,h=n.data.get(o.dataId).values,p=n.data.get(l.dataId).values,g=i?n.data.get(i.dataId).values:new Float32Array([1]),v=s?n.data.get(s.dataId).values:new Float32Array([0]),x=new Float32Array(f.length),b=v.length,w=g.length,S=p.length,k=h.length;let N=0,I=0,T=0,R=0;for(let _=0;_<f.length;++_)x[_]=v[N++]+(f[_]-h[I++])*g[T++]/Math.sqrt(p[R++]+c),N>=b&&(N=0),I>=k&&(I=0),T>=w&&(T=0),R>=S&&(R=0);return n.makeTensorInfo(a.shape,a.dtype,x)}const FAe={kernelName:fb,backendName:"cpu",kernelFunc:zAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,crops:s}=r;Me([a],"batchToSpaceND");const o=i.reduce((w,S)=>w*S),l=qm(a.shape,i,o),c=Km(l.length,i.length),f=Xm(a.shape,i,o),h=iT(s,i.length),p=sT(f,s,i.length),g=qt({inputs:{x:a},backend:n,attrs:{shape:l}}),v=Zr({inputs:{x:g},backend:n,attrs:{perm:c}}),x=qt({inputs:{x:v},backend:n,attrs:{shape:f}}),b=qu({inputs:{x},backend:n,attrs:{begin:h,size:p}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x),b}const BAe={kernelName:tb,backendName:"cpu",kernelFunc:jAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:s}=r,o=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,c=GT(o,l,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,c)}const VAe={kernelName:PI,backendName:"cpu",kernelFunc:UAe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WAe(t){const{inputs:e,backend:n}=t,{s0:r,s1:a}=e,i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,o=et(Array.from(i),Array.from(s));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const GAe={kernelName:EW,backendName:"cpu",kernelFunc:WAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HAe=Rt(nm,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),qAe={kernelName:nm,backendName:"cpu",kernelFunc:HAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KAe=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(ve(e.shape)),a=n.data.get(e.dataId),i=a.complexTensorInfos.real,s=a.complexTensorInfos.imag,o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values;for(let c=0;c<o.length;c++){const f=o[c],h=l[c];r[c]=Math.hypot(f,h)}return n.makeOutput(r,e.shape,"float32")},XAe={kernelName:nb,backendName:"cpu",kernelFunc:KAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rd(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}const YAe={kernelName:eA,backendName:"cpu",kernelFunc:Rd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _d(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r,i=it(a,e[0].shape)[0],s=e.map(x=>x.shape);nT(s,i);let o=cs(e.map(x=>x.shape),i);if(ve(o)===0)return n.makeTensorInfo(o,e[0].dtype,[]);const l=e.filter(x=>ve(x.shape)>0);if(l.length===1)return xs({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const x=l.map(N=>Hu({inputs:{input:N},backend:n})),b=l.map(N=>Rd({inputs:{input:N},backend:n})),w=_d({inputs:x,backend:n,attrs:{axis:i}}),S=_d({inputs:b,backend:n,attrs:{axis:i}}),k=la({inputs:{real:w,imag:S},backend:n});return x.forEach(N=>n.disposeIntermediateTensorInfo(N)),b.forEach(N=>n.disposeIntermediateTensorInfo(N)),n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(S),k}const c=l.map(x=>{const w=[-1,ve(x.shape.slice(i))];return qt({inputs:{x},backend:n,attrs:{shape:w}})}),f=c.map(x=>({vals:n.data.get(x.dataId).values,shape:x.shape}));o=cs(c.map(x=>x.shape),1);const h=c[0].shape[0]===1,p=aq(f,o,e[0].dtype,h),g=cs(l.map(x=>x.shape),i),v=n.makeTensorInfo(g,e[0].dtype,p);return c.forEach(x=>n.disposeIntermediateTensorInfo(x)),v}const ZAe={kernelName:rb,backendName:"cpu",kernelFunc:_d};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eK(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:s,pad:o,dataFormat:l,dilations:c,dimRoundingMode:f}=r;Me([a,i],"conv2d");const h=No(l),p=cr(a.shape,i.shape,s,c,o,f,!1,h),g=p.filterHeight,v=p.filterWidth,x=p.dilationHeight,b=p.dilationWidth,w=p.padInfo.left,S=p.padInfo.top,k=p.dataFormat==="channelsLast",N=new or(p.outShape,a.dtype),I=Ue(a.shape),T=Ue(i.shape),R=I[0],_=k?I[1]:I[2],M=k?I[2]:1,P=k?1:I[1],$=N.strides[0],z=k?N.strides[1]:N.strides[2],W=k?N.strides[2]:1,H=k?1:N.strides[1],G=n.data.get(a.dataId).values,F=n.data.get(i.dataId).values,V=N.values;for(let U=0;U<p.batchSize;++U){const Y=U*R,oe=U*$;for(let j=0;j<p.outHeight;++j){const q=oe+j*z,Z=j*p.strideHeight-S;for(let se=0;se<g;++se){const pe=Z+se*x;if(pe<0||pe>=p.inHeight)continue;const Se=se*T[0],be=Y+pe*_;for(let Te=0;Te<p.outWidth;++Te){const ae=q+Te*W,Ne=Te*p.strideWidth-w;for(let Ie=0;Ie<v;++Ie){const ye=Ne+Ie*b;if(ye<0||ye>=p.inWidth)continue;const Ze=Se+Ie*T[1],Be=be+ye*M;let Qe=Ze;for(let Ye=0;Ye<p.inChannels;++Ye){const vt=G[Be+Ye*P];for(let At=0;At<p.outChannels;++At)V[ae+At*H]+=vt*F[Qe+At];Qe+=p.outChannels}}}}}}return n.makeTensorInfo(N.shape,N.dtype,V)}const QAe={kernelName:ab,backendName:"cpu",kernelFunc:eK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:s,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:f}=r;Me([a,i],"conv2dBackpropFilter");const h=No(l),p=cr(a.shape,f,s,1,o,c,!1,h),{strideHeight:g,strideWidth:v,filterHeight:x,filterWidth:b}=p,w=p.dataFormat==="channelsLast",S=new or(p.filterShape,"float32"),k=p.padInfo.left,N=p.padInfo.top,I=n.data.get(a.dataId).values,T=n.data.get(i.dataId).values,R=new or(a.shape,a.dtype,I),_=new or(i.shape,i.dtype,T);for(let M=0;M<x;++M){const P=Math.max(0,Math.ceil((N-M)/g)),$=Math.min(p.outHeight,(p.inHeight+N-M)/g);for(let z=0;z<b;++z){const W=Math.max(0,Math.ceil((k-z)/v)),H=Math.min(p.outWidth,(p.inWidth+k-z)/v);for(let G=0;G<p.inChannels;++G)for(let F=0;F<p.outChannels;++F){let V=0;for(let U=0;U<p.batchSize;++U)for(let Y=P;Y<$;++Y){const oe=M+Y*g-N;for(let j=W;j<H;++j){const q=z+j*v-k;w?V+=R.get(U,oe,q,G)*_.get(U,Y,j,F):V+=R.get(U,G,oe,q)*_.get(U,F,Y,j)}}S.set(V,M,z,G,F)}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const eTe={kernelName:FI,backendName:"cpu",kernelFunc:JAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tTe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{inputShape:s,strides:o,pad:l,dataFormat:c,dimRoundingMode:f}=r;Me([a,i],"conv2dBackpropInput");const h=Ue(i.shape),p=Ue(a.shape);let g=No(c);const v=cr(s,i.shape,o,1,l,f,!1,g),x=new or(v.inShape,"float32"),b=x.values,w=n.data.get(a.dataId).values,S=n.data.get(i.dataId).values,[k,N,I]=h,{batchSize:T,filterHeight:R,filterWidth:_,inChannels:M,inHeight:P,inWidth:$,outChannels:z,outHeight:W,outWidth:H,strideHeight:G,strideWidth:F}=v;g=v.dataFormat;const V=R-1-v.padInfo.top,U=_-1-v.padInfo.left,Y=g==="channelsLast",oe=x.strides[0],j=Y?x.strides[1]:x.strides[2],q=Y?x.strides[2]:1,Z=Y?1:x.strides[1],se=p[0],pe=Y?p[1]:p[2],Se=Y?p[2]:1,be=Y?1:p[1];for(let Te=0;Te<T;++Te)for(let ae=0;ae<M;++ae)for(let Ne=0;Ne<P;++Ne){const Ie=Ne-V,ye=Math.max(0,Math.ceil(Ie/G)),Ze=Math.min(W,(R+Ie)/G);for(let Be=0;Be<$;++Be){const Qe=Be-U,Ye=Math.max(0,Math.ceil(Qe/F)),vt=Math.min(H,(_+Qe)/F);let At=0;for(let dn=ye;dn<Ze;++dn){const Ba=dn*G-Ie;for(let Fr=Ye;Fr<vt;++Fr){const Is=Fr*F-Qe,Zt=se*Te+pe*dn+Se*Fr,xi=k*(R-1-Ba)+N*(_-1-Is)+I*ae;for(let bi=0;bi<z;++bi){const wi=w[Zt+be*bi],xa=S[xi+bi];At+=wi*xa}}}const ya=oe*Te+j*Ne+q*Be+Z*ae;b[ya]=At}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const nTe={kernelName:ib,backendName:"cpu",kernelFunc:tTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:s,pad:o,dilations:l}=r;Me([a,i],"conv3d");const c=Tl(a.shape,i.shape,s,l,o),{filterDepth:f,filterHeight:h,filterWidth:p,dilationDepth:g,dilationHeight:v,dilationWidth:x,padInfo:b}=c,w=b.front,S=b.left,k=b.top,N=new or(c.outShape,a.dtype),I=n.data.get(a.dataId).values,T=n.data.get(i.dataId).values,R=N.values,_=Ue(a.shape),M=Ue(i.shape);for(let P=0;P<c.batchSize;++P){const $=P*_[0],z=P*N.strides[0];for(let W=0;W<c.outDepth;++W){const H=z+W*N.strides[1],G=W*c.strideDepth-w;for(let F=0;F<f;++F){const V=G+F*g;if(V<0||V>=c.inDepth)continue;const U=F*M[0],Y=$+V*_[1];for(let oe=0;oe<c.outHeight;++oe){const j=H+oe*N.strides[2],q=oe*c.strideHeight-k;for(let Z=0;Z<h;++Z){const se=q+Z*v;if(se<0||se>=c.inHeight)continue;const pe=U+Z*M[1],Se=Y+se*_[2];for(let be=0;be<c.outWidth;++be){const Te=j+be*c.outChannels,ae=be*c.strideWidth-S;for(let Ne=0;Ne<p;++Ne){const Ie=ae+Ne*x;if(Ie<0||Ie>=c.inWidth)continue;const ye=pe+Ne*M[2],Ze=Se+Ie*c.inChannels;let Be=ye;for(let Qe=0;Qe<c.inChannels;++Qe){const Ye=I[Ze+Qe];for(let vt=0;vt<c.outChannels;++vt)R[Te+vt]+=Ye*T[Be+vt];Be+=c.outChannels}}}}}}}}return n.makeTensorInfo(N.shape,N.dtype,N.values)}const aTe={kernelName:sb,backendName:"cpu",kernelFunc:rTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:s,pad:o,filterShape:l}=r;Me([a,i],"conv3dBackpropFilterV2");const c=Ue(a.shape),f=Ue(i.shape),h=Tl(a.shape,l,s,1,o),p=h.strideDepth,g=h.strideHeight,v=h.strideWidth,x=h.filterDepth,b=h.filterHeight,w=h.filterWidth,S=new or(h.filterShape,"float32"),k=S.values,[N,I,T,R]=S.strides,_=n.data.get(i.dataId).values,[M,P,$,z]=f,W=n.data.get(a.dataId).values,[H,G,F,V]=c,U=h.padInfo.front,Y=h.padInfo.left,oe=h.padInfo.top;for(let j=0;j<x;++j){const q=Math.max(0,Math.ceil((U-j)/p)),Z=Math.min(h.outDepth,(h.inDepth+U-j)/p),se=j*N;for(let pe=0;pe<b;++pe){const Se=Math.max(0,Math.ceil((oe-pe)/g)),be=Math.min(h.outHeight,(h.inHeight+oe-pe)/g),Te=pe*I+se;for(let ae=0;ae<w;++ae){const Ne=Math.max(0,Math.ceil((Y-ae)/v)),Ie=Math.min(h.outWidth,(h.inWidth+Y-ae)/v),ye=ae*T+Te;for(let Ze=0;Ze<h.inChannels;++Ze){const Be=Ze*R+ye;for(let Qe=0;Qe<h.outChannels;++Qe){let Ye=0;for(let vt=0;vt<h.batchSize;++vt){const At=vt*H,ya=vt*M;for(let dn=q;dn<Z;++dn){const Fr=(j+dn*p-U)*G+At,Is=dn*P+ya;for(let Zt=Se;Zt<be;++Zt){const bi=(pe+Zt*g-oe)*F+Fr,wi=Zt*$+Is;for(let xa=Ne;xa<Ie;++xa){const cc=(ae+xa*v-Y)*V+bi,Cf=xa*z+wi;Ye+=W[cc+Ze]*_[Cf+Qe]}}}}k[Be+Qe]=Ye}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const sTe={kernelName:jI,backendName:"cpu",kernelFunc:iTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oTe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{pad:s,strides:o,inputShape:l}=r;Me([a],"conv3dBackpropInputV2");const c=Ue(a.shape),f=Ue(i.shape),h=Tl(l,i.shape,o,1,s),p=new or(h.inShape,"float32"),g=p.values,[v,x,b,w]=p.strides,S=n.data.get(a.dataId).values,[k,N,I,T]=c,R=n.data.get(i.dataId).values,[_,M,P,$]=f,{batchSize:z,filterDepth:W,filterHeight:H,filterWidth:G,inChannels:F,inDepth:V,inHeight:U,inWidth:Y,outChannels:oe,outDepth:j,outHeight:q,outWidth:Z,strideDepth:se,strideHeight:pe,strideWidth:Se}=h,be=W-1-h.padInfo.front,Te=H-1-h.padInfo.top,ae=G-1-h.padInfo.left;for(let Ne=0;Ne<z;++Ne)for(let Ie=0;Ie<F;++Ie)for(let ye=0;ye<V;++ye){const Ze=ye-be,Be=Math.max(0,Math.ceil(Ze/se)),Qe=Math.min(j,(W+Ze)/se);for(let Ye=0;Ye<U;++Ye){const vt=Ye-Te,At=Math.max(0,Math.ceil(vt/pe)),ya=Math.min(q,(H+vt)/pe);for(let dn=0;dn<Y;++dn){const Ba=dn-ae,Fr=Math.max(0,Math.ceil(Ba/Se)),Is=Math.min(Z,(G+Ba)/Se);let Zt=0;for(let xi=Be;xi<Qe;++xi){const bi=xi*se-Ze;for(let wi=At;wi<ya;++wi){const xa=wi*pe-vt;for(let Ll=Fr;Ll<Is;++Ll){const cc=Ll*Se-Ba,Cf=k*Ne+N*xi+I*wi+T*Ll,E1=_*(W-1-bi)+M*(H-1-xa)+P*(G-1-cc)+$*Ie;for(let Gi=0;Gi<oe;++Gi){const jr=S[Cf+Gi],Hi=R[E1+Gi];Zt+=jr*Hi}}}}g[v*Ne+x*ye+b*Ye+w*dn+Ie]=Zt}}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const lTe={kernelName:BI,backendName:"cpu",kernelFunc:oTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uTe=Rt(rm,t=>Math.cos(t)),cTe={kernelName:rm,backendName:"cpu",kernelFunc:uTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dTe=Rt(am,t=>Math.cosh(t)),fTe={kernelName:am,backendName:"cpu",kernelFunc:dTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hTe(t){const{inputs:e,backend:n,attrs:r}=t,{image:a,boxes:i,boxInd:s}=e,{cropSize:o,method:l,extrapolationValue:c}=r,[f,h,p,g]=a.shape,v=i.shape[0],[x,b]=o,w=at([v,x,b,g],"float32"),S=n.data.get(i.dataId).values,k=n.data.get(s.dataId).values,N=n.data.get(a.dataId).values,I=Ue(a.shape),T=Ue(w.shape);for(let R=0;R<v;R++){const _=R*4,M=S[_],P=S[_+1],$=S[_+2],z=S[_+3],W=k[R];if(W>=f)continue;const H=x>1?($-M)*(h-1)/(x-1):0,G=b>1?(z-P)*(p-1)/(b-1):0;for(let F=0;F<x;F++){const V=x>1?M*(h-1)+F*H:.5*(M+$)*(h-1);if(V<0||V>h-1){for(let U=0;U<b;U++)for(let Y=0;Y<g;Y++){const oe=Y+U*T[2]+F*T[1]+R*T[0];w.values[oe]=c}continue}if(l==="bilinear"){const U=Math.floor(V),Y=Math.ceil(V),oe=V-U;for(let j=0;j<b;j++){const q=b>1?P*(p-1)+j*G:.5*(P+z)*(p-1);if(q<0||q>p-1){for(let Se=0;Se<g;Se++){const be=Se+j*T[2]+F*T[1]+R*T[0];w.values[be]=c}continue}const Z=Math.floor(q),se=Math.ceil(q),pe=q-Z;for(let Se=0;Se<g;Se++){let be=Se+Z*I[2]+U*I[1]+W*I[0];const Te=N[be];be=Se+se*I[2]+U*I[1]+W*I[0];const ae=N[be];be=Se+Z*I[2]+Y*I[1]+W*I[0];const Ne=N[be];be=Se+se*I[2]+Y*I[1]+W*I[0];const Ie=N[be],ye=Te+(ae-Te)*pe,Ze=Ne+(Ie-Ne)*pe;be=Se+j*T[2]+F*T[1]+R*T[0],w.values[be]=ye+(Ze-ye)*oe}}}else for(let U=0;U<b;++U){const Y=b>1?P*(p-1)+U*G:.5*(P+z)*(p-1);if(Y<0||Y>p-1){for(let q=0;q<g;q++){const Z=q+U*T[2]+F*T[1]+R*T[0];w.values[Z]=c}continue}const oe=Math.round(Y),j=Math.round(V);for(let q=0;q<g;q++){const Z=q+oe*I[2]+j*I[1]+W*I[0],se=q+U*T[2]+F*T[1]+R*T[0];w.values[se]=N[Z]}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const pTe={kernelName:VI,backendName:"cpu",kernelFunc:hTe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:s,reverse:o}=r;Me(a,"cumprod");const l=cn([i],a.shape.length);let c=a;l!=null&&(c=Zr({inputs:{x:a},backend:n,attrs:{perm:l}}));const f=wn(1,a.shape.length)[0];if(f!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${f}`);const h=pa(c.dtype,"int32"),p=AI(ve(c.shape),h),g=n.data.get(c.dataId).values,v=c.shape[c.shape.length-1],x=o?(w,S)=>w+v-S-1:(w,S)=>w+S;for(let w=0;w<g.length;w+=v)for(let S=0;S<v;S++){const k=x(w,S);if(S===0)p[k]=s?1:g[k];else{const N=x(w,S-1);p[k]=s?g[N]*p[N]:g[k]*p[N]}}const b=n.makeTensorInfo(c.shape,h,p);if(l!=null){const w=$l(l),S=Zr({inputs:{x:b},backend:n,attrs:{perm:w}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(c),S}return b}const gTe={kernelName:UI,backendName:"cpu",kernelFunc:mTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:s,reverse:o}=r;Me(a,"cumsum");const l=cn([i],a.shape.length);let c=a;l!=null&&(c=Zr({inputs:{x:a},backend:n,attrs:{perm:l}}));const f=wn(1,a.shape.length)[0];if(f!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${f}`);const h=pa(c.dtype,"int32"),p=Cr(ve(c.shape),h),g=n.data.get(c.dataId).values,v=c.shape[c.shape.length-1],x=o?(w,S)=>w+v-S-1:(w,S)=>w+S;for(let w=0;w<g.length;w+=v)for(let S=0;S<v;S++){const k=x(w,S);if(S===0)p[k]=s?0:g[k];else{const N=x(w,S-1);p[k]=s?g[N]+p[N]:g[k]+p[N]}}const b=n.makeTensorInfo(c.shape,h,p);if(l!=null){const w=$l(l),S=Zr({inputs:{x:b},backend:n,attrs:{perm:w}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(c),S}return b}const yTe={kernelName:ob,backendName:"cpu",kernelFunc:vTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:s,binaryOutput:o}=r;if(a.shape.length===1){const l=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,f=GT(l,c,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,f)}else if(a.shape.length===2){const l=n.bufferSync(a),c=n.bufferSync(i),f=tq(l,c,s,o);return n.makeTensorInfo(f.shape,i.dtype,f.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}const bTe={kernelName:WI,backendName:"cpu",kernelFunc:xTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockSize:i,dataFormat:s}=r;B(s==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${s}`);const o=a.shape[0],l=a.shape[1],c=a.shape[2],f=a.shape[3],h=l*i,p=c*i,g=f/(i*i),v=n.data.get(a.dataId).values,x=new Float32Array(o*h*p*g);let b=0;for(let w=0;w<o;++w)for(let S=0;S<h;++S){const k=Math.floor(S/i),N=S%i;for(let I=0;I<p;++I){const T=Math.floor(I/i),R=I%i,_=(N*i+R)*g;for(let M=0;M<g;++M){const $=M+_+f*(T+c*(k+l*w));x[b++]=v[$]}}}return n.makeTensorInfo([o,h,p,g],a.dtype,x)}const STe={kernelName:GI,backendName:"cpu",kernelFunc:wTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tK(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:s,pad:o,dilations:l,dimRoundingMode:c}=r;Me([a,i],"depthwiseConv2DNative");const f=Ue(a.shape),h=Ue(i.shape);let p=l;p==null&&(p=[1,1]),B(Er(s,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${p}'`);const g=cr(a.shape,i.shape,s,p,o,c,!0),{filterHeight:v,filterWidth:x,dilationHeight:b,dilationWidth:w,padInfo:S}=g,k=S.left,N=S.top,I=g.outChannels/g.inChannels,T=new or(g.outShape,a.dtype),R=n.data.get(a.dataId).values,_=n.data.get(i.dataId).values,M=T.values;for(let P=0;P<g.batchSize;++P){const $=P*f[0],z=P*T.strides[0];for(let W=0;W<g.outHeight;++W){const H=z+W*T.strides[1],G=W*g.strideHeight-N;for(let F=0;F<v;++F){const V=G+F*b;if(V<0||V>=g.inHeight)continue;const U=F*h[0],Y=$+V*f[1];for(let oe=0;oe<g.outWidth;++oe){const j=H+oe*T.strides[2],q=oe*g.strideWidth-k;for(let Z=0;Z<x;++Z){const se=q+Z*w;if(se<0||se>=g.inWidth)continue;const pe=U+Z*h[1],Se=Y+se*g.inChannels;let be=j,Te=pe;for(let ae=0;ae<g.inChannels;++ae){const Ne=R[Se+ae];for(let Ie=0;Ie<I;++Ie)M[be+Ie]+=Ne*_[Te+Ie];be+=I,Te+=I}}}}}}return n.makeTensorInfo(T.shape,T.dtype,T.values)}const CTe={kernelName:lb,backendName:"cpu",kernelFunc:tK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:s,dilations:o,pad:l,dimRoundingMode:c,filterShape:f}=r;Me([a,i],"depthwiseConv2dNativeBackpropFilter");const h=cr(a.shape,f,s,o,l,c,!0),{strideHeight:p,strideWidth:g,filterHeight:v,filterWidth:x}=h,b=new or(h.filterShape,"float32"),w=h.padInfo.left,S=h.padInfo.top,k=h.outChannels/h.inChannels,N=n.data.get(a.dataId).values,I=new or(a.shape,a.dtype,N),T=n.data.get(i.dataId).values,R=new or(i.shape,i.dtype,T);for(let _=0;_<v;++_){const M=Math.max(0,Math.ceil((S-_)/p)),P=Math.min(h.outHeight,(h.inHeight+S-_)/p);for(let $=0;$<x;++$){const z=Math.max(0,Math.ceil((w-$)/g)),W=Math.min(h.outWidth,(h.inWidth+w-$)/g);for(let H=0;H<h.outChannels;++H){const G=Math.trunc(H/k),F=H%k;let V=0;for(let U=0;U<h.batchSize;++U)for(let Y=M;Y<P;++Y){const oe=_+Y*p-S;for(let j=z;j<W;++j){const q=$+j*g-w;V+=I.get(U,oe,q,G)*R.get(U,Y,j,H)}}b.set(V,_,$,G,F)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const ETe={kernelName:HI,backendName:"cpu",kernelFunc:kTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NTe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{strides:s,dilations:o,pad:l,dimRoundingMode:c,inputShape:f}=r;Me([a,i],"depthwiseConv2DNativeBackpropInput");const h=Ue(a.shape),p=Ue(i.shape),g=cr(f,i.shape,s,o,l,c,!0),v=new or(g.inShape,"float32"),x=v.values,[b,w,S]=v.strides,k=n.data.get(a.dataId).values,[N,I,T]=h,R=n.data.get(i.dataId).values,[_,M,P]=p,{batchSize:$,filterHeight:z,filterWidth:W,inChannels:H,inHeight:G,inWidth:F,outChannels:V,outHeight:U,outWidth:Y,strideHeight:oe,strideWidth:j}=g,q=z-1-g.padInfo.top,Z=W-1-g.padInfo.left,se=V/H;for(let pe=0;pe<$;++pe)for(let Se=0;Se<H;++Se)for(let be=0;be<G;++be){const Te=be-q,ae=Math.max(0,Math.ceil(Te/oe)),Ne=Math.min(U,(z+Te)/oe);for(let Ie=0;Ie<F;++Ie){const ye=Ie-Z,Ze=Math.max(0,Math.ceil(ye/j)),Be=Math.min(Y,(W+ye)/j);let Qe=0;for(let Ye=ae;Ye<Ne;++Ye){const vt=Ye*oe-Te;for(let At=Ze;At<Be;++At){const ya=At*j-ye,dn=N*pe+I*Ye+T*At,Ba=_*(z-1-vt)+M*(W-1-ya)+P*Se;for(let Fr=0;Fr<se;++Fr){const Is=Se*se+Fr,Zt=k[dn+Is],xi=R[Ba+Fr];Qe+=Zt*xi}}}x[b*pe+w*be+S*Ie+Se]=Qe}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const ITe={kernelName:qI,backendName:"cpu",kernelFunc:NTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ATe(t){const{inputs:e,backend:n}=t,{x:r}=e,a=ve(r.shape),i=n.data.get(r.dataId).values,s=at([a,a],r.dtype),o=s.values;for(let c=0;c<i.length;c++)o[c*a+c]=i[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,s.dtype,s.values)}const TTe={kernelName:NW,backendName:"cpu",kernelFunc:ATe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Te={kernelName:ub,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a}=t,{strides:i,pad:s,dilations:o}=n,l=e,c=l.data.get(r.dataId).values,f=r.shape.length,h=l.data.get(a.dataId).values,p=a.shape.length,{batchSize:g,inHeight:v,inWidth:x,inChannels:b,outHeight:w,outWidth:S,padInfo:k,strideHeight:N,strideWidth:I,filterHeight:T,filterWidth:R,dilationHeight:_,dilationWidth:M,outShape:P}=Um(r.shape,a.shape,i,s,"NHWC",o),$=ve(P),z=P.length,W=gn(r.dtype,$);for(let G=0;G<g;++G)for(let F=0;F<w;++F){const V=F*N-k.top;for(let U=0;U<S;++U){const Y=U*I-k.left;for(let oe=0;oe<b;++oe){let j=Number.MIN_SAFE_INTEGER;for(let Z=0;Z<T;++Z){const se=V+Z*_;if(se>=0&&se<v)for(let pe=0;pe<R;++pe){const Se=Y+pe*M;if(Se>=0&&Se<x){const be=ls([G,se,Se,oe],f,Ue(r.shape)),Te=ls([Z,pe,oe],p,Ue(a.shape)),ae=c[be]+h[Te];ae>j&&(j=ae)}}}const q=ls([G,F,U,oe],z,Ue(P));W[q]=j}}}return{dataId:l.write(ec(W,r.dtype),P,r.dtype),shape:P,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OTe={kernelName:oE,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a,dy:i}=t,{strides:s,pad:o,dilations:l}=n,c=e,f=_i(r.shape,c.data.get(r.dataId).values),h=_i(a.shape,c.data.get(a.dataId).values),{batchSize:p,inHeight:g,inWidth:v,inChannels:x,outHeight:b,outWidth:w,padInfo:S,strideHeight:k,strideWidth:N,filterHeight:I,filterWidth:T,dilationHeight:R,dilationWidth:_,outShape:M}=Um(r.shape,a.shape,s,o,"NHWC",l);B(i.rank===M.length,()=>`Error in ${oE}, dy must have the same rank as output ${M.length}, but got ${i.rank}`);const P=_i(M,c.data.get(i.dataId).values),$=SW(a.shape,a.dtype);for(let W=0;W<p;++W)for(let H=0;H<b;++H){const G=H*k-S.top;for(let F=0;F<w;++F){const V=F*N-S.left;for(let U=0;U<x;++U){let Y=Number.MIN_SAFE_INTEGER,oe=0,j=0;for(let q=0;q<I;++q){const Z=G+q*R;if(Z>=0&&Z<g)for(let se=0;se<T;++se){const pe=V+se*_;if(pe>=0&&pe<v){const Se=f[W][Z][pe][U]+h[q][se][U];Se>Y&&(Y=Se,oe=q,j=se)}}}$[oe][j][U]+=P[W][H][F][U]}}}return{dataId:c.write(ec($,r.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DTe={kernelName:sE,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a,dy:i}=t,{strides:s,pad:o,dilations:l}=n,c=e,f=_i(r.shape,c.data.get(r.dataId).values),h=_i(a.shape,c.data.get(a.dataId).values),{batchSize:p,inHeight:g,inWidth:v,inChannels:x,outHeight:b,outWidth:w,padInfo:S,strideHeight:k,strideWidth:N,filterHeight:I,filterWidth:T,dilationHeight:R,dilationWidth:_,outShape:M}=Um(r.shape,a.shape,s,o,"NHWC",l);B(i.rank===M.length,()=>`Error in ${sE}, dy must have the same rank as output ${M.length}, but got ${i.rank}`);const P=_i(M,c.data.get(i.dataId).values),$=SW(r.shape,r.dtype);for(let W=0;W<p;++W)for(let H=0;H<b;++H){const G=H*k-S.top;for(let F=0;F<w;++F){const V=F*N-S.left;for(let U=0;U<x;++U){let Y=Number.MIN_SAFE_INTEGER,oe=G<0?0:G,j=V<0?0:V;for(let q=0;q<I;++q){const Z=G+q*R;if(Z>=0&&Z<g)for(let se=0;se<T;++se){const pe=V+se*_;if(pe>=0&&pe<v){const Se=f[W][Z][pe][U]+h[q][se][U];Se>Y&&(Y=Se,oe=Z,j=pe)}}}$[W][oe][j][U]+=P[W][H][F][U]}}}return{dataId:c.write(ec($,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RTe(t){const{inputs:e,backend:n,attrs:r}=t,{image:a}=e,{canvas:i,options:s}=r,{contextOptions:o,imageOptions:l}=s||{},c=(l==null?void 0:l.alpha)||1,f=(o==null?void 0:o.contextType)||"2d";if(f!=="2d")throw new Error(`Context type ${o.contextType} is not supported by the CPU backend.`);const h=i.getContext(f,(o==null?void 0:o.contextAttributes)||{});if(h==null)throw new Error(`Could not get the context with ${f} type.`);const[p,g]=a.shape.slice(0,2),v=a.shape.length===2?1:a.shape[2],x=n.data.get(a.dataId).values,b=a.dtype==="float32"?255:1,w=new Uint8ClampedArray(g*p*4);for(let k=0;k<p*g;++k){const N=[0,0,0,255*c];for(let T=0;T<v;T++){const R=x[k*v+T];if(a.dtype==="float32"){if(R<0||R>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${R}.`)}else if(a.dtype==="int32"&&(R<0||R>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${R}.`);v===1?(N[0]=R*b,N[1]=R*b,N[2]=R*b):N[T]=R*b}const I=k*4;w[I+0]=Math.round(N[0]),w[I+1]=Math.round(N[1]),w[I+2]=Math.round(N[2]),w[I+3]=Math.round(N[3])}i.width=g,i.height=p;const S=new ImageData(w,g,p);return h.putImageData(S,0,0),a}const _Te={kernelName:hye,backendName:"cpu",kernelFunc:RTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ag(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r;Me(a,"sum");let o;a.dtype==="bool"?o=wl({inputs:{x:a},backend:n,attrs:{dtype:"int32"}}):o=xs({inputs:{x:a},backend:n});const l=o.shape.length,c=it(i,o.shape),f=cn(c,l);let h=c,p=o;f!=null&&(p=Zr({inputs:{x:o},backend:n,attrs:{perm:f}}),h=wn(h.length,l)),dr("sum",h,p.shape.length);const[g,v]=er(p.shape,h),x=pa(p.dtype,"int32");let b=jy(n,g,x);const w=ve(v),S=n.data.get(b.dataId).values,k=n.data.get(p.dataId).values;for(let N=0;N<S.length;++N){const I=N*w;let T=0;for(let R=0;R<w;++R)T+=k[I+R];S[N]=T}if(s){const N=An(b.shape,c),I=b;b=qt({inputs:{x:b},backend:n,attrs:{shape:N}}),n.disposeIntermediateTensorInfo(I)}return n.disposeIntermediateTensorInfo(o),f!=null&&n.disposeIntermediateTensorInfo(p),b}const MTe={kernelName:Ub,backendName:"cpu",kernelFunc:ag};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PTe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:a}=r,i=e,{allDims:s,summedDims:o,idDims:l}=pT(a,i.length);gT(s.length,l,i);const{path:c,steps:f}=vT(o,l),h=f.length;let p=null,g=s.length;const v=[];for(let x=0;x<h;++x){for(const b of f[x]){const{permutationIndices:w,expandDims:S}=mT(g,l[b]);let k;yT(w)?k=i[b]:(k=Zr({inputs:{x:i[b]},backend:n,attrs:{perm:w}}),v.push(k));const N=k.shape.slice();for(let I=0;I<S.length;++I)N.splice(S[I],0,1);It(k.shape,N)||(k=qt({inputs:{x:k},backend:n,attrs:{shape:N}}),v.push(k)),p===null?p=k:(p=x1({inputs:{a:k,b:p},backend:n}),v.push(p))}x<h-1&&(c[x]>=0&&(p=ag({inputs:{x:p},backend:n,attrs:{axis:c[x]-(s.length-g),keepDims:!1}}),v.push(p)),g--)}for(const x of v)x!==p&&n.disposeIntermediateTensorInfo(x);return p}const LTe={kernelName:KI,backendName:"cpu",kernelFunc:PTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zTe(t){const{inputs:e,backend:n}=t,{dy:r,y:a}=e;Me([r,a],"eluGrad");const i=new Float32Array(ve(a.shape)),s=n.data.get(a.dataId).values,o=n.data.get(r.dataId).values;for(let l=0;l<s.length;++l){const c=s[l];c>=0?i[l]=o[l]:i[l]=o[l]*(c+1)}return n.makeTensorInfo(a.shape,"float32",i)}const FTe={kernelName:XI,backendName:"cpu",kernelFunc:zTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jTe=oT,BTe=lT,UTe=uT,VTe=cT,WTe=dT,GTe=fT,HTe=Rt(om,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+jTe*n);return e*(1-((((GTe*r+WTe)*r+VTe)*r+UTe)*r+BTe)*r*Math.exp(-n*n))}),qTe={kernelName:om,backendName:"cpu",kernelFunc:HTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vy(t){const{inputs:e,backend:n,attrs:r}=t,{input:a}=e,{dim:i}=r,s=a.shape.length,o=a.shape.slice();let l=i;return i<0&&(B(-(s+1)<=i,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+i+1),o.splice(l,0,1),qt({inputs:{x:a},backend:n,attrs:{shape:o}})}const KTe={kernelName:db,backendName:"cpu",kernelFunc:Vy};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XTe=Cn((t,e)=>t/e),ZT=Vn(im,XTe),RE={kernelName:im,backendName:"cpu",kernelFunc:ZT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nK(t,e,n){const r=t.shape,a=r[0],i=r[1],s=n.data.get(t.dataId),o=s.complexTensorInfos.real,l=s.complexTensorInfos.imag,c=[a,i],f=ve(c),h=Sr("float32",f),p=Sr("float32",f);for(let b=0;b<a;b++){const w=qu({inputs:{x:o},backend:n,attrs:{begin:[b,0],size:[1,i]}}),S=qu({inputs:{x:l},backend:n,attrs:{begin:[b,0],size:[1,i]}}),k=la({inputs:{real:w,imag:S},backend:n}),{real:N,imag:I}=YTe(k,e,n),T=vo(N,I);for(let R=0;R<i;R++){const _=hT(T,R);h[b*i+R]=_.real,p[b*i+R]=_.imag}n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(k)}const g=n.makeTensorInfo(c,"float32",h),v=n.makeTensorInfo(c,"float32",p),x=la({inputs:{real:g,imag:v},backend:n});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),x}function YTe(t,e,n){const r=ve(t.shape),a=n.data.get(t.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,s=n.data.get(a.complexTensorInfos.imag.dataId).values;if(ZTe(r)){const o=_E(i,s,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const c=n.makeTensorInfo(l,"float32",o.real),f=n.makeTensorInfo(l,"float32",o.imag),h=n.makeTensorInfo([],"float32",Al(r,"float32")),p=xs({inputs:{x:h},backend:n}),g=RE.kernelFunc({inputs:{a:c,b:h},backend:n}),v=RE.kernelFunc({inputs:{a:f,b:p},backend:n}),x=n.data.get(g.dataId).values,b=n.data.get(v.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),{real:x,imag:b}}return o}else{const o=vo(i,s),l=QTe(o,r,e);return mG(l)}}function ZTe(t){return(t&t-1)===0}function _E(t,e,n,r,a){if(n===1)return{real:t,imag:e};const i=vo(t,e),s=n/2,o=gG(i),l=o.real,c=o.imag,f=[l.length],h=a.makeTensorInfo(f,"float32",l),p=a.makeTensorInfo(f,"float32",c),g=la({inputs:{real:h,imag:p},backend:a}),v=vG(i),x=v.real,b=v.imag,w=[x.length],S=a.makeTensorInfo(w,"float32",x),k=a.makeTensorInfo(w,"float32",b),N=la({inputs:{real:S,imag:k},backend:a}),I=_E(l,c,s,r,a),T=I.real,R=I.imag,_=[T.length],M=a.makeTensorInfo(_,"float32",T),P=a.makeTensorInfo(_,"float32",R),$=la({inputs:{real:M,imag:P},backend:a}),z=_E(x,b,s,r,a),W=z.real,H=z.imag,G=[W.length],F=a.makeTensorInfo(G,"float32",W),V=a.makeTensorInfo(G,"float32",H),U=la({inputs:{real:F,imag:V},backend:a}),Y=xG(n,r),oe=[Y.real.length],j=a.makeTensorInfo(oe,"float32",Y.real),q=a.makeTensorInfo(oe,"float32",Y.imag),Z=la({inputs:{real:j,imag:q},backend:a}),se=x1({inputs:{a:Z,b:U},backend:a}),pe=Dd({inputs:{a:$,b:se},backend:a}),Se=XT({inputs:{a:$,b:se},backend:a}),be=Hu({inputs:{input:pe},backend:a}),Te=Hu({inputs:{input:Se},backend:a}),ae=Rd({inputs:{input:pe},backend:a}),Ne=Rd({inputs:{input:Se},backend:a}),Ie=_d({inputs:[be,Te],backend:a,attrs:{axis:0}}),ye=_d({inputs:[ae,Ne],backend:a,attrs:{axis:0}}),Ze=a.data.get(Ie.dataId).values,Be=a.data.get(ye.dataId).values;return a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(g),a.disposeIntermediateTensorInfo(S),a.disposeIntermediateTensorInfo(k),a.disposeIntermediateTensorInfo(N),a.disposeIntermediateTensorInfo(M),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo($),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(Z),a.disposeIntermediateTensorInfo(se),a.disposeIntermediateTensorInfo(pe),a.disposeIntermediateTensorInfo(Se),a.disposeIntermediateTensorInfo(be),a.disposeIntermediateTensorInfo(ae),a.disposeIntermediateTensorInfo(Te),a.disposeIntermediateTensorInfo(Ne),a.disposeIntermediateTensorInfo(Ie),a.disposeIntermediateTensorInfo(ye),{real:Ze,imag:Be}}function QTe(t,e,n){const r=new Float32Array(e*2);for(let a=0;a<e;a++){let i=0,s=0;for(let o=0;o<e;o++){const l=bG(a*o,e,n),c=hT(t,o);i+=c.real*l.real-c.imag*l.imag,s+=c.real*l.imag+c.imag*l.real}n&&(i/=e,s/=e),yG(r,i,s,a)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JTe(t){const{inputs:e,backend:n}=t,{input:r}=e,a=ve(r.shape),i=r.shape[r.shape.length-1],s=a/i,o=qt({inputs:{x:r},backend:n,attrs:{shape:[s,i]}}),l=nK(o,!1,n),c=qt({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const e$e={kernelName:YI,backendName:"cpu",kernelFunc:JTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QT(t){const{backend:e,attrs:n}=t,{shape:r,value:a,dtype:i}=n,s=i||sf(a),o=gn(s,ve(r));return n$e(o,a,s),e.makeTensorInfo(r,s,o)}const t$e={kernelName:ZI,backendName:"cpu",kernelFunc:QT};function n$e(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r$e={kernelName:QI,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,a=n,i=Sr(r.dtype,ve(r.shape)),[s,o,l,c]=r.shape,f=a.data.get(r.dataId).values;for(let p=0;p<s;p++){const g=p*l*o*c;for(let v=0;v<o;v++){const x=v*(l*c);for(let b=0;b<l;b++){const w=b*c;for(let S=0;S<c;S++){const k=Math.round(l-b-1),N=g+x+w+S;let I=f[N];if(k>=0&&k<l){const T=k*c,R=g+x+T+S;I=f[R]}i[N]=I}}}}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:s,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:f,dilations:h,dimRoundingMode:p,activation:g,leakyreluAlpha:v}=r;let x=eK({inputs:{x:a,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:f,dilations:h,dimRoundingMode:p}});if(s){const b=x;if(f==="NCHW"&&s.shape.length===1&&s.shape[0]!==1){const w=qt({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});x=Dd({inputs:{a:x,b:w},backend:n}),n.disposeIntermediateTensorInfo(w)}else x=Dd({inputs:{a:x,b:s},backend:n});n.disposeIntermediateTensorInfo(b)}if(g){const b=x;if(f==="NCHW"&&g==="prelu"&&o.shape.length===1&&o.shape[0]!==1){const w=qt({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});x=Uy(n,x,g,w,v),n.disposeIntermediateTensorInfo(w)}else x=Uy(n,x,g,o,v);n.disposeIntermediateTensorInfo(b)}return x}const i$e={kernelName:Cy,backendName:"cpu",kernelFunc:a$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:s,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:f,dilations:h,dimRoundingMode:p,activation:g,leakyreluAlpha:v}=r;let x=tK({inputs:{x:a,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:f,dilations:h,dimRoundingMode:p}});if(s){const b=x;x=Dd({inputs:{a:x,b:s},backend:n}),n.disposeIntermediateTensorInfo(b)}if(g){const b=x;x=Uy(n,x,g,o,v),n.disposeIntermediateTensorInfo(b)}return x}const o$e={kernelName:GW,backendName:"cpu",kernelFunc:s$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l$e(t){const{inputs:e,backend:n}=t,{params:r,indices:a}=e,i=ve(r.shape),s=a.shape,o=s[s.length-1],[l,c,f,h]=YA(r,a);if(c===0)return n.makeTensorInfo(l,r.dtype,[]);const p=n.data.get(a.dataId).values,g=n.bufferSync(r),v=fq(p,g,r.dtype,c,o,f,h,r.shape,i);return n.makeTensorInfo(l,r.dtype,v.values)}const u$e={kernelName:IW,backendName:"cpu",kernelFunc:l$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,indices:i}=e,{axis:s,batchDims:o}=r;Me([a,i],"gatherV2");const l=it(s,a.shape)[0],c=n.data.get(i.dataId).values,f=a.shape[l];for(let N=0;N<c.length;++N){const I=c[N];B(I<=f-1&&I>=0,()=>`GatherV2: the index value ${I} is not in [0, ${f-1}]`)}let h=o;o==null&&(h=0);const p=ve(i.shape),g=bT(a,i,l,h),v=qt({inputs:{x:a},backend:n,attrs:{shape:[g.batchSize,g.outerSize,g.dimSize,g.sliceSize]}}),x=qt({inputs:{x:i},backend:n,attrs:{shape:[g.batchSize,p/g.batchSize]}}),b=[g.batchSize,g.outerSize,p/g.batchSize,g.sliceSize],w=n.bufferSync(x),S=n.bufferSync(v),k=hq(S,w,b);return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x),n.makeTensorInfo(g.outputShape,k.dtype,k.values)}const d$e={kernelName:hb,backendName:"cpu",kernelFunc:c$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f$e(t){const{inputs:e,backend:n}=t,{input:r}=e,a=ve(r.shape),i=r.shape[r.shape.length-1],s=a/i,o=qt({inputs:{x:r},backend:n,attrs:{shape:[s,i]}}),l=nK(o,!0,n),c=qt({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const h$e={kernelName:JI,backendName:"cpu",kernelFunc:f$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p$e=Rt(pm,t=>Number.isFinite(t)?1:0,"bool"),m$e={kernelName:pm,backendName:"cpu",kernelFunc:p$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g$e=Rt(mm,t=>Math.abs(t)===1/0?1:0,"bool"),v$e={kernelName:mm,backendName:"cpu",kernelFunc:g$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y$e=Rt(gm,t=>Number.isNaN(t)?1:0,"bool"),x$e={kernelName:gm,backendName:"cpu",kernelFunc:y$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b$e(t){const{backend:e,attrs:n}=t,{start:r,stop:a,num:i}=n,s=yq(r,a,i);return e.makeTensorInfo([s.length],"float32",s)}const w$e={kernelName:AW,backendName:"cpu",kernelFunc:b$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S$e=Rt(ym,t=>Math.log1p(t)),C$e={kernelName:ym,backendName:"cpu",kernelFunc:S$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k$e=Cn((t,e)=>t&&e),E$e=Vn(yb,k$e,null,"bool"),N$e={kernelName:yb,backendName:"cpu",kernelFunc:E$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I$e=Rt(xb,t=>t?0:1,"bool"),A$e={kernelName:xb,backendName:"cpu",kernelFunc:I$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T$e=Cn((t,e)=>t||e),$$e=Vn(bb,T$e,null,"bool"),O$e={kernelName:bb,backendName:"cpu",kernelFunc:$$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{depthRadius:i,bias:s,alpha:o,beta:l}=r;Me(a,"LRN");const c=a.shape[3],f=c-1,h=n.data.get(a.dataId).values,p=ve(a.shape),g=new Float32Array(p);function v(x){const b=x%c;let w=x-b+Math.max(0,b-i);const S=x-b+Math.min(b+i,f);let k=0;for(;w<=S;w++){const N=h[w];k+=N*N}return k}for(let x=0;x<p;x++){const b=v(x),w=h[x]*Math.pow(s+o*b,-l);g[x]=w}return n.makeTensorInfo(a.shape,a.dtype,g)}const R$e={kernelName:wb,backendName:"cpu",kernelFunc:D$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,y:i,dy:s}=e,{depthRadius:o,bias:l,alpha:c,beta:f}=r;Me(s,"LRNGrad");const h=ve(s.shape),p=s.shape[3],g=n.data.get(s.dataId).values,v=n.data.get(a.dataId).values,x=n.data.get(i.dataId).values,b=new Float32Array(h),w=h;for(let S=0;S<w;S++){const k=S%p,N=S-k+Math.max(0,k-o),I=S-k+Math.min(p,k+o+1);let T=0;for(let R=N;R<I;R++)T+=Math.pow(v[R],2);T=c*T+l;for(let R=N;R<I;R++){let _=-2*c*f*v[R]*x[S]/T;S===R&&(_+=Math.pow(T,-f)),_*=g[S],b[R]+=_}}return n.makeTensorInfo(s.shape,a.dtype,b)}const M$e={kernelName:tA,backendName:"cpu",kernelFunc:_$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rK(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reductionIndices:i,keepDims:s}=r,o=n;let l=a.shape;const c=l.length,f=it(i,l);let h=f;const p=cn(h,c);let g=o.data.get(a.dataId).values;if(p!=null){const N=new Array(c);for(let I=0;I<N.length;I++)N[I]=l[p[I]];g=qT(g,l,a.dtype,p,N),h=wn(h.length,c),l=N}Me(a,"max"),dr("max",h,c);const[v,x]=er(l,h),b=ve(x),w=bq(g,b,v,a.dtype),S=o.write(w,v,a.dtype);let k=v;return s&&(k=An(v,f)),{dataId:S,shape:k,dtype:a.dtype}}const P$e={kernelName:Sb,backendName:"cpu",kernelFunc:rK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;Me(a,"maxPool");const{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=r,c=1;B(Er(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const f=gi(a.shape,i,s,c,o,l);let h;if(f.filterWidth===1&&f.filterHeight===1&&It(f.inShape,f.outShape))h=xs({inputs:{x:a},backend:n});else{const p=n.data.get(a.dataId).values,g=Ue(a.shape),v=YT(p,a.shape,a.dtype,g,f,"max");h=n.makeTensorInfo(f.outShape,a.dtype,v.values)}return h}const z$e={kernelName:Cb,backendName:"cpu",kernelFunc:L$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:s,pad:o,dimRoundingMode:l,dataFormat:c}=r;Me(a,"maxPool3d");const f=Eo(a.shape,i,s,1,o,l,c),h=n.data.get(a.dataId).values,p=Jq(h,a.shape,a.dtype,Ue(a.shape),f,"max");return n.makeTensorInfo(p.shape,"float32",p.values)}const j$e={kernelName:kb,backendName:"cpu",kernelFunc:F$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B$e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,{filterSize:s,strides:o,pad:l,dimRoundingMode:c}=r;Me([a,i],"maxPool3DGrad");const f=Eo(i.shape,s,o,1,l,c),h=n.bufferSync(i),p=TAe(h,f),g=f.strideDepth,v=f.strideHeight,x=f.strideWidth,b=f.dilationDepth,w=f.dilationHeight,S=f.dilationWidth,k=f.effectiveFilterDepth,N=f.effectiveFilterHeight,I=f.effectiveFilterWidth,T=k-1-f.padInfo.front,R=I-1-f.padInfo.left,_=N-1-f.padInfo.top,M=at(i.shape,"float32"),P=n.bufferSync(a);for(let $=0;$<f.batchSize;++$)for(let z=0;z<f.inChannels;++z)for(let W=0;W<f.inDepth;++W)for(let H=0;H<f.inHeight;++H)for(let G=0;G<f.inWidth;++G){const F=W-T,V=H-_,U=G-R;let Y=0;for(let oe=0;oe<k;oe+=b){const j=(F+oe)/g;if(!(j<0||j>=f.outDepth||Math.floor(j)!==j))for(let q=0;q<N;q+=w){const Z=(V+q)/v;if(!(Z<0||Z>=f.outHeight||Math.floor(Z)!==Z))for(let se=0;se<I;se+=S){const pe=(U+se)/x;if(pe<0||pe>=f.outWidth||Math.floor(pe)!==pe)continue;const Se=k*N*I-1-p.get($,j,Z,pe,z),be=oe*N*I+q*I+se,Te=Se===be?1:0;if(Te===0)continue;const ae=P.get($,j,Z,pe,z);Y+=ae*Te}}}M.set(Y,$,W,H,G,z)}return n.makeTensorInfo(M.shape,M.dtype,M.values)}const U$e={kernelName:rA,backendName:"cpu",kernelFunc:B$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V$e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i,output:s}=e,o=i;Me([i,s],"maxPoolGrad");const{filterSize:l,strides:c,pad:f,dimRoundingMode:h}=r,p=gi(o.shape,l,c,1,f,h),g=n.data.get(o.dataId).values,v=at(p.outShape,o.dtype,Qq(g,o.shape,o.dtype,p).values),x=p.strideHeight,b=p.strideWidth,w=p.dilationHeight,S=p.dilationWidth,k=p.effectiveFilterHeight,N=p.effectiveFilterWidth,I=N-1-p.padInfo.left,T=k-1-p.padInfo.top,R=at(o.shape,"float32"),_=n.data.get(a.dataId).values,M=at(a.shape,"float32",_);for(let P=0;P<p.batchSize;++P)for(let $=0;$<p.inChannels;++$)for(let z=0;z<p.inHeight;++z)for(let W=0;W<p.inWidth;++W){const H=z-T,G=W-I;let F=0;for(let V=0;V<k;V+=w){const U=(H+V)/x;if(!(U<0||U>=p.outHeight||Math.floor(U)!==U))for(let Y=0;Y<N;Y+=S){const oe=(G+Y)/b;if(oe<0||oe>=p.outWidth||Math.floor(oe)!==oe)continue;const j=k*N-1-v.get(P,U,oe,$),q=V*N+Y,Z=j===q?1:0;if(Z===0)continue;const se=M.get(P,U,oe,$);F+=se*Z}}R.set(F,P,z,W,$)}return n.makeTensorInfo(R.shape,R.dtype,R.values)}const W$e={kernelName:nA,backendName:"cpu",kernelFunc:V$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G$e(t,e,n,r,a){const i=Ue(e),s=YT(t,e,n,i,a,"max"),o=Qq(t,e,n,a,!0,r);return[s.values,o.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H$e={kernelName:TW,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:a,strides:i,pad:s,includeBatchInIndex:o}=e,l=n;Me(r,"MaxPoolWithArgmax");const c=l.data.get(r.dataId).values,f=gi(r.shape,a,i,[1,1],s),[h,p]=G$e(c,r.shape,r.dtype,o,f),g=l.write(h,f.outShape,r.dtype),v=l.write(p,f.outShape,r.dtype);return[{dataId:g,shape:f.outShape,dtype:r.dtype},{dataId:v,shape:f.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r,o=it(i,a.shape),c=er(a.shape,o)[1],f=ve(c),h=[],p=n.makeTensorInfo([],"float32",new Float32Array([f]));h.push(p);const g=wl({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});h.push(g);const v=ZT({inputs:{a:g,b:p},backend:n});h.push(v);const x=ag({inputs:{x:v},backend:n,attrs:{axis:i,keepDims:s}});return h.forEach(b=>n.disposeIntermediateTensorInfo(b)),x}const K$e={kernelName:Eb,backendName:"cpu",kernelFunc:q$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r;Me(a,"min");const o=it(i,a.shape);let l=o;const c=cn(l,a.shape.length);let f=a;c!=null&&(f=Zr({inputs:{x:a},backend:n,attrs:{perm:c}}),l=wn(l.length,a.shape.length)),dr("min",l,f.shape.length);const[h,p]=er(f.shape,l),g=ve(p),v=Cr(ve(h),f.dtype),x=n.data.get(f.dataId).values;for(let w=0;w<v.length;++w){const S=w*g;let k=x[S];for(let N=0;N<g;++N){const I=x[S+N];(Number.isNaN(I)||I<k)&&(k=I)}v[w]=k}c!=null&&n.disposeIntermediateTensorInfo(f);const b=n.makeTensorInfo(h,f.dtype,v);if(s){const w=An(h,o),S=qt({inputs:{x:b},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(b),S}return b}const Y$e={kernelName:Nb,backendName:"cpu",kernelFunc:X$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:i,mode:s}=r;Me(a,"mirrorPad");const o=i.map((k,N)=>k[0]+a.shape[N]+k[1]),l=i.map(k=>k[0]),c=i.map((k,N)=>k[0]+a.shape[N]),f=s==="reflect"?0:1,h=n.data.get(a.dataId).values,p=a.shape.length,g=Ue(a.shape),v=ve(o),x=o.length,b=Ue(o),w=Sr(a.dtype,v);for(let k=0;k<v;k++){let N=of(k,x,b);for(let T=0;T<x;T++)N[T]<l[T]?N[T]=l[T]*2-N[T]-f:N[T]>=c[T]&&(N[T]=(c[T]-1)*2-N[T]+f);N=N.map((T,R)=>T-l[R]);const I=ls(N,p,g);w[k]=h[I]}return{dataId:n.write(w,o,a.dtype),shape:o,dtype:a.dtype}}const Q$e={kernelName:Ib,backendName:"cpu",kernelFunc:Z$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J$e=Cn(((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e})),eOe=Vn(wm,J$e),tOe={kernelName:wm,backendName:"cpu",kernelFunc:eOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aK(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{dim:i}=r,s=a.shape.length;let o=i;if(o===-1&&(o=s-1),o!==s-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${s} and dim was ${o}`);const l=it([o],a.shape),c=rK({inputs:{x:a},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),f=An(c.shape,l),h=qt({inputs:{x:c},backend:n,attrs:{shape:f}}),p=XT({inputs:{a,b:h},backend:n}),g=lq({inputs:{x:p},backend:n}),v=ag({inputs:{x:g},backend:n,attrs:{axis:l,keepDims:!1}}),x=qt({inputs:{x:v},backend:n,attrs:{shape:f}}),b=ZT({inputs:{a:g,b:x},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x),b}const nOe={kernelName:Gb,backendName:"cpu",kernelFunc:aK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rOe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{numSamples:i,seed:s,normalized:o}=r;Me(a,"multinomial");const l=o?a:aK({inputs:{logits:a},backend:n,attrs:{dim:-1}}),c=l.shape[0],f=l.shape[1],h=n.data.get(l.dataId).values,p=[c,i],g=Cr(ve(p),"int32");for(let v=0;v<c;++v){const x=v*f,b=new Float32Array(f-1);b[0]=h[x];for(let k=1;k<b.length;++k)b[k]=b[k-1]+h[x+k];const w=PA.alea(s.toString()),S=v*i;for(let k=0;k<i;++k){const N=w();g[S+k]=b.length;for(let I=0;I<b.length;I++)if(N<b[I]){g[S+k]=I;break}}}return o||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(p,"int32",g)}const aOe={kernelName:$W,backendName:"cpu",kernelFunc:rOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iOe=GA;function sOe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l}=r;Me(a,"NonMaxSuppression");const c=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,{selectedIndices:h}=iOe(c,f,s,o,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}const oOe={kernelName:aA,backendName:"cpu",kernelFunc:sOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lOe=HA;function uOe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r;Me(a,"NonMaxSuppressionPadded");const f=n.data.get(a.dataId).values,h=n.data.get(i.dataId).values,{selectedIndices:p,validOutputs:g}=lOe(f,h,s,o,l,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([g]))]}const cOe={kernelName:iA,backendName:"cpu",kernelFunc:uOe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dOe=qA;function fOe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r;Me(a,"NonMaxSuppressionWithScore");const f=n.data.get(a.dataId).values,h=n.data.get(i.dataId).values,p=s,g=o,v=l,x=c,{selectedIndices:b,selectedScores:w}=dOe(f,h,p,g,v,x);return[n.makeTensorInfo([b.length],"int32",new Int32Array(b)),n.makeTensorInfo([w.length],"float32",new Float32Array(w))]}const hOe={kernelName:sA,backendName:"cpu",kernelFunc:fOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pOe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a}=e,{dtype:i,depth:s,onValue:o,offValue:l}=r;Me(a,"oneHot");const c=ve(a.shape),f=new Float32Array(c*s);f.fill(l);const h=n.data.get(a.dataId).values;for(let p=0;p<c;++p)h[p]>=0&&h[p]<s&&(f[p*s+h[p]]=o);return n.makeTensorInfo([...a.shape,s],i,f)}const mOe={kernelName:Ob,backendName:"cpu",kernelFunc:pOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wy(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const a=Hu({inputs:{input:r},backend:n}),i=Wy({inputs:{x:a},backend:n}),s=Rd({inputs:{input:r},backend:n}),o=Wy({inputs:{x:s},backend:n}),l=la({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),l}else return QT({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const gOe={kernelName:Kb,backendName:"cpu",kernelFunc:Wy};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iK(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const a=Hu({inputs:{input:r},backend:n}),i=iK({inputs:{x:a},backend:n}),s=Rd({inputs:{input:r},backend:n}),o=Wy({inputs:{x:s},backend:n}),l=la({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),l}else return QT({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const vOe={kernelName:$b,backendName:"cpu",kernelFunc:iK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sK(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r;if(e.length===1)return Vy({inputs:{input:e[0]},backend:n,attrs:{dim:a}});const i=e[0].shape,s=e[0].dtype;e.forEach(f=>{II(i,f.shape,"All tensors passed to stack must have matching shapes"),B(s===f.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(f=>{const h=Vy({inputs:{input:f},backend:n,attrs:{dim:a}});return o.push(h),h}),c=_d({inputs:l,backend:n,attrs:{axis:a}});return o.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const yOe={kernelName:Db,backendName:"cpu",kernelFunc:sK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:i,constantValue:s}=r;Me(a,"pad");const o=i.map((S,k)=>S[0]+a.shape[k]+S[1]),l=i.map(S=>S[0]),c=n.data.get(a.dataId).values,f=ve(a.shape),h=a.shape.length,p=Ue(a.shape),g=ve(o),v=o.length,x=Ue(o),b=Sr(a.dtype,g);s!==0&&b.fill(s);for(let S=0;S<f;S++){const N=of(S,h,p).map((T,R)=>T+l[R]),I=ls(N,v,x);b[I]=c[S]}return{dataId:n.write(b,o,a.dtype),shape:o,dtype:a.dtype}}const oK={kernelName:Rb,backendName:"cpu",kernelFunc:xOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bOe=Cn((t,e)=>Math.pow(t,e)),wOe=Vn(Cm,bOe),SOe={kernelName:Cm,backendName:"cpu",kernelFunc:wOe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function COe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:a,paramsDenseValues:i,indices:s}=e,{outputRaggedRank:o}=r,l=a.map(w=>n.data.get(w.dataId).values),c=a.map(w=>w.shape),f=n.data.get(i.dataId).values,h=n.data.get(s.dataId).values,[p,g,v]=Nq(l,c,f,i.shape,i.dtype,h,s.shape),x=p.map(w=>n.makeTensorInfo([w.length],"int32",w)),b=n.makeTensorInfo(v,i.dtype,g);return x.concat([b])}const kOe={kernelName:OW,backendName:"cpu",kernelFunc:COe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EOe(t){const{inputs:e,backend:n}=t,{starts:r,limits:a,deltas:i}=e,s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[c,f]=Iq(s,r.shape,r.dtype,o,a.shape,l,i.shape),h=n.makeTensorInfo([c.length],"int32",c),p=n.makeTensorInfo([f.length],r.dtype,f);return[h,p]}const NOe={kernelName:DW,backendName:"cpu",kernelFunc:EOe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IOe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:a,values:i,defaultValue:s,rowPartitionTensors:o}=e,{rowPartitionTypes:l}=r,c=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,h=n.data.get(s.dataId).values,p=o.map(b=>n.data.get(b.dataId).values),g=o.map(b=>b.shape),[v,x]=Aq(c,a.shape,f,i.shape,i.dtype,h,s.shape,p,g,l);return n.makeTensorInfo(v,i.dtype,x)}const AOe={kernelName:RW,backendName:"cpu",kernelFunc:IOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TOe(t){const{backend:e,attrs:n}=t,{start:r,stop:a,dtype:i,step:s}=n,o=Tq(r,a,s,i);return e.makeTensorInfo([o.length],i,o)}const $Oe={kernelName:oA,backendName:"cpu",kernelFunc:TOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OOe=Rt(km,t=>1/t),DOe={kernelName:km,backendName:"cpu",kernelFunc:OOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ROe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:s,size:o}=r;Me(a,"resizeBilinear");const l=Ue(a.shape),[c,f]=o,[h,p,g,v]=a.shape,x=n.data.get(a.dataId).values,b=new Float32Array(ve([h,c,f,v])),w=[i&&c>1?p-1:p,i&&f>1?g-1:g],S=[i&&c>1?c-1:c,i&&f>1?f-1:f];let k=0;const N=w[0]/S[0],I=w[1]/S[1];for(let T=0;T<h;T++)for(let R=0;R<c;R++){let _;s?_=N*(R+.5)-.5:_=N*R;const M=Math.max(0,Math.floor(_)),P=_-M,$=Math.min(p-1,Math.ceil(_)),z=T*l[0]+M*l[1],W=T*l[0]+$*l[1];for(let H=0;H<f;H++){let G;s?G=I*(H+.5)-.5:G=I*H;const F=Math.max(0,Math.floor(G)),V=G-F,U=Math.min(g-1,Math.ceil(G)),Y=z+F*l[2],oe=W+F*l[2],j=z+U*l[2],q=W+U*l[2];for(let Z=0;Z<v;Z++){const se=x[Y+Z],pe=x[oe+Z],Se=x[j+Z],be=x[q+Z],Te=se+(Se-se)*V,ae=pe+(be-pe)*V,Ne=Te+(ae-Te)*P;b[k++]=Ne}}}return n.makeTensorInfo([h,c,f,v],"float32",b)}const _Oe={kernelName:zb,backendName:"cpu",kernelFunc:ROe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MOe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:s}=r;Me([i,a],"resizeBilinearGrad");const o=Ue(a.shape),[l,c,f,h]=a.shape,[,p,g]=i.shape,v=new Float32Array(l*c*f*h),x=[s&&p>1?c-1:c,s&&g>1?f-1:f],b=[s&&p>1?p-1:p,s&&g>1?g-1:g],w=x[0]/b[0],S=x[1]/b[1],k=n.data.get(i.dataId).values;let N=0;for(let I=0;I<l;I++){const T=I*o[0];for(let R=0;R<p;R++){const _=R*w,M=Math.floor(_),P=Math.min(Math.ceil(_),c-1),$=T+M*o[1],z=T+P*o[1],W=_-M,H=1-W;for(let G=0;G<g;G++){const F=G*S,V=Math.floor(F),U=Math.min(Math.ceil(F),f-1),Y=F-V,oe=1-Y,j=$+V*o[2],q=$+U*o[2],Z=z+V*o[2],se=z+U*o[2],pe=H*oe,Se=H*Y,be=W*oe,Te=W*Y;for(let ae=0;ae<h;ae++){const Ne=k[N++];v[j+ae]+=Ne*pe,v[q+ae]+=Ne*Se,v[Z+ae]+=Ne*be,v[se+ae]+=Ne*Te}}}}return n.makeTensorInfo([l,f,c,h],"float32",v)}const POe={kernelName:cA,backendName:"cpu",kernelFunc:MOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LOe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:s,size:o}=r;Me(a,"resizeNearestNeighbor");const l=Ue(a.shape),[c,f]=o,[h,p,g,v]=a.shape,x=n.data.get(a.dataId).values,b=new Float32Array(h*c*f*v),w=[i&&c>1?p-1:p,i&&f>1?g-1:g],S=[i&&c>1?c-1:c,i&&f>1?f-1:f],k=w[0]/S[0],N=w[1]/S[1];let I=0;for(let T=0;T<h;T++){const R=T*l[0];for(let _=0;_<c;_++){const M=s?k*(_+.5):k*_;let P=Math.min(p-1,i?Math.round(M):Math.floor(M));s&&(P=Math.max(0,P));const $=R+P*l[1];for(let z=0;z<f;z++){const W=s?N*(z+.5):N*z;let H=Math.min(g-1,i?Math.round(W):Math.floor(W));s&&(H=Math.max(0,H));const G=$+H*l[2];for(let F=0;F<v;F++){const V=x[G+F];b[I++]=V}}}}return n.makeTensorInfo([h,c,f,v],a.dtype,b)}const zOe={kernelName:Lb,backendName:"cpu",kernelFunc:LOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FOe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:s}=r;Me([i,a],"resizeNearestNeighborGrad");const o=Ue(a.shape),l=Ue(i.shape),[c,f,h,p]=a.shape,[,g,v]=i.shape,x=new Float32Array(c*f*h*p),b=n.data.get(i.dataId).values,w=[s&&g>1?f-1:f,s&&v>1?h-1:h],S=[s&&g>1?g-1:g,s&&v>1?v-1:v],k=w[0]/S[0],N=w[1]/S[1],I=1/k,T=1/N,R=Math.ceil(I)*2+2,_=Math.ceil(T)*2+2;for(let M=0;M<c;M++){const P=M*o[0];for(let $=0;$<f;$++){const z=P+$*o[1],W=Math.floor($*I),H=Math.floor(W-R/2);for(let G=0;G<h;G++){const F=z+G*o[2],V=Math.floor(G*T),U=Math.floor(V-_/2);for(let Y=0;Y<p;Y++){let oe=0;for(let j=0;j<R;j++){const q=j+H;if(q<0||q>=g)continue;const Z=P+q*l[1],se=q*k,pe=Math.min(f-1,s?Math.round(se):Math.floor(se));if($===pe)for(let Se=0;Se<_;Se++){const be=Se+U;if(be<0||be>=v)continue;const Te=Z+be*l[2],ae=be*N,Ne=Math.min(h-1,s?Math.round(ae):Math.floor(ae));G===Ne&&(oe+=b[Te+Y])}}x[F+Y]=oe}}}}return n.makeTensorInfo(a.shape,a.dtype,x)}const jOe={kernelName:uA,backendName:"cpu",kernelFunc:FOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dims:i}=r;Me(a,"reverse");const s=a.shape.length,o=it(i,a.shape);if(s===0)return xs({inputs:{x:a},backend:n});const l=new or(a.shape,a.dtype),c=n.bufferSync(a);for(let f=0;f<l.size;f++){const h=l.indexToLoc(f),p=h.slice();o.forEach(g=>p[g]=a.shape[g]-1-p[g]),l.set(c.get(...p),...h)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const UOe={kernelName:Fb,backendName:"cpu",kernelFunc:BOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VOe={kernelName:vA,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:a,fillValue:i,center:s}=e,o=n,l=Sr(r.dtype,ve(r.shape)),[c,f,h,p]=r.shape,[g,v]=aT(s,f,h),x=255,b=Math.sin(a),w=Math.cos(a),S=o.data.get(r.dataId).values;for(let N=0;N<c;N++){const I=N*h*f*p;for(let T=0;T<f;T++){const R=T*(h*p);for(let _=0;_<h;_++){const M=_*p;for(let P=0;P<p;P++){const $=[c,T,_,P],z=$[2],W=$[1];let H=(z-g)*w-(W-v)*b,G=(z-g)*b+(W-v)*w;H=Math.round(H+g),G=Math.round(G+v);let F=i;if(typeof i!="number"&&(P===3?F=x:F=i[P]),H>=0&&H<h&&G>=0&&G<f){const U=G*(h*p),Y=H*p,oe=I+U+Y+P;F=S[oe]}const V=I+R+M+P;l[V]=F}}}}return{dataId:o.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WOe=Rt(Im,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),GOe={kernelName:Im,backendName:"cpu",kernelFunc:WOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HOe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a,updates:i}=e,{shape:s}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:f,outputSize:h}=rc(i,a,s),p=!0,g=n.bufferSync(a),v=n.bufferSync(i),x=yu(g,v,s,h,c,l,o,f,0,p);return n.makeTensorInfo(s,x.dtype,x.values)}const qOe={kernelName:_W,backendName:"cpu",kernelFunc:HOe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KOe(t,e){let n=0,r=t.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),t[a]<e?n=a+1:r=a;return r}function XOe(t,e){let n=0,r=t.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),t[a]<=e?n=a+1:r=a;return r}function YOe(t,e,n,r,a,i){const s=gn("int32",n*a);for(let o=0;o<n;++o){const l=t.slice(o*r,(o+1)*r),c=o*a;for(let f=0;f<a;++f)s[c+f]=i==="left"?KOe(l,e[f+c]):XOe(l,e[f+c])}return s}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZOe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:a,values:i}=e,{side:s}=r,o=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,c=YOe(o,l,a.shape[0],a.shape[1],i.shape[1],s);return n.makeTensorInfo(i.shape,"int32",c)}const QOe={kernelName:PW,backendName:"cpu",kernelFunc:ZOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JOe(t){const{inputs:e,backend:n}=t,{condition:r,t:a,e:i}=e;Me([r,a,i],"select");const s=r.shape.length,o=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,f=pa(a.dtype,i.dtype),h=Cr(ve(a.shape),f);let p=0;const g=s===0||s>1||a.shape.length===1?1:ve(a.shape.slice(1));for(let v=0;v<o.length;v++)for(let x=0;x<g;x++)o[v]===1?h[p++]=l[v]:h[p++]=c[v];return n.makeTensorInfo(a.shape,f,h)}const eDe={kernelName:jb,backendName:"cpu",kernelFunc:JOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tDe=s1,nDe=o1,rDe=Rt(Tm,t=>t>=0?nDe*t:tDe*(Math.exp(t)-1)),aDe={kernelName:Tm,backendName:"cpu",kernelFunc:rDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iDe=Rt(Dm,t=>t<0?-1:t>0?1:0),sDe={kernelName:Dm,backendName:"cpu",kernelFunc:iDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oDe=Rt($m,t=>Math.sin(t)),lDe={kernelName:$m,backendName:"cpu",kernelFunc:oDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uDe=Rt(Om,t=>Math.sinh(t)),cDe={kernelName:Om,backendName:"cpu",kernelFunc:uDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dDe=11920928955078125e-23,$F=Math.log(dDe)+2,fDe=Rt(_m,t=>{const e=t>-$F,n=t<$F,r=Math.exp(t);let a;return n?a=r:e?a=t:a=Math.log(1+r),a}),hDe={kernelName:_m,backendName:"cpu",kernelFunc:fDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,paddings:s}=r;Me([a],"spaceToBatchND");const o=ve(i),l=[[0,0]];l.push(...s);for(let T=1+i.length;T<a.shape.length;++T)l.push([0,0]);const c=oK.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),f=qm(c.shape,i,o,!1),h=Km(f.length,i.length,!1),p=Xm(c.shape,i,o,!1),x=qt({inputs:{x:c},backend:n,attrs:{shape:f}}),S=Zr({inputs:{x},backend:n,attrs:{perm:h}}),I=qt({inputs:{x:S},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(S),I}const mDe={kernelName:Vb,backendName:"cpu",kernelFunc:pDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gDe(t){const{inputs:e,backend:n}=t,{indices:r,values:a,denseShape:i,defaultValue:s}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(a.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${a.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);const o=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,f=n.data.get(s.dataId).values[0],[h,p,g,v,x]=Rq(o,r.shape,r.dtype,l,a.dtype,c,f);return[n.makeTensorInfo(p,r.dtype,h),n.makeTensorInfo([p[0]],a.dtype,g),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map(b=>Number(b)))),n.makeTensorInfo([x.length],r.dtype,new Int32Array(x))]}const vDe={kernelName:LW,backendName:"cpu",kernelFunc:gDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yDe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:a,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(a.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${a.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const s=Array.from(n.data.get(a.dataId).values),o=n.data.get(r.dataId).values,l=Array.from(n.data.get(i.dataId).values),[c,f,h]=_q(o,r.shape,r.dtype,s,l);return[n.makeTensorInfo(f,r.dtype,c),n.makeTensorInfo([h.length],i.dtype,new Int32Array(h))]}const xDe={kernelName:zW,backendName:"cpu",kernelFunc:yDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bDe(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[c,f]=KT(s,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(f,r.dtype,c)}const wDe={kernelName:FW,backendName:"cpu",kernelFunc:bDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SDe(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[c,f]=KT(s,r.shape,r.dtype,o,l);return n.makeTensorInfo(f,r.dtype,c)}const CDe={kernelName:jW,backendName:"cpu",kernelFunc:SDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kDe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:a,sparseValues:i,defaultValue:s}=e,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:f,strides:h,outputSize:p}=rc(i,a,o),g=!1,v=n.bufferSync(a);let x;switch(i.dtype){case"bool":{const b=n.bufferSync(i),w=!!n.data.get(s.dataId).values[0];x=yu(v,b,o,p,f,c,l,h,w,g);break}case"float32":{const b=n.bufferSync(i),w=n.data.get(s.dataId).values[0];x=yu(v,b,o,p,f,c,l,h,w,g);break}case"int32":{const b=n.bufferSync(i),w=n.data.get(s.dataId).values[0];x=yu(v,b,o,p,f,c,l,h,w,g);break}case"string":{const b=n.bufferSync(i),w=gl(n.data.get(s.dataId).values[0]);x=yu(v,b,o,p,f,c,l,h,w,g);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return n.makeTensorInfo(o,x.dtype,x.values)}const EDe={kernelName:BW,backendName:"cpu",kernelFunc:kDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{numOrSizeSplits:i,axis:s}=r,o=it(s,a.shape)[0],l=xT(a,i,o),c=new Array(a.shape.length).fill(0),f=a.shape.slice();return l.map(h=>{const p=[...f];p[o]=h;const g=qu({inputs:{x:a},backend:n,attrs:{begin:c,size:p}});return c[o]+=h,g})}const IDe={kernelName:Wb,backendName:"cpu",kernelFunc:NDe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ADe={kernelName:dA,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;Me(n,"square");const a=r.data.get(n.dataId).values,i=new Float32Array(a.length);for(let o=0;o<a.length;++o){const l=a[o];i[o]=l*l}return{dataId:r.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TDe=Rt(Bm,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),$De={kernelName:Bm,backendName:"cpu",kernelFunc:TDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ODe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,end:s,strides:o,beginMask:l,endMask:c,ellipsisMask:f,newAxisMask:h,shrinkAxisMask:p}=r;Me(a,"stridedSlice");const{finalShapeSparse:g,finalShape:v,isIdentity:x,sliceDim0:b,isSimpleSlice:w,begin:S,end:k,strides:N}=tT(a.shape,i,s,o,l,c,f,h,p);let I;if(x)I=qt({inputs:{x:a},backend:n,attrs:{shape:v}});else if(b||w){B(a.shape.length>=1,()=>`Input must have rank at least 1, got: ${a.shape.length}`);const T=QA(S,k,N),R=qu({inputs:{x:a},backend:n,attrs:{begin:S,size:T}});I=qt({inputs:{x:R},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(R)}else{const T=n.bufferSync(a),R=Lq(g,T,N,S);I=n.makeTensorInfo(v,R.dtype,R.values)}return I}const DDe={kernelName:hA,backendName:"cpu",kernelFunc:ODe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RDe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:a,nGramWidths:i,leftPad:s,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:f,dataSplits:h}=e,p=n.data.get(f.dataId).values,g=n.data.get(h.dataId).values,[v,x]=zq(p,g,a,i,s,o,l,c);return[n.makeTensorInfo([v.length],"string",v),n.makeTensorInfo(h.shape,"int32",x)]}const _De={kernelName:UW,backendName:"cpu",kernelFunc:RDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MDe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:a}=r,{input:i,delimiter:s}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);const o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values[0],[c,f,h]=Fq(o,l,a),p=f.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",f),n.makeTensorInfo([2],"int32",new Int32Array(h))]}const PDe={kernelName:VW,backendName:"cpu",kernelFunc:MDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LDe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:a}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const s=n.data.get(i.dataId).values,o=jq(s,a);return n.makeTensorInfo(i.shape,"int32",o)}const zDe={kernelName:WW,backendName:"cpu",kernelFunc:LDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FDe=Rt(zm,t=>Math.tan(t)),jDe={kernelName:zm,backendName:"cpu",kernelFunc:FDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BDe=Rt(Fm,t=>Math.tanh(t)),UDe={kernelName:Fm,backendName:"cpu",kernelFunc:BDe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VDe(t){const{inputs:e,backend:n}=t,{tensor:r,indices:a,updates:i}=e,{sliceRank:s,numUpdates:o,sliceSize:l,strides:c,outputSize:f}=rc(i,a,r.shape),h=!1,p=n.bufferSync(a),g=n.bufferSync(i),v=n.bufferSync(r),x=yu(p,g,r.shape,f,l,o,s,c,v,h);return n.makeTensorInfo(r.shape,x.dtype,x.values)}const WDe={kernelName:MW,backendName:"cpu",kernelFunc:VDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reps:i}=r;Me(a,"tile");const s=Uq(n.bufferSync(a),i);return n.makeTensorInfo(s.shape,s.dtype,s.values)}const HDe={kernelName:jm,backendName:"cpu",kernelFunc:GDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{k:i,sorted:s}=r;Me(a,"topk");const o=n.data.get(a.dataId).values,[l,c]=Wq(o,a.shape,a.dtype,i,s);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}const KDe={kernelName:pA,backendName:"cpu",kernelFunc:qDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XDe(t){const{inputs:e,attrs:n,backend:r}=t,{image:a,transforms:i}=e,{interpolation:s,fillMode:o,fillValue:l,outputShape:c}=n,[f,h,p,g]=a.shape,[v,x]=c??[h,p],b=[f,v,x,g],w=Ue(a.shape),S=w[0],k=w[1],N=w[2],I=Ue(b),T=I[0],R=I[1],_=I[2],M=Sr(a.dtype,ve(b));M.fill(l);const P=r.data.get(a.dataId).values,$=r.data.get(i.dataId).values;for(let W=0;W<f;++W){const H=i.shape[0]===1?$:$.subarray(W*8,W*8+8);for(let G=0;G<v;++G)for(let F=0;F<x;++F)for(let V=0;V<g;++V){let U;const Y=H[6]*F+H[7]*G+1;if(Y===0)continue;const oe=(H[0]*F+H[1]*G+H[2])/Y,j=(H[3]*F+H[4]*G+H[5])/Y,q=OF(oe,p,o),Z=OF(j,h,o);switch(s){case"nearest":U=tRe(P,h,p,S,k,N,W,Z,q,V,l);break;case"bilinear":U=nRe(P,h,p,S,k,N,W,Z,q,V,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${s}`)}const se=W*T+G*R+F*_+V;M[se]=U}return r.makeTensorInfo(b,a.dtype,M)}return{dataId:r.write(M,b,a.dtype),shape:a.shape,dtype:a.dtype}}const YDe={kernelName:mA,backendName:"cpu",kernelFunc:XDe};function OF(t,e,n){switch(n){case"reflect":return ZDe(t,e);case"wrap":return QDe(t,e);case"nearest":return eRe(t,e);case"constant":default:return JDe(t)}}function ZDe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return Mu(0,n,e-1)}function QDe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return Mu(0,n,e-1)}function JDe(t,e){return t}function eRe(t,e){return Mu(0,t,e-1)}function Lh(t,e,n,r,a,i,s,o,l,c,f){const h=s*r+o*a+l*i+c;return 0<=o&&o<e&&0<=l&&l<n?t[h]:f}function tRe(t,e,n,r,a,i,s,o,l,c,f){const h=Math.round(o),p=Math.round(l);return Lh(t,e,n,r,a,i,s,h,p,c,f)}function nRe(t,e,n,r,a,i,s,o,l,c,f){const h=Math.floor(o),p=Math.floor(l),g=h+1,v=p+1,x=(v-l)*Lh(t,e,n,r,a,i,s,h,p,c,f)+(l-p)*Lh(t,e,n,r,a,i,s,h,v,c,f),b=(v-l)*Lh(t,e,n,r,a,i,s,g,p,c,f)+(l-p)*Lh(t,e,n,r,a,i,s,g,v,c,f);return(g-o)*x+(o-h)*b}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rRe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:a}=n,{x:i}=e;Me(i,"unique");const s=r.data.get(i.dataId).values,{outputValues:o,outputShape:l,indices:c}=Gq(s,a,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}const aRe={kernelName:gA,backendName:"cpu",kernelFunc:rRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iRe(t){const{inputs:e,backend:n,attrs:r}=t,{value:a}=e;let{axis:i}=r;i<0&&(i+=a.shape.length);const s=a.shape.length,o=a.shape[i],l=new Array(s-1);let c=0;for(let g=0;g<s;g++)g!==i&&(l[c++]=a.shape[g]);const f=new Array(s).fill(0),h=a.shape.slice();h[i]=1;const p=new Array(o);for(let g=0;g<p.length;g++){f[i]=g;const v=qu({inputs:{x:a},backend:n,attrs:{begin:f,size:h}});p[g]=qt({inputs:{x:v},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(v)}return p}const sRe={kernelName:Hb,backendName:"cpu",kernelFunc:iRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,segmentIds:i}=e,{numSegments:s}=r;Me(a,"unsortedSegmentSum");const o=a.shape.length,l=i.shape.length,c=[],f=[],h=o-l;let p=i;for(let v=0;v<h;++v){const x=Vy({inputs:{input:p},backend:n,attrs:{dim:v+1}});p=x,f.push(x)}for(let v=0;v<s;++v){const x=Al(v,"int32"),b=n.makeTensorInfo([],"int32",x),w=sq({inputs:{a:b,b:p},backend:n}),S=wl({inputs:{x:w},backend:n,attrs:{dtype:"float32"}}),k=x1({inputs:{a:S,b:a},backend:n}),N=ag({inputs:{x:k},backend:n,attrs:{axis:0,keepDims:!1}});c.push(N),f.push(b),f.push(w),f.push(S),f.push(k),f.push(N)}const g=sK({inputs:c,backend:n,attrs:{axis:0}});return f.forEach(v=>n.disposeIntermediateTensorInfo(v)),g}const lRe={kernelName:qb,backendName:"cpu",kernelFunc:oRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uRe=[rAe,LNe,iAe,oAe,VNe,uAe,dAe,hAe,mAe,vAe,xAe,wAe,CAe,NAe,AAe,OAe,RAe,MAe,LAe,tAe,FAe,BAe,VAe,GNe,GAe,BNe,qNe,qAe,zNe,XAe,ZAe,QAe,eTe,nTe,aTe,sTe,lTe,cTe,fTe,pTe,gTe,yTe,bTe,STe,CTe,ETe,ITe,TTe,$Te,OTe,DTe,_Te,LTe,KIe,FTe,KNe,qTe,XNe,KTe,ZNe,e$e,t$e,r$e,JNe,tIe,i$e,o$e,u$e,d$e,rIe,iIe,FNe,h$e,YAe,m$e,v$e,x$e,XIe,oIe,uIe,w$e,dIe,C$e,N$e,A$e,O$e,R$e,M$e,P$e,hIe,z$e,j$e,U$e,W$e,H$e,K$e,Y$e,mIe,Q$e,tOe,aOe,vIe,xIe,oOe,cOe,hOe,wIe,mOe,vOe,yOe,oK,SOe,ZIe,kIe,kOe,NOe,AOe,$Oe,jNe,RE,DOe,QIe,JIe,eAe,_Oe,POe,zOe,jOe,UOe,VOe,GOe,DIe,qOe,QOe,eDe,aDe,_Ie,sDe,lDe,cDe,MIe,nOe,hDe,mDe,vDe,xDe,wDe,CDe,EDe,IDe,zIe,ADe,jIe,UIe,$De,DDe,_De,PDe,zDe,HIe,MTe,jDe,UDe,WDe,HDe,KDe,YDe,SIe,aRe,sRe,lRe,gOe];for(const t of uRe)HW(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const du={},Qv={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function cRe(t,e){du[t]=e}function Bi(t,e){if(!(t in du)||e!=null){const r=fRe(t,e);if(r!==null)du[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=du[t];return n==null||n.isContextLost()?(delete du[t],Bi(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),du[t])}function dRe(t){if(!fe().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function fRe(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??dRe(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete du[t]},!1),fe().getBool("SOFTWARE_WEBGL_ENABLED")&&(Qv.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",Qv)||n.getContext("experimental-webgl",Qv):n.getContext("webgl2",Qv)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var mp;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(mp||(mp={}));var Da;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Da||(Da={}));var sr;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(sr||(sr={}));function ig(t,e){return[e,t]}function hRe(t,e){return t*e}function Jv(t){const e=ve(t),n=Math.ceil(e/4);return nE(n)}function mf(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function pRe(t,e){const[n,r]=mf(t,e);return n*r*4}function JT(t,e){const n=t;let r,a,i,s,o,l,c,f,h,p;return fe().getNumber("WEBGL_VERSION")===2?(r=n.R32F,a=n.R16F,i=n.RGBA16F,s=n.RGBA32F,o=n.RED,c=4,f=1,h=n.HALF_FLOAT,p=n.FLOAT,l=n.RGBA8):(r=t.RGBA,a=t.RGBA,i=t.RGBA,s=n.RGBA,o=t.RGBA,c=4,f=4,h=e!=null?e.HALF_FLOAT_OES:null,p=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:a,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:s,textureFormatFloat:o,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:f,textureTypeHalfFloat:h,textureTypeFloat:p}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $e(t,e){const n=e();return fe().getBool("DEBUG")&&mRe(t),n}function mRe(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+xRe(t,e))}const gRe=596e-10,vRe=65504;function yRe(t){return!!(fe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||gRe<Math.abs(t)&&Math.abs(t)<vRe)}function xRe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function e0(t,e){return Io(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function bRe(t,e){const n=Io(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if($e(t,()=>t.shaderSource(n,e)),$e(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function wRe(t,e){const n=Io(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if($e(t,()=>t.shaderSource(n,e)),$e(t,()=>t.compileShader(n)),fe().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw lK(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const SRe=/ERROR: [0-9]+:([0-9]+):/g;function lK(t,e){const n=SRe.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],a=t.split(`
`),i=a.length.toString().length+2,s=a.map((h,p)=>dd((p+1).toString(),i)+h);let o=0;for(let h=0;h<s.length;h++)o=Math.max(s[h].length,o);const l=s.slice(0,r-1),c=s.slice(r-1,r),f=s.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${dd(c[0],o)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join(`
`))}function CRe(t){return Io(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function kRe(t,e){if($e(t,()=>t.linkProgram(e)),!fe().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function G2(t,e){if($e(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function ERe(t,e){const n=Io(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return $e(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),$e(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function NRe(t,e){const n=Io(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return $e(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),$e(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function IRe(t){return Io(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function ARe(t,e){const n=fe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,a=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+a+".")}}function TRe(t){return Io(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function DF(t,e,n,r,a,i,s){const o=t.getAttribLocation(e,n);return o===-1?!1:($e(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),$e(t,()=>t.vertexAttribPointer(o,a,t.FLOAT,!1,i,s)),$e(t,()=>t.enableVertexAttribArray(o)),!0)}function $Re(t,e,n){MRe(t,n),$e(t,()=>t.activeTexture(t.TEXTURE0+n)),$e(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function ORe(t,e,n){return Io(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function DRe(t,e,n){return t.getUniformLocation(e,n)}function RRe(t,e,n,r){$e(t,()=>$Re(t,e,r)),$e(t,()=>t.uniform1i(n,r))}function H2(t,e,n){$e(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),$e(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function RF(t,e){$e(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),$e(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function t0(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+_Re(t,e))}function _Re(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function Io(t,e,n){const r=$e(t,()=>e());if(r==null)throw new Error(n);return r}function MRe(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const a=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${a}.`)}}function Md(t,e=2){return ve(t.slice(0,t.length-e))}function Pd(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function n0(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[Md(t),...Pd(t)]),e}function PRe(t,e=!1){let n=fe().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=fe().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&fe().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((o,l)=>l>=t.length-2?NI(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=Il(t).newShape);let a=ve(t),i=null;t.length<=1&&a<=n?i=[1,a]:t.length===2&&t[0]<=n&&t[1]<=n?i=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?i=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?i=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?i=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(i=[t[0],t[1]*t[2]*t[3]]);const s=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(e?2:1)&&Math.min(...i)>0;if(i==null||s)if(e){const o=Md(t);let l=2,c=2;t.length&&([l,c]=Pd(t)),a=o*(l/2)*(c/2),i=nE(a).map(f=>f*2)}else i=nE(a);return i}function r0(t){return t%2===0}function Gy(t,e){if(t=t.slice(-2),e=e.slice(-2),It(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||r0(n)&&r0(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&r0(t[0])&&r0(e[0])}let q2,K2;function LRe(t){if(q2==null){const e=Bi(t);q2=e.getParameter(e.MAX_TEXTURE_SIZE)}return q2}function zRe(t){if(K2==null){const e=Bi(t);K2=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,K2)}function FRe(t){if(t===0)return 0;let e;const n=Bi(t);return oi(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:oi(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function oi(t,e){return t.getExtension(e)!=null}function _F(t){try{if(Bi(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function jRe(t){if(t===0)return!1;const e=Bi(t);if(t===1){if(!oi(e,"OES_texture_float"))return!1}else if(!oi(e,"EXT_color_buffer_float"))return!1;return ME(e)}function BRe(t){if(t===0)return!1;const e=Bi(t);if(t===1){if(!oi(e,"OES_texture_float")||!oi(e,"WEBGL_color_buffer_float"))return!1}else{if(oi(e,"EXT_color_buffer_float"))return ME(e);const r="EXT_color_buffer_half_float";if(oi(e,r)){const a=e.getExtension(r);return URe(e,a)}return!1}return ME(e)}function ME(t){const e=JT(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(i),s}function URe(t,e){const n=JT(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(s),o}function VRe(t){return t!==2?!1:Bi(t).fenceSync!=null}function sg(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&B(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ze=fe();ze.registerFlag("HAS_WEBGL",()=>ze.getNumber("WEBGL_VERSION")>0);ze.registerFlag("WEBGL_VERSION",()=>_F(2)?2:_F(1)?1:0);ze.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);ze.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>ze.get("WEBGL_VERSION")===2);ze.registerFlag("WEBGL_CPU_FORWARD",()=>!0);ze.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);ze.registerFlag("WEBGL_PACK",()=>ze.getBool("HAS_WEBGL"));ze.registerFlag("WEBGL_PACK_NORMALIZATION",()=>ze.getBool("WEBGL_PACK"));ze.registerFlag("WEBGL_PACK_CLIP",()=>ze.getBool("WEBGL_PACK"));ze.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>ze.getBool("WEBGL_PACK"));ze.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>ze.getBool("WEBGL_PACK"));ze.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>ze.getBool("WEBGL_PACK"));ze.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>ze.getBool("WEBGL_PACK"));ze.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>ze.getBool("WEBGL_PACK"));ze.registerFlag("WEBGL_PACK_REDUCE",()=>ze.getBool("WEBGL_PACK"));ze.registerFlag("WEBGL_LAZILY_UNPACK",()=>ze.getBool("WEBGL_PACK"));ze.registerFlag("WEBGL_CONV_IM2COL",()=>ze.getBool("WEBGL_PACK"));ze.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>ze.getBool("WEBGL_PACK"));ze.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>LRe(ze.getNumber("WEBGL_VERSION")));ze.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>zRe(ze.getNumber("WEBGL_VERSION")));ze.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=ze.getNumber("WEBGL_VERSION");return t===0?0:FRe(t)});ze.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>ze.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!i6());ze.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>jRe(ze.getNumber("WEBGL_VERSION")));ze.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>ze.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:ze.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));ze.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>BRe(ze.getNumber("WEBGL_VERSION")));ze.registerFlag("WEBGL_FENCE_API_ENABLED",()=>VRe(ze.getNumber("WEBGL_VERSION")));ze.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>ze.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);ze.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});ze.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>i6()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});ze.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);ze.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);ze.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);ze.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);ze.registerFlag("WEBGL_EXP_CONV",()=>!1);ze.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>ze.getBool("IS_TEST"));ze.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);ze.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);ze.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);ze.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zr(){let t,e,n,r,a,i,s,o,l,c;return fe().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",a="texture",i="outputColor",s="out vec4 outputColor;",o=fe().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",s="",o=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:s,defineSpecialNaN:o,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sc(t,e,n="index"){const r=Ue(e);return r.map((a,i)=>{const s=`int ${t[i]} = ${n} / ${a}`,o=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${a}`:`index -= ${t[i]} * ${a}`;return`${s}; ${o};`}).join("")}function b1(t,e,n="index"){const r=Ue(e);return r.map((a,i)=>{const s=`int ${t[i]} = ${n} / outShapeStrides[${i}]`,o=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${s}; ${o};`}).join("")}function WRe(t,e){const n=t.length,r=t.map(i=>`${e}[${i}]`),a=new Array(n-1);a[n-2]=r[n-1];for(let i=n-3;i>=0;--i)a[i]=`(${a[i+1]} * ${r[i+1]})`;return a}function GRe(t,e,n="index"){const r=t.map((i,s)=>s),a=WRe(r,e);return a.map((i,s)=>{const o=`int ${t[s]} = ${n} / ${a[s]}`,l=s===a.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * ${a[s]}`:`index -= ${t[s]} * ${a[s]}`;return`${o}; ${l};`}).join("")}function e$(t){const e=Ue(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function t$(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const uK=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:cK}=MCe;function HRe(t,e,n){const r=[];if(t.forEach(g=>{const v=ve(g.shapeInfo.logicalShape);if(g.shapeInfo.isUniform?r.push(`uniform float ${g.name}${v>1?`[${v}]`:""};`):(r.push(`uniform sampler2D ${g.name};`),r.push(`uniform int offset${g.name};`)),n.enableShapeUniforms){const{uniformShape:x}=n$(n.packedInputs,g.shapeInfo.logicalShape,g.shapeInfo.texShape);switch(x.length){case 1:r.push(`uniform int ${g.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${g.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${g.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${g.name}Shape;`);break}r.push(`uniform ivec2 ${g.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(g=>{r.push(`uniform ${g.type} ${g.name}${g.arrayIndex?`[${g.arrayIndex}]`:""};`)});const a=r.join(`
`),i=t.map(g=>qRe(g,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),s=e.texShape,o=zr(),l=YRe(o);let c,f,h=JRe(o);return e.isPacked?(c=KRe(e.logicalShape,s,n.enableShapeUniforms),f=QRe(o)):(c=XRe(e.logicalShape,s,n.enableShapeUniforms),f=ZRe(o)),n.packedInputs&&(h+=r_e),[h,l,f,a,c,i,n.userCode].join(`
`)}function gf(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return m_e(t,e);case 1:return v_e(t,e);case 2:return x_e(t,e);case 3:return w_e(t,e);case 4:return C_e(t,e);case 5:return k_e(t);case 6:return E_e(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function dK(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return p_e(t);case 1:return g_e(t,e);case 2:return y_e(t,e);case 3:return b_e(t,e);default:return S_e(t,e)}}function qRe(t,e,n=!1,r){let a="";n?a+=dK(t,r):a+=gf(t,r);const i=t.shapeInfo.logicalShape,s=e.logicalShape;return i.length<=s.length&&(n?a+=N_e(t,e):a+=I_e(t,e)),a}function KRe(t,e,n){switch(t.length){case 0:return fK();case 1:return a_e(t,e,n);case 2:return f_e(t,e,n);case 3:return s_e(t,e,n);default:return l_e(t,e,n)}}function XRe(t,e,n){switch(t.length){case 0:return fK();case 1:return i_e(t,e,n);case 2:return h_e(t,e,n);case 3:return o_e(t,e,n);case 4:return u_e(t,e,n);case 5:return c_e(t,e);case 6:return d_e(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function YRe(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function ZRe(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function QRe(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function JRe(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${e_e}
    ${t_e}
    ${n_e}
  `}const e_e=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,t_e=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,n_e=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,r_e=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function fK(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function a_e(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function i_e(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function s_e(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],a=Math.ceil(t[2]/2),i=a*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec3(b, r, c);
    }
  `}function o_e(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${b1(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=sc(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function l_e(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],a=Math.ceil(t[t.length-1]/2),i=a*Math.ceil(t[t.length-2]/2);let s=i,o="",l="b, r, c";for(let c=2;c<t.length-1;c++)s*=t[t.length-c-1],o=`
      int b${c} = index / ${s};
      index -= b${c} * ${s};
    `+o,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${o}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec${t.length}(${l});
    }
  `}function u_e(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${b1(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=sc(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function c_e(t,e){const n=sc(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function d_e(t,e){const n=sc(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function f_e(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(It(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const a=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec2(r, c);
    }
  `}function h_e(t,e,n){return It(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function oc(t){return`offset${t}`}function p_e(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=zr();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function m_e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[a,i]=t.shapeInfo.texShape;if(a===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const s=oc(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${s});
      return sampleTexture(${n}, uv);
    }
  `;const[o,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${o}, ${l}, ${s});
      return sampleTexture(${n}, uv);
    }
  `}function g_e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t.shapeInfo.texShape,i=zr();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;const s=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${s[0]}, ${s[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function v_e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${vf(t)}
      }
    `;const a=t.shapeInfo.texShape,i=a[0],s=a[1];if(s===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=oc(n);return s===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${s}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${o});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${s}, index + ${o});
      return sampleTexture(${n}, uv);
    }
  `}function y_e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,s=i[0],o=i[1],l=zr();if(i!=null&&It(n,i))return e?`
      vec4 ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}.0, ${s}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${a}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],f=Math.ceil(n[1]/2);return`
    vec4 ${a}(int row, int col) {
      vec2 uv = packedUVfrom2D(${f}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function x_e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(i!=null&&It(n,i)){if(e)return`
      float ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const p=i[0],g=i[1];return`
    float ${a}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${g}.0, ${p}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:s,keptDims:o}=Il(n),l=s;if(l.length<n.length){const p=yf(t,l),g=["row","col"];return`
      ${gf(p,e)}
      float ${a}(int row, int col) {
        return ${a}(${xf(g,o)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${vf(t)}
      }
    `;const c=i[0],f=i[1],h=oc(r);return f===1?e?`
      float ${a}(int row, int col) {
        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col) {
      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?e?`
      float ${a}(int row, int col) {
        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col) {
      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${f}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${a}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${h};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${a}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${h};
    vec2 uv = uvFromFlat(${c}, ${f}, index);
    return sampleTexture(${r}, uv);
  }
`}function b_e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,s=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){const p=n.slice(1),g=[1,2],v=yf(t,p),x=["b","row","col"];return`
        ${dK(v,e)}
        vec4 ${a}(int b, int row, int col) {
          return ${a}(${xf(x,g)});
        }
      `}const o=zr();if(e)return`
    vec4 ${a}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `;const l=s[0],c=s[1],f=Math.ceil(n[2]/2),h=f*Math.ceil(n[1]/2);return`
    vec4 ${a}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${h}, ${f}, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `}function w_e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],s=n[2],{newShape:o,keptDims:l}=Il(n),c=o;if(c.length<n.length){const x=yf(t,c),b=["row","col","depth"];return`
        ${gf(x,e)}
        float ${a}(int row, int col, int depth) {
          return ${a}(${xf(b,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${s}, 1)));
        ${vf(t)}
      }
    `;const f=t.shapeInfo.texShape,h=f[0],p=f[1],g=t.shapeInfo.flatOffset;if(p===i&&g==null)return e?`
      float ${a}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${a}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${s}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${h}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(p===s&&g==null)return e?`
      float ${a}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${h}.0);
      return sampleTexture(${r}, uv);
    }
  `;const v=oc(r);return e?`
    float ${a}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${v};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${a}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${s} + depth + ${v};
        vec2 uv = uvFromFlat(${h}, ${p}, index);
        return sampleTexture(${r}, uv);
      }
  `}function S_e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=zr();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${a.texture2D}(${n}, uv);
    }
  `;const i=t.shapeInfo.logicalShape,s=i.length,o=t.shapeInfo.texShape,l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=l[0],f=l[1],h=Math.ceil(i[s-1]/2);let p=h*Math.ceil(i[s-2]/2),g="int b, int row, int col",v=`b * ${p} + (row / 2) * ${h} + (col / 2)`;for(let x=2;x<s-1;x++)g=`int b${x}, `+g,p*=i[s-x-1],v=`b${x} * ${p} + `+v;return`
    vec4 ${r}(${g}) {
      int index = ${v};
      int texR = index / ${f};
      int texC = index - texR * ${f};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}, ${c});
      return ${a.texture2D}(${n}, uv);
    }
  `}function C_e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],s=n[2]*i,o=n[1]*s,{newShape:l,keptDims:c}=Il(n);if(l.length<n.length){const S=yf(t,l),k=["row","col","depth","depth2"];return`
      ${gf(S,e)}
      float ${a}(int row, int col, int depth, int depth2) {
        return ${a}(${xf(k,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${o}, ${s}, ${i}, 1)));
        ${vf(t)}
      }
    `;const f=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,p=h[0],g=h[1],v=`int stride2 = ${r}Shape[3];`,x=`int stride1 = ${r}Shape[2] * stride2;`,b=`int stride0 = ${r}Shape[1] * stride1;`;if(g===o&&f==null)return e?`
      float ${a}(int row, int col, int depth, int depth2) {
        ${v}
        ${x}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(g===i&&f==null)return e?`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;const w=oc(r);return e?`
    float ${a}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${v}
      ${x}
      ${b}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${w});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${a}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${s} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${p}, ${g}, index + ${w});
      return sampleTexture(${r}, uv);
    }
  `}function k_e(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e[4],i=e[3]*a,s=e[2]*i,o=e[1]*s,{newShape:l,keptDims:c}=Il(e);if(l.length<e.length){const x=yf(t,l),b=["row","col","depth","depth2","depth3"];return`
      ${gf(x)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${xf(b,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${o}, ${s}, ${i}, ${a})) +
          depth3;
        ${vf(t)}
      }
    `;const f=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,p=h[0],g=h[1];if(g===o&&f==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${s}, ${i}, ${a}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(g===a&&f==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;const v=oc(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${s} + depth * ${i} +
          depth2 * ${a} + depth3 + ${v};
      vec2 uv = uvFromFlat(${p}, ${g}, index);
      return sampleTexture(${n}, uv);
    }
  `}function E_e(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:a,keptDims:i}=Il(e);if(a.length<e.length){const b=yf(t,a),w=["row","col","depth","depth2","depth3","depth4"];return`
      ${gf(b)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${xf(w,i)});
      }
    `}const s=e[5],o=e[4]*s,l=e[3]*o,c=e[2]*l,f=e[1]*c;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${f}, ${c}, ${l}, ${o})) +
          dot(
            vec2(depth3, depth4),
            vec2(${s}, 1)));
        ${vf(t)}
      }
    `;const h=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,g=p[0],v=p[1];if(v===f&&h==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${o}, ${s})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${v}.0, ${g}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(v===s&&h==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${v}.0, ${g}.0);
        return sampleTexture(${n}, uv);
      }
    `;const x=oc(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${f} + col * ${c} + depth * ${l} +
          depth2 * ${o} + depth3 * ${s} + depth4 + ${x};
      vec2 uv = uvFromFlat(${g}, ${v}, index);
      return sampleTexture(${n}, uv);
    }
  `}function vf(t){const e=t.name,n=ve(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function N_e(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,s=e.logicalShape.length,o=cK(t.shapeInfo.logicalShape,e.logicalShape),l=Lt(s),c=s-i;let f;const h=["x","y","z","w","u","v"];i===0?f="":s<2&&o.length>=1?f="coords = 0;":f=o.map(S=>`coords.${h[S+c]} = 0;`).join(`
`);let p="";s<2&&i>0?p="coords":p=t.shapeInfo.logicalShape.map((S,k)=>`coords.${h[k+c]}`).join(", ");let g="return outputValue;";const x=ve(t.shapeInfo.logicalShape)===1,w=ve(e.logicalShape)===1;if(i===1&&!x&&!w)g=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(x&&!w)s===1?g=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:g=`
        return vec4(outputValue.x);
      `;else if(o.length){const S=i-2,k=i-1;o.indexOf(S)>-1&&o.indexOf(k)>-1?g="return vec4(outputValue.x);":o.indexOf(S)>-1?g="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(k)>-1&&(g="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${a}() {
      ${l} coords = getOutputCoords();
      ${f}
      vec4 outputValue = get${r}(${p});
      ${g}
    }
  `}function I_e(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=e.texShape,s=t.shapeInfo.texShape,o=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&o===l&&t.shapeInfo.flatOffset==null&&It(s,i))return`
      float ${a}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const c=Lt(l),f=cK(t.shapeInfo.logicalShape,e.logicalShape),h=l-o;let p;const g=["x","y","z","w","u","v"];o===0?p="":l<2&&f.length>=1?p="coords = 0;":p=f.map(x=>`coords.${g[x+h]} = 0;`).join(`
`);let v="";return l<2&&o>0?v="coords":v=t.shapeInfo.logicalShape.map((x,b)=>`coords.${g[b+h]}`).join(", "),`
    float ${a}() {
      ${c} coords = getOutputCoords();
      ${p}
      return get${r}(${v});
    }
  `}function Lt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function n$(t,e,n){const{newShape:r,keptDims:a}=Il(e),i=e.length,s=t&&i===3&&e[0]===1,o=s?e.slice(1):r,l=!t&&i>1&&!It(e,n)&&r.length<i||s;return{useSqueezeShape:l,uniformShape:l?o:e,keptDims:a}}function yf(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function xf(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A_e(t,e,n,r){const a=n.map((f,h)=>{const p={logicalShape:f.shape,texShape:f.isUniform?null:f.texData.texShape,isUniform:f.isUniform,isPacked:f.isUniform?!1:f.texData.isPacked,flatOffset:null};return f.texData!=null&&f.texData.slice!=null&&f.texData.slice.flatOffset>0&&(p.flatOffset=f.texData.slice.flatOffset),{name:e.variableNames[h],shapeInfo:p}}),i=a.map(f=>f.shapeInfo),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},o=HRe(a,s,e),l=wRe(t.gl,o),c=t.createProgram(l);return fe().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:i,outShapeInfo:s,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:e,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:i,outShapeInfo:s},hK(t,e,c)))}function hK(t,e,n){const r=[],a=[];let i,s,o,l=null,c=null;c=t.getUniformLocation(n,"NAN",!1),fe().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const f=!1;for(const h of e.variableNames){const p={name:h,uniform:t.getUniformLocation(n,h,f),offset:t.getUniformLocation(n,`offset${h}`,f)};e.enableShapeUniforms&&(p.shape=t.getUniformLocation(n,`${h}Shape`,f),p.texShape=t.getUniformLocation(n,`${h}TexShape`,f)),r.push(p)}if(e.enableShapeUniforms&&(i=t.getUniformLocation(n,"outShape",f),o=t.getUniformLocation(n,"outShapeStrides",f),s=t.getUniformLocation(n,"outTexShape",f)),e.customUniforms)for(const h of e.customUniforms)a.push(t.getUniformLocation(n,h.name,f));return{variablesLocations:r,customUniformLocations:a,infLoc:l,nanLoc:c,outShapeLocation:i,outShapeStridesLocation:o,outTexShapeLocation:s}}function MF(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const a=n.logicalShape,i=e[r],s=i.shape;if(!It(a,s))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${a} and ${s} must match`);if(n.isUniform&&i.isUniform)return;const o=n.texShape,l=i.isUniform?null:i.texData.texShape;if(!It(o,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${o} and ${l} must match`)})}function T_e(t,e,n,r,a){e.program.enableShapeUniforms||(MF(e.inShapeInfos,n),MF([e.outShapeInfo],[r]));const i=r.texData.texture,s=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,s[0],s[1]):t.setOutputMatrixTexture(i.texture,s[0],s[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),fe().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const c=n[l],{uniform:f,offset:h,shape:p,texShape:g}=e.variablesLocations[l];if(p){const{uniformShape:v}=n$(e.program.packedInputs,c.shape,c.texData.texShape);switch(v.length){case 1:t.gl.uniform1iv(p,new Int32Array(v));break;case 2:t.gl.uniform2iv(p,new Int32Array(v));break;case 3:t.gl.uniform3iv(p,new Int32Array(v));break;case 4:t.gl.uniform4iv(p,new Int32Array(v));break}}if(g&&t.gl.uniform2i(g,c.texData.texShape[0],c.texData.texShape[1]),f!=null){if(c.isUniform){if(ve(c.shape)<2)t.gl.uniform1f(f,c.uniformValues[0]);else{let v=c.uniformValues;v instanceof Float32Array||(v=new Float32Array(v)),t.gl.uniform1fv(f,v)}continue}c.texData.slice!=null&&h!=null&&t.gl.uniform1i(h,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,f,l)}}const o=e.outShapeLocation;if(o)switch(r.shape.length){case 1:t.gl.uniform1iv(o,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(o,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(o,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(o,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=Ue(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&a)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],f=e.customUniformLocations[l],h=a[l];if(c.type==="float")t.gl.uniform1fv(f,h);else if(c.type==="vec2")t.gl.uniform2fv(f,h);else if(c.type==="vec3")t.gl.uniform3fv(f,h);else if(c.type==="vec4")t.gl.uniform4fv(f,h);else if(c.type==="int")t.gl.uniform1iv(f,h);else if(c.type==="ivec2")t.gl.uniform2iv(f,h);else if(c.type==="ivec3")t.gl.uniform3iv(f,h);else if(c.type==="ivec4")t.gl.uniform4iv(f,h);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function $_e(t,e,n){let r="";e.concat(n).forEach(s=>{const o=s.texData!=null&&s.texData.slice!=null&&s.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!s.isUniform){const l=s.texData.texShape,{useSqueezeShape:c,uniformShape:f,keptDims:h}=n$(t.packedInputs,s.shape,l);let p="",g="",v="";if(f.length===1&&t.packedInputs){const I=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];p=`${I[0]>1}_${I[1]>1}`}else if(f.length===2&&!t.packedInputs)g=`${f[0]>1}_${f[1]>1}`;else if(f.length>2&&!t.packedInputs){const I=Ue(f);v=`${I[0]===l[1]}_${I[I.length-1]===l[1]}`}const x=s.shape.length,b=f.length===2&&It(s.shape,l),w=ve(s.shape)===1,S=Ad(s.shape,n.shape),k=!t.packedInputs&&x===n.shape.length&&It(l,n.texData.texShape),N=t.packedInputs||f.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${x}_${k}_${c?h:""}_${f.length}_${w}_${S}_${b}_${p}_${g}_${v}_${N}_${o}`}else{const l=s.isUniform?"uniform":s.texData.texShape;r+=`${s.shape}_${l}_${o}`}});const a=t.userCode;let i=t.constructor.name;return i+="_"+r+"_"+a+`${fe().getNumber("WEBGL_VERSION")}`,i}function Ir(t){return fe().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class O_e{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=mp.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=zr();this.outputShape=e,this.enableShapeUniforms=Ir(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?b1(["r","c","d"],e):sc(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D_e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=mp.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=zr();this.outputShape=e,this.enableShapeUniforms=Ir(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?b1(["r","c","d"],e):sc(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class R_e{constructor(e){this.variableNames=["A"],this.outTexUsage=Da.DOWNLOAD;const n=zr();this.outputShape=e,this.userCode=`
      ${uK}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class __e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Da.DOWNLOAD;const n=zr();this.outputShape=e,this.userCode=`
      ${uK}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M_e={R:0,G:1,B:2,A:3};class PF{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const a=zr();this.outputShape=e,this.enableShapeUniforms=Ir(this.outputShape.length);let i="result";n&&(i="floor(result * 255. + 0.5)");let s="";for(let o=0;o<r.length;o++){const l=r[o];s+=`
          if(offset == ${o}) {
            result = values[${M_e[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?t$():e$(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${a.texture2D}(A, uv);
          ${s}
        }
        ${a.output} = vec4(${i}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P_e{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=zr();this.outputShape=e,this.enableShapeUniforms=Ir(this.outputShape.length);let a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let s=0;s<=1;s++)for(let o=0;o<=1;o++){const l=s*2+o;a+=`
          localCoords = coords;
          if(localCoords[2] + ${o} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${o};
          if (localCoords[1] + ${s} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${s};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?t$():e$(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${a}

          ${r.output} = ${i};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L_e(t){const e=zr(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return bRe(t,n)}function z_e(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return ERe(t,e)}function F_e(t){const e=new Uint16Array([0,1,2,2,1,3]);return NRe(t,e)}function og(t,e,n,r,a,i){ARe(e,n);const s=IRe(t),o=t.TEXTURE_2D;return $e(t,()=>t.bindTexture(o,s)),$e(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),$e(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),$e(t,()=>t.texParameteri(o,t.TEXTURE_MIN_FILTER,t.NEAREST)),$e(t,()=>t.texParameteri(o,t.TEXTURE_MAG_FILTER,t.NEAREST)),fe().getNumber("WEBGL_VERSION")===1?$e(t,()=>t.texImage2D(o,0,r,e,n,0,a,i,null)):$e(t,()=>t.texStorage2D(o,1,r,e,n)),$e(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:s,texShape:[n,e]}}function pK(t){return t.internalFormatFloat}function j_e(t,e,n,r){const[a,i]=ig(e,n);return og(t,a,i,pK(r),r.textureFormatFloat,t.FLOAT)}function mK(t){return t.internalFormatHalfFloat}function B_e(t,e,n,r){const[a,i]=ig(e,n);return og(t,a,i,mK(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function gK(t){return t.downloadTextureFormat}function U_e(t,e,n,r){const[a,i]=ig(e,n);return og(t,a,i,gK(r),t.RGBA,t.UNSIGNED_BYTE)}function vK(t){return t.internalFormatPackedFloat}function V_e(t,e,n,r){const[a,i]=mf(e,n);return og(t,a,i,vK(r),t.RGBA,t.FLOAT)}function yK(t){return t.internalFormatPackedHalfFloat}function W_e(t,e,n,r){const[a,i]=mf(e,n);return og(t,a,i,yK(r),t.RGBA,r.textureTypeHalfFloat)}function G_e(t,e,n){return $e(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),DF(t,e,"clipSpacePos",n,3,20,0)&&DF(t,e,"uv",n,2,20,12)}function H_e(t,e,n,r,a,i){$e(t,()=>t.bindTexture(t.TEXTURE_2D,e));let s,o,l;a instanceof Uint8Array?(s=new Uint8Array(n*r*4),o=t.UNSIGNED_BYTE,l=t.RGBA):(s=new Float32Array(n*r*4),o=t.FLOAT,l=i.internalFormatPackedFloat),s.set(a),fe().getNumber("WEBGL_VERSION")===2?$e(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,o,s)):$e(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,o,s)),$e(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function q_e(t,e,n){$e(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?fe().getNumber("WEBGL_VERSION")===2?$e(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):$e(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):fe().getNumber("WEBGL_VERSION")===2?$e(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):$e(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),$e(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function K_e(t,e,n,r){const a=t.createBuffer();$e(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,a));const o=4*4*e*n;return $e(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,o,t.STREAM_READ)),$e(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),$e(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),a}function X_e(t,e,n){const r=t,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function Y_e(t,e,n,r){const[a,i]=ig(e,n),s=4,o=new Uint8Array(hRe(e*n,s));return $e(t,()=>t.readPixels(0,0,a,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}function Z_e(t,e,n,r,a,i,s,o){const l=t,c=new Float32Array(pRe(i,s));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function Q_e(t,e,n){const r=new Float32Array(e*n*4);return $e(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class X2{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=fe().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,cRe(n,e)):this.gl=Bi(n),e=this.gl,fe().getNumber("WEBGL_VERSION")===2){const i=e;this.createVertexArray=()=>$e(i,()=>i.createVertexArray()),this.bindVertexArray=s=>$e(i,()=>i.bindVertexArray(s)),this.deleteVertexArray=s=>$e(i,()=>i.deleteVertexArray(s)),this.getVertexArray=()=>$e(i,()=>i.getParameter(i.VERTEX_ARRAY_BINDING))}else if(e!=null){const i=e.getExtension("OES_vertex_array_object");if(i==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>$e(e,()=>i.createVertexArrayOES()),this.bindVertexArray=s=>$e(e,()=>i.bindVertexArrayOES(s)),this.deleteVertexArray=s=>$e(e,()=>i.deleteVertexArrayOES(s)),this.getVertexArray=()=>$e(e,()=>e.getParameter(i.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),fe().getNumber("WEBGL_VERSION")===1){const i="OES_texture_float",s="OES_texture_half_float";if(this.textureFloatExtension=e0(this.gl,i),oi(this.gl,s))this.textureHalfFloatExtension=e0(this.gl,s);else if(fe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),oi(this.gl,a))this.colorBufferHalfFloatExtension=e0(this.gl,a);else if(fe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",oi(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(oi(this.gl,a))this.colorBufferHalfFloatExtension=this.gl.getExtension(a);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=z_e(this.gl),this.indexBuffer=F_e(this.gl),this.framebuffer=TRe(this.gl),this.textureConfig=JT(this.gl,this.textureHalfFloatExtension)}get debug(){return fe().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;$e(e,()=>e.finish()),$e(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),$e(e,()=>e.deleteFramebuffer(this.framebuffer)),$e(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),$e(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),$e(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),j_e(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),B_e(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),U_e(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),q_e(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,a){this.throwIfDisposed(),H_e(this.gl,e,n,r,a,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),W_e(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),V_e(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(RF(this.gl,this.framebuffer),this.outputTexture=null),$e(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>Y_e(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,a,i,s){return Z_e(this.gl,e,n,r,a,i,s,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return X_e(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const a=K_e(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),a}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(fe().getBool("WEBGL_FENCE_API_ENABLED")){const a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const s=a.clientWaitSync(i,0,0);return s===a.ALREADY_SIGNALED||s===a.CONDITION_SATISFIED},n=i}else fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>Q_e(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=L_e(n));const r=CRe(n);$e(n,()=>n.attachShader(r,this.vertexShader)),$e(n,()=>n.attachShader(r,e)),kRe(n,r);const a=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&G2(n,a),a}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;$e(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),G_e(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&($e(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&G2(this.gl,this.program),$e(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?ORe(this.gl,e,n):DRe(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),$e(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),RRe(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[a,i]=mf(n,r);this.setOutputMatrixTextureDriver(e,a,i)}setOutputMatrixWriteRegion(e,n,r,a){this.setOutputMatrixWriteRegionDriver(r,e,a,n)}setOutputPackedMatrixWriteRegion(e,n,r,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&G2(this.gl,this.program),t0(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}$e(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),$e(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=e0(this.gl,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(a.TIME_ELAPSED_EXT,i),i}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await yz(()=>this.disposed||this.isQueryAvailable(e,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),a=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=J_e(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in fe().platform&&(r=fe().platform.setTimeoutCustom.bind(fe().platform)),yz(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),H2(this.gl,e,this.framebuffer),this.debug&&t0(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(H2(this.gl,this.outputTexture,this.framebuffer),this.debug&&t0(this.gl)):RF(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const a=this.gl;H2(a,e,this.framebuffer),this.debug&&t0(a),this.outputTexture=e,$e(a,()=>a.viewport(0,0,n,r)),$e(a,()=>a.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,a){this.throwIfDisposed(),$e(this.gl,()=>this.gl.scissor(e,n,r,a))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function J_e(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:eMe,bincountImpl:xK,bincountReduceImpl:tMe,bitwiseAndImpl:nMe,castImpl:rMe,ceilImpl:aMe,concatImpl:iMe,equalImpl:sMe,expImpl:oMe,expm1Impl:lMe,floorImpl:uMe,gatherNdImpl:cMe,gatherV2Impl:dMe,greaterImpl:fMe,greaterEqualImpl:hMe,lessImpl:pMe,lessEqualImpl:mMe,linSpaceImpl:gMe,logImpl:vMe,maxImpl:yMe,maximumImpl:xMe,minimumImpl:bMe,multiplyImpl:wMe,negImpl:SMe,notEqualImpl:CMe,prodImpl:kMe,raggedGatherImpl:EMe,raggedRangeImpl:NMe,raggedTensorToTensorImpl:IMe,rangeImpl:AMe,rsqrtImpl:TMe,scatterImpl:$Me,sigmoidImpl:OMe,simpleAbsImpl:bK,sliceImpl:DMe,sparseFillEmptyRowsImpl:RMe,sparseReshapeImpl:_Me,sparseSegmentReductionImpl:wK,sqrtImpl:MMe,staticRegexReplaceImpl:PMe,stridedSliceImpl:LMe,stringNGramsImpl:zMe,stringSplitImpl:FMe,stringToHashBucketFastImpl:jMe,subImpl:BMe,tileImpl:UMe,topKImpl:VMe,transposeImpl:r$,uniqueImpl:WMe}=qIe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SK(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function _r(t,e){return e===1?[t]:SK(t,e)}function GMe(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HMe{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Ir(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=_r("rc",this.rank),r=Lt(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),s=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${a}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${s}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let a=0;a<=1;a++){let i=`${r===0?"r":"rp1"}, ${a===0?"c":"cp1"}`;for(let s=2;s<this.rank;s++)i=`${e[e.length-1-s]},`+i;n.push(i)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],a=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${a};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CK{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Ir(this.outputShape.length);let r="";for(let a=0;a<4;a++){let i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${a>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${a}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${a>0?"}":""}
      `}this.userCode=`
      ${qMe(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?t$():e$(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function qMe(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?GRe(["r","c","d"],"inputShape"):sc(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KMe{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const a=zF(n,r),i=FF(e,a,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const s=LF(e,a,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=s,this.log();const l=this.freeTextures[i].pop();return this.usedTextures[i].push(l),l}let o;return a===sr.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===sr.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===sr.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===sr.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===sr.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(o),this.numUsedTextures++,this._numBytesAllocated+=s,this.log(),o}releaseTexture(e,n,r,a){if(this.freeTextures==null)return;const i=zF(r,a),s=FF(n,i,a);s in this.freeTextures||(this.freeTextures[s]=[]);const o=LF(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,a),l=fe().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[s].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;const c=this.usedTextures[s],f=c&&c.indexOf(e);if(f==null||f<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[f]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function XMe(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function LF(t,e,n,r,a){const i=YMe(e,r);let s;if(a){const[l,c]=mf(t[0],t[1]);s=l*c}else{const[l,c]=ig(t[0],t[1]);s=l*c}const o=XMe(n,i);return s*o}function YMe(t,e){switch(t){case sr.PACKED_2X2_FLOAT32:return vK(e);case sr.PACKED_2X2_FLOAT16:return yK(e);case sr.UNPACKED_FLOAT32:return pK(e);case sr.UNPACKED_FLOAT16:return mK(e);case sr.PACKED_4X1_UNSIGNED_BYTE:return gK(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function ZMe(t){return fe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?sr.PACKED_2X2_FLOAT32:sr.UNPACKED_FLOAT32:t?sr.PACKED_2X2_FLOAT16:sr.UNPACKED_FLOAT16}function zF(t,e){if(t===Da.UPLOAD)return sr.PACKED_2X2_FLOAT32;if(t===Da.RENDER||t==null)return ZMe(e);if(t===Da.DOWNLOAD||t===Da.PIXELS)return sr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function FF(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ss{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Ir(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const yi="if (isnan(x)) return x;",QMe="return x;",jF="return abs(x);",JMe="return (x >= 0.0) ? x : (exp(x) - 1.0);",ePe=yi+`
  return (x < 0.0) ? 0.0 : x;
`,tPe=yi+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,nl="return x;",nPe="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rPe="return x;",aPe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,iPe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,sPe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,oPe="return 1.0 / (1.0 + exp(-1.0 * x));";class ol{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Ir(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lPe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Ir(this.outputShape.length);const n=e.length,r=_r("rc",n),a=Lt(n),i=GMe(n,r),s=r.slice(-2),o=n<=1?"rc":`vec2(${s.join(",")})`;this.userCode=`
      void main() {
        ${a} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${o}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uPe=q6,cPe=1e-7,dPe=1e-4,a0={};function fPe(t){return t in a0||(a0[t]={}),a0[t]}const hPe=fe().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),pPe=600;function mPe(){return fe().global.screen==null?1024:fe().global.screen.height*fe().global.screen.width*window.devicePixelRatio*pPe/1024/1024}class w1 extends EI{nextDataId(){return w1.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!fe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof X2)n=e;else{const r=Bi(fe().getNumber("WEBGL_VERSION"),e);n=new X2(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Bi(fe().getNumber("WEBGL_VERSION"));n=new X2(r),this.binaryCache=fPe(fe().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new KMe(this.gpgpu),this.numMBBeforeWarning=mPe(),this.texData=new vW(this,Qi())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,a,i,s){const o=this.makeTensorInfo(n,r),l=this.texData.get(o.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[a,i]},l.texShape=[a,i];const c=n0(n),f=new PF(c,!1,s),h=this.runWebGLProgram(f,[o],r,[[a,i]]);return h.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(o),h.dataId}write(e,n,r){if((fe().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||fe().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const a={id:this.nextDataId()};return this.texData.set(a,{shape:n,dtype:r,values:e,usage:Da.UPLOAD,refCount:1}),a}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,a,i){if(fe().getBool("DEBUG")&&this.checkNumericalProblems(n),a==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:a,values:n,usage:Da.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:a,complexTensorInfos:i,slice:s,shape:o,isPacked:l}=n;if(s!=null){let p;l?p=new ol(o,nl):p=new ss(o,nl);const g=this.runWebGLProgram(p,[{dataId:e,shape:o,dtype:a}],a),v=this.readSync(g.dataId);return this.disposeIntermediateTensorInfo(g),v}if(r!=null)return this.convertAndCacheOnCPU(e);if(a==="string")return r;const c=this.activeTimers!=null;let f;c&&(f=Ur());let h;if(a==="complex64"){const p=this.readSync(i.real.dataId),g=this.readSync(i.imag.dataId);h=vo(p,g)}else h=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=Ur()-f),this.convertAndCacheOnCPU(e,h)}async read(e){if(this.pendingRead.has(e)){const v=this.pendingRead.get(e);return new Promise(x=>v.push(x))}const n=this.texData.get(e),{values:r,shape:a,slice:i,dtype:s,complexTensorInfos:o,isPacked:l}=n;if(i!=null){let v;l?v=new ol(a,nl):v=new ss(a,nl);const x=this.runWebGLProgram(v,[{dataId:e,shape:a,dtype:s}],s),b=this.read(x.dataId);return this.disposeIntermediateTensorInfo(x),b}if(r!=null)return this.convertAndCacheOnCPU(e);if(fe().getBool("DEBUG")&&!fe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&fe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,f;if(s!=="complex64"&&fe().get("WEBGL_BUFFER_SUPPORTED")){f=this.decode(e);const v=this.texData.get(f.dataId);c=this.gpgpu.createBufferFromTexture(v.texture.texture,...Jv(a))}this.pendingRead.set(e,[]),s!=="complex64"&&await this.gpgpu.createAndWaitForFence();let h;if(s==="complex64"){const v=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]),x=v[0],b=v[1];h=vo(x,b)}else if(c==null)h=this.getValuesFromTexture(e);else{const v=ve(a);h=this.gpgpu.downloadFloat32MatrixFromBuffer(c,v)}if(f!=null&&this.disposeIntermediateTensorInfo(f),c!=null){const v=this.gpgpu.gl;$e(v,()=>v.deleteBuffer(c))}const p=this.convertAndCacheOnCPU(e,h),g=this.pendingRead.get(e);return this.pendingRead.delete(e),g.forEach(v=>v(p)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Qi().removeDataId(e,this),this.pendingDeletes--),p}readToGPU(e,n={}){const r=this.texData.get(e),{values:a,shape:i,slice:s,dtype:o,isPacked:l,texture:c}=r;if(o==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(s!=null){let g;l?g=new ol(i,nl):g=new ss(i,nl);const v=this.runWebGLProgram(g,[{dataId:e,shape:i,dtype:o}],o),x=this.readToGPU(v,n);return this.disposeIntermediateTensorInfo(v),x}if(c==null)throw a!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const f=this.decode(e,n.customTexShape),h=Qi().makeTensorFromTensorInfo(f),p=this.texData.get(f.dataId);return Object.assign({tensorRef:h},p.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(a=>gl(a));return at(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return at(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!yRe(r))throw fe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:a}=this.texData.get(e),i=ve(n);if(fe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const p=this.decode(e),g=this.texData.get(p.dataId),v=this.gpgpu.downloadMatrixFromPackedTexture(g.texture.texture,...Jv(n)).subarray(0,i);return this.disposeIntermediateTensorInfo(p),v}const s=fe().getBool("WEBGL_PACK")&&a===!0,o=s?n0(n):n,l=s?new __e(o):new R_e(o),c=this.runWebGLProgram(l,[{shape:o,dtype:r,dataId:e}],"float32"),f=this.texData.get(c.dataId),h=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(f.texture.texture,f.texShape[0],f.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(c),h}timerAvailable(){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let a=!1;this.programTimersStack==null?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();const i=Pu(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),s=Pu(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,a&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(i);o.kernelMs=eye(l),o.getExtraProfileInfo=()=>l.map((c,f)=>({name:s[f],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Ur(),endMs:null}}endTimer(e){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Ur(),e)}async getQueryTime(e){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:a,usage:i,isPacked:s,slice:o}=this.texData.get(e),l=o&&o.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,s)));const f=this.texData.get(e);f.texture=null,f.texShape=null,f.isPacked=!1,f.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=hPe){return fe().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&ve(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){$a("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return uPe(e.shape,n)}packedUnaryOp(e,n,r){const a=new ol(e.shape,n),i=this.compileAndRun(a,[e],r);return Qi().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const a=bK(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,a)}if(fe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,jF,e.dtype);const n=new ss(e.shape,jF),r=this.compileAndRun(n,[e]);return Qi().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let a;if(n==="string"&&r!=null&&r.length>0&&Hp(r[0])){const i=r.map(s=>cl(s));a=this.write(i,e,n)}else a=this.write(r,e,n);return this.texData.get(a).usage=null,{dataId:a,shape:e,dtype:n}}makeOutput(e,n,r){return Qi().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new lPe(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new HMe(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[Md(e.shape),...Pd(e.shape)],a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[Md(n),...Pd(n)],s=new CK(i,r),o=!0,l=[r],c=this.runWebGLProgram(s,[a],e.dtype,l,o);return{dataId:c.dataId,shape:n,dtype:c.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:a,shape:i,dtype:s}=r;if(n!=null){const p=ve(i),g=n[0]*n[1]*4;B(p<=g,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const o=n0(i);let l;a?l=new D_e(o):l=new O_e(o);const c=!0,f=[n??Jv(o)],h=this.runWebGLProgram(l,[{shape:o,dtype:s,dataId:e}],s,f,c,n);return{dtype:s,shape:i,dataId:h.dataId}}runWebGLProgram(e,n,r,a,i=!1,s){const o=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(o.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===mp.DENSE){const w=s??Jv(e.outputShape);l.texShape=w.map(S=>S*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),ve(o.shape)===0)return l.values=Sr(o.dtype,0),o;const c=[],f=n.map(w=>{if(w.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let S=this.texData.get(w.dataId);if(S.texture==null){if(!e.packedInputs&&ve(w.shape)<=fe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:w.shape,texData:null,isUniform:!0,uniformValues:S.values};e.packedInputs&&(S.isPacked=!0,S.shape=w.shape)}if(this.uploadToGPU(w.dataId),!!S.isPacked!=!!e.packedInputs)w=S.isPacked?this.unpackTensor(w):this.packTensor(w),c.push(w),S=this.texData.get(w.dataId);else if(S.isPacked&&!Gy(S.shape,w.shape)){const k=w,N=w.shape;w.shape=S.shape,w=this.packedReshape(w,N),c.push(w),S=this.texData.get(w.dataId),k.shape=N}return{shape:w.shape,texData:S,isUniform:!1}});this.uploadToGPU(o.dataId);const h={shape:o.shape,texData:l,isUniform:!1},p=$_e(e,f,h),g=this.getAndSaveBinary(p,()=>A_e(this.gpgpu,e,f,h)),v=this.activeTimers!=null;let x;v&&(x=this.startTimer()),fe().get("ENGINE_COMPILE_ONLY")||T_e(this.gpgpu,g,f,h,a),c.forEach(w=>this.disposeIntermediateTensorInfo(w)),v&&(x=this.endTimer(x),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(x)}));const b=fe().getNumber("WEBGL_FLUSH_THRESHOLD");if(b>0){const w=Ur();w-this.lastGlFlushTime>b&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=w)}if(!fe().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&i===!1){const w=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),w}return o}compileAndRun(e,n,r,a,i=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,a,i)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(fe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=le(()=>{if(!fe().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=fe().getBool("DEBUG");fe().set("DEBUG",!1);const n=this.abs(kt(1e-8)).dataSync()[0];if(fe().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?cPe:dPe}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:a,values:i,texture:s,usage:o,isPacked:l}=n;if(s!=null)return;const c=this.activeTimers!=null;let f;c&&(f=Ur());let h=n.texShape;if(h==null&&(h=PRe(r,l),n.texShape=h),i!=null){const p=n0(r);let g,v=h[1],x=h[0];const b=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(l||!b)&&([v,x]=mf(h[0],h[1])),l?g=new P_e(p,b):g=new PF(p,b);const w=b?[x,v]:h,S=this.makeTensorInfo(w,a),k=this.texData.get(S.dataId);b?k.usage=Da.PIXELS:k.usage=Da.UPLOAD,k.texShape=w,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(S.dataId),v,x,i);const N=[[x,v]],T=this.runWebGLProgram(g,[S],a,N,!0),R=this.texData.get(T.dataId);n.texShape=R.texShape,n.isPacked=R.isPacked,n.usage=R.usage,fe().get("ENGINE_COMPILE_ONLY")?this.disposeData(T.dataId):(n.texture=R.texture,n.values=null,this.texData.delete(T.dataId)),this.disposeIntermediateTensorInfo(S),c&&(this.uploadWaitMs+=Ur()-f)}else{const p=this.acquireTexture(h,o,a,l);n.texture=p}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:a}=r;return n!=null&&(r.values=gPe(n,a)),r.values}acquireTexture(e,n,r,a){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,a)}computeBytes(e,n){return e[0]*e[1]*wy(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(a=>{try{this.checkCompletion_(n),a(!0)}catch(i){throw i}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await cG(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(lK(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:a,nanLoc:i,outShapeLocation:s,outShapeStridesLocation:o,outTexShapeLocation:l}=hK(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=a,e.nanLoc=i,e.outShapeLocation=s,e.outShapeStridesLocation=o,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:a,height:i,width:s,channels:o}=e,l=Qi().backend;if(!l.gpgpu.gl.isTexture(a))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(a,n,r,i,s,o);return Qi().makeTensorFromDataId(c,n,r,l)}}w1.nextDataId=0;function gPe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */s6()&&c6("webgl",()=>new w1,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a$=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Ku{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=et(n,r),this.enableShapeUniforms=Ir(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lc=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class bf{constructor(e,n,r,a=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=et(n,r);const i=this.outputShape.length;this.enableShapeUniforms=Ir(i);let s="";if(a)if(i===0||ve(this.outputShape)===1)s=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(s=`
          ${Lt(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?s+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:s+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=_r("coords",i);this.enableShapeUniforms?s+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:s+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${s}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ga(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const vPe={kernelName:hm,backendName:"webgl",kernelFunc:ga};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pl(t){const{inputs:e,backend:n}=t,{real:r,imag:a}=e,i=n.makeTensorInfo(r.shape,"complex64"),s=n.texData.get(i.dataId),o=ga({inputs:{x:r},backend:n}),l=ga({inputs:{x:a},backend:n});return s.complexTensorInfos={real:o,imag:l},i}const yPe={kernelName:zI,backendName:"webgl",kernelFunc:Pl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kK="return (a < 0.) ? b * a : a;",EK=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function xPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{alpha:i}=r,s=n.makeTensorInfo([],"float32",Al(i,"float32")),o=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new bf(EK,a.shape,s.shape):new Ku(kK,a.shape,s.shape),l=n.runWebGLProgram(o,[a,s],"float32");return n.disposeIntermediateTensorInfo(s),l}const bPe={kernelName:mb,backendName:"webgl",kernelFunc:xPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NK="return (a < 0.) ? b * a : a;",IK=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function wPe(t){const{inputs:e,backend:n}=t,{x:r,alpha:a}=e,i=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new bf(IK,r.shape,a.shape):new Ku(NK,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}const SPe={kernelName:_b,backendName:"webgl",kernelFunc:wPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wf="if (isnan(x)) return x;";function gt({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:a,backend:i})=>{const{x:s}=a,o=i,l=r||s.dtype;if(o.shouldExecuteOnCPU([s])&&n!=null){const h=o.texData.get(s.dataId),p=n(h.values,l);return o.makeTensorInfo(s.shape,l,p)}const c=fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let f;return c?f=new ol(s.shape,e):f=new ss(s.shape,t),o.runWebGLProgram(f,[s],l)}}function fr({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:a,dtype:i}){return({inputs:s,backend:o})=>{const{a:l,b:c}=s,f=o;if(r&&l.dtype==="complex64"){const v=f.texData.get(l.dataId),x=f.texData.get(c.dataId),[b,w]=[[v.complexTensorInfos.real,x.complexTensorInfos.real],[v.complexTensorInfos.imag,x.complexTensorInfos.imag]].map(k=>{const[N,I]=k,T={dataId:N.dataId,dtype:N.dtype,shape:l.shape},R={dataId:I.dataId,dtype:I.dtype,shape:c.shape},_=new Ku(t,l.shape,c.shape);return f.runWebGLProgram(_,[T,R],pa(N.dtype,I.dtype))}),S=Pl({inputs:{real:b,imag:w},backend:f});return f.disposeIntermediateTensorInfo(b),f.disposeIntermediateTensorInfo(w),S}const h=i||pa(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||f.shouldExecuteOnCPU([l,c]))&&a!=null){const v=f.texData.get(l.dataId).values,x=f.texData.get(c.dataId).values,b=l.dtype==="string"?yo(v):v,w=l.dtype==="string"?yo(x):x,[S,k]=a(l.shape,c.shape,b,w,h),N=f.makeTensorInfo(k,h),I=f.texData.get(N.dataId);return I.values=S,N}const p=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let g;return p?g=new bf(e,l.shape,c.shape,n):g=new Ku(t,l.shape,c.shape),f.runWebGLProgram(g,[l,c],h)}}function gp(t,e=!1){if(t==="linear")return e?rPe:QMe;if(t==="relu")return e?iPe:ePe;if(t==="elu")return e?aPe:JMe;if(t==="relu6")return e?sPe:tPe;if(t==="prelu")return e?IK:NK;if(t==="leakyrelu")return e?EK:kK;if(t==="sigmoid")return e?oPe:nPe;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AK{constructor(e,n,r,a=!1,i=!1,s=!1,o=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Ir(this.outputShape.length);const f=a?e[1]:e[2],h=Math.ceil(f/2),p=a?"i * 2, rc.y":"rc.y, i * 2",g=i?"rc.z, i * 2":"i * 2, rc.z",v=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],x=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let b="",w="";o&&(l?b=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:c?b=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:b=`vec4 activation(vec4 x) {
          ${o}
        }`,w="result = activation(result);");const S=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let k="rc.x",N="rc.x";e[0]<n[0]?k=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(N=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${b}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${h}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${k};
        int batchB = ${N};
        for (int i = 0; i < ${h}; i++) {
          vec4 a = getMatrixA(batchA, ${p});
          vec4 b = getMatrixB(batchB, ${g});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${v[0]} * ${x[0]});
          result += (${v[1]} * ${x[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${S}

        ${w}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BF={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class UF{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=et(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VF="return a * b;";function i$(t){const{inputs:e,backend:n}=t,{a:r,b:a}=e,i=pa(r.dtype,a.dtype);if(r.dtype==="complex64"){const o=n.texData.get(r.dataId),l=n.texData.get(a.dataId),c=new UF(BF.REAL,r.shape,a.shape),f=new UF(BF.IMAG,r.shape,a.shape),h=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:r.shape},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:a.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:a.shape}],p=n.runWebGLProgram(c,h,"float32"),g=n.runWebGLProgram(f,h,"float32"),v=Pl({inputs:{real:p,imag:g},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),v}if(n.shouldExecuteOnCPU([r,a])){const o=n.texData.get(r.dataId),l=n.texData.get(a.dataId),[c,f]=wMe(r.shape,a.shape,o.values,l.values,i),h=n.makeTensorInfo(f,i),p=n.texData.get(h.dataId);return p.values=c,h}let s;return fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?s=new bf(VF,r.shape,a.shape):s=new Ku(VF,r.shape,a.shape),n.runWebGLProgram(s,[r,a],i)}const CPe={kernelName:Sm,backendName:"webgl",kernelFunc:i$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kPe(t,e,n){const r=[Md(t.shape),...Pd(t.shape)],a={dtype:t.dtype,shape:r,dataId:t.dataId},i=[Md(e),...Pd(e)],s=new CK(i,r),o=!0,l=[r],c=n.runWebGLProgram(s,[a],t.dtype,l,o);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ae(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{shape:i}=r,s=n,o=ve(a.shape),l=xW(i,o),c=ve(l);B(o===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${a.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`);const f=s.texData.get(a.dataId);return f.isPacked&&!Gy(a.shape,l)&&!(f.texture!==null&&Gy(f.shape,l))?kPe(a,l,s):(s.incRef(a.dataId),{dataId:a.dataId,shape:l,dtype:a.dtype})}const EPe={kernelName:Pb,backendName:"webgl",kernelFunc:Ae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WF{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:a,inSize:i,outSize:s}=e;this.outputShape=[a,s];const o=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(n!=null){const h=1/n;c=`sumValue += dot(values * ${Ed(h)?h.toPrecision(2):h}, ones);`}let f="";i%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${o}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${o};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NPe{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:a,inSize:i,outSize:s}=e;this.outputShape=[a,s];let o="0.0",l="";n==="prod"?o="1.0":n==="min"?(o="1.0 / 1e-20",l="min"):n==="max"&&(o="-1.0 / 1e-20",l="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");const f=Math.floor(r/4)*4,h=r%4;let p=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,g="vec4";n==="all"?(o="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,g="bvec4"):n==="any"&&(o="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,g="bvec4");let v="";i%r>0&&(v=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${o};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${v}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${o});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${f}; i += 4) {
          int inIdx = inOffset + i;
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${p}
        }

        int inIdx = inOffset + ${f};
        if (${h===1}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${h===2}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${h===3}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${p}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IPe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=i1(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function uc(t,e,n,r){const a=IPe(t.shape);let i=t;for(let s=0;s<a.length;s++){const{inSize:o,windowSize:l,outSize:c}=a[s];let f,h;n==="mean"?f=s===0?new WF({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:c},o):new WF({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:c}):f=new NPe({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:c},n),h=i,i=r.runWebGLProgram(f,[i],e),h.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(h)}return i}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class APe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let s=0;s<r.length;s++)r[s]=e[n[s]];this.outputShape=r,this.rank=r.length;const a=Lt(this.rank),i=TPe(n);this.userCode=`
    void main() {
      ${a} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}function TPe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let a=0;a<t.length;a++)r[t[a]]=n[a];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Pe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let f=0;f<r.length;f++)r[f]=e[n[f]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const a=Lt(this.rank),i=SK("rc",this.rank),s=new Array(this.rank);for(let f=0;f<n.length;f++)s[n[f]]=i[f];const o=`vec2(${s.slice(-2).join()})`,l=`++${i[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${s.join()}), ${o})`;this.userCode=`
    void main() {
      ${a} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S1(t,e,n){const r=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new $Pe(t.shape,e):new APe(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OPe(t,e,n,r){const a=e,i=t.shape.length,s=it(a,t.shape);let o=s;const l=cn(o,i),c=l!=null;let f=t;c&&(f=S1(t,l,r),o=wn(o.length,i)),dr("sum",o,i);const[h,p]=er(f.shape,o);let g=h;n&&(g=An(h,s));const v=ve(p),b=ve(t.shape)/v,w=Ae({inputs:{x:f},attrs:{shape:[b,v]},backend:r}),S=yA(t.dtype),k=uc(w,S,"sum",r),N=Ae({inputs:{x:k},attrs:{shape:g},backend:r});return r.disposeIntermediateTensorInfo(w),r.disposeIntermediateTensorInfo(k),c&&r.disposeIntermediateTensorInfo(f),N}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C1(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r;return OPe(a,i,s,n)}const DPe={kernelName:Ub,backendName:"webgl",kernelFunc:C1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pr(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{perm:i}=r,s=n,o=a.shape.length,l=new Array(o);for(let f=0;f<l.length;f++)l[f]=a.shape[i[f]];let c;if(s.shouldExecuteOnCPU([a])){const h=s.texData.get(a.dataId).values,p=r$(h,a.shape,a.dtype,i,l);c=s.makeTensorInfo(l,a.dtype);const g=s.texData.get(c.dataId);g.values=p}else c=S1(a,i,s);return c}const RPe={kernelName:fd,backendName:"webgl",kernelFunc:Pr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TK=1e3;function Hy({a:t,b:e,transposeA:n,transposeB:r,backend:a,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:l=null}){const c=t.shape.length,f=e.shape.length,h=n?t.shape[c-2]:t.shape[c-1],p=r?e.shape[f-1]:e.shape[f-2],g=n?t.shape[c-1]:t.shape[c-2],v=r?e.shape[f-2]:e.shape[f-1],x=t.shape.slice(0,-2),b=e.shape.slice(0,-2),w=ve(x),S=ve(b),N=et(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([g,v]);B(h===p,()=>`Error in matMul: inner shapes (${h}) and (${p}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const I=n?[w,h,g]:[w,g,h],T=r?[S,v,p]:[S,p,v],R=Ae({inputs:{x:t},backend:a,attrs:{shape:I}}),_=Ae({inputs:{x:e},backend:a,attrs:{shape:T}}),M=[R,_],P=Math.max(w,S),$=n?R.shape[1]:R.shape[2],z=i!=null,W=s!=null,H=l==="leakyrelu",G=l!=null?gp(l,!0):null,F=z||W||H||G!=null;let V;if((g===1||v===1)&&$>TK&&F===!1){let Y=R,oe=_;n&&(Y=Pr({inputs:{x:R},backend:a,attrs:{perm:[0,2,1]}}),M.push(Y)),r&&(oe=Pr({inputs:{x:_},backend:a,attrs:{perm:[0,2,1]}}),M.push(oe));const j=v!==1,q=v===1;let Z=Y;j&&(Z=Ae({inputs:{x:Y},backend:a,attrs:{shape:[P,$,1]}}),M.push(Z));const se=v===1?2:1;let pe=oe;q&&(pe=Ae({inputs:{x:oe},backend:a,attrs:{shape:[P,1,$]}}),M.push(pe));const Se=i$({inputs:{a:Z,b:pe},backend:a});V=C1({inputs:{x:Se},backend:a,attrs:{axis:se,keepDims:!0}}),M.push(Se)}else{const Y=pa(t.dtype,e.dtype),oe=new AK(I,T,[P,g,v],n,r,z,G,W,H),j=[R,_];if(i!=null&&j.push(i),W&&j.push(s),H){const q=a.makeTensorInfo([],"float32",Al(o,"float32"));j.push(q),M.push(q)}V=a.runWebGLProgram(oe,j,Y)}const U=Ae({inputs:{x:V},backend:a,attrs:{shape:N}});M.push(V);for(const Y of M)a.disposeIntermediateTensorInfo(Y);return U}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Pe(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i,bias:s,preluActivationWeights:o}=e,{transposeA:l,transposeB:c,activation:f,leakyreluAlpha:h}=r;return Hy({a,b:i,transposeA:l,transposeB:c,backend:n,bias:s,preluActivationWeights:o,leakyreluAlpha:h,activation:f})}const MPe={kernelName:Sy,backendName:"webgl",kernelFunc:_Pe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GF="return abs(x);";function PPe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const i=n.texData.get(r.dataId),s=bK(i.values);return n.makeTensorInfo(r.shape,r.dtype,s)}let a;return fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?a=new ol(r.shape,GF):a=new ss(r.shape,GF),n.runWebGLProgram(a,[r],r.dtype)}const LPe={kernelName:Xx,backendName:"webgl",kernelFunc:PPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zPe=yi+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,FPe=gt({opSnippet:zPe}),jPe={kernelName:qp,backendName:"webgl",kernelFunc:FPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BPe=yi+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,UPe=gt({opSnippet:BPe}),VPe={kernelName:Kp,backendName:"webgl",kernelFunc:UPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HF="return a + b;",WPe=fr({opSnippet:HF,packedOpSnippet:HF,supportsComplex:!0,cpuKernelImpl:eMe}),GPe={kernelName:lf,backendName:"webgl",kernelFunc:WPe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HPe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((i,s)=>`T${s}`);const r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});const a=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${a};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qPe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((i,s)=>`T${s}`);const r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});const a=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${a};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S0(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return ga({inputs:{x:r[0]},backend:n});if(r.length>fe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=S0({inputs:r.slice(0,l),backend:n}),f=S0({inputs:r.slice(l),backend:n});return S0({inputs:[c,f],backend:n})}const a=r.map(l=>l.dtype).reduce((l,c)=>pa(l,c)),i=r.map(l=>l.shape),o=fe().getBool("WEBGL_PACK")?new qPe(r[0].shape,i):new HPe(r[0].shape,i);return n.runWebGLProgram(o,r,a)}const KPe={kernelName:OI,backendName:"webgl",kernelFunc:S0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r,o=a.shape.length,l=it(i,a.shape);let c=l;const f=cn(c,o);let h=a;f!=null&&(h=Pr({inputs:{x:a},backend:n,attrs:{perm:f}}),c=wn(c.length,o)),dr("all",c,o);const[p,g]=er(h.shape,c),v=ve(g),x=Ae({inputs:{x:h},backend:n,attrs:{shape:[-1,v]}}),b=uc(x,x.dtype,"all",n);let w;if(s){const S=An(p,l);w=Ae({inputs:{x:b},backend:n,attrs:{shape:S}})}else w=Ae({inputs:{x:b},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),f!=null&&n.disposeIntermediateTensorInfo(h),w}const YPe={kernelName:DI,backendName:"webgl",kernelFunc:XPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r,o=a.shape.length,l=it(i,a.shape);let c=l;const f=cn(c,o);let h=a;f!=null&&(h=Pr({inputs:{x:a},backend:n,attrs:{perm:f}}),c=wn(c.length,o)),dr("any",c,o);const[p,g]=er(h.shape,c),v=ve(g),x=Ae({inputs:{x:h},backend:n,attrs:{shape:[-1,v]}}),b=uc(x,x.dtype,"any",n);let w;if(s){const S=An(p,l);w=Ae({inputs:{x:b},backend:n,attrs:{shape:S}})}else w=Ae({inputs:{x:b},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),f!=null&&n.disposeIntermediateTensorInfo(h),w}const QPe={kernelName:RI,backendName:"webgl",kernelFunc:ZPe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JPe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:a,batchSize:i,outSize:s}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,s];const o=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${a};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${a}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${o} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class e3e{constructor(e,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,B(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const i=e[e.length-1],s=Math.ceil(i/n);this.outputShape=e.slice(0,-1),s>1&&this.outputShape.push(s),a||this.variableNames.push("bestIndicesA");const o=this.outputShape,l=o.length,c=Lt(l),f=_r("coords",l);let h,p;if(s===1){p=l+1;const _=Lt(p);h=`
        ${_} sourceLocR = ${_}(${f.join()}, 0);
        ++${f[l-1]};
        ${_} sourceLocG = ${_}(${f.join()}, 0);
        ++${f[l-2]};
        ${_} sourceLocA = ${_}(${f.join()}, 0);
        --${f[l-1]};
        ${_} sourceLocB = ${_}(${f.join()}, 0);
        --${f[l-2]};`}else p=l,h=`
        ${c} sourceLocR = coords;
        ++${f[l-1]};
        ${c} sourceLocG = coords;
        ++${f[l-2]};
        ${c} sourceLocA = coords;
        --${f[l-1]};
        ${c} sourceLocB = coords;
        --${f[l-2]};`;const g=["x","y","z","w","u","v"].slice(0,p),v="."+g[p-1],x=g.map(_=>"int "+_),b=_r("sourceLocR",p-1).concat("inIdx.r"),w=_r("sourceLocG",p-1).concat("inIdx.g"),S=_r("sourceLocB",p-1).concat("inIdx.b"),k=_r("sourceLocA",p-1).concat("inIdx.a"),N=r==="max"?"greaterThan":"lessThan",I=a?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${w.join()}),
                             getBestIndicesAChannel(${S.join()}),
                             getBestIndicesAChannel(${k.join()})));`,T=`vec4(
            getAChannel(${b.join()}),
            hasNextCol ? getAChannel(${w.join()}) : 0.,
            hasNextRow ? getAChannel(${S.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${k.join()}) : 0.)`,R=a?"":`
      float getBestIndicesAChannel(${x.join()}) {
        return getChannel(getBestIndicesA(${g.join()}),
                                          vec2(${g.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${x.join()}) {
        return getChannel(getA(${g.join()}),
                               vec2(${g.slice(-2).join()}));
      }
      ${R}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${f[l-1]} < ${o[l-1]-1};
        bool hasNextRow = ${f[l-2]} < ${o[l-2]-1};
        ${h}
        ivec4 srcIdx = ivec4(sourceLocR${v}, sourceLocG${v},
          sourceLocB${v}, sourceLocA${v}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${T};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${I}
          vec4 candidate = ${T};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${N}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $K(t,e,n,r=null){let a=e.shape[0],i=e.shape[1];r!=null&&(a=r.shape[0],i=r.shape[1]);const s=i1(i),o={windowSize:s,inSize:i,batchSize:a,outSize:Math.ceil(i/s)},l=new JPe(o,n,r==null),c=[e];r!=null&&c.push(r);const f=t.runWebGLProgram(l,c,"int32");if(f.shape[1]===1)return f;const h=$K(t,e,n,f);return t.disposeIntermediateTensorInfo(f),h}function OK(t,e,n,r=null){const a=r!=null?r.shape:e.shape,i=a[a.length-1],s=i1(i),o=new e3e(a,s,n,r==null),l=r==null?[e]:[e,r],c=t.runWebGLProgram(o,l,"int32");if(c.shape.length===e.shape.length){const f=OK(t,e,n,c);return t.disposeIntermediateTensorInfo(c),f}return c}function DK(t,e,n,r){const a=[n];if(dr("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,e.shape.length),!fe().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const i=[],s=t.texData.get(e.dataId),o=s!==null&&s.isPacked;let l=e;o&&(l=t.unpackTensor(e),i.push(l));const[c,f]=er(l.shape,a),h=ve(f),p=Ae({inputs:{x:l},backend:t,attrs:{shape:[-1,h]}});i.push(p);const g=$K(t,p,r);i.push(g);const v=Ae({inputs:{x:g},backend:t,attrs:{shape:c}});return i.forEach(x=>t.disposeIntermediateTensorInfo(x)),v}return OK(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;let s=it(i,a.shape);const o=cn(s,a.shape.length);let l=a;const c=[];o!=null&&(l=Pr({inputs:{x:a},backend:n,attrs:{perm:o}}),c.push(l),s=wn(s.length,l.shape.length)),dr("argMax",[s[0]],l.shape.length);const f=DK(n,l,s[0],"max");return c.forEach(h=>n.disposeIntermediateTensorInfo(h)),f}const n3e={kernelName:Yx,backendName:"webgl",kernelFunc:t3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;let s=it(i,a.shape);const o=cn(s,a.shape.length);let l=a;const c=[];o!=null&&(l=Pr({inputs:{x:a},backend:n,attrs:{perm:o}}),c.push(l),s=wn(s.length,l.shape.length)),dr("argMin",[s[0]],l.shape.length);const f=DK(n,l,s[0],"min");return c.forEach(h=>n.disposeIntermediateTensorInfo(h)),f}const a3e={kernelName:Zx,backendName:"webgl",kernelFunc:r3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i3e=yi+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,s3e=gt({opSnippet:i3e}),o3e={kernelName:Xp,backendName:"webgl",kernelFunc:s3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l3e=yi+"return log(x + sqrt(x * x + 1.0));",u3e=gt({opSnippet:l3e}),c3e={kernelName:Yp,backendName:"webgl",kernelFunc:u3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d3e=yi+`
  return atan(x);
`,f3e=gt({opSnippet:d3e}),h3e={kernelName:Zp,backendName:"webgl",kernelFunc:f3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p3e=a$+`
  return atan(a, b);
`,m3e=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+lc+`
  return result;
`,g3e=fr({opSnippet:p3e,packedOpSnippet:m3e}),v3e={kernelName:Jp,backendName:"webgl",kernelFunc:g3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y3e=yi+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,x3e=gt({opSnippet:y3e}),b3e={kernelName:Qp,backendName:"webgl",kernelFunc:x3e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vp{constructor(e,n,r,a=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const s=e.filterWidth,o=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,f=e.dilationWidth,h=e.effectiveFilterHeight,p=e.effectiveFilterWidth,g=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;const x=n==="avg",b=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,w=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let S="0.0";if(x||(S="-1.0 / 1e-20"),r){this.userCode=`
        const ivec2 strides = ivec2(${o}, ${l});
        const ivec2 pads = ivec2(${g}, ${v});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${h};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p};
                wC += ${f}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${a?i?b:w:`wR * ${p} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const k="max";let N=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(N="avgValue / max(count, 1.0)");const I=Math.floor(s/4)*4,T=s%4,R=`
      if (${x}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${k}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${l});
      const ivec2 pads = ivec2(${g}, ${v});
      const float initializationValue = ${S};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${S});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${h};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${I}; wC += 4) {
            int xC = xCCorner + wC * ${f};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              getValue(batch, xR, xC + 2 * ${f}, d),
              getValue(batch, xR, xC + 3 * ${f}, d)
            );

            ${R}
          }

          int xC = xCCorner + ${I};
          if (${T===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${R}
          } else if (${T===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              initializationValue,
              initializationValue
            );

            ${R}
          } else if (${T===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              getValue(batch, xR, xC + 2 * ${f}, d),
              initializationValue
            );

            ${R}
          }
        }
        setOutput(${N});
      }
    `}}class s${constructor(e,n,r,a=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const s=e.filterWidth,o=e.strideDepth,l=e.strideHeight,c=e.strideWidth,f=e.dilationDepth,h=e.dilationHeight,p=e.dilationWidth,g=e.effectiveFilterDepth,v=e.effectiveFilterHeight,x=e.effectiveFilterWidth,b=e.padInfo.front,w=e.padInfo.top,S=e.padInfo.left;this.outputShape=e.outShape;const k=n==="avg";let N="0.0";if(k||(N="-1.0 / 1e-20"),r){this.userCode=`
        const ivec3 strides =
            ivec3(${o}, ${l}, ${c});
        const ivec3 pads = ivec3(${b}, ${w}, ${S});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${g};
              wD += ${f}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${v};
                wR += ${h}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${x};
                  wC += ${p}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${a?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${v} * ${x} +
                      wR * ${x} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const I="max";let T=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(T="avgValue / max(count, 1.0)");const R=Math.floor(s/4)*4,_=s%4,M=`
      if (${k}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${I}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${o}, ${l}, ${c});
      const ivec3 pads = ivec3(${b}, ${w}, ${S});
      const float initializationValue = ${N};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${N});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${g};
            wD += ${f}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${v};
            wR += ${h}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${R}; wC += 4) {
              int xC = xCCorner + wC * ${p};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                getValue(batch, xD, xR, xC + 3 * ${p}, ch)
              );

              ${M}
            }

            int xC = xCCorner + ${R};
            if (${_===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${M}
            } else if (${_===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                initializationValue,
                initializationValue
              );

              ${M}
            } else if (${_===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                initializationValue
              );

              ${M}
            }
          }
        }
        setOutput(${T});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;sg(a,"avgPool");const{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=r,c=1;B(Er(s,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const f=gi(a.shape,i,s,c,o,l);if(f.filterWidth===1&&f.filterHeight===1&&It(f.inShape,f.outShape))return ga({inputs:{x:a},backend:n});const h=new vp(f,"avg",!1);return n.runWebGLProgram(h,[a],"float32")}const S3e={kernelName:Qx,backendName:"webgl",kernelFunc:w3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:s,pad:o,dimRoundingMode:l,dataFormat:c}=r,f=[1,1,1],h=Eo(a.shape,i,s,f,o,l,c),p=new s$(h,"avg",!1);return n.runWebGLProgram(p,[a],"float32")}const k3e={kernelName:Jx,backendName:"webgl",kernelFunc:C3e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class E3e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,s=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,f=l-1-e.padInfo.top,h=c-1-e.padInfo.left,p=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${f}, ${h});
      const float avgMultiplier = float(${p});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${o}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class N3e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,a=e.filterWidth,i=e.strideDepth,s=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,f=e.dilationWidth,h=e.effectiveFilterDepth,p=e.effectiveFilterHeight,g=e.effectiveFilterWidth,v=h-1-e.padInfo.front,x=p-1-e.padInfo.top,b=g-1-e.padInfo.left,w=1/(n*r*a);this.userCode=`
      const ivec3 pads = ivec3(${v}, ${x}, ${b});
      const float avgMultiplier = float(${w});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${p};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${g};
                wC += ${f}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I3e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,s=i,{filterSize:o,strides:l,pad:c,dimRoundingMode:f}=r,h=[1,1,1],p=Eo(s.shape,o,l,h,c,f),g=new N3e(p);return n.runWebGLProgram(g,[a],s.dtype)}const A3e={kernelName:MI,backendName:"webgl",kernelFunc:I3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T3e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,s=i;sg([a,i],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=r,f=gi(s.shape,o,l,1,c),h=new E3e(f);return n.runWebGLProgram(h,[a],s.dtype)}const $3e={kernelName:_I,backendName:"webgl",kernelFunc:T3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O3e(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i}=e,{transposeA:s,transposeB:o}=r;return Hy({a,b:i,transposeA:s,transposeB:o,backend:n})}const D3e={kernelName:eb,backendName:"webgl",kernelFunc:O3e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class R3e{constructor(e,n,r,a,i,s){this.outputShape=[],this.variableNames=["x","mean","variance"],et(e,n),et(e,r);let o="0.0";a!=null&&(et(e,a),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="1.0";i!=null&&(et(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${o};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${s}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _3e{constructor(e,n,r,a,i,s){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],et(e,n),et(e,r);let o="vec4(0.0)";a!=null&&(et(e,a),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="vec4(1.0)";i!=null&&(et(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${o};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${s}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M3e=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:a,variance:i,offset:s,scale:o}=t;B(a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),B(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),B(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const c=[r,a,i];let f=null;s!=null&&(f=s.shape,c.push(s));let h=null;o!=null&&(h=o.shape,c.push(o));const p=fe().getBool("WEBGL_PACK_NORMALIZATION")?new _3e(r.shape,a.shape,i.shape,f,h,l):new R3e(r.shape,a.shape,i.shape,f,h,l);return e.runWebGLProgram(p,c,c[0].dtype)},P3e={kernelName:fb,backendName:"webgl",kernelFunc:M3e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L3e{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Lt(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=z3e(this.rank);let a;const i=e.map((s,o)=>`sourceLoc.${PE[o]} = start[${o}] + coords.${PE[o]};`);a=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${a}
        setOutput(getSource(${r}));
      }
    `}}const PE=["x","y","z","w","u","v"];function z3e(t){if(t===1)return"sourceLoc";if(t<=6)return PE.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class F3e{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Lt(this.rank),r=_r("coords",this.rank),a=_r("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${a.slice(-2).join()})`,s=`getChannel(getSource(${a.join()}), ${i})`,o=`
      result.x = ${s};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${a[this.rank-1]};
        result.y = ${s};
        --${a[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${a[this.rank-2]};
        result.z = ${s};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${a[this.rank-1]};
          result.w = ${s};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((f,h)=>`start[${h}]`).join()});`:e.map((f,h)=>`${a[h]} = ${r[h]} + start[${h}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${o}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j3e(t,e,n,r){const a=r.texData.get(t.dataId),i=r.makeTensorInfo(n,t.dtype),s=r.texData.get(i.dataId);Object.assign(s,a),s.refCount=1,s.shape=n,s.dtype=t.dtype;let o=eT(e,Ue(t.shape));a.slice&&(o+=a.slice.flatOffset),s.slice={flatOffset:o,origDataId:a.slice&&a.slice.origDataId||t.dataId};const l=r.dataRefCount.get(s.slice.origDataId)||1;return r.dataRefCount.set(s.slice.origDataId,l+1),i}function Sf(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,size:s}=r,[o,l]=a1(a,i,s);if(ZA(a,o,l),ve(l)===0)return n.makeTensorInfo(l,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||a.dtype==="string"){const h=n.texData.get(a.dataId),p=DMe(h.values,o,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,p)}const{isPacked:c}=n.texData.get(a.dataId),f=JA(a.shape,o,l);if(c||!f){const h=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new F3e(l):new L3e(l),p=[o];return n.runWebGLProgram(h,[a],a.dtype,p)}return n.uploadToGPU(a.dataId),j3e(a,o,l,n)}const B3e={kernelName:Bb,backendName:"webgl",kernelFunc:Sf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U3e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,crops:s}=r;B(a.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const o=i.reduce((S,k)=>S*k),l=qm(a.shape,i,o),c=Km(l.length,i.length),f=Xm(a.shape,i,o),h=iT(s,i.length),p=sT(f,s,i.length),g=[],v=Ae({inputs:{x:a},backend:n,attrs:{shape:l}}),x=Pr({inputs:{x:v},backend:n,attrs:{perm:c}}),b=Ae({inputs:{x},backend:n,attrs:{shape:f}}),w=Sf({inputs:{x:b},backend:n,attrs:{begin:h,size:p}});return g.push(v),g.push(x),g.push(b),g.forEach(S=>n.disposeIntermediateTensorInfo(S)),w},V3e={kernelName:tb,backendName:"webgl",kernelFunc:U3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:s}=r,o=n.readSync(a.dataId),l=n.readSync(i.dataId),c=xK(o,l,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,c)}const G3e={kernelName:PI,backendName:"webgl",kernelFunc:W3e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H3e=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,q3e=`
  return float(int(a.r) & int(b.r));
`;function K3e(t){const{inputs:e,backend:n}=t,{a:r,b:a}=e,i=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS"),s=fe().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,a])||s===1){const l=n.texData.get(r.dataId).values,c=n.texData.get(a.dataId).values,[f,h]=nMe(r.shape,a.shape,l,c,r.dtype),p=n.makeTensorInfo(h,r.dtype),g=n.texData.get(p.dataId);return g.values=f,p}let o;return i?o=new bf(H3e,r.shape,a.shape,!1):o=new Ku(q3e,r.shape,a.shape),n.runWebGLProgram(o,[r,a],r.dtype)}const X3e={kernelName:LI,backendName:"webgl",kernelFunc:K3e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y3e(t){const{inputs:e,backend:n}=t,{s0:r,s1:a}=e,i=n.readSync(r.dataId),s=n.readSync(a.dataId),o=et(Array.from(i),Array.from(s));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const Z3e={kernelName:EW,backendName:"webgl",kernelFunc:Y3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q3e="return float(a != b);",RK=fr({opSnippet:Q3e,cpuKernelImpl:CMe,dtype:"bool"}),J3e={kernelName:Tb,backendName:"webgl",kernelFunc:RK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lg(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.texData.get(r.dataId);return ga({inputs:{x:a.complexTensorInfos.real},backend:n})}const eLe={kernelName:lA,backendName:"webgl",kernelFunc:lg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tLe="return float(int(x));";function nLe(t,e){const n=new ss(t.shape,tLe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LE(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dtype:i}=r;if(i==="complex64"){if(a.dtype==="complex64")return ga({inputs:{x:a},backend:n});const s=Kn(a.shape),o=LE({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),l=Pl({inputs:{real:o,imag:s},backend:n});return s.dispose(),n.disposeIntermediateTensorInfo(o),l}if(a.dtype==="complex64"){const s=lg({inputs:{input:a},backend:n}),o=LE({inputs:{x:s},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(s),o}if(!bW(a.dtype,i)){const s=ga({inputs:{x:a},backend:n});return{dataId:s.dataId,shape:s.shape,dtype:i}}if(n.shouldExecuteOnCPU([a])){const s=n.texData.get(a.dataId).values,[o,l,c]=rMe(s,a.shape,a.dtype,i);return n.makeTensorInfo(o,l,c)}if(i==="int32")return nLe(a,n);if(i==="bool"){const s=n.makeTensorInfo([],"bool",Sr("bool",1)),l=RK({inputs:{a,b:s},backend:n});return n.disposeIntermediateTensorInfo(s),l}throw new Error(`Error in Cast: failed to cast ${a.dtype} to ${i}`)}const rLe={kernelName:em,backendName:"webgl",kernelFunc:LE};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qF="return ceil(x);",aLe=gt({opSnippet:qF,packedOpSnippet:qF,cpuKernelImpl:aMe}),iLe={kernelName:tm,backendName:"webgl",kernelFunc:aLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sLe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oLe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{clipValueMin:i,clipValueMax:s}=r;let o;fe().getBool("WEBGL_PACK_CLIP")?o=new oLe(a.shape):o=new sLe(a.shape);const l=[[i],[s]];return n.runWebGLProgram(o,[a],a.dtype,l)}const uLe={kernelName:nm,backendName:"webgl",kernelFunc:lLe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cLe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KF(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function dLe(t){const{inputs:e,backend:n}=t,{x:r}=e,a=n.texData.get(r.dataId),i=new cLe(r.shape),s=[KF(r,a.complexTensorInfos.real),KF(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,s,s[0].dtype)}const fLe={kernelName:nb,backendName:"webgl",kernelFunc:dLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hLe{constructor(e){this.outputShape=[],this.outputShape=cs(e,1),this.variableNames=e.map((s,o)=>`T${o}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let s=1;s<n.length;s++)n[s]=n[s-1]+e[s][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let s=1;s<n.length;s++){const o=n[s-1];r.push(`else if (yC < ${n[s]}) setOutput(getT${s}(yR, yC-${o}));`)}const a=n.length,i=n[n.length-1];r.push(`else setOutput(getT${a}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pLe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=cs(e,n);const r=this.outputShape,a=r.length,i=Lt(a),s=_r("coords",a),o=["x","y","z","w","u","v"].slice(0,a);this.variableNames=e.map((x,b)=>`T${b}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let x=1;x<l.length;x++)l[x]=l[x-1]+e[x][n];const c=o[n],f=o.slice(-2),h=o.join();let p=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${h}), vec2(${f.join()}));
        }`;for(let x=1;x<l.length;x++){const b=l[x-1];p+=`
        if (${c} < ${l[x]}  && ${c} >= ${l[x-1]}) {
          return getChannel(
            getT${x}(${i0(o,c,b)}),
            vec2(${i0(f,c,b)}));
        }`}const g=l.length,v=l[l.length-1];p+=`
        return getChannel(
          getT${g}(${i0(o,c,v)}),
          vec2(${i0(f,c,v)}));`,this.userCode=`
      float getValue(${o.map(x=>"int "+x)}) {
        ${p}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${s}), 0., 0., 0.);

        ${s[a-1]} = ${s[a-1]} + 1;
        if (${s[a-1]} < ${r[a-1]}) {
          result.g = getValue(${s});
        }

        ${s[a-2]} = ${s[a-2]} + 1;
        if (${s[a-2]} < ${r[a-2]}) {
          result.a = getValue(${s});
        }

        ${s[a-1]} = ${s[a-1]} - 1;
        if (${s[a-2]} < ${r[a-2]} &&
            ${s[a-1]} < ${r[a-1]}) {
          result.b = getValue(${s});
        }
        setOutput(result);
      }
    `}}function i0(t,e,n){const r=t.indexOf(e);return t.map((i,s)=>s===r?`${i} - ${n}`:i).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k1(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.texData.get(r.dataId);return ga({inputs:{x:a.complexTensorInfos.imag},backend:n})}const mLe={kernelName:eA,backendName:"webgl",kernelFunc:k1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zh(t,e,n){const r=t[0].dtype;if(r==="complex64"){const g=t.map(S=>lg({inputs:{input:S},backend:n})),v=t.map(S=>k1({inputs:{input:S},backend:n})),x=zh(g,e,n),b=zh(v,e,n),w=Pl({inputs:{real:x,imag:b},backend:n});return g.forEach(S=>n.disposeIntermediateTensorInfo(S)),v.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),w}let a=n.shouldExecuteOnCPU(t);if(r==="string"&&(a=!0),a){const g=t.map(N=>{const T=[-1,ve(N.shape.slice(e))];return Ae({inputs:{x:N},backend:n,attrs:{shape:T}})}),v=g.map(N=>({vals:n.readSync(N.dataId),shape:N.shape})),x=cs(g.map(N=>N.shape),1),b=g[0].shape[0]===1,w=iMe(v,x,r,b),S=cs(t.map(N=>N.shape),e),k=n.makeTensorInfo(S,r,w);return g.forEach(N=>n.disposeIntermediateTensorInfo(N)),k}const i=t.filter(g=>ve(g.shape)>0),s=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(i.length===1){const g=s?new ss(t[0].shape,nl):new ol(t[0].shape,nl);return n.runWebGLProgram(g,t,r)}const o=fe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>o){const g=[];for(let x=0;x<i.length;x+=o){const b=i.slice(x,x+o);g.push(zh(b,e,n))}const v=zh(g,e,n);for(const x of g)n.disposeIntermediateTensorInfo(x);return v}if(s){const g=new pLe(i.map(v=>v.shape),e);return n.runWebGLProgram(g,i,r)}const{tensors2D:l,outShape:c}=gLe(i,e,n),f=new hLe(l.map(g=>g.shape)),h=n.runWebGLProgram(f,l,r);l.forEach(g=>n.disposeIntermediateTensorInfo(g));const p=Ae({inputs:{x:h},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(h),p}function gLe(t,e,n){const r=cs(t.map(i=>i.shape),e);return{tensors2D:t.map(i=>Ae({inputs:{x:i},attrs:{shape:[-1,ve(i.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _K(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r,i=it(a,e[0].shape)[0],s=e.map(c=>c.shape);nT(s,i);const o=cs(e.map(c=>c.shape),i);if(ve(o)===0)return n.makeTensorInfo(o,e[0].dtype,[]);const l=e.filter(c=>ve(c.shape)>0);return l.length===1?ga({inputs:{x:l[0]},backend:n}):zh(l,i,n)}const vLe={kernelName:rb,backendName:"webgl",kernelFunc:_K};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MK{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const s=e.padInfo.top,o=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,f=e.dilationHeight,h=e.dilationWidth,p=e.filterHeight,g=e.filterWidth,v=Math.floor(e.inChannels/4)*4,x=e.inChannels%4,b=e.dataFormat==="channelsLast",w=b?1:2,S=b?2:3,k=b?3:1;let N="",I="";r&&(a?N=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?N=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:N=`
          float activation(float x) {
            ${r}
          }
        `,I="result = activation(result);");const T=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${N}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${s}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${k}];

        ivec2 xRCCorner =
            ivec2(coords[${w}], coords[${S}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${f};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${g}; wC++) {
            int xC = xCCorner + wC * ${h};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${v}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${b}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${x===1}) {

              if (${b}) {
                dotProd +=
                    getX(batch, xR, xC, ${v}) *
                    getW(wR, wC, ${v}, d2);
              } else {
                dotProd +=
                    getX(batch, ${v}, xR, xC) *
                    getW(wR, wC, ${v}, d2);
              }

            } else if (${x===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${v}, d2),
                getW(wR, wC, ${v} + 1, d2)
              );

              if (${b}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${v}),
                  getX(batch, xR, xC, ${v} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${v}, xR, xC),
                  getX(batch, ${v} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${x===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${v}, d2),
                getW(wR, wC, ${v} + 1, d2),
                getW(wR, wC, ${v} + 2, d2)
              );

              if (${b}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${v}),
                  getX(batch, xR, xC, ${v} + 1),
                  getX(batch, xR, xC, ${v} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${v}, xR, xC),
                  getX(batch, ${v} + 1, xR, xC),
                  getX(batch, ${v} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${T}
        ${I}
        setOutput(result);
      }
    `}}class yLe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,a=e.padInfo.left,i=e.strideDepth,s=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,f=e.dilationWidth,h=e.filterDepth,p=e.filterHeight,g=e.filterWidth,v=Math.floor(e.inChannels/4)*4,x=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${s}, ${o});
      const ivec3 pads = ivec3(${n}, ${r}, ${a});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${h}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${g}; wC++) {
              int xC = xCCorner + wC * ${f};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${v}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${x===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${v}) *
                  getW(wF, wR, wC, ${v}, d2);
              } else if (${x===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${v}),
                  getX(batch, xF, xR, xC, ${v} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${v}, d2),
                  getW(wF, wR, wC, ${v} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${x===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${v}),
                  getX(batch, xF, xR, xC, ${v} + 1),
                  getX(batch, xF, xR, xC, ${v} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${v}, d2),
                  getW(wF, wR, wC, ${v} + 1, d2),
                  getW(wF, wR, wC, ${v} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PK{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Ir(this.outputShape.length);const s=e.padInfo.left,o=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,f=e.filterWidth,h=f;let p=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<f;b++)p+=`
           vec4 xTexelC${b*2};
           int xTexelC${b*2}Ready;
           vec4 xTexelC${b*2+1};
           int xTexelC${b*2+1}Ready;
           vec4 xC${b};`;p+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let b=0;b<f;b++)p+=`
           xTexelC${b*2} = vec4(0.0);
           xTexelC${b*2}Ready = 0;
           xTexelC${b*2+1} = vec4(0.0);
           xTexelC${b*2+1}Ready = 0;
           xC${b} = vec4(0.0);`;p+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let b=0;b<(h+1)/2;b++){const w=b*2;if(p+=`
           xC = xCCorner + ${w*l};
           `,o===1){if(w<f&&(s%2===1?(p+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }
               `,l===1&&w>0?p+=`
                 xC${w} = vec4(xTexelC${w-2}.zw, xTexelC${w}.xy);
                 `:p+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${w} = vec4(previous.zw, xTexelC${w}.xy);
                   } else {
                     xC${w} = vec4(0.0, 0.0, xTexelC${w}.xy);
                   }
                   `):p+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }

                 xC${w} = xTexelC${w};
                 `,w+1<f)){const S=s%2===0?NI(l):l;l%2===0&&s%2===1||l%2!==0&&s%2!==1?(p+=`
                   xCOffset = xC + imod(pads[1], 2) + ${S};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                     xTexelC${w+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${w+1}.zw = vec2(0.0);
                     }
                     xTexelC${w+1}Ready = 1;
                   }
                   `,l>1?p+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${w+1} = vec4(previous.zw, xTexelC${w+1}.xy);
                     } else {
                      xC${w+1} = vec4(0.0, 0.0, xTexelC${w+1}.xy);
                     }
                     `:p+=`
                     xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.xy);
                     `):S===1?p+=`
                     xC${w+1} = xTexelC${w};
                     `:p+=`
                     xCOffset = xC + ${S};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                       xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${w+1}.zw = vec2(0.0);
                       }
                       xTexelC${w+1}Ready = 1;
                     }

                     xC${w+1} = xTexelC${w+1};
                     `}}else w<f&&(s%2===1?(p+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${w+1}Ready == 0) {
                   xTexelC${w+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${w+1}.zw = vec2(0.0);
                   }
                   xTexelC${w+1}Ready = 1;
                 }

                 xC${w} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
               `,w+1<f&&(p+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${w+1} = vec4(xTexelC${w+1}.xy, final.xy);
                 `)):(p+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                   xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${w+1}.zw = vec2(0.);
                   }
                   xTexelC${w+1}Ready = 1;
                 }

                 xC${w} = vec4(
                   xTexelC${w}.xy, xTexelC${w+1}.xy);
               `,w+1<f&&(p+=`
                   xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
                 `)));w<f&&(p+=`
             wTexel = getW(r, ${w}, d1, d2);
             dotProd += xC${w}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${w}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,w+1<f&&(p+=`
               wTexel = getW(r, ${w+1}, d1, d2);
               dotProd += xC${w+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${w+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}p+=`
     }
   `,p+=`
     }
   `,p+=`
     }
   `;let g="",v="";r&&(a?g=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?g=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:g=`vec4 activation(vec4 x) {
           ${r}
         }`,v="result = activation(result);");const x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${g}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${p}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${x}
         ${v}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xLe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Ir(this.outputShape.length);const{dataFormat:r}=n,a=zr(),i=r==="channelsLast",s=i?1:2,o=i?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let f=0;f<=1;f++)for(let h=0;h<=1;h++)c+=`
          blockIndex = rc.z + ${h};
          pos = rc.y + ${f};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${s}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${o}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${f*2+h}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${f*2+h}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${a.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qy(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function LK({x:t,filter:e,convInfo:n,backend:r,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:o=null}){const l=t.shape,c=r.texData.get(t.dataId),f=n.inChannels,h=l[0]*l[1]*l[2],p=n.outChannels,g=n.dataFormat==="channelsLast",v=!1,x=!1;let b;const w=[];if(i!=null){const N=qy(i.shape,g);N!=null&&(i=Ae({inputs:{x:i},backend:r,attrs:{shape:N}}),w.push(i))}if(a!=null){const N=qy(a.shape,g);N!=null&&(a=Ae({inputs:{x:a},backend:r,attrs:{shape:N}}),w.push(a))}if(!((h===1||p===1)&&f>TK)&&c.isPacked&&g&&c.texture!=null&&l[2]%2!==0&&It(c.shape.slice(-3),l.slice(-3))){const N=l[0]*l[1]*(l[2]+1),I={dataId:t.dataId,shape:[1,N,n.inChannels],dtype:t.dtype},T=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,B(Gy(c.shape,I.shape),()=>`packed reshape ${c.shape} to ${I.shape} isn't free`);const R=Ae({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});w.push(R);const _=Hy({a:I,b:R,backend:r,transposeA:v,transposeB:x,bias:a,activation:o,preluActivationWeights:i,leakyreluAlpha:s}),M=r.texData.get(_.dataId);B(M.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=T,M.shape=n.outShape,b=ga({inputs:{x:_},backend:r}),b.shape=n.outShape,w.push(_)}else{const N=n.outHeight*n.outWidth,I=Ae({inputs:{x:t},backend:r,attrs:{shape:g?[n.batchSize,N,n.inChannels]:[n.batchSize,n.inChannels,N]}}),T=Ae({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),R=Hy({a:g?I:T,b:g?T:I,transposeA:!g,transposeB:x,backend:r,bias:a,activation:o,preluActivationWeights:i,leakyreluAlpha:s});b=Ae({inputs:{x:R},backend:r,attrs:{shape:n.outShape}}),w.push(I),w.push(T),w.push(R)}for(const N of w)r.disposeIntermediateTensorInfo(N);return b}function zK({x:t,filter:e,convInfo:n,backend:r,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:o=null}){const{filterWidth:l,filterHeight:c,inChannels:f,outWidth:h,outHeight:p,dataFormat:g}=n,v=g==="channelsLast",x=l*c*f,b=p*h,w=[n.batchSize,x,b],S=!0,k=!1,N=[];if(i!=null){const U=qy(i.shape,v);U!=null&&(i=Ae({inputs:{x:i},backend:r,attrs:{shape:U}}),N.push(i))}if(a!=null){const U=qy(a.shape,v);U!=null&&(a=Ae({inputs:{x:a},backend:r,attrs:{shape:U}}),N.push(a))}const I=Ae({inputs:{x:e},backend:r,attrs:{shape:[1,x,ve(e.shape)/x]}});N.push(I);const T=new xLe(w,n),R=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],_=r.runWebGLProgram(T,[t],"float32",R),M=Ae({inputs:{x:_},backend:r,attrs:{shape:w}});N.push(_),N.push(M);const P=a!=null,$=i!=null,z=o==="leakyrelu",W=o?gp(o,!0):null,H=new AK(v?M.shape:I.shape,v?I.shape:M.shape,v?[n.batchSize,b,n.outChannels]:[n.batchSize,n.outChannels,b],S,k,P,W,$,z),G=v?[M,I]:[I,M];if(a&&G.push(a),$&&G.push(i),z){const U=r.makeTensorInfo([],"float32",Al(s,"float32"));G.push(U),N.push(U)}const F=r.runWebGLProgram(H,G,"float32"),V=Ae({inputs:{x:F},backend:r,attrs:{shape:n.outShape}});N.push(F);for(const U of N)r.disposeIntermediateTensorInfo(U);return V}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:s,pad:o,dataFormat:l,dilations:c,dimRoundingMode:f}=r,h=No(l),p=cr(a.shape,i.shape,s,c,o,f,!1,h);let g;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))g=LK({x:a,filter:i,convInfo:p,backend:n});else if(p.strideWidth<=2&&h==="channelsLast"&&fe().getBool("WEBGL_EXP_CONV")){const x=new PK(p),b=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];g=n.runWebGLProgram(x,[a,i],"float32",b)}else if(fe().getBool("WEBGL_CONV_IM2COL"))g=zK({x:a,filter:i,convInfo:p,backend:n});else{const x=new MK(p);g=n.runWebGLProgram(x,[a,i],"float32")}const v=Ae({inputs:{x:g},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(g),v}const wLe={kernelName:ab,backendName:"webgl",kernelFunc:bLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SLe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,i=e.padInfo.left,s=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${a};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${s?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class CLe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,s=e.dataFormat==="channelsLast",o=n-1-e.padInfo.top,l=r-1-e.padInfo.left,c=s?1:2,f=s?2:3,h=s?3:1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${h}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${f}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${s}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class kLe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,a=e.strideWidth,i=e.padInfo.front,s=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${s};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${a} - ${o};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class ELe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,a=e.filterWidth,i=e.strideDepth,s=e.strideHeight,o=e.strideWidth,l=n-1-e.padInfo.front,c=r-1-e.padInfo.top,f=a-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${a}; wC++) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${a} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:s,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:f}=r,h=No(l),p=cr(a.shape,f,s,1,o,c,!1,h),g=new SLe(p);return n.runWebGLProgram(g,[a,i],"float32")}const ILe={kernelName:FI,backendName:"webgl",kernelFunc:NLe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ALe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=Ir(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,a=n-1-e.padInfo.top,i=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TLe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{inputShape:s,strides:o,pad:l,dataFormat:c,dimRoundingMode:f}=r,h=No(c),p=cr(s,i.shape,o,1,l,f,!1,h);if(fe().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&h==="channelsLast"){const g=[[p.strideHeight,p.strideWidth]],v=new ALe(p);return n.runWebGLProgram(v,[a,i],"float32",g)}else{const g=new CLe(p);return n.runWebGLProgram(g,[a,i],"float32")}}const $Le={kernelName:ib,backendName:"webgl",kernelFunc:TLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:s,pad:o,dilations:l}=r,c=Tl(a.shape,i.shape,s,l,o),f=new yLe(c);return n.runWebGLProgram(f,[a,i],"float32")}const DLe={kernelName:sb,backendName:"webgl",kernelFunc:OLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:s,pad:o,filterShape:l}=r,c=Tl(a.shape,l,s,1,o),f=new kLe(c);return n.runWebGLProgram(f,[a,i],"float32")}const _Le={kernelName:jI,backendName:"webgl",kernelFunc:RLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MLe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{pad:s,strides:o,inputShape:l}=r,c=Tl(l,i.shape,o,1,s),f=new ELe(c);return n.runWebGLProgram(f,[a,i],"float32")}const PLe={kernelName:BI,backendName:"webgl",kernelFunc:MLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LLe=wf+`
  return cos(x);
`,zLe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${lc}
  return result;
`,FLe=gt({opSnippet:LLe,packedOpSnippet:zLe}),jLe={kernelName:rm,backendName:"webgl",kernelFunc:FLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BLe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,ULe=gt({opSnippet:BLe}),VLe={kernelName:am,backendName:"webgl",kernelFunc:ULe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WLe{constructor(e,n,r,a,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[s,o,l,c]=e,[f]=n,[h,p]=r;this.outputShape=[f,h,p,c];const g=a==="bilinear"?1:0,[v,x]=[`${o-1}.0`,`${l-1}.0`],[b,w,S]=h>1?[`${(o-1)/(h-1)}`,"(y2-y1) * height_ratio",`y1*${v} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${v}`],[k,N,I]=p>1?[`${(l-1)/(p-1)}`,"(x2-x1) * width_ratio",`x1*${x} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${x}`];this.userCode=`
      const float height_ratio = float(${b});
      const float width_ratio = float(${k});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${s}) {
          return;
        }

        float height_scale = ${w};
        float width_scale = ${N};

        float in_y = ${S};
        if( in_y < 0.0 || in_y > ${v} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${I};
        if( in_x < 0.0 || in_x > ${x} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${g} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GLe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:a,boxes:i,boxInd:s}=e,{cropSize:o,method:l,extrapolationValue:c}=r,f=new WLe(a.shape,i.shape,o,l,c);return n.runWebGLProgram(f,[a,i,s],"float32")},HLe={kernelName:VI,backendName:"webgl",kernelFunc:GLe};var yp;(function(t){t.Prod="*",t.Sum="+"})(yp||(yp={}));class XF{constructor(e,n,r,a){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,s=this.op===yp.Prod?"1.0":"0.0",o=r?s:`getX(${YF(i,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",f="";r?(c=a?`end != ${l-1}`:"end != 0",f=a?"end + 1":"end - 1"):(c=a?`end + pow2 < ${l}`:"end >= pow2",f=a?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Lt(i)} coords = getOutputCoords();
        int end = ${ZF(i,"coords",this.op)};
        float val = ${o};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${f};
          ${ZF(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${YF(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function YF(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function ZF(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FK(t,e,n,r,a,i){const s=e.shape.length,o=cn([r],s);let l=e;o!=null&&(l=Pr({inputs:{x:e},backend:n,attrs:{perm:o}}));const c=wn(1,s)[0];if(c!==s-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const f=l.shape[c];let h=ga({inputs:{x:l},backend:n});for(let p=0;p<=Math.ceil(Math.log2(f))-1;p++){const g=new XF(t,l.shape,!1,i),v=[[p]],x=h;h=n.runWebGLProgram(g,[h],h.dtype,v),n.disposeIntermediateTensorInfo(x)}if(a){const p=new XF(t,l.shape,a,i),g=h;h=n.runWebGLProgram(p,[h],h.dtype),n.disposeIntermediateTensorInfo(g)}if(o!=null){const p=$l(o),g=Pr({inputs:{x:h},backend:n,attrs:{perm:p}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(l),g}return h}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:s,reverse:o}=r;return FK(yp.Prod,a,n,i,s,o)}const KLe={kernelName:UI,backendName:"webgl",kernelFunc:qLe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:s,reverse:o}=r;return FK(yp.Sum,a,n,i,s,o)}const YLe={kernelName:ob,backendName:"webgl",kernelFunc:XLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:s,binaryOutput:o}=r;if(a.shape.length===1){const l=n.readSync(a.dataId),c=n.readSync(i.dataId),f=xK(l,c,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,f)}else if(a.shape.length===2){const l=n.bufferSync(a),c=n.bufferSync(i),f=tMe(l,c,s,o);return n.makeTensorInfo(f.shape,i.dtype,f.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}const QLe={kernelName:WI,backendName:"webgl",kernelFunc:ZLe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JLe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eze(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockSize:i,dataFormat:s}=r,o=a.shape[0],l=s==="NHWC"?a.shape[1]:a.shape[2],c=s==="NHWC"?a.shape[2]:a.shape[3],f=s==="NHWC"?a.shape[3]:a.shape[1],h=l*i,p=c*i,g=f/(i*i),v=s==="NHWC"?[o,h,p,g]:[o,g,h,p],x=new JLe(v,i,s);return n.runWebGLProgram(x,[a],a.dtype)}const tze={kernelName:GI,backendName:"webgl",kernelFunc:eze};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jK{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Ir(this.outputShape.length);const s=e.filterHeight,o=e.filterWidth,l=e.outChannels/e.inChannels;let c="",f="";r&&(a?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,f="result = activation(result);");const h=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${s}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${o}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${h}
        ${f}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BK{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Ir(this.outputShape.length);const s=e.outChannels/e.inChannels,o=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,f=e.filterHeight,h=e.filterWidth,p=h;let g=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let w=0;w<h;w++)g+=`
          vec4 xTexelC${w*2};
          int xTexelC${w*2}Ready;
          vec4 xTexelC${w*2+1};
          int xTexelC${w*2+1}Ready;
          vec4 xC${w};`;g+=`
    for (int r = 0; r < ${f}; r++) {
      `;for(let w=0;w<h;w++)g+=`
          xTexelC${w*2} = vec4(0.0);
          xTexelC${w*2}Ready = 0;
          xTexelC${w*2+1} = vec4(0.0);
          xTexelC${w*2+1}Ready = 0;
          xC${w} = vec4(0.0);`;g+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let w=0;w<(p+1)/2;w++){const S=w*2;if(g+=`
          xC = xCCorner + ${S*c};
          `,l===1){if(S<h&&(o%2===1?(g+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }
              `,c===1&&S>0?g+=`
                xC${S} = vec4(xTexelC${S-2}.zw, xTexelC${S}.xy);
                `:g+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${S} = vec4(previous.zw, xTexelC${S}.xy);
                  } else {
                    xC${S} = vec4(0.0, 0.0, xTexelC${S}.xy);
                  }
                  `):g+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }

                xC${S} = xTexelC${S};
                `,S+1<h)){const k=o%2===0?NI(c):c;c%2===0&&o%2===1||c%2!==0&&o%2!==1?(g+=`
                  xCOffset = xC + imod(pads[1], 2) + ${k};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                    xTexelC${S+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${S+1}.zw = vec2(0.0);
                    }
                    xTexelC${S+1}Ready = 1;
                  }
                  `,c>1?g+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${S+1} = vec4(previous.zw, xTexelC${S+1}.xy);
                    } else {
                     xC${S+1} = vec4(0.0, 0.0, xTexelC${S+1}.xy);
                    }
                    `:g+=`
                    xC${S+1} = vec4(xTexelC${S}.zw, xTexelC${S+1}.xy);
                    `):k===1?g+=`
                    xC${S+1} = xTexelC${S};
                    `:g+=`
                    xCOffset = xC + ${k};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                      xTexelC${S+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${S+1}.zw = vec2(0.0);
                      }
                      xTexelC${S+1}Ready = 1;
                    }

                    xC${S+1} = xTexelC${S+1};
                    `}}else S<h&&(o%2===1?(g+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${S+1}Ready == 0) {
                  xTexelC${S+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${S+1}.zw = vec2(0.0);
                  }
                  xTexelC${S+1}Ready = 1;
                }

                xC${S} = vec4(xTexelC${S}.zw, xTexelC${S+1}.zw);
              `,S+1<h&&(g+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${S+1} = vec4(xTexelC${S+1}.xy, final.xy);
                `)):(g+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                  xTexelC${S+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${S+1}.zw = vec2(0.);
                  }
                  xTexelC${S+1}Ready = 1;
                }

                xC${S} = vec4(
                  xTexelC${S}.xy, xTexelC${S+1}.xy);
              `,S+1<h&&(g+=`
                  xC${S+1} = vec4(xTexelC${S}.zw, xTexelC${S+1}.zw);
                `)));S<h&&(g+=`
            wTexel = getW(r, ${S}, d1, q);
            dotProd += xC${S} * vec4(wTexel.xz, wTexel.xz);
          `,S+1<h&&(g+=`
              wTexel = getW(r, ${S+1}, d1, q);
              dotProd += xC${S+1} * vec4(wTexel.xz, wTexel.xz);
            `))}g+=`
    }
  `,g+=`
      }
    `;let v="",x="";r&&(a?v=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?v=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:v=`vec4 activation(vec4 x) {
          ${r}
        }`,x="result = activation(result);");const b=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${v}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${s};
        int q = d2 - d1 * ${s};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${g}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${b}
        ${x}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nze(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:s,pad:o,dilations:l,dimRoundingMode:c}=r;let f=l;f==null&&(f=[1,1]),B(Er(s,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${f}'`);const h=cr(a.shape,i.shape,s,f,o,c,!0);let p;fe().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?p=new BK(h):p=new jK(h);const g=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return n.runWebGLProgram(p,[a,i],"float32",g)}const rze={kernelName:lb,backendName:"webgl",kernelFunc:nze};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aze{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,i=e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${s} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${a};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class ize{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,s=n-1-e.padInfo.top,o=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sze(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:s,dilations:o,pad:l,dimRoundingMode:c,filterShape:f}=r,h=cr(a.shape,f,s,o,l,c,!0),p=new aze(h);return n.runWebGLProgram(p,[a,i],"float32")}const oze={kernelName:HI,backendName:"webgl",kernelFunc:sze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lze(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{strides:s,dilations:o,pad:l,dimRoundingMode:c,inputShape:f}=r,h=cr(f,i.shape,s,o,l,c,!0),p=new ize(h);return n.runWebGLProgram(p,[a,i],"float32")}const uze={kernelName:qI,backendName:"webgl",kernelFunc:lze};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cze{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dze(t){const{inputs:e,backend:n}=t,{x:r}=e,a=[...r.shape,...r.shape],i=ve(r.shape),s=Ae({inputs:{x:r},backend:n,attrs:{shape:[i]}}),o=new cze(i),l=n.runWebGLProgram(o,[s],s.dtype),c=Ae({inputs:{x:l},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),c}const fze={kernelName:NW,backendName:"webgl",kernelFunc:dze};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hze{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:a,strideHeight:i,strideWidth:s,filterHeight:o,filterWidth:l,dilationHeight:c,dilationWidth:f}=e,{top:h,left:p}=a;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${s});
      const ivec2 pads = ivec2(${h}, ${p});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${o}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${f};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pze(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:s,pad:o,dilations:l}=r,c=Um(a.shape,i.shape,s,o,"NHWC",l);let f;const h=new hze(c);f=n.runWebGLProgram(h,[a,i],"float32");const p=Ae({inputs:{x:f},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(f),p}const mze={kernelName:ub,backendName:"webgl",kernelFunc:pze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gze(t){const{inputs:e,backend:n,attrs:r}=t,{equation:a}=r,i=e,{allDims:s,summedDims:o,idDims:l}=pT(a,i.length);gT(s.length,l,i);const{path:c,steps:f}=vT(o,l),h=f.length;let p=null,g=s.length;const v=[];for(let x=0;x<h;++x){for(const b of f[x]){const{permutationIndices:w,expandDims:S}=mT(g,l[b]);let k;yT(w)?k=i[b]:(k=Pr({inputs:{x:i[b]},backend:n,attrs:{perm:w}}),v.push(k));const N=k.shape.slice();for(let I=0;I<S.length;++I)N.splice(S[I],0,1);It(k.shape,N)||(k=Ae({inputs:{x:k},backend:n,attrs:{shape:N}}),v.push(k)),p===null?p=k:(p=i$({inputs:{a:k,b:p},backend:n}),v.push(p))}x<h-1&&(c[x]>=0&&(p=C1({inputs:{x:p},backend:n,attrs:{axis:c[x]-(s.length-g),keepDims:!1}}),v.push(p)),g--)}for(const x of v)x!==p&&n.disposeIntermediateTensorInfo(x);return p}const vze={kernelName:KI,backendName:"webgl",kernelFunc:gze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yze="return (x >= 0.0) ? x : (exp(x) - 1.0);",xze=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,bze=gt({opSnippet:yze,packedOpSnippet:xze}),wze={kernelName:sm,backendName:"webgl",kernelFunc:bze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sze="return (b >= 0.0) ? a : a * (b + 1.0);",Cze=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,kze=t=>{const{inputs:e,backend:n}=t,{dy:r,y:a}=e,i=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new bf(Cze,r.shape,a.shape):new Ku(Sze,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)},Eze={kernelName:XI,backendName:"webgl",kernelFunc:kze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nze=`
  return vec4(equal(a, b));
`,Ize="return float(a == b);",Aze=fr({opSnippet:Ize,packedOpSnippet:Nze,dtype:"bool",cpuKernelImpl:sMe}),Tze={kernelName:cb,backendName:"webgl",kernelFunc:Aze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ze=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${oT};
  float a1 = ${lT};
  float a2 = ${uT};
  float a3 = ${cT};
  float a4 = ${dT};
  float a5 = ${fT};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,Oze=gt({opSnippet:$ze}),Dze={kernelName:om,backendName:"webgl",kernelFunc:Oze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rze=wf+`
  return exp(x);
`,_ze=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,UK=gt({opSnippet:Rze,packedOpSnippet:_ze,cpuKernelImpl:oMe,dtype:"float32"}),Mze={kernelName:lm,backendName:"webgl",kernelFunc:UK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zE(t){const{inputs:e,attrs:n,backend:r}=t,{dim:a}=n,{input:i}=e,s=i.shape.length,o=i.shape.slice();let l=a;return a<0&&(B(-(s+1)<=a,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+a+1),o.splice(l,0,1),Ae({inputs:{x:i},backend:r,attrs:{shape:o}})}const Pze={kernelName:db,backendName:"webgl",kernelFunc:zE};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QF="return exp(x) - 1.0;",Lze=gt({opSnippet:QF,packedOpSnippet:QF,cpuKernelImpl:lMe}),zze={kernelName:um,backendName:"webgl",kernelFunc:Lze};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JF{constructor(e,n,r){this.variableNames=["real","imag"];const a=n[1];this.outputShape=n;const i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,s=r?`${a}.0`:"1.0";let o;if(e==="real")o="return real * expR - imag * expI;";else if(e==="imag")o="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${o}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${a});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${a}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${s};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VK(t,e,n){const r=n.texData.get(t.dataId),a=ve(t.shape),i=t.shape[t.shape.length-1],s=a/i,o=Ae({inputs:{x:t},backend:n,attrs:{shape:[s,i]}}),l=o.shape,c=new JF("real",l,e),f=new JF("imag",l,e),h=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],p=n.runWebGLProgram(c,h,"float32"),g=n.runWebGLProgram(f,h,"float32"),v=Pl({inputs:{real:p,imag:g},backend:n});n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g);const x=Ae({inputs:{x:v},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(v),x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fze(t){const{inputs:e,backend:n}=t,{input:r}=e;return VK(r,!1,n)}const jze={kernelName:YI,backendName:"webgl",kernelFunc:Fze};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bze{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ug(t){const{backend:e,attrs:n}=t,{shape:r,value:a}=n;let{dtype:i}=n;if(i=i||sf(a),i==="string"){const s=gn(i,ve(r));return s.fill(a),e.makeTensorInfo(r,i,s)}else{const s=new Bze(r,a),o=[[a]];return e.runWebGLProgram(s,[],i,o)}}const Uze={kernelName:ZI,backendName:"webgl",kernelFunc:ug};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vze{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wze={kernelName:QI,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,a=new Vze(n.shape);return r.runWebGLProgram(a,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e4="return floor(x);",Gze=gt({opSnippet:e4,packedOpSnippet:e4,cpuKernelImpl:uMe}),Hze={kernelName:cm,backendName:"webgl",kernelFunc:Gze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qze=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,Kze=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,Xze=fr({opSnippet:qze,packedOpSnippet:Kze,dtype:"int32"}),Yze={kernelName:dm,backendName:"webgl",kernelFunc:Xze};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zze{constructor(e){this.variableNames=["A"];const n=zr(),[r,a]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${a}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qze{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=zr(),[r,a]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${a}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jze={kernelName:mye,backendName:"webgl",kernelFunc:eFe};let ed,Y2=fe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function eFe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:a}=e;const{numChannels:i}=r,s=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,o=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,[l,c]=s?[a.videoWidth,a.videoHeight]:[a.width,a.height],f=[c,l],h=[c,l,i];if(o||s){const x=fe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(ed==null||x!==Y2)&&(Y2=x,ed=document.createElement("canvas").getContext("2d",{willReadFrequently:Y2})),ed.canvas.width=l,ed.canvas.height=c,ed.drawImage(a,0,0,l,c),a=ed.canvas}const p=n.makeTensorInfo(f,"int32");n.texData.get(p.dataId).usage=Da.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),a);const g=fe().getBool("WEBGL_PACK")?new Qze(h):new Zze(h),v=n.runWebGLProgram(g,[p],"int32");return n.disposeData(p.dataId),v}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:s,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:f,dilations:h,dimRoundingMode:p,activation:g,leakyreluAlpha:v}=r,x=No(f),b=cr(a.shape,i.shape,l,h,c,p,!1,x);let w;const S=[],k=s!=null,N=o!=null,I=g==="leakyrelu",T=()=>{const _=[a,i],M=(P,$)=>{if($==="NCHW"&&P.shape.length===1&&P.shape[0]!==1){const z=Ae({inputs:{x:P},backend:n,attrs:{shape:[P.shape[0],1,1]}});return S.push(z),z}return P};if(k&&_.push(M(s,f)),N&&_.push(M(o,f)),I){const P=n.makeTensorInfo([],"float32",Al(v,"float32"));_.push(P),S.push(P)}return _};if(b.filterHeight===1&&b.filterWidth===1&&b.dilationHeight===1&&b.dilationWidth===1&&b.strideHeight===1&&b.strideWidth===1&&(b.padInfo.type==="SAME"||b.padInfo.type==="VALID"))w=LK({x:a,filter:i,convInfo:b,backend:n,bias:s,activation:g,preluActivationWeights:o,leakyreluAlpha:v});else if(b.strideWidth<=2&&x==="channelsLast"&&fe().getBool("WEBGL_EXP_CONV")){const _=g?gp(g,!0):null,M=new PK(b,k,_,N,I),P=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],$=T();w=n.runWebGLProgram(M,$,"float32",P)}else if(fe().getBool("WEBGL_CONV_IM2COL"))w=zK({x:a,filter:i,convInfo:b,backend:n,bias:s,activation:g,preluActivationWeights:o,leakyreluAlpha:v});else{const _=g?gp(g,!1):null,M=new MK(b,k,_,N,I),P=T();w=n.runWebGLProgram(M,P,"float32")}const R=Ae({inputs:{x:w},backend:n,attrs:{shape:b.outShape}});return S.push(w),S.forEach(_=>n.disposeIntermediateTensorInfo(_)),R}const nFe={kernelName:Cy,backendName:"webgl",kernelFunc:tFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:s,preluActivationWeights:o}=e,{strides:l,pad:c,dilations:f,dimRoundingMode:h,activation:p,leakyreluAlpha:g}=r,v=[];let x=f;x==null&&(x=[1,1]),B(Er(l,x),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${x}'`);const b=cr(a.shape,i.shape,l,x,c,h,!0),w=fe().getBool("WEBGL_PACK_DEPTHWISECONV")&&b.strideWidth<=2&&b.outChannels/b.inChannels===1,S=p?gp(p,w):null,k=[a,i],N=s!=null,I=o!=null,T=p==="leakyrelu";if(N&&k.push(s),I&&k.push(o),T){const P=n.makeTensorInfo([],"float32",Al(g,"float32"));k.push(P),v.push(P)}let R;w?R=new BK(b,N,S,I,T):R=new jK(b,N,S,I,T);const _=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],M=n.runWebGLProgram(R,k,"float32",_);return v.forEach(P=>n.disposeIntermediateTensorInfo(P)),M}const aFe={kernelName:GW,backendName:"webgl",kernelFunc:rFe};class iFe{constructor(e,n,r,a){this.sliceDim=e,this.strides=n,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=r;const i=Lt(r.length);let s=`
    int index;`;for(let o=0;o<this.sliceDim;o++)s+=`
          index = round(getIndices(coords[0], ${o}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[o]};
          flattenIndex += index * ${this.strides[o]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${s}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sFe(t){const{inputs:e,backend:n}=t,{params:r,indices:a}=e,i=a.shape,s=i[i.length-1],o=ve(r.shape),[l,c,f,h]=YA(r,a),p=Ae({inputs:{x:a},backend:n,attrs:{shape:[c,s]}}),g=Ae({inputs:{x:r},backend:n,attrs:{shape:[ve(r.shape)/f,f]}});if(n.shouldExecuteOnCPU([r,a])||r.dtype==="string"){const w=n.readSync(a.dataId),S=n.bufferSync(r),k=cMe(w,S,r.dtype,c,s,f,h,r.shape,o);return n.makeTensorInfo(l,r.dtype,k.values)}const v=new iFe(s,h,[c,f],r.shape),x=n.runWebGLProgram(v,[g,p],g.dtype),b=Ae({inputs:{x},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),b}const oFe={kernelName:IW,backendName:"webgl",kernelFunc:sFe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lFe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=Lt(this.rank),a=uFe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${a}));
      }
    `}}function uFe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let a=0;a<t.length;a++)a===2?r.push("index"):r.push(`${n[a]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WK(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,indices:i}=e,{axis:s,batchDims:o}=r,l=it(s,a.shape)[0];if(fe().get("DEBUG")){const S=n.readSync(i.dataId),k=a.shape[l];for(let N=0;N<S.length;++N){const I=S[N];B(I<=k-1&&I>=0,()=>`GatherV2: the index value ${I} is not in [0, ${k-1}]`)}}const c=bT(a,i,l,o),f=ve(i.shape),h=[],p=Ae({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),g=Ae({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,f/c.batchSize]}});h.push(p),h.push(g);const v=[c.batchSize,c.outerSize,f/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([a,i])||a.dtype==="string"){const S=n.bufferSync(g),k=n.bufferSync(p),N=dMe(k,S,v);return h.forEach(I=>n.disposeIntermediateTensorInfo(I)),n.makeTensorInfo(c.outputShape,N.dtype,N.values)}const x=new lFe(p.shape,v),b=n.runWebGLProgram(x,[p,g],p.dtype);h.push(b);const w=Ae({inputs:{x:b},backend:n,attrs:{shape:c.outputShape}});return h.forEach(S=>n.disposeIntermediateTensorInfo(S)),w}const cFe={kernelName:hb,backendName:"webgl",kernelFunc:WK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dFe="return float(a > b);",fFe=`
  return vec4(greaterThan(a, b));
`,hFe=fr({opSnippet:dFe,packedOpSnippet:fFe,cpuKernelImpl:fMe,dtype:"bool"}),pFe={kernelName:pb,backendName:"webgl",kernelFunc:hFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mFe="return float(a >= b);",gFe=`
  return vec4(greaterThanEqual(a, b));
`,vFe=fr({opSnippet:mFe,packedOpSnippet:gFe,dtype:"bool",cpuKernelImpl:hMe}),yFe={kernelName:fm,backendName:"webgl",kernelFunc:vFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xFe(t){const{inputs:e,backend:n}=t,{input:r}=e;return VK(r,!0,n)}const bFe={kernelName:JI,backendName:"webgl",kernelFunc:xFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wFe="return float(!isnan(x) && !isinf(x));",SFe=gt({opSnippet:wFe,dtype:"bool"}),CFe={kernelName:pm,backendName:"webgl",kernelFunc:SFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kFe="return float(isinf(x));",EFe=gt({opSnippet:kFe,dtype:"bool"}),NFe={kernelName:mm,backendName:"webgl",kernelFunc:EFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IFe="return float(isnan(x));",AFe=gt({opSnippet:IFe,dtype:"bool"}),TFe={kernelName:gm,backendName:"webgl",kernelFunc:AFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Fe="return float(a < b);",OFe=`
  return vec4(lessThan(a, b));
`,DFe=fr({opSnippet:$Fe,packedOpSnippet:OFe,cpuKernelImpl:pMe,dtype:"bool"}),RFe={kernelName:gb,backendName:"webgl",kernelFunc:DFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Fe="return float(a <= b);",MFe=`
  return vec4(lessThanEqual(a, b));
`,PFe=fr({opSnippet:_Fe,packedOpSnippet:MFe,cpuKernelImpl:mMe,dtype:"bool"}),LFe={kernelName:vb,backendName:"webgl",kernelFunc:PFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zFe(t){const{backend:e,attrs:n}=t,{start:r,stop:a,num:i}=n,s=gMe(r,a,i);return e.makeTensorInfo([s.length],"float32",s)}const FFe={kernelName:AW,backendName:"webgl",kernelFunc:zFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jFe=wf+`
  return x < 0.0 ? 0./0. : log(x);
`,BFe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,UFe=gt({opSnippet:jFe,packedOpSnippet:BFe,cpuKernelImpl:vMe}),VFe={kernelName:vm,backendName:"webgl",kernelFunc:UFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WFe=wf+`
  return log(1.0 + x);
`,GFe=gt({opSnippet:WFe}),HFe={kernelName:ym,backendName:"webgl",kernelFunc:GFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qFe="return float(a >= 1.0 && b >= 1.0);",KFe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,XFe=fr({opSnippet:qFe,packedOpSnippet:KFe,dtype:"bool"}),YFe={kernelName:yb,backendName:"webgl",kernelFunc:XFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZFe="return float(!(x >= 1.0));",QFe=gt({opSnippet:ZFe}),JFe={kernelName:xb,backendName:"webgl",kernelFunc:QFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e4e="return float(a >= 1.0 || b >= 1.0);",t4e=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,n4e=fr({opSnippet:e4e,packedOpSnippet:t4e,dtype:"bool"}),r4e={kernelName:bb,backendName:"webgl",kernelFunc:n4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a4e{constructor(e,n,r,a,i){this.variableNames=["x"],this.outputShape=[];const s=n,o=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${a}) * sum`;i===.5?l=`inversesqrt(${c})`:i===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${s}; j <= ${s}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${o}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i4e{constructor(e,n,r,a,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const s=n,o=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${a}) * sum`;i===.5?l=`inversesqrt(${c})`:i===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${s};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${s}; j <= ${s}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s4e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{depthRadius:i,bias:s,alpha:o,beta:l}=r,c=fe().getBool("WEBGL_PACK_NORMALIZATION")?new i4e(a.shape,i,s,o,l):new a4e(a.shape,i,s,o,l);return n.runWebGLProgram(c,[a],a.dtype)},o4e={kernelName:wb,backendName:"webgl",kernelFunc:s4e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class l4e{constructor(e,n,r,a,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${a}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${a})
                * float(${i})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u4e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a,y:i,dy:s}=e,{depthRadius:o,bias:l,alpha:c,beta:f}=r,h=new l4e(a.shape,o,l,c,f);return n.runWebGLProgram(h,[a,i,s],a.dtype)},c4e={kernelName:tA,backendName:"webgl",kernelFunc:u4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d4e(t,e,n,r){const a=ve(e),s=ve(t.shape)/a,o=Ae({inputs:{x:t},attrs:{shape:[s,a]},backend:r}),l=uc(o,t.dtype,"max",r),c=Ae({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GK(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reductionIndices:i,keepDims:s}=r,o=a.shape.length,l=it(i,a.shape);let c=l;const f=cn(c,o),h=f!=null,p=n.shouldExecuteOnCPU([a]);let g=a;if(h){if(p){const k=n.texData.get(g.dataId).values,N=new Array(o);for(let R=0;R<N.length;R++)N[R]=a.shape[f[R]];const I=r$(k,a.shape,a.dtype,f,N);g=n.makeTensorInfo(N,a.dtype);const T=n.texData.get(g.dataId);T.values=I}else g=S1(a,f,n);c=wn(c.length,o)}dr("max",c,o);const[v,x]=er(g.shape,c);let b=v;s&&(b=An(v,l));let w;if(p){const k=n.texData.get(g.dataId).values,N=yMe(k,ve(x),b,a.dtype);w=n.makeTensorInfo(b,a.dtype);const I=n.texData.get(w.dataId);I.values=N}else w=d4e(g,x,b,n);return h&&n.disposeIntermediateTensorInfo(g),w}const f4e={kernelName:Sb,backendName:"webgl",kernelFunc:GK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h4e=a$+`
  return max(a, b);
`,p4e=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+lc+`
  return result;
`,m4e=fr({opSnippet:h4e,packedOpSnippet:p4e,cpuKernelImpl:xMe}),g4e={kernelName:xm,backendName:"webgl",kernelFunc:m4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;sg(a,"maxPool");const{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=r,c=1;B(Er(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const f=gi(a.shape,i,s,c,o,l);if(f.filterWidth===1&&f.filterHeight===1&&It(f.inShape,f.outShape))return ga({inputs:{x:a},backend:n});const h=new vp(f,"max",!1);return n.runWebGLProgram(h,[a],a.dtype)}const y4e={kernelName:Cb,backendName:"webgl",kernelFunc:v4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:s,pad:o,dataFormat:l,dimRoundingMode:c}=r,f=[1,1,1],h=Eo(a.shape,i,s,f,o,c,l),p=new s$(h,"max",!1);return n.runWebGLProgram(p,[a],a.dtype)}const b4e={kernelName:kb,backendName:"webgl",kernelFunc:x4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class w4e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,a=e.dilationHeight,i=e.effectiveFilterHeight,s=e.effectiveFilterWidth,o=i-1-e.padInfo.top,l=s-1-e.padInfo.left,c=i*s-1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${s} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class S4e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,a=e.strideWidth,i=e.dilationDepth,s=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=l-1-e.padInfo.front,p=c-1-e.padInfo.top,g=f-1-e.padInfo.left,v=l*c*f-1;this.userCode=`
      const ivec3 pads = ivec3(${h}, ${p}, ${g});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${s}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${o}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${v} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${f} +
                  wR * ${f} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C4e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,s=i,{filterSize:o,strides:l,pad:c,dimRoundingMode:f}=r,h=[1,1,1],p=Eo(s.shape,o,l,h,c,f),g=new s$(p,"max",!0),v=n.runWebGLProgram(g,[s],s.dtype),x=new S4e(p),b=n.runWebGLProgram(x,[a,v],s.dtype);return n.disposeIntermediateTensorInfo(v),b}const k4e={kernelName:rA,backendName:"webgl",kernelFunc:C4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E4e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i,output:s}=e,o=i;sg([i,s],"maxPoolGrad");const{filterSize:l,strides:c,pad:f,dimRoundingMode:h}=r,p=gi(o.shape,l,c,1,f,h),g=!0,v=new vp(p,"max",g),x=n.runWebGLProgram(v,[o],o.dtype),b=new w4e(p),w=n.runWebGLProgram(b,[a,x],o.dtype);return n.disposeIntermediateTensorInfo(x),w}const N4e={kernelName:nA,backendName:"webgl",kernelFunc:E4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I4e(t,e,n,r){let a=new vp(n,"max",!1);const i=r.runWebGLProgram(a,[t],"float32");a=new vp(n,"max",!0,!0,e);const s=r.runWebGLProgram(a,[t],"float32");return[i,s]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A4e={kernelName:TW,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:a,strides:i,pad:s,includeBatchInIndex:o}=e,l=n;B(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];B(Er(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const f=gi(r.shape,a,i,c,s),[h,p]=I4e(r,o,f,l);return[h,p]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T4e(t,e,n,r){const a=ve(e),s=ve(t.shape)/a,o=Ae({inputs:{x:t},attrs:{shape:[s,a]},backend:r}),l=uc(o,"float32","mean",r),c=Ae({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $4e={kernelName:Eb,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:a,axis:i}=e,s=n,o=r.shape.length,l=it(i,r.shape);let c=l;const f=cn(c,o),h=f!=null,p=s.shouldExecuteOnCPU([r]),g=[];let v=r;if(h){if(p){const N=s.texData.get(v.dataId).values,I=new Array(o);for(let _=0;_<I.length;_++)I[_]=r.shape[f[_]];const T=r$(N,r.shape,r.dtype,f,I);v=s.makeTensorInfo(I,r.dtype);const R=s.texData.get(v.dataId);R.values=T}else v=S1(r,f,s);g.push(v),c=wn(c.length,o)}dr("sum",c,o);const[x,b]=er(v.shape,c);let w=x;a&&(w=An(x,l));const S=T4e(v,b,w,s);for(const k of g)s.disposeIntermediateTensorInfo(k);return S}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r,o=a.shape.length,l=it(i,a.shape);let c=l;const f=cn(c,o);let h=a;f!=null&&(h=Pr({inputs:{x:a},backend:n,attrs:{perm:f}}),c=wn(c.length,a.shape.length)),dr("min",c,o);const[p,g]=er(h.shape,c),v=ve(g),x=Ae({inputs:{x:h},backend:n,attrs:{shape:[-1,v]}}),b=uc(x,x.dtype,"min",n);let w;if(s){const S=An(p,l);w=Ae({inputs:{x:b},backend:n,attrs:{shape:S}})}else w=Ae({inputs:{x:b},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),f!=null&&n.disposeIntermediateTensorInfo(h),w}const D4e={kernelName:Nb,backendName:"webgl",kernelFunc:O4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R4e=a$+`
  return min(a, b);
`,_4e=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+lc+`
  return result;
`,M4e=fr({opSnippet:R4e,packedOpSnippet:_4e,cpuKernelImpl:bMe}),P4e={kernelName:bm,backendName:"webgl",kernelFunc:M4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L4e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((f,h)=>f[0]+e[h]+f[1]);const a=e.length,i=Lt(a),s=n.map(f=>f[0]).join(","),o=n.map((f,h)=>f[0]+e[h]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),c=r==="reflect"?0:1;if(a===1){this.userCode=`
        int start = ${s};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${s});
      ${i} end = ${i}(${o});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${a}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class z4e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((v,x)=>v[0]+e[x]+v[1]);const a=e.length,i=Lt(a),s=n.map(v=>v[0]).join(","),o=n.map((v,x)=>v[0]+e[x]).join(","),l=_r("rc",a),c=_r("source",a),f=`${l[a-1]} < ${this.outputShape[a-1]}`,h=a===1?"source":`vec2(${c.slice(-2).join()})`,p=r==="reflect"?0:1;let g="";if(a===1){const v=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${p};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${p};
        }
        source -= start;
      `;g=`
        ${i} rc = outputLoc;
        ${v}
        result[0] = getChannel(getX(${c.join()}), ${h});
        ${l[a-1]} += 1;
        if(${f}) {
          ${v}
          result[1] = getChannel(getX(${c.join()}), ${h});
        }
      `}else{const v=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${p}) +
                gte * ((end - 1) * 2 - source + ${p});
        source -= start;
      `;g=`
        ${i} rc = outputLoc;
        ${v}
        result[0] = getChannel(getX(${c.join()}), ${h});
        ${l[a-1]} += 1;
        if(${f}) {
          ${v}
          result[1] = getChannel(getX(${c.join()}), ${h});
        }
        rc = outputLoc;
        ${l[a-2]} += 1;
        if(${l[a-2]} < ${this.outputShape[a-2]}) {
          ${v}
          result[2] = getChannel(getX(${c.join()}), ${h});
          ${l[a-1]} += 1;
          if(${f}) {
            ${v}
            result[3] = getChannel(getX(${c.join()}), ${h});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${s});
      const ${i} end = ${i}(${o});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${g}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F4e=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:a,mode:i}=n,s=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new z4e(r.shape,a,i):new L4e(r.shape,a,i);return e.runWebGLProgram(s,[r],r.dtype)},j4e={kernelName:Ib,backendName:"webgl",kernelFunc:F4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B4e=`if (b == 0.0) return NAN;
  return mod(a, b);`,U4e=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+lc+`
  return result;
`,V4e=fr({opSnippet:B4e,packedOpSnippet:U4e}),W4e={kernelName:wm,backendName:"webgl",kernelFunc:V4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class G4e{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H4e=`
if (a == b) {
  return 1.0;
};
return a / b;`,q4e=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,HK=fr({opSnippet:H4e,packedOpSnippet:q4e,checkOutOfBounds:!0}),K4e={kernelName:im,backendName:"webgl",kernelFunc:HK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t4="return a - b;",qK=fr({opSnippet:t4,packedOpSnippet:t4,supportsComplex:!0,cpuKernelImpl:BMe}),X4e={kernelName:Lm,backendName:"webgl",kernelFunc:qK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KK(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{dim:i}=r,s=it([i],a.shape),o=GK({inputs:{x:a},backend:n,attrs:{reductionIndices:s,keepDims:!1}}),l=An(o.shape,s),c=Ae({inputs:{x:o},backend:n,attrs:{shape:l}}),f=qK({inputs:{a,b:c},backend:n}),h=UK({inputs:{x:f},backend:n}),p=C1({inputs:{x:h},backend:n,attrs:{axis:s,keepDims:!1}}),g=Ae({inputs:{x:p},backend:n,attrs:{shape:l}}),v=HK({inputs:{a:h,b:g},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),v}const Y4e={kernelName:Gb,backendName:"webgl",kernelFunc:KK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z4e(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{numSamples:i,seed:s,normalized:o}=r,l=o?a:KK({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=l.shape[0],f=l.shape[1],h=new G4e(c,f,i),p=[[s]],g=n.runWebGLProgram(h,[l],"int32",p);return o||n.disposeIntermediateTensorInfo(l),g}const Q4e={kernelName:$W,backendName:"webgl",kernelFunc:Z4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J4e=yi+`
  return -x;
`,eje=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function tje(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const i=n.texData.get(r.dataId),[s,o]=SMe(i.values,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,s)}let a;return fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?a=new ol(r.shape,eje):a=new ss(r.shape,J4e),n.runWebGLProgram(a,[r],r.dtype)}const nje={kernelName:Ab,backendName:"webgl",kernelFunc:tje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rje=GA;function aje(t){$a("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l}=r,c=n.readSync(a.dataId),f=n.readSync(i.dataId),{selectedIndices:h}=rje(c,f,s,o,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}const ije={kernelName:aA,backendName:"webgl",kernelFunc:aje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sje=HA;function oje(t){$a("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r,f=n.readSync(a.dataId),h=n.readSync(i.dataId),{selectedIndices:p,validOutputs:g}=sje(f,h,s,o,l,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([g]))]}const lje={kernelName:iA,backendName:"webgl",kernelFunc:oje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uje=qA;function cje(t){$a("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r,f=n.readSync(a.dataId),h=n.readSync(i.dataId),p=s,g=o,v=l,x=c,{selectedIndices:b,selectedScores:w}=uje(f,h,p,g,v,x);return[n.makeTensorInfo([b.length],"int32",new Int32Array(b)),n.makeTensorInfo([w.length],"float32",new Float32Array(w))]}const dje={kernelName:sA,backendName:"webgl",kernelFunc:cje};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fje{constructor(e,n,r,a){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${a}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hje=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:a}=e,{dtype:i,depth:s,onValue:o,offValue:l}=r,c=ve(a.shape),f=new fje(c,s,o,l),h=Ae({inputs:{x:a},backend:n,attrs:{shape:[c]}}),p=n.runWebGLProgram(f,[h],i);n.disposeIntermediateTensorInfo(h);const g=[...a.shape,s],v=Ae({inputs:{x:p},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(p),v},pje={kernelName:Ob,backendName:"webgl",kernelFunc:hje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ky(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const a=lg({inputs:{input:r},backend:n}),i=Ky({inputs:{x:a},backend:n}),s=k1({inputs:{input:r},backend:n}),o=Ky({inputs:{x:s},backend:n}),l=Pl({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),l}else return ug({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const mje={kernelName:Kb,backendName:"webgl",kernelFunc:Ky};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XK(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const a=lg({inputs:{input:r},backend:n}),i=XK({inputs:{x:a},backend:n}),s=k1({inputs:{input:r},backend:n}),o=Ky({inputs:{x:s},backend:n}),l=Pl({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),l}else return ug({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const gje={kernelName:$b,backendName:"webgl",kernelFunc:XK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vje(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r;if(e.length===1)return zE({inputs:{input:e[0]},backend:n,attrs:{dim:a}});const i=e[0].shape,s=e[0].dtype;e.forEach(f=>{II(i,f.shape,"All tensors passed to stack must have matching shapes"),B(s===f.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(f=>{const h=zE({inputs:{input:f},backend:n,attrs:{dim:a}});return o.push(h),h}),c=_K({inputs:l,backend:n,attrs:{axis:a}});return o.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const yje={kernelName:Db,backendName:"webgl",kernelFunc:vje};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xje{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,f)=>c[0]+e[f]+c[1]);const a=e.length,i=Lt(a),s=n.map(c=>c[0]).join(","),o=n.map((c,f)=>c[0]+e[f]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);if(a===1){this.userCode=`
        int start = ${s};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${s});
      ${i} end = ${i}(${o});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bje{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((x,b)=>x[0]+e[b]+x[1]);const a=e.length,i=Lt(a),s=n.map(x=>x[0]).join(","),o=n.map((x,b)=>x[0]+e[b]).join(","),l=_r("rc",a),c=_r("source",a),f=`${l[a-1]} < ${this.outputShape[a-1]}`,h=a===1?"source":`vec2(${c.slice(-2).join()})`,p=[`${i} rc = outputLoc;`,`${l[a-1]} += 1;
       if(${f}) {
      `,a===1?"":`}
       rc = outputLoc;
       ${l[a-2]} += 1;
       if(${l[a-2]} < ${this.outputShape[a-2]}) {`,a===1?"":`  ${l[a-1]} += 1;
         if(${f}) {`],g=a===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let v="";for(let x=0,b=a===1?2:4;x<b;x++)v+=`
        ${p[x]}
        if (${g}) {
          result[${x}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${x}] = getChannel(getX(${c.join()}), ${h});
        }
      `;v+=a===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${s});
      const ${i} end = ${i}(${o});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${v}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YK=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:i,constantValue:s}=r;if(ve(a.shape)===0){const c=i.map((f,h)=>f[0]+a.shape[h]+f[1]);return ug({backend:n,attrs:{shape:c,value:s,dtype:a.dtype}})}const o=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new bje(a.shape,i,s):new xje(a.shape,i,s),l=[[s]];return n.runWebGLProgram(o,[a],a.dtype,l)},wje={kernelName:Rb,backendName:"webgl",kernelFunc:YK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sje=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,Cje=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+lc+`
  return result;
`,kje=fr({opSnippet:Sje,packedOpSnippet:Cje}),Eje={kernelName:Cm,backendName:"webgl",kernelFunc:kje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nje(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r,o=a.shape.length,l=[],c=it(i,a.shape);let f=c;const h=cn(f,o);let p=a;h!=null&&(p=Pr({inputs:{x:a},backend:n,attrs:{perm:h}}),f=wn(f.length,o),l.push(p)),dr("prod",f,o);let g;if(n.shouldExecuteOnCPU([p])){const v=n.texData.get(p.dataId).values,{outVals:x,outShape:b,outDtype:w}=kMe(p.shape,p.dtype,v,f);g=n.makeTensorInfo(b,w,x)}else{const[v,x]=er(p.shape,f),b=ve(x),w=Ae({inputs:{x:p},backend:n,attrs:{shape:[-1,b]}}),S=yA(a.dtype),k=uc(w,S,"prod",n);g=Ae({inputs:{x:k},backend:n,attrs:{shape:v}}),l.push(w),l.push(k)}if(s){l.push(g);const v=An(g.shape,c);g=Ae({inputs:{x:g},backend:n,attrs:{shape:v}})}return l.forEach(v=>n.disposeIntermediateTensorInfo(v)),g}const Ije={kernelName:Mb,backendName:"webgl",kernelFunc:Nje};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aje(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:a,paramsDenseValues:i,indices:s}=e,{outputRaggedRank:o}=r,l=a.map(w=>n.readSync(w.dataId)),c=a.map(w=>w.shape),f=n.readSync(i.dataId),h=n.readSync(s.dataId),[p,g,v]=EMe(l,c,f,i.shape,i.dtype,h,s.shape,o),x=p.map(w=>n.makeTensorInfo([w.length],"int32",w)),b=n.makeTensorInfo(v,i.dtype,g);return x.concat([b])}const Tje={kernelName:OW,backendName:"webgl",kernelFunc:Aje};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $je(t){const{inputs:e,backend:n}=t,{starts:r,limits:a,deltas:i}=e,s=n.readSync(r.dataId),o=n.readSync(a.dataId),l=n.readSync(i.dataId),[c,f]=NMe(s,r.shape,r.dtype,o,a.shape,l,i.shape),h=n.makeTensorInfo([c.length],"int32",c),p=n.makeTensorInfo([f.length],r.dtype,f);return[h,p]}const Oje={kernelName:DW,backendName:"webgl",kernelFunc:$je};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dje(t){const{inputs:e,backend:n,attrs:r}=t,{shape:a,values:i,defaultValue:s,rowPartitionTensors:o}=e,{rowPartitionTypes:l}=r,c=n.readSync(a.dataId),f=n.readSync(i.dataId),h=n.readSync(s.dataId),p=o.map(b=>n.readSync(b.dataId)),g=o.map(b=>b.shape),[v,x]=IMe(c,a.shape,f,i.shape,i.dtype,h,s.shape,p,g,l);return n.makeTensorInfo(v,i.dtype,x)}const Rje={kernelName:RW,backendName:"webgl",kernelFunc:Dje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZK=t=>{const{backend:e,attrs:n}=t,{start:r,stop:a,step:i,dtype:s}=n,o=AMe(r,a,i,s);return e.makeTensorInfo([o.length],s,o)},_je={kernelName:oA,backendName:"webgl",kernelFunc:ZK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mje="return 1.0 / x;",Pje=gt({opSnippet:Mje}),Lje={kernelName:km,backendName:"webgl",kernelFunc:Pje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zje=yi+`
  return (x < 0.0) ? 0.0 : x;
`,Fje=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,jje=gt({opSnippet:zje,packedOpSnippet:Fje}),Bje={kernelName:Em,backendName:"webgl",kernelFunc:jje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uje=yi+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Vje=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Wje=gt({opSnippet:Uje,packedOpSnippet:Vje}),Gje={kernelName:Nm,backendName:"webgl",kernelFunc:Wje};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hje{constructor(e,n,r,a,i){this.variableNames=["A"],this.outputShape=[];const[s,o,l,c]=e;this.outputShape=[s,n,r,c];const f=[a&&n>1?o-1:o,a&&r>1?l-1:l],h=[a&&n>1?n-1:n,a&&r>1?r-1:r];let p;i?p="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${f[0]/h[0]},
          ${f[1]/h[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qje{constructor(e,n,r,a,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[s,o,l,c]=e;this.outputShape=[s,n,r,c];const f=[a&&n>1?o-1:o,a&&r>1?l-1:l],h=[a&&n>1?n-1:n,a&&r>1?r-1:r];let p;i?p="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${f[0]/h[0]},
          ${f[1]/h[1]},
          ${f[1]/h[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kje(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:s,size:o}=r,[l,c]=o,f=fe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new qje(a.shape,l,c,i,s):new Hje(a.shape,l,c,i,s);return n.runWebGLProgram(f,[a],"float32")}const Xje={kernelName:zb,backendName:"webgl",kernelFunc:Kje};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yje{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,a,i]=n,[,s,o]=e,l=[r&&s>1?a-1:a,r&&o>1?i-1:i],c=[r&&s>1?s-1:s,r&&o>1?o-1:o],f=l[0]/c[0],h=l[1]/c[1],p=1/f,g=1/h,v=Math.ceil(p)*2+2,x=Math.ceil(g)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${f});
        const float widthScale = float(${h});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${g});

        const int winHeight = int(${v});
        const int winWidth = int(${x});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${a-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zje(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:s}=r,o=new Yje(i.shape,a.shape,s);return n.runWebGLProgram(o,[i],i.dtype)}const Qje={kernelName:cA,backendName:"webgl",kernelFunc:Zje};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jje{constructor(e,n,r,a,i){this.variableNames=["A"],this.outputShape=[];const[s,o,l,c]=e;this.outputShape=[s,n,r,c];const f=[a&&n>1?o-1:o,a&&r>1?l-1:l],h=[a&&n>1?n-1:n,a&&r>1?r-1:r],p=a?"0.5":"0.0";let g;i?g="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":g="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${f[0]/h[0]},
          ${f[1]/h[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${g};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eBe{constructor(e,n,r,a,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[s,o,l,c]=e;this.outputShape=[s,n,r,c];const f=[a&&n>1?o-1:o,a&&r>1?l-1:l],h=[a&&n>1?n-1:n,a&&r>1?r-1:r],p=a?"0.5":"0.0";let g;i?g="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":g="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${f[0]/h[0]},
          ${f[1]/h[1]},
          ${f[1]/h[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${g};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tBe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:s,size:o}=r,[l,c]=o,f=fe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new eBe(a.shape,l,c,i,s):new Jje(a.shape,l,c,i,s);return n.runWebGLProgram(f,[a],a.dtype)}const nBe={kernelName:Lb,backendName:"webgl",kernelFunc:tBe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rBe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,a,i]=n,[,s,o]=e,l=[r&&s>1?a-1:a,r&&o>1?i-1:i],c=[r&&s>1?s-1:s,r&&o>1?o-1:o],f=l[0]/c[0],h=l[1]/c[1],p=1/f,g=1/h,v=Math.ceil(p)*2+2,x=Math.ceil(g)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${f});
        const float widthScale = float(${h});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${g});

        const int winHeight = int(${v});
        const int winWidth = int(${x});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${a}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aBe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:s}=r,o=new rBe(i.shape,a.shape,s);return n.runWebGLProgram(o,[i],i.dtype)}const iBe={kernelName:uA,backendName:"webgl",kernelFunc:aBe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sBe{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const a=o=>n.indexOf(o)!==-1&&e[o]!==1?`${e[o]} - coords[${o}] - 1`:`coords[${o}]`,i=e.map((o,l)=>a(l)).join(","),s=Lt(r);this.userCode=`
      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oBe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const a=_r("rc",r),i=`${a[r-1]} + 1 < ${this.outputShape[r-1]}`,s=`${a[r-2]} + 1 < ${this.outputShape[r-2]}`,o=Lt(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${o} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(a.slice())};
          if(${i}){
            result.g = ${c(a.slice())};
          }
          if(${s}) {
            result.b = ${f(a.slice())};
            if(${i}) {
              result.a = ${h(a.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(v){return p(v)}function c(v){return v[r-1]="("+v[r-1]+" + 1)",p(v)}function f(v){return v[r-2]="("+v[r-2]+" + 1)",p(v)}function h(v){return v[r-1]="("+v[r-1]+" + 1)",v[r-2]="("+v[r-2]+" + 1)",p(v)}function p(v){const x=e.map((S,k)=>g(k,v)),b=x.join(","),w=x.slice(-2).join(",");return`getChannel(getX(${b}), vec2(${w}))`}function g(v,x){return n.indexOf(v)!==-1&&e[v]!==1?`${e[v]} - ${x[v]} - 1`:`${x[v]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dims:i}=r,s=a.shape.length,o=it(i,a.shape);if(s===0)return ga({inputs:{x:a},backend:n});const l=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new oBe(a.shape,o):new sBe(a.shape,o);return n.runWebGLProgram(l,[a],a.dtype)}const uBe={kernelName:Fb,backendName:"webgl",kernelFunc:lBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cBe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],a=e[2];this.outputShape=e;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${a} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dBe={kernelName:vA,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:a,fillValue:i,center:s}=e,o=n,l=new cBe(r.shape,i),[c,f]=aT(s,r.shape[1],r.shape[2]),h=[[c,f,Math.sin(a),Math.cos(a)]];return o.runWebGLProgram(l,[r],r.dtype,h)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fBe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,hBe=gt({opSnippet:fBe}),pBe={kernelName:Im,backendName:"webgl",kernelFunc:hBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mBe="return inversesqrt(x);",gBe=gt({opSnippet:mBe,cpuKernelImpl:TMe}),vBe={kernelName:Am,backendName:"webgl",kernelFunc:gBe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o${constructor(e,n,r,a,i,s,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=s;const c=Lt(i.length),f=Lt(s.length);let h="";r===1?h="i":r===2&&(h="i, j");const p=`getIndices(${h})`;let g="";a===1?g="i":a===2&&(g="i, coords[1]");const v=`getUpdates(${g})`;let x="";l&&(x="coords[0], coords[1]");const b=`getDefaultValue(${x})`,w=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${f} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${p});
              flattenedIndex += index * ${w};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${v};
              found = true;
            }
          }
          setOutput(mix(${b}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yBe{constructor(e,n,r,a,i,s,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s;const c=Lt(i.length),f=Lt(s.length);let h="";r===1?h="i":r===2&&(h="i, j");const p=`getIndices(${h})`;let g="";a===1?g="i":a===2&&(g="i, coords[1]");const v=`getUpdates(${g})`;let x="";l&&(x="coords[0], coords[1]");const b=`getDefaultValue(${x})`,w=n>1?"strides[j]":"strides",S=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${f} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${p});
              flattenedIndex += index.xz * ${w};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${S};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${v};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${b}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xBe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a,updates:i}=e,{shape:s}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:f,outputSize:h}=rc(i,a,s),p=[h/c,c];if(h===0)return n.makeTensorInfo(s,a.dtype);const g=Ae({inputs:{x:a},backend:n,attrs:{shape:[l,o]}}),v=Ae({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),x=n.makeTensorInfo([],"float32",new Float32Array([0]));let b;fe().getBool("WEBGL_PACK")?b=new yBe(l,o,g.shape.length,v.shape.length,f,p):b=new o$(l,o,g.shape.length,v.shape.length,f,p);const w=n.runWebGLProgram(b,[v,g,x],v.dtype),S=Ae({inputs:{x:w},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(x),S}const bBe={kernelName:_W,backendName:"webgl",kernelFunc:xBe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wBe{constructor(e,n,r,a){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const i="while (left < right) {",s=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,o=fe().getNumber("WEBGL_VERSION")===2?i:s,l=a==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${o}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SBe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:a,values:i}=e,{side:s}=r,o=new wBe(a.shape[0],a.shape[1],i.shape[1],s),l=[[a.shape[1]]];return n.runWebGLProgram(o,[a,i],"int32",l)}const CBe={kernelName:PW,backendName:"webgl",kernelFunc:SBe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kBe{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let a,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",a="resRC";else{const o=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let f=0;f<n.length;f++)c.push(`${o[f]}`),f<e&&l.push(`${o[f]}`);a=l.join(),i=c.join()}const s=Lt(r);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        float cVal = getC(${a});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EBe(t){const{inputs:e,backend:n}=t,{condition:r,t:a,e:i}=e,s=new kBe(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(s,[r,a,i],pa(a.dtype,i.dtype))}const NBe={kernelName:jb,backendName:"webgl",kernelFunc:EBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IBe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${s1};
  float scale = ${o1};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,ABe=gt({opSnippet:IBe}),TBe={kernelName:Tm,backendName:"webgl",kernelFunc:ABe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Be=wf+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,OBe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,DBe=gt({opSnippet:$Be,packedOpSnippet:OBe,cpuKernelImpl:OMe}),RBe={kernelName:Rm,backendName:"webgl",kernelFunc:DBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Be=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,MBe=gt({opSnippet:_Be}),PBe={kernelName:Dm,backendName:"webgl",kernelFunc:MBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LBe=wf+`
  return sin(x);
`,zBe=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${lc}
  return result;
`,FBe=gt({opSnippet:LBe,packedOpSnippet:zBe}),jBe={kernelName:$m,backendName:"webgl",kernelFunc:FBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BBe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,UBe=gt({opSnippet:BBe}),VBe={kernelName:Om,backendName:"webgl",kernelFunc:UBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WBe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,GBe=gt({opSnippet:WBe}),HBe={kernelName:_m,backendName:"webgl",kernelFunc:GBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qBe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,paddings:s}=r;B(a.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const o=i.reduce((w,S)=>w*S),l=[[0,0]];l.push(...s);for(let w=1+i.length;w<a.shape.length;++w)l.push([0,0]);const c=[],f=YK({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),h=qm(f.shape,i,o,!1),p=Km(h.length,i.length,!1),g=Xm(f.shape,i,o,!1),v=Ae({inputs:{x:f},backend:n,attrs:{shape:h}}),x=Pr({inputs:{x:v},backend:n,attrs:{perm:p}}),b=Ae({inputs:{x},backend:n,attrs:{shape:g}});return c.push(f),c.push(v),c.push(x),c.forEach(w=>n.disposeIntermediateTensorInfo(w)),b},KBe={kernelName:Vb,backendName:"webgl",kernelFunc:qBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XBe(t){const{inputs:e,backend:n}=t,{indices:r,values:a,denseShape:i,defaultValue:s}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(a.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${a.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);const o=n.readSync(r.dataId),l=n.readSync(a.dataId),c=n.readSync(i.dataId),f=n.readSync(s.dataId)[0],[h,p,g,v,x]=RMe(o,r.shape,r.dtype,l,a.dtype,c,f);return[n.makeTensorInfo(p,r.dtype,h),n.makeTensorInfo([p[0]],a.dtype,g),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map(b=>Number(b)))),n.makeTensorInfo([x.length],r.dtype,new Int32Array(x))]}const YBe={kernelName:LW,backendName:"webgl",kernelFunc:XBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZBe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:a,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(a.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${a.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const s=Array.from(n.readSync(a.dataId)),o=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),[c,f,h]=_Me(o,r.shape,r.dtype,s,l);return[n.makeTensorInfo(f,r.dtype,c),n.makeTensorInfo([h.length],i.dtype,new Int32Array(h))]}const QBe={kernelName:zW,backendName:"webgl",kernelFunc:ZBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JBe(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);const s=n.readSync(r.dataId),o=n.readSync(a.dataId),l=n.readSync(i.dataId),[c,f]=wK(s,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(f,r.dtype,c)}const eUe={kernelName:FW,backendName:"webgl",kernelFunc:JBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tUe(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);const s=n.readSync(r.dataId),o=n.readSync(a.dataId),l=n.readSync(i.dataId),[c,f]=wK(s,r.shape,r.dtype,o,l);return n.makeTensorInfo(f,r.dtype,c)}const nUe={kernelName:jW,backendName:"webgl",kernelFunc:tUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rUe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:a,sparseValues:i,defaultValue:s}=e,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:f,strides:h,outputSize:p}=rc(i,a,o),g=!1;if(i.dtype==="string"){const w=n.bufferSync(a),S=n.bufferSync(i),k=gl(n.readSync(s.dataId)[0]),N=$Me(w,S,o,p,f,c,l,h,k,g);return n.makeTensorInfo(o,N.dtype,N.values)}const v=new o$(c,l,a.shape.length,i.shape.length,h,[p,1],g),x=n.runWebGLProgram(v,[i,a,s],i.dtype),b=Ae({inputs:{x},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(x),b}const aUe={kernelName:BW,backendName:"webgl",kernelFunc:rUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{numOrSizeSplits:i,axis:s}=r,o=it(s,a.shape)[0],l=xT(a,i,o),c=a.shape.length,f=new Array(c).fill(0),h=a.shape.slice();return l.map(p=>{const g=[...h];g[o]=p;const v=Sf({inputs:{x:a},backend:n,attrs:{begin:f,size:g}});return f[o]+=p,v})}const sUe={kernelName:Wb,backendName:"webgl",kernelFunc:iUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n4="return sqrt(x);",oUe=gt({opSnippet:n4,packedOpSnippet:n4,cpuKernelImpl:MMe}),lUe={kernelName:Mm,backendName:"webgl",kernelFunc:oUe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uUe="return x * x;",cUe=gt({opSnippet:uUe}),dUe={kernelName:dA,backendName:"webgl",kernelFunc:cUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r4="return (a - b) * (a - b);",fUe=fr({opSnippet:r4,packedOpSnippet:r4}),hUe={kernelName:Pm,backendName:"webgl",kernelFunc:fUe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");const i=n.readSync(a.dataId),s=yo(i),o=PMe(s,"string",r);return n.makeTensorInfo(a.shape,"string",o)}const mUe={kernelName:fA,backendName:"webgl",kernelFunc:pUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gUe({inputs:t,attrs:e,backend:n}){const{x:r}=t,a=yi+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,i=new ss(r.shape,a);return n.runWebGLProgram(i,[r],r.dtype)}const vUe={kernelName:Bm,backendName:"webgl",kernelFunc:gUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yUe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const a=r.length,i=Lt(r.length),s=Lt(r.length);let o="";if(a===1)o="coords * strides + begin";else{let l=0;o=r.map((c,f)=>(l++,r.length===1?`coords * strides[${f}] + begin[${f}]`:`coords[${l-1}] * strides[${f}] + begin[${f}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${n});

      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,end:s,strides:o,beginMask:l,endMask:c,ellipsisMask:f,newAxisMask:h,shrinkAxisMask:p}=r,{finalShapeSparse:g,finalShape:v,isIdentity:x,sliceDim0:b,isSimpleSlice:w,begin:S,end:k,strides:N}=tT(a.shape,i,s,o,l,c,f,h,p);let I;if(x)I=Ae({inputs:{x:a},backend:n,attrs:{shape:v}});else if(b||w){B(a.shape.length>=1,()=>`Input must have rank at least 1, got: ${a.shape.length}`);const R=QA(S,k,N),_=Sf({inputs:{x:a},backend:n,attrs:{begin:S,size:R}});I=Ae({inputs:{x:_},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(_)}else if(n.shouldExecuteOnCPU([a])){const _=n.readSync(a.dataId),M=at(a.shape,a.dtype,_),P=LMe(g,M,N,S);I=n.makeTensorInfo(v,a.dtype,P.values)}else{const _=new yUe(S,N,g);I=n.runWebGLProgram(_,[a],a.dtype)}const T=Ae({inputs:{x:I},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(I),T}const bUe={kernelName:hA,backendName:"webgl",kernelFunc:xUe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wUe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:a,nGramWidths:i,leftPad:s,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:f,dataSplits:h}=e,p=n.readSync(f.dataId),g=n.readSync(h.dataId),[v,x]=zMe(p,g,a,i,s,o,l,c);return[n.makeTensorInfo([v.length],"string",v),n.makeTensorInfo(h.shape,"int32",x)]}const SUe={kernelName:UW,backendName:"webgl",kernelFunc:wUe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CUe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:a}=r,{input:i,delimiter:s}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);const o=n.readSync(i.dataId),l=n.readSync(s.dataId)[0],[c,f,h]=FMe(o,l,a),p=f.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",f),n.makeTensorInfo([2],"int32",new Int32Array(h))]}const kUe={kernelName:VW,backendName:"webgl",kernelFunc:CUe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EUe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:a}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const s=n.readSync(i.dataId),o=jMe(s,a);return n.makeTensorInfo(i.shape,"int32",o)}const NUe={kernelName:WW,backendName:"webgl",kernelFunc:EUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IUe="return tan(x);",AUe=gt({opSnippet:IUe}),TUe={kernelName:zm,backendName:"webgl",kernelFunc:AUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ue=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,OUe=gt({opSnippet:$Ue}),DUe={kernelName:Fm,backendName:"webgl",kernelFunc:OUe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RUe(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:a,indices:i,updates:s}=e,{sliceRank:o,numUpdates:l,sliceSize:c,strides:f,outputSize:h}=rc(s,i,a.shape),p=[h/c,c];if(h===0)return n.makeTensorInfo(a.shape,i.dtype);const g=Ae({inputs:{x:i},backend:n,attrs:{shape:[l,o]}}),v=Ae({inputs:{x:s},backend:n,attrs:{shape:[l,c]}}),x=Ae({inputs:{x:a},backend:n,attrs:{shape:p}}),b=new o$(l,o,g.shape.length,v.shape.length,f,p,!1,!0),w=n.runWebGLProgram(b,[v,g,x],x.dtype),S=Ae({inputs:{x:w},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),S}const _Ue={kernelName:MW,backendName:"webgl",kernelFunc:RUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MUe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let s=0;s<r.length;s++)r[s]=e[s]*n[s];this.outputShape=r,this.rank=r.length;const a=Lt(this.rank),i=PUe(e);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function PUe(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let a=0;a<t.length;a++)r.push(`imod(${n[a]}, ${t[a]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QK(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reps:i}=r;if(a.dtype==="string"||a.shape.length>5){const l=n.readSync(a.dataId),c=a.dtype==="string"?l.map(p=>gl(p)):l,f=at(a.shape,a.dtype,c),h=UMe(f,i);return n.makeTensorInfo(h.shape,h.dtype,h.values)}const s=new MUe(a.shape,i);return n.runWebGLProgram(s,[a],a.dtype)}const LUe={kernelName:jm,backendName:"webgl",kernelFunc:QK};class zUe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class FUe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function au(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function a4(t){let e=1;for(;e<t;)e*=2;return e}function jUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{k:i,sorted:s}=r,o=fe().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=fe().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=a.shape,f=c[c.length-1];if(n.shouldExecuteOnCPU([a])||f<o||i>l){const P=n.readSync(a.dataId),[$,z]=VMe(P,c,a.dtype,i,s);return[n.makeTensorInfo($.shape,$.dtype,$.values),n.makeTensorInfo(z.shape,z.dtype,z.values)]}if(i===0)return c[c.length-1]=0,[n.makeTensorInfo(c,a.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(f===1)return[a,ug({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const h=n.texData.get(a.dataId),p=h!==null&&h.isPacked,g=p?n.unpackTensor(a):a,x=ve(c)/f,b=Ae({inputs:{x:g},attrs:{shape:[x,f]},backend:n});p&&au(n,g);const w=a4(i),S=a4(f);let k=null;const N=()=>k===null?[b,b]:[b,k],I=(P,$,z)=>{const W=N(),H=new zUe(z),F=[[f],[k===null?1:0],[Number.NEGATIVE_INFINITY],[P],[$]],V=k;k=n.runWebGLProgram(H,W,"int32",F),au(n,V)};for(let P=1;P<w;P*=2){const $=P*2;for(let z=P;z>=1;z/=2)I($,z,[x,S])}for(let P=S;P>w;P/=2){const $=N(),z=new FUe([x,P/2]),H=[[f],[k===null?1:0],[w]],G=k;k=n.runWebGLProgram(z,$,"int32",H),au(n,G);const F=w/2,V=F*2;for(let U=F;U>=1;U/=2)I(V,U,k.shape)}let T=k;k=Sf({inputs:{x:k},backend:n,attrs:{begin:0,size:[x,i]}}),au(n,T);let R=WK({inputs:{x:b,indices:k},backend:n,attrs:{axis:1,batchDims:1}});au(n,b);const _=c.slice(0,-1);_.push(i),T=k,k=Ae({inputs:{x:k},attrs:{shape:_},backend:n}),au(n,T);const M=R;return R=Ae({inputs:{x:R},attrs:{shape:_},backend:n}),au(n,M),[R,k]}const BUe={kernelName:pA,backendName:"webgl",kernelFunc:jUe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UUe{constructor(e,n,r,a,i,s){this.variableNames=["Image","Transforms"],this.outputShape=s;const o=r==="nearest"?1:2;let l;switch(a){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${o} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VUe(t){const{inputs:e,backend:n,attrs:r}=t,{image:a,transforms:i}=e,{interpolation:s,fillMode:o,fillValue:l,outputShape:c}=r,[f,h,p,g]=a.shape,[v,x]=c??[h,p],b=[f,v,x,g],w=new UUe(h,p,s,o,l,b);return n.runWebGLProgram(w,[a,i],"float32")}const WUe={kernelName:mA,backendName:"webgl",kernelFunc:VUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GUe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:a}=n,{x:i}=e;sg(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const s=r.readSync(i.dataId),{outputValues:o,outputShape:l,indices:c}=WMe(s,a,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}const HUe={kernelName:gA,backendName:"webgl",kernelFunc:GUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qUe(t){const{inputs:e,backend:n,attrs:r}=t,{value:a}=e;let{axis:i}=r;i<0&&(i+=a.shape.length);const s=a,o=s.shape.length,l=a.shape[i],c=new Array(o-1);let f=0;for(let x=0;x<o;x++)x!==i&&(c[f++]=s.shape[x]);const h=[],p=new Array(o).fill(0),g=s.shape.slice();g[i]=1;const v=new Array(l);for(let x=0;x<v.length;x++){p[i]=x;const b=Sf({inputs:{x:s},backend:n,attrs:{begin:p,size:g}}),w=Ae({inputs:{x:b},backend:n,attrs:{shape:c}});v[x]=w,h.push(b)}return h.forEach(x=>n.disposeIntermediateTensorInfo(x)),v}const KUe={kernelName:Hb,backendName:"webgl",kernelFunc:qUe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XUe{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,a=e.batchSize,i=e.inSize,s=e.numSegments,o=s*Math.ceil(i/r);this.outputShape=[a,o];const l="0.0",c="sumValue",f=Math.floor(r/4)*4,h=r%4,p=`
        sumValue += dot(values, segFilter);
    `;let g="";i%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let v="";i%r>0&&(v=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${g}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${v}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${s})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${s})));

        float sumValue = 0.0;

        for (int i = 0; i < ${f}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${p}
        }

        int inIdx = inOffset + ${f};
        if (${h===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${p}
        } else if (${h===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${p}
        } else if (${h===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${p}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,segmentIds:i}=e,{numSegments:s}=r,o=a.shape.length,l=[];let c=0;const f=cn([c],o);let h=a;f!=null&&(h=Pr({inputs:{x:a},backend:n,attrs:{perm:f}}),l.push(h),c=wn(1,o)[0]);const p=RG(h.shape,c,s),g=ve([h.shape[c]]),v=Ae({inputs:{x:h},backend:n,attrs:{shape:[-1,g]}});l.push(v);const x=yA(a.dtype),b=(N,I,T,R,_)=>{const M=N.shape[0],P=N.shape[1],$=DG(P,_),z={windowSize:$,inSize:P,batchSize:M,numSegments:_},W=new XUe(z,I),H=n.compileAndRun(W,[N,T],R);if(l.push(H),H.shape[1]===_)return H;const G=ZK({backend:n,attrs:{start:0,stop:_,step:1,dtype:"float32"}}),F=QK({inputs:{x:G},backend:n,attrs:{reps:[P/$]}});return l.push(G),l.push(F),b(H,I,F,R,_)},w=b(v,"unsortedSegmentSum",i,x,s),S=Ae({inputs:{x:w},backend:n,attrs:{shape:p}});let k=S;if(f!=null){l.push(S);const N=$l(f);k=Pr({inputs:{x:k},backend:n,attrs:{perm:N}})}return l.forEach(N=>n.disposeIntermediateTensorInfo(N)),k}const ZUe={kernelName:qb,backendName:"webgl",kernelFunc:YUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QUe=[MPe,LPe,jPe,VPe,GPe,KPe,YPe,QPe,n3e,a3e,o3e,c3e,h3e,v3e,b3e,S3e,k3e,A3e,$3e,D3e,P3e,V3e,G3e,X3e,Z3e,rLe,iLe,uLe,yPe,fLe,vLe,wLe,ILe,$Le,DLe,_Le,PLe,jLe,VLe,HLe,KLe,YLe,QLe,tze,rze,oze,uze,fze,mze,vze,wze,Eze,Tze,Dze,Mze,Pze,zze,jze,Uze,Wze,Hze,Yze,Jze,nFe,aFe,oFe,cFe,pFe,yFe,vPe,bFe,mLe,CFe,NFe,TFe,bPe,RFe,LFe,FFe,VFe,HFe,YFe,JFe,r4e,o4e,c4e,f4e,g4e,y4e,b4e,k4e,N4e,A4e,$4e,D4e,P4e,j4e,W4e,Q4e,CPe,nje,ije,lje,dje,J3e,pje,gje,yje,wje,Eje,SPe,Ije,Tje,Oje,Rje,_je,eLe,K4e,Lje,Bje,Gje,EPe,Xje,Qje,nBe,iBe,uBe,dBe,pBe,vBe,bBe,CBe,NBe,TBe,RBe,PBe,jBe,VBe,B3e,Y4e,HBe,KBe,YBe,QBe,eUe,nUe,aUe,sUe,lUe,dUe,hUe,mUe,vUe,bUe,SUe,kUe,NUe,X4e,DPe,TUe,DUe,_Ue,LUe,BUe,WUe,RPe,HUe,KUe,ZUe,mje];for(const t of QUe)HW(t);const JUe=`import * as tf from '@tensorflow/tfjs';

// Motor de Inferencia Finneura v2.0
export const trainWithVisualFeedback = async (samples, onUpdate) => {
  const model = tf.sequential();
  model.add(tf.layers.dense({ units: 32, activation: 'relu', inputShape: [3] }));
  model.add(tf.layers.dense({ units: 16, activation: 'relu' }));
  model.add(tf.layers.dense({ units: 1 }));

  model.compile({ 
    loss: 'meanSquaredError', 
    optimizer: tf.train.adam(0.015) 
  });

  await model.fit(xs, ys, {
    epochs: 200,
    callbacks: {
      onEpochEnd: (epoch, logs) => {
        // Reportar progreso al visualizador
        onUpdate(epoch, logs.loss);
      }
    }
  });
};`,e5e=()=>{const[t,e]=A.useState(!1),[n,r]=A.useState(0),[a,i]=A.useState(null),[s,o]=A.useState([]),[l,c]=A.useState([]),f=A.useRef(null),[h,p]=A.useState(["[SYSTEM] Motor inicializado. Esperando datos..."]),g=b=>{p(w=>[...w.slice(-4),`[${new Date().toLocaleTimeString()}] ${b}`])},v=A.useCallback(()=>{const b=[],w=40+Math.random()*20,S=.4;for(let k=0;k<50;k++){const N=k+1,I=w+S*N,T=15*Math.sin(N*(Math.PI/3.5)),R=(Math.random()-.5)*12;let _=0,M=!1;Math.random()>.92&&(_=Math.random()>.5?45:-35,M=!0),b.push({day:N,spent:Math.max(0,Number((I+T+R+_).toFixed(2))),isAnomaly:M})}c(b),o([]),i(null),r(0),p(["[DATA] Nuevo escenario generado (50 puntos).","[READY] Esperando comando de entrenamiento..."])},[]);A.useEffect(()=>{v()},[v]);const x=async()=>{if(l.length===0)return;e(!0),o([]),g("Iniciando compilacin del modelo...");const b=60,w=Math.max(...l.map(_=>_.spent))*1.5,S=l.map(_=>({d:_.day/b,d2:Math.pow(_.day/b,2),sin:Math.sin(_.day*(Math.PI/3.5)),s:_.spent/w})),k=b8();k.add(gd({units:32,activation:"relu",inputShape:[3]})),k.add(gd({units:16,activation:"relu"})),k.add(gd({units:1})),k.compile({loss:"meanSquaredError",optimizer:tl.adam(.015)});const N=is(S.map(_=>[_.d,_.d2,_.sin])),I=is(S.map(_=>[_.s])),T=Array.from({length:10},(_,M)=>51+M),R=is(T.map(_=>[_/b,Math.pow(_/b,2),Math.sin(_*(Math.PI/3.5))]));try{await k.fit(N,I,{epochs:200,batchSize:16,verbose:0,callbacks:{onEpochEnd:async(_,M)=>{if(r(_+1),i((M==null?void 0:M.loss)||0),_%20===0){const P=k.predict(R),$=await P.data();o(Array.from($).map((z,W)=>({day:51+W,forecast:Number((z*w).toFixed(2))}))),P.dispose(),g(`Epoch ${_+1}: Error reducido a ${M==null?void 0:M.loss.toFixed(6)}`)}}}}),g("Entrenamiento finalizado exitosamente.")}catch{g("ERROR en el entrenamiento.")}finally{e(!1),N.dispose(),I.dispose(),R.dispose(),k.dispose()}};return O.jsx(af,{title:"Ep 2: El Adivino (Neural Engine)",description:"Observa cmo la red neuronal ajusta sus conexiones en tiempo real para predecir tus finanzas. Vers la lnea de prediccin 'aprender' y ajustarse a medida que el entrenamiento avanza.",codeSnippet:JUe,children:O.jsxs("div",{className:"space-y-6",children:[O.jsxs("div",{className:"bg-slate-950 p-6 rounded-[2rem] border border-slate-800 shadow-2xl relative overflow-hidden",children:[O.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 via-emerald-500 to-blue-500"}),O.jsxs("div",{className:"flex items-center justify-between mb-8 relative z-10",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("div",{className:"p-2 bg-emerald-500/10 rounded-lg",children:O.jsx(Z2,{size:18,className:tn("text-emerald-500",t&&"animate-pulse")})}),O.jsxs("div",{children:[O.jsx("h3",{className:"font-bold text-slate-200 text-sm tracking-tight",children:"Evolucin de Aprendizaje"}),O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),O.jsxs("span",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:["Epoch ",n,"/200"]})]})]})]}),a!==null&&O.jsxs("div",{className:"px-3 py-1 bg-slate-900 border border-slate-800 rounded-full flex items-center gap-3",children:[O.jsx("span",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-tighter",children:"Current Loss"}),O.jsx("span",{className:"text-xs font-mono font-bold text-emerald-400",children:a.toFixed(6)})]})]}),O.jsx("div",{className:"h-72 w-full",children:O.jsx(Vd,{width:"100%",height:"100%",children:O.jsxs(mW,{children:[O.jsx(nf,{strokeDasharray:"3 3",stroke:"#1e293b",vertical:!1,opacity:.3}),O.jsx(Qu,{dataKey:"day",stroke:"#475569",fontSize:10,tickLine:!1,axisLine:!1,type:"number",domain:[0,60]}),O.jsx(Ju,{stroke:"#475569",fontSize:10,tickLine:!1,axisLine:!1}),O.jsx(Up,{contentStyle:{backgroundColor:"#020617",border:"1px solid #1e293b",borderRadius:"16px"}}),O.jsx(gu,{name:"Datos Histricos",data:l,dataKey:"spent",fill:"#3b82f6",fillOpacity:.4,stroke:"none"}),O.jsx(Kx,{name:"IA Aprendiendo...",data:s,type:"monotone",dataKey:"forecast",stroke:"#10b981",strokeWidth:4,dot:{r:3,fill:"#10b981"},isAnimationActive:!1}),O.jsx(ap,{x:50,stroke:"#334155",strokeDasharray:"3 3"})]})})})]}),O.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[O.jsxs("div",{className:"space-y-4",children:[O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsxs("h4",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center gap-2",children:[O.jsx(aY,{size:14,className:"text-emerald-500"}),"Neural Architecture"]}),O.jsx("span",{className:"text-[10px] text-emerald-500 font-mono bg-emerald-500/10 px-2 py-0.5 rounded",children:t?"ACTIVE_PROCESSING":"IDLE"})]}),O.jsx(gW,{isTraining:t})]}),O.jsxs("div",{className:"space-y-4",children:[O.jsxs("h4",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center gap-2",children:[O.jsx(UY,{size:14,className:"text-blue-500"}),"Engine Telemetry"]}),O.jsxs("div",{ref:f,className:"bg-slate-950 border border-slate-800 rounded-2xl h-[200px] p-4 font-mono text-[10px] text-slate-400 overflow-hidden flex flex-col gap-2",children:[h.map((b,w)=>O.jsx("div",{className:tn("border-l-2 pl-2 transition-all",b.includes("ERROR")?"border-rose-500 text-rose-400":b.includes("Epoch")?"border-emerald-500/50":"border-slate-800"),children:b},w)),t&&O.jsxs("div",{className:"flex items-center gap-2 animate-pulse text-emerald-500",children:[O.jsx("span",{className:"w-1 h-3 bg-emerald-500"}),"Sincronizando pesos sinpticos..."]})]})]})]}),O.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-8 rounded-3xl flex flex-col md:flex-row gap-6 items-center",children:[O.jsxs("div",{className:"flex-1 space-y-2",children:[O.jsxs("h4",{className:"text-lg font-bold text-white flex items-center gap-2",children:[O.jsx(d4,{size:20,className:"text-blue-500"}),"Control Central"]}),O.jsx("p",{className:"text-xs text-slate-400",children:"Pulsa 'Entrenar' para ver cmo la red ajusta sus neuronas para seguir el patrn cclico de gastos."})]}),O.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full md:w-auto",children:[O.jsxs("button",{onClick:v,disabled:t,className:"flex items-center justify-center gap-3 px-6 py-3 bg-slate-800 text-slate-200 text-xs font-bold rounded-xl hover:bg-slate-700 transition-all border border-slate-700 disabled:opacity-50 group",children:[O.jsx(m4,{size:14,className:t?"":"group-hover:rotate-180 transition-transform duration-500"}),"Nuevo Escenario"]}),O.jsxs("button",{onClick:x,disabled:t,className:"flex items-center justify-center gap-3 px-8 py-4 bg-emerald-600 text-white font-black text-sm rounded-xl hover:bg-emerald-500 transition-all shadow-xl shadow-emerald-900/20 disabled:opacity-50",children:[t?O.jsx(Z2,{className:"animate-spin",size:18}):O.jsx(xp,{size:18}),t?"Entrenando Red...":"Iniciar Entrenamiento"]})]})]}),O.jsxs("div",{className:"flex items-start gap-4 p-5 bg-blue-500/5 border border-blue-500/10 rounded-2xl",children:[O.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-500/20 flex items-center justify-center shrink-0",children:O.jsx(GX,{size:20,className:"text-blue-400"})}),O.jsxs("div",{children:[O.jsx("h5",{className:"text-xs font-bold text-blue-400 uppercase mb-1",children:"Mecnica del Aprendizaje"}),O.jsxs("p",{className:"text-[11px] text-blue-200/60 leading-relaxed",children:["En cada ",O.jsx("strong",{children:"Epoch"}),", el visualizador muestra cmo los pesos (lneas) se iluminan. Esto representa el proceso de ",O.jsx("em",{children:"Backpropagation"}),": la red calcula el error entre su prediccin y el dato real, y viaja hacia atrs para corregir las conexiones."]})]})]})]})})},t5e=`import * as tf from '@tensorflow/tfjs';

// Motor de Inferencia Detective v3.5
// Aprende fronteras no lineales en espacios 2D/3D
export const trainDetective = async (data, onUpdate) => {
  const model = tf.sequential();
  model.add(tf.layers.dense({ units: 24, activation: 'relu', inputShape: [3] }));
  model.add(tf.layers.dense({ units: 12, activation: 'relu' }));
  model.add(tf.layers.dense({ units: 1, activation: 'sigmoid' }));

  model.compile({ 
    optimizer: tf.train.adam(0.01),
    loss: 'binaryCrossentropy' 
  });

  await model.fit(xs, ys, { 
    epochs: 100,
    callbacks: { onEpochEnd: onUpdate }
  });
};`,n5e=()=>{const[t,e]=A.useState(!1),[n,r]=A.useState(null),[a,i]=A.useState(.5),[s,o]=A.useState(["[SYSTEM] Detective en modo pasivo.","[WARNING] Sin entrenamiento el radar es ciego."]),[l,c]=A.useState({monto:150,hora:14,esExtranjera:0}),[f,h]=A.useState([]),[p,g]=A.useState([]),v=I=>{o(T=>[...T.slice(-5),`[${new Date().toLocaleTimeString()}] ${I}`])},x=A.useCallback(()=>{const I=[];for(let T=0;T<30;T++)I.push({x:100+Math.random()*600,y:9+Math.random()*10,isFraud:!1});for(let T=0;T<10;T++)I.push({x:1300+Math.random()*500,y:1+Math.random()*4,isFraud:!0});h(I),g([]),r(null),i(.5),v("Base de datos reiniciada. El detective ha olvidado todo.")},[]);A.useEffect(()=>{x()},[x]);const b=I=>{h(T=>[...T,{x:l.monto,y:l.hora,isFraud:I}]),v(`Transaccin ${I?"FRAUDULENTA":"LEGTIMA"} aadida al set.`)},w=async()=>{if(f.length<5)return;e(!0),v("Iniciando entrenamiento profundo...");const I=b8();I.add(gd({units:24,activation:"relu",inputShape:[3]})),I.add(gd({units:12,activation:"relu"})),I.add(gd({units:1,activation:"sigmoid"})),I.compile({optimizer:tl.adam(.01),loss:"binaryCrossentropy"});const T=is(f.map(G=>[G.x/2e3,G.y/24,l.esExtranjera])),R=is(f.map(G=>[G.isFraud?1:0]));await I.fit(T,R,{epochs:150,verbose:0,callbacks:{onEpochEnd:G=>{G%30===0&&v(`Aprendiendo fronteras... Epoch ${G}`)}}});const _=[],M=200,P=3,$=[];for(let G=0;G<=2e3;G+=M)for(let F=0;F<=24;F+=P)$.push([G/2e3,F/24,l.esExtranjera]),_.push({x:G,y:F,risk:0});const z=is($),W=I.predict(z),H=await W.data();g(_.map((G,F)=>({...G,risk:H[F]}))),r(I),e(!1),v("SISTEMA ACTIVO. El detective ahora reconoce patrones."),T.dispose(),R.dispose(),z.dispose(),W.dispose()},S=async()=>{if(!n)return;const I=is([[l.monto/2e3,l.hora/24,l.esExtranjera]]),T=n.predict(I),R=(await T.data())[0];i(R),I.dispose(),T.dispose()};A.useEffect(()=>{n&&S()},[l,n]);const k=a>.6,N=!n;return O.jsxs(af,{title:"Ep 3: El Detective (Decision Boundaries)",description:"Nivel 2: Ya no usamos lneas rectas. La IA crea un mapa mental de seguridad. Entrena al detective y observa cmo la zona roja (fraude) aparece dinmicamente segn tus datos.",codeSnippet:t5e,children:[O.jsxs("div",{className:"space-y-6",children:[O.jsxs("div",{className:"bg-slate-950 p-6 rounded-[2.5rem] border border-slate-800 shadow-2xl relative overflow-hidden",children:[O.jsx("div",{className:tn("absolute top-0 left-0 w-full h-1 transition-colors duration-500",N?"bg-slate-700":k?"bg-rose-500":"bg-emerald-500")}),O.jsxs("div",{className:"flex items-center justify-between mb-6 relative z-10",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("div",{className:tn("p-2 rounded-xl transition-all duration-500",N?"bg-slate-800 text-slate-500":k?"bg-rose-500/20 text-rose-500":"bg-emerald-500/20 text-emerald-500"),children:N?O.jsx(v_,{size:20}):k?O.jsx(g4,{size:20}):O.jsx(v4,{size:20})}),O.jsxs("div",{children:[O.jsx("h3",{className:"font-bold text-slate-200 text-sm tracking-tight",children:"IA Decision Boundary"}),O.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:"Visualizando el 'Cerebro' del Detective"})]})]}),O.jsx("div",{className:"flex items-center gap-4",children:O.jsxs("div",{className:"text-right",children:[O.jsx("p",{className:"text-[9px] text-slate-500 font-bold uppercase",children:"Prediccin de Riesgo"}),O.jsx("p",{className:tn("text-xl font-black font-mono transition-colors",N?"text-slate-600":k?"text-rose-500":"text-emerald-500"),children:N?"---":`${(a*100).toFixed(1)}%`})]})})]}),O.jsxs("div",{className:"h-72 w-full relative",children:[O.jsx(Vd,{width:"100%",height:"100%",children:O.jsxs(W0e,{margin:{top:10,right:10,bottom:10,left:10},children:[O.jsx(nf,{strokeDasharray:"3 3",stroke:"#1e293b",opacity:.1}),O.jsx(Qu,{type:"number",dataKey:"x",stroke:"#475569",fontSize:10,domain:[0,2e3],axisLine:!1,tickLine:!1}),O.jsx(Ju,{type:"number",dataKey:"y",stroke:"#475569",fontSize:10,domain:[0,24],axisLine:!1,tickLine:!1}),O.jsx(Up,{cursor:{strokeDasharray:"3 3"},contentStyle:{backgroundColor:"#020617",border:"1px solid #1e293b",borderRadius:"12px"}}),O.jsx(gu,{name:"Background",data:p,children:p.map((I,T)=>O.jsx(Ou,{fill:I.risk>.5?"#f43f5e":"#10b981",fillOpacity:I.risk>.5?I.risk*.15:(1-I.risk)*.1},`bg-${T}`))}),O.jsx(gu,{name:"Legtimos",data:f.filter(I=>!I.isFraud),fill:"#3b82f6",fillOpacity:.6,shape:"circle"}),O.jsx(gu,{name:"Fraude",data:f.filter(I=>I.isFraud),fill:"#f43f5e",fillOpacity:.8,shape:"cross"}),O.jsx(gu,{name:"LIVE_SCAN",data:[{x:l.monto,y:l.hora}],children:O.jsx(Ou,{fill:N?"#475569":k?"#f43f5e":"#10b981",className:tn("animate-pulse stroke-white stroke-2"),style:{r:8}})})]})}),N&&O.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-950/40 backdrop-blur-[1px] pointer-events-none rounded-2xl",children:O.jsxs("div",{className:"bg-slate-900/90 border border-slate-700 px-4 py-2 rounded-full text-[10px] font-bold text-slate-400 tracking-widest uppercase flex items-center gap-2 shadow-2xl",children:[O.jsx(JY,{size:12,className:"text-amber-500"}),"Mapa No Entrenado"]})})]})]}),O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[O.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-6 rounded-[2rem] space-y-6",children:[O.jsx("div",{className:"flex items-center justify-between",children:O.jsxs("h4",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center gap-2",children:[O.jsx(f4,{size:14,className:"text-emerald-500"}),"Manual Training Injector"]})}),O.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[O.jsxs("div",{className:"space-y-1",children:[O.jsx("label",{className:"text-[9px] font-black text-slate-500 uppercase",children:"Gasto ($)"}),O.jsx("input",{type:"number",value:l.monto,onChange:I=>c({...l,monto:Number(I.target.value)}),className:"w-full bg-slate-950 border border-slate-800 rounded-xl p-3 text-white text-sm focus:ring-1 focus:ring-emerald-500 outline-none"})]}),O.jsxs("div",{className:"space-y-1",children:[O.jsx("label",{className:"text-[9px] font-black text-slate-500 uppercase",children:"Hora (0-24)"}),O.jsx("input",{type:"number",value:l.hora,onChange:I=>c({...l,hora:Number(I.target.value)}),className:"w-full bg-slate-950 border border-slate-800 rounded-xl p-3 text-white text-sm focus:ring-1 focus:ring-emerald-500 outline-none"})]})]}),O.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[O.jsxs("button",{onClick:()=>b(!1),className:"flex items-center justify-center gap-2 py-3 bg-blue-500/10 hover:bg-blue-500/20 text-blue-400 border border-blue-500/20 rounded-xl text-[10px] font-bold uppercase transition-all",children:[O.jsx(g_,{size:14})," Marcar Seguro"]}),O.jsxs("button",{onClick:()=>b(!0),className:"flex items-center justify-center gap-2 py-3 bg-rose-500/10 hover:bg-rose-500/20 text-rose-400 border border-rose-500/20 rounded-xl text-[10px] font-bold uppercase transition-all",children:[O.jsx(g_,{size:14})," Marcar Fraude"]})]})]}),O.jsxs("div",{className:"space-y-4",children:[O.jsxs("div",{className:"bg-slate-950 border border-slate-800 rounded-[2rem] h-[140px] p-4 font-mono text-[10px] text-slate-400 overflow-hidden flex flex-col gap-2",children:[O.jsxs("div",{className:"flex items-center gap-2 border-b border-slate-800 pb-2 mb-1",children:[O.jsx(oY,{size:12,className:"text-blue-500"}),O.jsxs("span",{className:"font-bold text-slate-200",children:["DATASET: ",f.length," REGISTROS"]})]}),s.map((I,T)=>O.jsx("div",{className:tn("border-l-2 pl-2 transition-all",I.includes("FRAUDULENTA")||I.includes("ALERTA")?"border-rose-500 text-rose-400":"border-slate-800"),children:I},T))]}),O.jsx(gW,{isTraining:t})]})]}),O.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-8 rounded-[2.5rem] flex flex-col lg:flex-row gap-6 items-center",children:[O.jsxs("div",{className:"flex-1 space-y-2 text-center lg:text-left",children:[O.jsxs("h4",{className:"text-xl font-black text-white flex items-center justify-center lg:justify-start gap-2",children:[O.jsx(xp,{size:22,className:"text-emerald-500 fill-emerald-500"}),"Entrenar Detective"]}),O.jsx("p",{className:"text-xs text-slate-400 max-w-md",children:"La IA procesar tus etiquetas manuales para crear un mapa de riesgo. A mayor cantidad de datos, ms precisa ser la frontera de seguridad."})]}),O.jsxs("div",{className:"flex gap-3 w-full lg:w-auto",children:[O.jsxs("button",{onClick:x,disabled:t,className:"flex-1 lg:flex-none flex items-center justify-center gap-3 px-6 py-4 bg-slate-800 text-slate-300 text-xs font-bold rounded-2xl hover:bg-slate-700 transition-all border border-slate-700",children:[O.jsx(m4,{size:14})," Reset"]}),O.jsxs("button",{onClick:w,disabled:t||f.length<5,className:"flex-1 lg:flex-none flex items-center justify-center gap-3 px-10 py-4 bg-emerald-600 text-white font-black text-sm rounded-2xl hover:bg-emerald-500 transition-all shadow-xl shadow-emerald-900/20 disabled:opacity-30",children:[t?O.jsx(Z2,{className:"animate-spin",size:18}):O.jsx(v_,{size:18}),t?"Computando...":"Entrenar Ahora"]})]})]})]}),O.jsx("style",{children:`
        @keyframes scan {
          0% { top: 0% }
          50% { top: 100% }
          100% { top: 0% }
        }
      `})]})},r5e=`import { pipeline } from '@xenova/transformers';

/**
 * Motor Zero-Shot: Entiende conceptos sin ejemplos previos.
 * Compara el 'vector semntico' del texto con las etiquetas.
 */
export const classify = async (text, labels) => {
  const model = await pipeline('zero-shot-classification', 'Xenova/mobilebert');
  return await model(text, labels);
};`,a5e=["Comida","Transporte","Suscripciones","Salud"],i4=["UBER * TRIP 88472 SAN FRANCISCO","WHOLEFOODS MARKET - ORGANIC PURCHASE","NETFLIX PREMIUM FAMILY PLAN","PHARMACY CVS - MEDICINE","TESLA SUPERCHARGER - ENERGY","APPLE.COM/BILL - ICLOUD STORAGE"],i5e=()=>{const[t,e]=A.useState(i4[0]),[n,r]=A.useState(!1),[a,i]=A.useState(a5e),[s,o]=A.useState(""),[l,c]=A.useState([]),f=v=>{v&&v.preventDefault();const x=s.trim();x&&!a.includes(x)&&(i(b=>[...b,x]),o(""))},h=v=>{i(x=>x.filter(b=>b!==v)),c(x=>x.filter(b=>b.name!==v))},p=async()=>{if(a.length===0)return;r(!0),await new Promise(b=>setTimeout(b,1200));const v=t.toLowerCase(),x=a.map(b=>{let w=0;const S=b.toLowerCase();return v.includes("uber")&&(S.includes("transp")||S.includes("viaje"))&&(w=.8),v.includes("foods")&&(S.includes("comid")||S.includes("super"))&&(w=.75),v.includes("netflix")&&(S.includes("suscr")||S.includes("ocio"))&&(w=.9),v.includes("tesla")&&(S.includes("energ")||S.includes("transp")||S.includes("lujo"))&&(w=.7),v.includes("apple")&&(S.includes("tecn")||S.includes("suscr"))&&(w=.6),{name:b,value:Math.min(.99,Math.random()*.2+w)}});c(x.sort((b,w)=>w.value-b.value)),r(!1)},g=l[0];return O.jsx(af,{title:"Ep 4: El Lector (Zero-Shot NLP)",description:"Experimenta con el procesamiento de lenguaje natural. Define tus propias categoras y mira cmo la IA 'lee' y clasifica gastos bancarios sin entrenamiento previo.",codeSnippet:r5e,children:O.jsxs("div",{className:"space-y-8",children:[O.jsxs("div",{className:"bg-slate-950 border border-slate-800 rounded-[2.5rem] p-8 relative overflow-hidden group shadow-2xl",children:[O.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-emerald-500/5 blur-[100px] rounded-full"}),O.jsxs("div",{className:"space-y-6 relative z-10",children:[O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsxs("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] flex items-center gap-2",children:[O.jsx(HY,{size:12,className:"text-emerald-500"}),"Digital Receipt Scanner"]}),O.jsx("div",{className:"flex gap-1.5",children:i4.map((v,x)=>O.jsx("button",{onClick:()=>{e(v),c([])},className:tn("w-2.5 h-2.5 rounded-full transition-all duration-300",t===v?"bg-emerald-500 scale-125":"bg-slate-800 hover:bg-slate-700"),title:v},x))})]}),O.jsxs("div",{className:"relative group",children:[O.jsx("input",{type:"text",value:t,onChange:v=>{e(v.target.value),c([])},className:"w-full bg-transparent border-none text-2xl font-mono font-bold text-white focus:ring-0 p-0 placeholder:text-slate-800",placeholder:"Escribe una descripcin de gasto..."}),O.jsx("div",{className:"absolute -bottom-2 left-0 w-full h-px bg-slate-800 group-focus-within:bg-emerald-500/50 transition-colors"})]}),O.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[a.map(v=>O.jsxs("div",{className:"animate-in zoom-in-95 duration-300 flex items-center gap-2 bg-slate-900 hover:bg-slate-800 border border-slate-700 px-3 py-1.5 rounded-xl text-[10px] font-bold text-slate-300 transition-colors group/tag",children:[v,O.jsx("button",{type:"button",onClick:()=>h(v),className:"text-slate-500 hover:text-rose-500 transition-colors",children:O.jsx(x4,{size:12})})]},v)),O.jsxs("form",{onSubmit:f,className:"flex items-center gap-2 bg-emerald-500/10 border border-emerald-500/20 px-3 py-1.5 rounded-xl focus-within:border-emerald-500/50 transition-all",children:[O.jsx("input",{type:"text",value:s,onChange:v=>o(v.target.value),placeholder:"Nueva etiqueta...",className:"bg-transparent border-none p-0 text-[10px] font-bold text-emerald-500 focus:ring-0 w-24 placeholder:text-emerald-500/40"}),O.jsx("button",{type:"submit",className:"text-emerald-500 hover:scale-125 transition-transform",disabled:!s.trim(),children:O.jsx(IY,{size:14,strokeWidth:3})})]})]})]})]}),O.jsx("button",{onClick:p,disabled:n||!t||a.length===0,className:"w-full group bg-emerald-500 text-slate-950 font-black py-5 rounded-3xl flex items-center justify-center gap-3 hover:bg-emerald-400 active:scale-[0.98] transition-all shadow-xl shadow-emerald-500/10 disabled:opacity-30",children:n?O.jsxs(O.Fragment,{children:[O.jsx(yY,{className:"animate-spin",size:20}),O.jsx("span",{children:"DESCODIFICANDO CONTEXTO..."})]}):O.jsxs(O.Fragment,{children:[O.jsx(Yy,{size:20,className:"group-hover:rotate-12 transition-transform"}),O.jsx("span",{children:"ANALIZAR SEMNTICA"})]})}),l.length>0&&O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[O.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-8 rounded-[2rem]",children:[O.jsxs("h4",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest mb-6 flex items-center gap-2",children:[O.jsx(VX,{size:14,className:"text-blue-500"}),"Semantic Confidence"]}),O.jsx("div",{className:"h-56",children:O.jsx(Vd,{width:"100%",height:"100%",children:O.jsxs(U0e,{data:l,layout:"vertical",margin:{left:-20},children:[O.jsx(Qu,{type:"number",hide:!0,domain:[0,1]}),O.jsx(Ju,{dataKey:"name",type:"category",stroke:"#64748b",fontSize:10,width:100,tickLine:!1,axisLine:!1}),O.jsx(Up,{cursor:{fill:"rgba(255,255,255,0.05)"},contentStyle:{backgroundColor:"#020617",border:"1px solid #1e293b",borderRadius:"12px"}}),O.jsx(nW,{dataKey:"value",radius:[0,8,8,0],barSize:20,children:l.map((v,x)=>O.jsx(Ou,{fill:x===0?"#10b981":"#1e293b"},`cell-${x}`))})]})})})]}),O.jsxs("div",{className:"bg-emerald-500 p-8 rounded-[2rem] flex flex-col justify-center items-center text-slate-950 text-center relative overflow-hidden shadow-2xl shadow-emerald-500/20",children:[O.jsx("div",{className:"absolute -bottom-8 -right-8 opacity-10 rotate-12",children:O.jsx(SY,{size:160})}),O.jsx("div",{className:"w-16 h-16 bg-slate-950/10 rounded-full flex items-center justify-center mb-6",children:O.jsx(qX,{size:32})}),O.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] mb-2 opacity-60",children:"IA Decision"}),O.jsx("h3",{className:"text-5xl font-black tracking-tighter mb-3 leading-none",children:g.name}),O.jsxs("div",{className:"bg-slate-950/10 px-4 py-1.5 rounded-full text-xs font-bold",children:["Confianza: ",(g.value*100).toFixed(1),"%"]})]})]}),O.jsxs("div",{className:"flex items-start gap-4 p-6 bg-slate-900/50 border border-slate-800 rounded-[2rem]",children:[O.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-500/10 flex items-center justify-center shrink-0",children:O.jsx(h4,{size:24,className:"text-blue-500"})}),O.jsxs("div",{className:"space-y-1",children:[O.jsx("h5",{className:"text-xs font-black text-white uppercase tracking-widest",children:"IA Sin Fronteras"}),O.jsxs("p",{className:"text-[11px] text-slate-400 leading-relaxed",children:['Lo que acabas de hacer es "Zero-Shot Learning". Al aadir una nueva etiqueta, no tuviste que entrenar a la IA con ejemplos de esa categora. El modelo simplemente utiliza su ',O.jsx("strong",{children:"comprensin global del lenguaje"})," para encontrar la relacin ms lgica."]})]})]})]})})},s5e=`import * as tf from '@tensorflow/tfjs';

/**
 * Orculo Financiero v5.0 (LSTM)
 * Memoria a largo plazo para detectar ciclos y tendencias.
 */
export const buildOracle = () => {
  const model = tf.sequential();
  
  // Puertas de Olvido y Entrada: Deciden qu recordar del historial
  model.add(tf.layers.lstm({ 
    units: 128, 
    inputShape: [6, 1],
    returnSequences: false 
  }));
  
  model.add(tf.layers.dense({ units: 1 }));
  model.compile({ optimizer: 'adam', loss: 'meanSquaredError' });
  return model;
};`,s0={estable:[4e3,4100,3950,4050,4200,4150],crisis:[5e3,4800,4200,3500,2800,2100],crecimiento:[2e3,2500,3100,3800,4600,5500],ciclico:[3e3,4500,3e3,4500,3e3,4500]},o5e=()=>{const[t,e]=A.useState(s0.crecimiento),[n,r]=A.useState(!1),[a,i]=A.useState([]),[s,o]=A.useState(-1),l=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],c=A.useMemo(()=>{const p=t.map((g,v)=>({month:l[v],balance:g,type:"Historial",upper:g,lower:g}));return a.length>0?[...p,...a.map((g,v)=>({month:l[t.length+v],balance:g.val,type:"Prediccin IA",upper:g.upper,lower:g.lower}))]:p},[t,a]),f=async()=>{r(!0),i([]);for(let w=0;w<6;w++)o(w),await new Promise(S=>setTimeout(S,250));const p=t[t.length-1],g=p-t[0],v=g/t.length,x=g<0,b=Array.from({length:4},(w,S)=>{const k=p+v*(S+1)+(Math.random()-.5)*500,N=x?500:300,I=(S+1)*N;return{val:Math.max(0,Math.round(k)),upper:Math.max(0,Math.round(k+I)),lower:Math.max(0,Math.round(k-I))}});i(b),r(!1),o(-1)},h=p=>{e(s0[p]),i([]),o(-1)};return O.jsx(af,{title:"Ep 5: El Orculo (LSTM Memoria)",description:"El gran final. Las redes LSTM no solo ven nmeros, ven el tiempo. Descubre cmo la IA decide qu datos del pasado 'olvidar' y qu patrones cclicos mantener para predecir tu futuro financiero.",codeSnippet:s5e,children:O.jsxs("div",{className:"space-y-8",children:[O.jsxs("div",{className:"bg-slate-950 p-8 rounded-[3rem] border border-slate-800 shadow-2xl relative overflow-hidden",children:[O.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-500 via-blue-500 to-purple-600"}),O.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-10 gap-6",children:[O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx("div",{className:"w-14 h-14 bg-emerald-500/10 rounded-2xl flex items-center justify-center text-emerald-500 shadow-lg shadow-emerald-500/5",children:O.jsx(FE,{size:28})}),O.jsxs("div",{children:[O.jsx("h3",{className:"font-black text-slate-100 text-xl tracking-tight",children:"Cerebro Predictivo"}),O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("span",{className:"text-[10px] text-slate-500 font-black uppercase tracking-[0.2em]",children:"Sincronizacin LSTM"}),O.jsx("div",{className:"flex gap-1",children:[1,2,3].map(p=>O.jsx("div",{className:"w-1 h-1 rounded-full bg-emerald-500 animate-pulse",style:{animationDelay:`${p*200}ms`}},p))})]})]})]}),O.jsx("div",{className:"flex bg-slate-900/50 p-1.5 rounded-2xl border border-slate-800 backdrop-blur-sm",children:Object.keys(s0).map(p=>O.jsx("button",{onClick:()=>h(p),className:tn("px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all",t===s0[p]?"bg-slate-800 text-emerald-400 shadow-xl border border-slate-700":"text-slate-500 hover:text-slate-300"),children:p},p))})]}),O.jsx("div",{className:"h-80 w-full",children:O.jsx(Vd,{width:"100%",height:"100%",children:O.jsxs(H0e,{data:c,margin:{top:10,right:10,left:-20,bottom:0},children:[O.jsx("defs",{children:O.jsxs("linearGradient",{id:"colorIncert",x1:"0",y1:"0",x2:"0",y2:"1",children:[O.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.15}),O.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),O.jsx(nf,{strokeDasharray:"3 3",stroke:"#1e293b",vertical:!1,opacity:.2}),O.jsx(Qu,{dataKey:"month",stroke:"#475569",fontSize:10,tickLine:!1,axisLine:!1}),O.jsx(Ju,{stroke:"#475569",fontSize:10,tickLine:!1,axisLine:!1}),O.jsx(Up,{contentStyle:{backgroundColor:"#020617",border:"1px solid #1e293b",borderRadius:"16px",fontSize:"12px"}}),O.jsx(Kk,{type:"monotone",dataKey:"upper",stroke:"none",fill:"url(#colorIncert)",baseLine:c.map(p=>p.lower),isAnimationActive:!0}),O.jsx(Kk,{type:"monotone",dataKey:"balance",stroke:"#10b981",strokeWidth:4,fill:"transparent",dot:({cx:p,cy:g,payload:v})=>v.type==="Prediccin IA"?O.jsx("circle",{cx:p,cy:g,r:5,fill:"#10b981",className:"animate-pulse"}):null}),O.jsx(ap,{x:l[5],stroke:"#334155",strokeDasharray:"5 5",label:{position:"top",value:"AHORA",fill:"#475569",fontSize:10,fontWeight:"900",letterSpacing:"0.1em"}})]})})})]}),O.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[O.jsxs("div",{className:"lg:col-span-2 bg-slate-900 border border-slate-800 p-8 rounded-[2.5rem] space-y-8 relative overflow-hidden",children:[O.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[O.jsxs("h4",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] flex items-center gap-2",children:[O.jsx(tZ,{size:14,className:"text-emerald-500"}),"LSTM Memory Buffer"]}),s!==-1&&O.jsxs("div",{className:"flex items-center gap-2 text-emerald-500 animate-pulse",children:[O.jsx(KY,{size:12}),O.jsxs("span",{className:"text-[10px] font-bold",children:["Analizando Mes ",s+1,"..."]})]})]}),O.jsxs("div",{className:"flex justify-between items-end h-28 gap-3 relative z-10",children:[t.map((p,g)=>O.jsxs("div",{className:"flex-1 flex flex-col items-center gap-3",children:[O.jsx("div",{className:tn("w-full rounded-xl transition-all duration-300",g===s?"bg-emerald-500 shadow-[0_0_25px_rgba(16,185,129,0.5)] scale-110":g<s?"bg-emerald-500/20":"bg-slate-800/50"),style:{height:`${p/6e3*100}%`}}),O.jsxs("span",{className:tn("text-[9px] font-black transition-colors",g===s?"text-emerald-500":"text-slate-600"),children:["M",g+1]})]},g)),O.jsx("div",{className:"w-px h-full bg-slate-800/50 mx-2"}),O.jsxs("div",{className:"flex-1 flex flex-col items-center gap-3",children:[O.jsx("div",{className:tn("w-full border-2 border-dashed rounded-xl transition-all duration-500",n?"bg-blue-500/20 border-blue-500 animate-pulse h-1/2":"bg-slate-800/10 border-slate-800 h-1/4")}),O.jsx("span",{className:"text-[9px] font-black text-slate-700",children:"FUTURO"})]})]})]}),O.jsxs("div",{className:"flex flex-col gap-4",children:[O.jsxs("button",{onClick:f,disabled:n,className:"flex-1 group bg-white hover:bg-emerald-50 text-slate-950 rounded-[2.5rem] font-black flex flex-col items-center justify-center gap-2 transition-all active:scale-95 disabled:opacity-50 shadow-2xl shadow-emerald-500/10",children:[O.jsx("div",{className:tn("p-4 bg-slate-950/5 rounded-full mb-1 group-hover:scale-110 transition-transform",n&&"animate-spin"),children:n?O.jsx(TY,{size:28}):O.jsx(Xy,{size:28})}),O.jsx("span",{className:"text-xs uppercase tracking-widest",children:n?"Escaneando...":"Consultar Orculo"})]}),O.jsxs("div",{className:"bg-slate-950 border border-slate-800 p-6 rounded-[2.5rem] flex flex-col justify-center shadow-inner",children:[O.jsx("span",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest mb-2",children:"Dictamen de Tendencia"}),O.jsx("div",{className:"flex items-center gap-3",children:a.length>0?a[3].val>t[5]?O.jsxs("div",{className:"flex items-center gap-2 text-emerald-500 animate-in zoom-in",children:[O.jsx(y4,{size:24}),O.jsx("span",{className:"text-2xl font-black tracking-tighter uppercase",children:"Alcista"})]}):O.jsxs("div",{className:"flex items-center gap-2 text-rose-500 animate-in zoom-in",children:[O.jsx(YY,{size:24}),O.jsx("span",{className:"text-2xl font-black tracking-tighter uppercase",children:"Bajista"})]}):O.jsxs("div",{className:"flex items-center gap-2 text-slate-800",children:[O.jsx(Yy,{size:24}),O.jsx("span",{className:"text-2xl font-black tracking-tighter uppercase",children:"Pendiente"})]})})]})]})]}),O.jsxs("div",{className:"flex items-start gap-4 p-6 bg-blue-500/5 border border-blue-500/10 rounded-[2.5rem]",children:[O.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-500/20 flex items-center justify-center shrink-0",children:O.jsx(pY,{size:24,className:"text-blue-500"})}),O.jsxs("div",{className:"space-y-1",children:[O.jsx("h5",{className:"text-xs font-black text-blue-400 uppercase tracking-widest",children:"Cmo ve el futuro la LSTM?"}),O.jsxs("p",{className:"text-[11px] text-slate-400 leading-relaxed",children:["La banda azul representa la ",O.jsx("strong",{children:"incertidumbre predictiva"}),". Nota cmo se ensancha a medida que nos alejamos del presente. Esto demuestra que la red entiende que, aunque hay un patrn, el futuro lejano es inherentemente ms ruidoso y difcil de predecir."]})]})]})]})})},l5e=`// Ecuacin de Bellman Simplificada
// Q(s,a) = (1-lr) * Q(s,a) + lr * (reward + gamma * max(Q(s', a')))

export const updateStrategy = (reward, riskTolerance) => {
  // Si la ganancia > 0, reforzamos la accin tomada
  // Si el riesgo es alto, penalizamos la volatilidad
  const strategyAdjustment = reward * (1 - riskTolerance);
  return strategyAdjustment;
};`,u5e=()=>{var S;const[t,e]=A.useState([]),[n,r]=A.useState(1e3),[a,i]=A.useState(!1),[s,o]=A.useState({ambition:.5,caution:.5}),[l,c]=A.useState(0),[f,h]=A.useState(0),p=A.useRef(null),g=()=>{e(k=>{const N=k.length>0?k[k.length-1].price:100,I=(Math.random()-.5)*10,T=Math.max(10,N+I),R=k.length;let _="HOLD";const M=Math.random()<.2+s.ambition*.3,P=Math.random()<.2+s.caution*.3;return M&&n>T?(_="BUY",r(z=>z-T),c(z=>z+1)):P&&l>0&&(_="SELL",r(z=>z+T),c(z=>z-1)),[...k,{time:R,price:T,action:_}].slice(-30)}),h(k=>k+1)},v=()=>{a?(p.current&&clearInterval(p.current),i(!1)):(i(!0),p.current=window.setInterval(g,400))},x=()=>{p.current&&clearInterval(p.current),i(!1),e([{time:0,price:100}]),r(1e3),c(0),h(0)},b=n+l*(((S=t[t.length-1])==null?void 0:S.price)||0),w=b-1e3;return O.jsx(af,{title:"Ep 6: El Estratega (Reinforcement Learning)",description:"El nivel ms alto de autonoma. Aqu no hay etiquetas ni tendencias fijas. La IA aprende mediante un bucle de recompensas: si gana dinero, refuerza su estrategia; si pierde, la descarta. Ajusta su 'personalidad' y observa cmo opera.",codeSnippet:l5e,children:O.jsxs("div",{className:"space-y-8",children:[O.jsxs("div",{className:"bg-[#020617] p-8 rounded-[3rem] border border-slate-800 shadow-2xl relative overflow-hidden",children:[O.jsx("div",{className:"absolute top-0 right-0 p-6 opacity-5",children:O.jsx(jE,{size:120})}),O.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-8 gap-4 relative z-10",children:[O.jsxs("div",{children:[O.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[O.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-ping"}),O.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-tighter",children:"Live Trading Floor"})]}),O.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:"Agent ID: FINNEURA-RL-06"})]}),O.jsxs("div",{className:"flex gap-6",children:[O.jsxs("div",{className:"text-right",children:[O.jsx("p",{className:"text-[9px] text-slate-500 font-black uppercase",children:"Capital Total"}),O.jsxs("p",{className:"text-2xl font-black text-white font-mono",children:["$",b.toFixed(2)]})]}),O.jsxs("div",{className:"text-right",children:[O.jsx("p",{className:"text-[9px] text-slate-500 font-black uppercase",children:"Profit/Loss"}),O.jsxs("p",{className:tn("text-2xl font-black font-mono",w>=0?"text-emerald-500":"text-rose-500"),children:[w>=0?"+":"",w.toFixed(2)]})]})]})]}),O.jsx("div",{className:"h-64 w-full",children:O.jsx(Vd,{width:"100%",height:"100%",children:O.jsxs(j0e,{data:t,children:[O.jsx(nf,{strokeDasharray:"3 3",stroke:"#1e293b",vertical:!1,opacity:.2}),O.jsx(Qu,{dataKey:"time",hide:!0}),O.jsx(Ju,{stroke:"#475569",fontSize:10,domain:["auto","auto"]}),O.jsx(Up,{contentStyle:{backgroundColor:"#020617",border:"1px solid #1e293b",borderRadius:"12px",fontSize:"10px"},itemStyle:{color:"#10b981"}}),O.jsx(Kx,{type:"monotone",dataKey:"price",stroke:"#3b82f6",strokeWidth:3,dot:k=>{const{cx:N,cy:I,payload:T}=k;return T.action==="BUY"?O.jsx("circle",{cx:N,cy:I,r:6,fill:"#10b981",stroke:"white",strokeWidth:2}):T.action==="SELL"?O.jsx("circle",{cx:N,cy:I,r:6,fill:"#f43f5e",stroke:"white",strokeWidth:2}):null},isAnimationActive:!1})]})})})]}),O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[O.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-8 rounded-[2.5rem] space-y-8",children:[O.jsxs("h4",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2",children:[O.jsx(nY,{size:14,className:"text-emerald-500"}),"Reward Engine Config"]}),O.jsxs("div",{className:"space-y-6",children:[O.jsxs("div",{className:"space-y-3",children:[O.jsxs("div",{className:"flex justify-between text-[10px] font-black uppercase",children:[O.jsx("span",{className:"text-slate-400",children:"Ambicin (Premio por ganar)"}),O.jsxs("span",{className:"text-emerald-500",children:[(s.ambition*100).toFixed(0),"%"]})]}),O.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:s.ambition,onChange:k=>o({...s,ambition:Number(k.target.value)}),className:"w-full h-1.5 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-emerald-500"})]}),O.jsxs("div",{className:"space-y-3",children:[O.jsxs("div",{className:"flex justify-between text-[10px] font-black uppercase",children:[O.jsx("span",{className:"text-slate-400",children:"Cautela (Castigo por riesgo)"}),O.jsxs("span",{className:"text-rose-500",children:[(s.caution*100).toFixed(0),"%"]})]}),O.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:s.caution,onChange:k=>o({...s,caution:Number(k.target.value)}),className:"w-full h-1.5 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-rose-500"})]})]})]}),O.jsxs("div",{className:"bg-slate-950 border border-slate-800 p-8 rounded-[2.5rem] flex flex-col justify-center",children:[O.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[O.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-500/10 flex items-center justify-center text-blue-500",children:O.jsx(d4,{size:24})}),O.jsxs("div",{children:[O.jsx("h5",{className:"font-black text-white text-sm uppercase",children:"Estado del Agente"}),O.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase",children:["Iteraciones: ",f]})]})]}),O.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[O.jsxs("div",{className:"bg-slate-900 p-4 rounded-2xl border border-slate-800",children:[O.jsx("p",{className:"text-[8px] font-black text-slate-500 uppercase mb-1",children:"Inventario"}),O.jsxs("p",{className:"text-xl font-black text-white",children:[l," UNIDADES"]})]}),O.jsxs("div",{className:"bg-slate-900 p-4 rounded-2xl border border-slate-800",children:[O.jsx("p",{className:"text-[8px] font-black text-slate-500 uppercase mb-1",children:"Personalidad"}),O.jsx("p",{className:"text-xl font-black text-blue-500",children:s.ambition>s.caution?"AGGRESSIVE":"DEFENSIVE"})]})]})]})]}),O.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[O.jsxs("button",{onClick:v,className:tn("flex-1 py-6 rounded-3xl font-black uppercase tracking-widest flex items-center justify-center gap-3 transition-all",a?"bg-rose-500/10 text-rose-500 border border-rose-500/20":"bg-emerald-500 text-slate-950 hover:bg-emerald-400"),children:[a?O.jsx(QX,{size:24}):O.jsx(XX,{size:24}),a?"Detener Operacin":"Iniciar Estratega"]}),O.jsxs("button",{onClick:x,className:"px-10 py-6 bg-slate-900 text-slate-300 border border-slate-800 rounded-3xl font-black uppercase tracking-widest hover:bg-slate-800 transition-all flex items-center gap-2",children:[O.jsx(DY,{size:20}),"Reset"]})]}),O.jsxs("div",{className:"flex items-start gap-4 p-6 bg-emerald-500/5 border border-emerald-500/10 rounded-[2.5rem]",children:[O.jsx("div",{className:"w-12 h-12 rounded-2xl bg-emerald-500/20 flex items-center justify-center shrink-0",children:O.jsx(v4,{size:24,className:"text-emerald-500"})}),O.jsxs("div",{className:"space-y-1",children:[O.jsx("h5",{className:"text-xs font-black text-emerald-500 uppercase tracking-widest",children:"Qu es el Reinforcement Learning?"}),O.jsxs("p",{className:"text-[11px] text-slate-400 leading-relaxed",children:['A diferencia del Perceptrn o la Regresin, aqu no le decimos a la IA qu precio es "bueno". El agente toma acciones al azar al principio (exploracin) y, si su ',O.jsx("strong",{children:"Balance Total"}),' sube, guarda esa decisin como exitosa. Con el tiempo, crea una "Poltica" de actuacin que maximiza sus beneficios en cualquier mercado.']})]})]})]})})},c5e=[{number:1,title:"Perceptrn (El Juez)",description:"Aprende cmo una neurona simple toma decisiones binarias usando fronteras lineales.",icon:jE,color:"text-emerald-500",bgColor:"bg-emerald-500/10",borderColor:"border-emerald-500/20",youtubeUrl:"https://www.youtube.com/watch?v=SEXrAwr-k58"},{number:2,title:"El Adivino (Neural Engine)",description:"Observa el entrenamiento en tiempo real y cmo la red aprende patrones cclicos.",icon:y4,color:"text-blue-500",bgColor:"bg-blue-500/10",borderColor:"border-blue-500/20",youtubeUrl:"https://www.youtube.com/watch?v=SEXrAwr-k58"},{number:3,title:"El Detective (Decision Boundaries)",description:"Descubre fronteras no lineales y mapas de decisin para detectar fraudes.",icon:Xy,color:"text-purple-500",bgColor:"bg-purple-500/10",borderColor:"border-purple-500/20",youtubeUrl:"https://www.youtube.com/watch?v=SEXrAwr-k58"},{number:4,title:"El Lector (Zero-Shot NLP)",description:"Experimenta con procesamiento de lenguaje natural sin entrenamiento previo.",icon:c4,color:"text-amber-500",bgColor:"bg-amber-500/10",borderColor:"border-amber-500/20",youtubeUrl:"https://www.youtube.com/watch?v=SEXrAwr-k58"},{number:5,title:"El Orculo (LSTM Memoria)",description:"Redes con memoria a largo plazo que predicen tendencias financieras futuras.",icon:Yy,color:"text-cyan-500",bgColor:"bg-cyan-500/10",borderColor:"border-cyan-500/20",youtubeUrl:"https://www.youtube.com/watch?v=SEXrAwr-k58"},{number:6,title:"El Estratega (Reinforcement Learning)",description:"La IA aprende por s misma mediante recompensas y castigos en mercados voltiles.",icon:FE,color:"text-rose-500",bgColor:"bg-rose-500/10",borderColor:"border-rose-500/20",youtubeUrl:"https://www.youtube.com/watch?v=SEXrAwr-k58"}],d5e=()=>O.jsxs("div",{className:"space-y-6 md:space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[O.jsxs("div",{className:"bg-gradient-to-br from-slate-900 via-slate-900 to-slate-950 border border-slate-800 rounded-[2.5rem] p-6 md:p-10 relative overflow-hidden shadow-2xl",children:[O.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-emerald-500/5 blur-[120px] rounded-full"}),O.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-blue-500/5 blur-[120px] rounded-full"}),O.jsxs("div",{className:"relative z-10 space-y-6",children:[O.jsxs("div",{className:"flex items-start gap-4",children:[O.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 rounded-2xl bg-gradient-to-br from-emerald-500 to-blue-500 flex items-center justify-center shadow-xl shadow-emerald-500/20 shrink-0",children:O.jsx(aZ,{size:32,className:"text-white md:size-10"})}),O.jsxs("div",{className:"flex-1",children:[O.jsx("h1",{className:"text-2xl md:text-4xl font-black text-white tracking-tight leading-none mb-2",children:"Bienvenido al Laboratorio Visual"}),O.jsx("p",{className:"text-xs md:text-sm text-slate-400 font-medium leading-relaxed",children:"Sebas Tech Lab - Recursos Interactivos del Canal"})]})]}),O.jsxs("div",{className:"bg-slate-950/50 border border-slate-800 rounded-2xl p-5 md:p-6 backdrop-blur-sm",children:[O.jsxs("p",{className:"text-sm md:text-base text-slate-300 leading-relaxed mb-4",children:["Este proyecto es el"," ",O.jsx("strong",{className:"text-white",children:"recurso complementario oficial"})," ","de mi canal de YouTube. Aqu podrs"," ",O.jsx("span",{className:"text-emerald-500 font-bold",children:"interactuar visualmente"})," ","con todos los conceptos que explico en los videos, experimentar con parmetros en tiempo real, y profundizar tu comprensin de Inteligencia Artificial de forma prctica."]}),O.jsx("p",{className:"text-xs md:text-sm text-slate-400 leading-relaxed",children:"Cada episodio corresponde a un video del canal. Usa los controles interactivos para ver cmo funcionan los algoritmos por dentro."})]})]})]}),O.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 md:gap-4",children:[O.jsxs("a",{href:"https://www.youtube.com/watch?v=SEXrAwr-k58",target:"_blank",rel:"noopener noreferrer",className:"bg-rose-500 hover:bg-rose-400 text-white p-5 md:p-6 rounded-2xl md:rounded-3xl shadow-xl shadow-rose-500/20 transition-all hover:scale-105 active:scale-95 group",children:[O.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[O.jsx(zX,{size:20,className:"group-hover:animate-bounce"}),O.jsx("span",{className:"text-xs font-black uppercase tracking-widest",children:"Suscrbete"})]}),O.jsx("p",{className:"text-[10px] opacity-90",children:"Activa la campana para no perderte ningn video"})]}),O.jsxs("a",{href:"https://www.youtube.com/watch?v=SEXrAwr-k58",target:"_blank",rel:"noopener noreferrer",className:"bg-emerald-500 hover:bg-emerald-400 text-slate-950 p-5 md:p-6 rounded-2xl md:rounded-3xl shadow-xl shadow-emerald-500/20 transition-all hover:scale-105 active:scale-95 group",children:[O.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[O.jsx(WY,{size:20,className:"group-hover:animate-bounce"}),O.jsx("span",{className:"text-xs font-black uppercase tracking-widest",children:"Dale Like"})]}),O.jsx("p",{className:"text-[10px] opacity-90",children:"Si te gusta el contenido, apyame con tu like"})]}),O.jsxs("a",{href:"https://www.youtube.com/watch?v=SEXrAwr-k58",target:"_blank",rel:"noopener noreferrer",className:"bg-blue-500 hover:bg-blue-400 text-white p-5 md:p-6 rounded-2xl md:rounded-3xl shadow-xl shadow-blue-500/20 transition-all hover:scale-105 active:scale-95 group",children:[O.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[O.jsx(kY,{size:20,className:"group-hover:animate-bounce"}),O.jsx("span",{className:"text-xs font-black uppercase tracking-widest",children:"Comenta"})]}),O.jsx("p",{className:"text-[10px] opacity-90",children:"Comparte tus dudas y sugerencias en los comentarios"})]})]}),O.jsxs("div",{className:"space-y-4",children:[O.jsxs("div",{className:"flex items-center gap-3 px-1",children:[O.jsx(p4,{size:20,className:"text-emerald-500"}),O.jsx("h2",{className:"text-xl md:text-2xl font-black text-white tracking-tight",children:"Lista de Episodios"})]}),O.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:c5e.map(t=>O.jsxs("a",{href:t.youtubeUrl,target:"_blank",rel:"noopener noreferrer",className:`bg-slate-900 border ${t.borderColor} hover:border-slate-700 p-5 md:p-6 rounded-2xl md:rounded-3xl shadow-lg transition-all hover:scale-[1.02] group cursor-pointer block`,children:[O.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[O.jsx("div",{className:`w-12 h-12 md:w-14 md:h-14 rounded-xl ${t.bgColor} flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform`,children:O.jsx(t.icon,{size:24,className:t.color})}),O.jsxs("div",{className:"flex-1 min-w-0",children:[O.jsx("div",{className:"flex items-center gap-2 mb-1",children:O.jsxs("span",{className:`text-[9px] font-black uppercase tracking-widest ${t.color}`,children:["Episodio ",t.number]})}),O.jsx("h3",{className:"text-sm md:text-base font-black text-white tracking-tight leading-tight",children:t.title})]})]}),O.jsx("p",{className:"text-[11px] md:text-xs text-slate-400 leading-relaxed",children:t.description})]},t.number))})]}),O.jsx("div",{className:"bg-slate-900/50 border border-slate-800 rounded-2xl p-5 md:p-6 text-center",children:O.jsxs("p",{className:"text-xs text-slate-500 leading-relaxed",children:[" ",O.jsx("strong",{className:"text-slate-400",children:"Tip:"})," Navega por el men lateral para acceder a cada episodio interactivo. Cada laboratorio incluye controles que puedes ajustar en tiempo real."]})})]}),f5e=()=>{const[t,e]=A.useState(!1);return O.jsx(IQ,{children:O.jsxs("div",{className:"flex bg-slate-950 text-slate-50 min-h-screen font-sans selection:bg-emerald-500 selection:text-slate-950",children:[O.jsx(EJ,{isOpen:t,onClose:()=>e(!1)}),O.jsxs("div",{className:"lg:hidden fixed top-0 left-0 right-0 h-16 bg-slate-950/70 backdrop-blur-xl border-b border-white/5 z-30 px-6 flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("div",{className:"w-8 h-8 bg-emerald-500 rounded-lg flex items-center justify-center shadow-lg shadow-emerald-500/20",children:O.jsx(xp,{className:"text-slate-950 fill-slate-950",size:18})}),O.jsx("span",{className:"font-black text-white text-sm tracking-tighter uppercase",children:"Sebas Tech Lab"})]}),O.jsx("button",{onClick:()=>e(!0),className:"p-2.5 bg-slate-900 border border-slate-800 rounded-xl text-slate-400 hover:text-emerald-500 transition-colors",children:O.jsx(bY,{size:20})})]}),O.jsx("main",{className:"flex-1 w-full lg:ml-72 p-4 md:p-8 lg:p-10 pt-20 lg:pt-10 min-h-screen overflow-x-hidden transition-all duration-300",children:O.jsx("div",{className:"max-w-7xl mx-auto",children:O.jsxs(rQ,{children:[O.jsx(qs,{path:"/",element:O.jsx(d5e,{})}),O.jsx(qs,{path:"/ep1",element:O.jsx(Y0e,{})}),O.jsx(qs,{path:"/ep2",element:O.jsx(e5e,{})}),O.jsx(qs,{path:"/ep3",element:O.jsx(n5e,{})}),O.jsx(qs,{path:"/ep4",element:O.jsx(i5e,{})}),O.jsx(qs,{path:"/ep5",element:O.jsx(o5e,{})}),O.jsx(qs,{path:"/ep6",element:O.jsx(u5e,{})}),O.jsx(qs,{path:"*",element:O.jsx(tQ,{to:"/",replace:!0})})]})})})]})})},JK=document.getElementById("root");if(!JK)throw new Error("Could not find root element to mount to");const h5e=TX.createRoot(JK);h5e.render(O.jsx(o4.StrictMode,{children:O.jsx(f5e,{})}));
